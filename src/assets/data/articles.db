{"date":"2019-04-03T15:08:56.478Z","title":"9 Quick JavaScript Tips to Improve Your Code Pt1","sourceUrl":"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"," Tips and Tricks"],"author":"","excerpt":"","dateCreated":1554304090890,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Wed Apr 03 2019 20:38:56 GMT+0530 (India Standard Time)'\ntitle: '9 Quick JavaScript Tips to Improve Your Code Pt1'\ntags: ['JavaScript','Tips and Tricks']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/'\ntype: 'Post'\n---\n    ","htmlCode":"<div><p>Table of Contents <span>[<a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/#\">hide</a>]</span></p><ul><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/#no1-use-strict-mode\">No.1: Use strict-mode</a><ul><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/#why-is-strict-mode-on-the-top-of-javascript-tips-list\">Why is strict-mode on the top of JavaScript tips list?</a></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/#two-side-of-implementing-strict-mode\">Two side of implementing strict-mode</a></li></ul></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/#no2-understand-undefined-and-null\">No.2: Understand undefined and null</a></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/#no3-use-shorter-if-statements\">No.3: Use shorter if statements</a><ul><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/#if-statement-and-dealing-with-function-parameters\">If statement and dealing with function parameters</a></li></ul></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/#no4-learn-to-use-arrow-functions\">No.4: Learn to use arrow functions</a><ul><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/#arrow-functions-with-parameters\">Arrow functions with parameters</a></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/#or-arrow-functions-without-parameters\">Or arrow functions without parameters</a></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/#arrow-functions-and-this\">Arrow functions and this</a></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/#best-practices-for-arrow-functions\">Best practices for arrow functions</a></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/#when-to-use-arrow-functions\">When to use arrow functions</a></li></ul></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/#no5-use-right-equal-operators\">No.5: Use right equal operators</a></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/#closing-thoughts-on-javascript-tips\">Closing thoughts on JavaScript tips</a></li></ul></div><p>JavaScript can be sometimes hard to use in the right way. It is \nlanguage with a couple of quirks and pitfalls. In this article, you will\n learn about first five JavaScript tips to improve your code. You will \nexplore topics such as strict-mode and debugging and what’s the \ndifference between <i>undefined</i> and <i>null</i>. Then, you will learn about how to simplify <i>if</i>\n statements. It is still not enough? Well, have you checked out the ES6 \nsyntax? If not, you will have a chance to learn about arrow functions. \nLastly, you will see that not all things are truly equal. Let’s learn \nabout some cool JavaScript tips!<span></span><br>\n</p><p>No.6-9 are in <a href=\"http://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/\">part 2</a>.</p><h2><span>No.1: Use strict-mode</span></h2><p>The first item on the list of JavaScript tips we are going to discuss\n today is about using JavaScript’s strict-mode. Why? The simplest answer\n is that strict-mode JavaScript will make it easier for you to write \nsafer JavaScript. In the default setting, JavaScript will allow you \nwrite “bad syntax“. For example, it will allow you to declare new \nvariables without the keyword <i>var</i>, <i>let</i> or <i>const</i>. When you declare new variable in this way, JavaScript will create it as global variable.</p><p>If you are new to JavaScript, global variable is accessible for any function from anywhere. It is variable declared in <a href=\"http://blog.alexdevero.com/javascript-101-22-scope-context-and-this/\" target=\"_blank\" rel=\"noopener\">global scope</a>.\n Why is it bad to create global variable? The first reason is that they \nclutter up the global namespace. Second reason is that they are slower \nthan local variables. Third reason is that you can accidentally \nre-declare it. In other words, you can accidentally rewrite it (change \nits value). This is just one thing you can do outside the strict-mode.</p><p>Strict-mode JavaScript will also not allow you to assign variable to \nNaN. Outside the strict-mode, when you can try to assign variable to \nNaN, it will do nothing. What’s worse, you will not get any feedback. \nYou may believe that your code will work while, in a reality, it will \nnot. Another thing strict-mode will not allow you is to use duplicate \nproperties in object literal. Every property in object literal has to be\n unique. Otherwise, it will throw an error.</p><p>The same thing is true for functions. In strict-mode, you can’t use \nthe same name for two function parameters. There are many things not \nallowed. However, I don’t want to bother you with all of them. Still, if\n you are curious and want to check them out, <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode\" target=\"_blank\" rel=\"noopener\">MDN</a>&nbsp;is a great place to start.</p><h3><span>Why is strict-mode on the top of JavaScript tips list?</span></h3><p>What was the reason why I chose Strict-mode to be the leader of this \nJavaScript tips list? First, I use this directive in every project. \nTherefore, it is one of the things that come out almost automatically. \nSecond, strict-mode will help you do a better work. In web development, \nbetter work means writing flawless and cleaner code. When you work in \nstrict-mode, you can automatically check your code and work for \nmistakes.</p><p>In strict-mode, every bug or example of bad syntax will be turned \ninto JavaScript error. You can then examine all the errors in console \nand trace them back to their roots. This will make debugging your code \nmuch easier and faster.</p><h3><span>Two side of implementing strict-mode</span></h3><p>There is one thing I want to warn you about. Strict-mode is great for\n new projects. If you just started working on something, implementing \nstrict-mode takes less than five seconds. You just have to write the \ndirective. Some problems may arise when you decide to implement \nstrict-mode into older projects. Based on my experience, this can be \nsometimes quite challenging. This will depend on the size of the project\n and experience of the people working on it. In the worst-case scenario,\n you may end up with console full of errors and code that doesn’t work.</p><p>If this happens, I would suggest following similar approach we discussed in article dedicated to <a href=\"http://blog.alexdevero.com/refactoring-css-without-losing-client/\" target=\"_blank\" rel=\"noopener\">CSS refactoring</a>.\n This means a couple of things. First, you have to prepare yourself \nmentally. Second, you should back up all data. Third, divide the code \ninto smaller and more manageable chunks. Finally, have a lot of \npatience.</p><p>Another problem can be if you workflow includes concatenating \nmultiple JavaScript files into one big file. First, it may cause all \nfiles to execute in strict mode. If some of your JavaScript files are \nnot in “proper” shape, strict-mode may break something. The same is true\n if you are using other JavaScript libraries or plugins. Sure, the \nmajority of libraries and plugins are using clean syntax. Many libraries\n and plugins also sometimes work in strict-mode. However, you can still \nfind plugins that can have some issues with it.</p><p>For this reason, I would suggest testing your JavaScript separately \nfirst. When you know that everything works great, you can implement \nexternal plugins. I would also suggest implementing only one plugin at \nthe time. If you use a lot of them, and implement them all at once, you \nmay end up in chaos. Then, finding the malfunctioning plugin can be \nquite hard.</p><h2><span>No.2: Understand undefined and null</span></h2><p>Strict-mode is behind us, so we can take a look at the second item on\n the JavaScript tips list. In JavaScript, there are two terms some \ndevelopers think about in the wrong way. These terms are <i>undefined</i> and <i>null</i>. Let’s take a look at the difference between these two. In JavaScript, when something is <i>undefined</i>\n it can mean one of two things. First, the variable you are referring to\n has not been declared yet. Second, the variable has been declared, but \nat this moment it has no value.</p><p>When something is <i>null</i>, it is an assignment value that \nliterally means “no value”. You can use it to declare variable that has \nno value, yet. In terms of natural behavior, JavaScript sets unassigned \nvariables with a default value of <i>undefined</i>. Unless you force it to do it, JavaScript will not set value to <i>null</i>\n by itself. So, if you find this value somewhere in the code, you know \nthat it was done by human, not computer. Possible way to use at least \none of the JavaScript tips as a human detector.</p><p>Another difference between <i>undefined</i> and <i>null</i> is that the first is a type (undefined) while the second is a special object. Also, you can’t use <i>undefined</i> in JSON. Well, you can, but then it will not be valid code. This is not true for <i>null</i>. You can use <i>null</i> in JSON. On the top of the differences, there are also at least two things <i>undefined</i> and <i>null</i>\n have in common. First, both are primitives. In JavaScript, you have \nfive primitives – undefined, null, boolean, string and number. \nEverything else is an object. Second, both are falsy.</p><h2><span>No.3: Use shorter if statements</span></h2><p>This third item on our list of JavaScript tips is about making your \ncode shorter and more efficient. From time to time, you will work with \ngood old <i>if</i> statements. In many situations, you will need to come up with more difficult structure of <i>if </i>statements\n to cover all possibilities. For example, let’s say you want to create \nlogic for four, five or more different cases each containing additional \nactions. Then … You can move to the next item on our JavaScript tips \nlist.</p><p>On the other hand, what if you have short and relatively simple <i>if</i> statement? Then, you can simplify this statement by using <a href=\"https://msdn.microsoft.com/en-us/library/be21c7hw(VS.94).aspx\" target=\"_blank\" rel=\"noopener\">ternary operator</a>. By doing this, you can reduce multi-line <i>if </i>statement\n to one line of code. Let’s illustrate this on very simple example. You \nhave two players playing a game. At the end of the game, you want to \ndecide who is the winner by counting their points. Who will score more \npoints is the winner.</p><p>The settings for this example will be three variables – playerAScore,\n playerBScore and result. We will use the first two variables to save \nthe score during the game. At the end of the game, we will change the \nvalue of result variable to one of two strings. Which string will we use\n will be determined by comparing scores of our players.</p><p>Example:</p><pre><code>// Before\nlet playerAScore = 30, \n    playerBScore = 15, \n    result;\n\nif (playerAScore &gt; playerBScore) {\n  result = “Player A is the winner.”;\n} else {\n  result = “Player B is the winner.”;\n}\n\nconsole.log(result); // “Player A is the winner.”</code></pre><p>As you can see, this snippet of code is quite lengthy. There are five lines with <i>if</i> statement that are not necessary. We can remove these lines if we replace the <i>if</i>\n statement with simple ternary operator. What’s more, we can use this \noperator at the moment we are declaring the “result” variable. This will\n save as one more line.</p><p>Example:</p><pre><code>// After\nlet playerAScore = 30,\n    playerBScore = 15,\n    result = (playerAScore &gt; playerBScore) ? “Player A is the winner.” : “Player B is the winner.”;\n\nconsole.log(result); // “Player A is the winner.”</code></pre><h3><span>If statement and dealing with function parameters</span></h3><p>We can use the same approach to remove potential need for <i>if</i> \nstatements inside functions. Let’s say that you have a function that \ntakes at least one parameter. This parameter is not completely \nnecessary. If you ignore or forget it, there is <i>if</i> statement to use some predefined value instead.</p><p>Example:</p><pre><code>// Before\nfunction multiply(numberA, numberB) {\n  if (typeof numberB === ‘undefined’) {\n    numberB = 150;\n  }\n\n  return numberA * numberB;\n}\n\nmultiply(15); // 2250</code></pre><p>Example:</p><pre><code>// After\nfunction multiply(numberA, numberB) {\n  numberB = typeof numberB === ‘undefined’ ? 150 : numberB;\n\n  return numberA * numberB;\n}\n\nconsole.log(multiply(15)); // 2250\n\n// After further optimization\nfunction multiply(numberA, numberB) {\n  return typeof numberB === ‘undefined’ ? numberA * 150 : numberA * numberB;\n}\n\nconsole.log(multiply(15)); // 2250</code></pre><p>Quick note about the example with function we used previously. In \nES6, you can use default parameters. So, if you are using ES6 syntax, \nyou don’t have to use <i>if</i> statement or ternary operator at all. This will allow you to write even less code.</p><p>Example:</p><pre><code>// Default parameter in ES6\nfunction multiply(numberA, numberB = 150) {\n  return numberA * numberB;\n}\n\nmultiply(15); // 2250</code></pre><h2><span>No.4: Learn to use arrow functions</span></h2><p>Let’s stay with ES6 for a moment and talk about the next item on \nJavaScript tips list. With ES6 syntax, we have a new handy tool to write\n fewer lines of code. This tool is called arrow function. What exactly \nare arrow functions? These functions, sometimes also called “fat arrow \nfunctions”, are a shorter syntax for writing JavaScript functions. These\n functions use “fat arrow” token – =&gt;. If you are familiar with \nCoffeeScript, you will probably recognize this. What makes arrow \nfunctions different from the “old” functions?</p><p>First, arrow functions are anonymous. Second, they change function scoping and the way we work with <i>this</i> keyword in functions. Unlike normal functions, arrow functions capture the keyword <i>this</i> from the surrounding context. These are the main benefits of arrow functions, along with making your code more concise.</p><h3><span>Arrow functions with parameters</span></h3><p>When you use arrow function, you don’t have to write the <i>function </i>keyword. You also don’t have to use the <i>return</i>\n keyword. This keyword is implemented in the arrow function. Lastly, you\n don’t have to use curly brackets. One exception is if you will want to \nuse more than one statement. Let’s also add example for functions with \none parameter and multiple statements.</p><p>ES5 example:</p><pre><code>// Function with two parameters\nvar multiply = function(numberA, numberB = 150) {\n  return numberA * numberB;\n};\n\nmultiply(15,10);// 150\n\n// Function with one parameter\nvar calcPower = function(number) {\n  return number * number;\n};\n\ncalcPower(3456); // 11943936\n\n// Function with multiple parameters and statements\n// let’s use one of the JavaScript tips to make if statement shorter\nvar calculate = function (x, y, z) {\n  var w = x &gt; y ? x - y : y - x;\n\n  return ((x * y) + z) / w;\n}\n\ncalculate(5, 15, 23); // 9.8</code></pre><p>ES6 example:</p><pre><code>// Arrow function with two parameters\nlet multiply = (numberA, numberB = 150) =&gt; numberA * numberB;\n\nmultiply(15,10);// 150\n\n// Arrow function with one parameter\nlet calcPower = number =&gt; number * number;\n\ncalcPower(3456); // 11943936\n\n// Function with multiple parameters and statements\n// again, let’s use one of the JavaScript tips to make if statement shorter\nlet calculate = (x, y, z) =&gt; {\n  let w = x &gt; y ? x - y : y - x;\n\n  return ((x * y) + z) / w;\n}\n\ncalculate(5, 15, 23); // 9.8</code></pre><h3><span>Or arrow functions without parameters</span></h3><p>As you can see, arrow functions are quite powerful and also easy to \nuse. If you want to create arrow function that takes no parameters, just\n use blank parenthesis.</p><p>ES5 Example:</p><pre><code>// Function without any parameters\nvar greeting = function() {\n  console.log(“Good morning!”);\n}\n\ngreeting(); // “Good morning!”</code></pre><p>ES6 Example:</p><pre><code>let greeting = () =&gt; console.log(“Good morning!”);</code></pre><h3><span>Arrow functions and <i>this</i></span></h3><p>In the beginning, I mentioned that arrow functions work with <i>this</i> in a different way than good old functions. How to put this simply? Well, arrow functions don’t have their own <i>this</i> value. If this is true, then, how <i>this</i> works in arrow functions? The value of <i>this</i>\n is always inherited from its environment, or its enclosing scope. In \nother words, if you declare arrow function inside the normal function, \nit will inherit its value for <i>this</i> from that normal function. \nLet’s give you one incredibly simple example to illustrate this. In this\n example we have one button in HTML.</p><p>Example:</p><pre><code>let button = document.querySelector('.button');\n\nbutton.addEventListener('click', function() {\n  console.log(this);// [object HTMLButtonElement]\n});\n\nbutton.addEventListener('click', () =&gt; {\n  console.log(this);// undefined\n});</code></pre><h3><span>Best practices for arrow functions</span></h3><p>Let’s now briefly describe some of the rules of arrow functions to \nmake this list of JavaScript tips more holistic. First, arrow functions \nwith one parameter don’t need to have parenthesis “()” around the \nparameter. Second, if arrow function has multiple or no parameters, wrap\n the parameters in parentheses “()”. Third, if arrow function has one \nstatement in its body, feel free to ignore the braces “{}” around the \nstatement. If arrow function has more than one statements in its body, \nwrap the block in curly braces “{}”.</p><p>By the same token, make sure to use the return statement. Otherwise, \nfunction will not return any value. Lastly, if arrow function contains \nonly a single object literal in its body, wrap the object in parentheses\n “()” (result – “({ … : … })”).</p><h3><span>When to use arrow functions</span></h3><p>The last question we have to ask is, when should we use arrow \nfunctions and when not? You should not use arrow functions in the global\n scope. Remember that arrow don’t have their own value for <i>this</i>. \nAnother situation when arrow functions are not one of the usable \nJavaScript tips is when you want to work with Object.prototype \nproperties. Another time when not to use arrow functions is object \nconstructors. In this case, classes are better choice. In any other \nsituation, you can use arrow functions.</p><h2><span>No.5: Use right equal operators</span></h2><p>The last tip of the JavaScript tips we will discuss in this first is \nabout using the right equal operators. There are two equal operators we \ncan use. The first one is “==”, or its opposite “!=”. This is also \ncalled loose equality comparison. The second one is “===” and its \nopposite “!==”. This is known as strict equality comparison. What’s \ndifference between these two operators? When you use the first operator \n(“==” or “!=”), it will do automatic type conversion if it is needed. \nFor example, it will convert string to number or number to string.</p><p>On the other hand, if you use the second operator (“===” or “!==”), \nno conversion will be done. This operator will compare both, the value \nand also the type. For this reason, we can also say that the second \noperator (strict equal, “===” or ”!==”) could be considered faster.</p><p>Example:</p><pre><code>‘’ == false // true\n‘’ === false // false\n\n'136' == 136 // true\n'136' === 136 // false\n\n[55] == 55 // true\n[55] === 55 // false\n\n‘’ == 0 // true\n‘’ === 0 // false\n\n[] == 0 // true\n[] === 0 // false\n\n‘’ == [] // true\n‘’ === [] // false</code></pre><h2><span>Closing thoughts on JavaScript tips</span></h2><p>This is all I have for you in this first part of JavaScript tips mini\n series. Let’s quickly recap the five JavaScript tips we discussed \ntoday. First, start using use strick-mode. It will help you debug your \ncode and avoid writing bad syntax. Second, there is a difference between\n <i>undefined</i> and <i>null</i>. When variable is <i>undefined,</i> it has not been declared yet or it has no value. On the other hand, when something is <i>null</i>, it is a human-made assignment valuethat means “no value”.</p><p>Third, you can simplify less complex <i>if</i> statements by using ternary operator. This way, you can squeeze <i>if</i>\n statement on multiple lines into single line. Fourth, give ES6 a shot \nand start using at least arrow functions. This useful tool will help you\n write shorter code by omitting <i>function</i> and <i>return</i> keywords. Arrow functions also work differently with <i>this</i> keyword. Remember that arrow functions don’t have their own value for <i>this</i>. Make sure to use them in the right scope. Lastly, when you need to perform comparison, make sure to use the right operator.</p><p>Remember that loose equal operator (“==”) will perform type \nconversion if it is needed. Strict equals operator will do not \nconversion at all. It will compare the value as well as the type. Strict\n equals operator can be also considered faster than loose equals \noperator. The remaining JavaScript tips will arrive on Friday. I hope I \nwill see you here again.</p><p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n</p><p>Do you have any questions, recommendations, thoughts, advice or tip \nyou would like to share with other readers of this blog, and me? Please \nshare it in a comment. You can also send me a <a href=\"https://alexdevero.com/contact.html\" rel=\"noopener\">mail</a>. I would love to hear from you.</p>","filePath":"pages/JavaScript/.md","_id":"1EAC2u6WluYyJBo3"}
{"title":"19+ JavaScript Shorthand Coding Techniques","sourceUrl":"https://www.sitepoint.com/shorthand-javascript-techniques/","path":"JavaScript/JavaScript/JavaScript/JavaScript/JavaScript/JavaScript/JavaScript/","category":"JavaScript","tags":["JavaScript"," Tips & Tricks"],"excerpt":"This really is a must read for any JavaScript-based developer. I have written this article as a vital source of reference for learning shorthand JavaScript coding techniques that I have picked up over the years. To help you understand what is going on I have included the longhand versions to give some coding perspective.","date":{"$$date":1540828894828},"coverImage":"","type":"Post","frontmatter":"---\npath: \"JavaScript/\"\ndate: \"2018-10-12\"\ntitle: \"19+ JavaScript Shorthand Coding Techniques\"\ntags: [\"JavaScript\",\"Tips & Tricks\"]\ncategory: \"JavaScript\"\ncategoryColor: \"#F3C610\"\nexcerpt: \"This really is a must read for any JavaScript-based developer. I have written this article as a vital source of reference for learning shorthand JavaScript coding techniques that I have picked up over the years. To help you understand what is going on I have included the longhand versions to give some coding perspective.\"\ncoverImage: \"\"\nsourceUrl: \"https://www.sitepoint.com/shorthand-javascript-techniques/\"\ntype: \"Post\"\n---\n    ","filePath":"pages/JavaScript/.md","_id":"2DKvxBjoYH9lL4Vq","htmlCode":"<div><div><div>\n      <p><img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/jquery4u/2013/02/improve-your-javascript.jpg\" alt=\"improve-your-javascript\" width=\"820\" height=\"150\"></p>\n<p><strong>This really is a must read for any JavaScript-based developer</strong>. I have written this article as a vital source of reference for learning shorthand JavaScript coding techniques that I have picked up over the years. To help you understand what is going on I have included the longhand versions to give some coding perspective.</p>\n<blockquote>\n<p><strong>June 14th, 2017</strong>: This article was updated to add new shorthand tips based on ES6. If you want to learn more about the changes in ES6, sign up for SitePoint Premium and check out our screencast <a href=\"https://www.sitepoint.com/premium/screencasts/a-look-into-es2016\">A Look into ES6</a></p>\n</blockquote>\n<h2>1. The Ternary Operator</h2>\n<div><div><span>--ADVERTISEMENT--</span></div>\n\n\n<script src=\"https://play.aniview.com/5858ed930b8ee8851941a7bb/59627b0528a0616e231692a2/SitepointPMP.js\"></script><script>\nvar el = document.getElementById('aniBox');\nvar adBox = document.getElementById('adBox');\n// create an observer instance\nvar observer = new MutationObserver(function(mutations) {\n  mutations.forEach(function(mutation) {\n    if(mutation.attributeName == 'style'){\n      var s = el.getAttribute('style');\n      if(s.search('height: 360px') !=  -1) {\n        adBox.style = 'display: block';\n      }\n      else {\n        adBox.style = 'display: none';\n      }\n}\n  });    \n});\n\n// configuration of the observer:\nvar config = { attributes: true, attributeFilter: ['style']};\n \n// pass in the target node, as well as the observer options\nobserver.observe(el, config);\n</script></div><p>This is a great code saver when you want to write an if..else statement in just one line.</p>\n<p>Longhand:</p>\n<pre><code><span>const</span> x <span>=</span> <span>20</span><span>;</span>\n<span>let</span> answer<span>;</span>\n<span>if</span> <span>(</span>x <span>&gt;</span> <span>10</span><span>)</span> <span>{</span>\n    answer <span>=</span> <span>'greater than 10'</span><span>;</span>\n<span>}</span> <span>else</span> <span>{</span>\n    answer <span>=</span> <span>'less than 10'</span><span>;</span>\n<span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>const</span> answer <span>=</span> x <span>&gt;</span> <span>10</span> <span>?</span> <span>'greater than 10'</span> <span>:</span> <span>'less than 10'</span><span>;</span>\n</code></pre>\n<p>You can also nest your if statement like this:</p>\n<pre><code><span>const</span> answer <span>=</span> x <span>&gt;</span> <span>10</span> <span>?</span> <span>\" greater than 10\"</span> <span>:</span> x </code></pre>\n<h2>2. Short-circuit Evaluation Shorthand</h2>\n<p>When assigning a variable value to another variable, you may want to ensure that the source variable is not null, undefined or empty. You can either write a long if statement with multiple conditionals, or use a short-circuit evaluation.</p>\n<p>Longhand:</p>\n<pre><code><span>if</span> <span>(</span>variable1 <span>!==</span> <span>null</span> <span>||</span> variable1 <span>!==</span> undefined <span>||</span> variable1 <span>!==</span> <span>''</span><span>)</span> <span>{</span>\n     <span>let</span> variable2 <span>=</span> variable1<span>;</span>\n<span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>const</span> variable2 <span>=</span> variable1  <span>||</span> <span>'new'</span><span>;</span>\n</code></pre>\n<p>Don’t believe me? Test it yourself (paste the following code in <a href=\"https://es6console.com/\">es6console</a>):</p>\n<pre><code><span>let</span> variable1<span>;</span>\n<span>let</span> variable2 <span>=</span> variable1  <span>||</span> <span>''</span><span>;</span>\nconsole<span>.</span><span>log</span><span>(</span>variable2 <span>===</span> <span>''</span><span>)</span><span>;</span> <span spellcheck=\"true\">// prints true</span>\n\nvariable1 <span>=</span> <span>'foo'</span><span>;</span>\nvariable2 <span>=</span> variable1  <span>||</span> <span>''</span><span>;</span>\nconsole<span>.</span><span>log</span><span>(</span>variable2<span>)</span><span>;</span> <span spellcheck=\"true\">// prints foo</span>\n</code></pre>\n<h2>3. Declaring Variables Shorthand</h2>\n<p>It is good practice to declare your variable assignments at the beginning of your functions. This shorthand method can save you lots of time and space when declaring multiple variables at the same time.</p>\n<p>Longhand:</p>\n<pre><code><span>let</span> x<span>;</span>\n<span>let</span> y<span>;</span>\n<span>let</span> z <span>=</span> <span>3</span><span>;</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>let</span> x<span>,</span> y<span>,</span> z<span>=</span><span>3</span><span>;</span>\n</code></pre>\n<h2>4. If Presence Shorthand</h2>\n<p>This might be trivial, but worth a mention. When doing “if checks”, assignment operators can sometimes be omitted.</p>\n<p>Longhand:</p>\n<pre><code><span>if</span> <span>(</span>likeJavaScript <span>===</span> <span>true</span><span>)</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>if</span> <span>(</span>likeJavaScript<span>)</span>\n</code></pre>\n<blockquote>\n<p><strong>Note:</strong> these two examples are not exactly equal, as the shorthand check will pass as long as <code>likeJavaScript</code> is a <a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Truthy\">truthy value</a>.</p>\n</blockquote>\n<p>Here is another example. If “a” is NOT equal to true, then do something.</p>\n<p>Longhand:</p>\n<pre><code><span>let</span> a<span>;</span>\n<span>if</span> <span>(</span> a <span>!==</span> <span>true</span> <span>)</span> <span>{</span>\n<span spellcheck=\"true\">// do something...</span>\n<span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>let</span> a<span>;</span>\n<span>if</span> <span>(</span> <span>!</span>a <span>)</span> <span>{</span>\n<span spellcheck=\"true\">// do something...</span>\n<span>}</span>\n</code></pre>\n<h2>5. JavaScript for Loop Shorthand</h2>\n<p>This little tip is really useful if you want plain JavaScript and not rely on external libraries such as jQuery or lodash.</p>\n<p>Longhand:</p>\n<pre><code><span>for</span> <span>(</span><span>let</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> allImgs<span>.</span>length<span>;</span> i<span>++</span><span>)</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>for</span> <span>(</span><span>let</span> index <span>of</span> allImgs<span>)</span>\n</code></pre>\n<p>Shorthand for Array.forEach:</p>\n<pre><code><span>function</span> <span>logArrayElements</span><span>(</span>element<span>,</span> index<span>,</span> array<span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>\"a[\"</span> <span>+</span> index <span>+</span> <span>\"] = \"</span> <span>+</span> element<span>)</span><span>;</span>\n<span>}</span>\n<span>[</span><span>2</span><span>,</span> <span>5</span><span>,</span> <span>9</span><span>]</span><span>.</span><span>forEach</span><span>(</span>logArrayElements<span>)</span><span>;</span>\n<span spellcheck=\"true\">// logs:</span>\n<span spellcheck=\"true\">// a[0] = 2</span>\n<span spellcheck=\"true\">// a[1] = 5</span>\n<span spellcheck=\"true\">// a[2] = 9</span>\n</code></pre>\n<h2>6. Short-circuit Evaluation</h2>\n<p>Instead of writing six lines of code to assign a default value if the intended parameter is null or undefined, we can simply use a short-circuit logical operator and accomplish the same thing with just one line of code.</p>\n<p>Longhand:</p>\n<pre><code><span>let</span> dbHost<span>;</span>\n<span>if</span> <span>(</span>process<span>.</span>env<span>.</span>DB_HOST<span>)</span> <span>{</span>\n  dbHost <span>=</span> process<span>.</span>env<span>.</span>DB_HOST<span>;</span>\n<span>}</span> <span>else</span> <span>{</span>\n  dbHost <span>=</span> <span>'localhost'</span><span>;</span>\n<span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>const</span> dbHost <span>=</span> process<span>.</span>env<span>.</span>DB_HOST <span>||</span> <span>'localhost'</span><span>;</span>\n</code></pre>\n<h2>7. Decimal base exponents</h2>\n<p>You may have seen this one around. It’s essentially a fancy way to write numbers without the trailing zeros. For example, 1e7 essentially means 1 followed by 7 zeros. It represents a decimal base (which JavaScript interprets as a float type) equal to 10,000,000.</p>\n<p>Longhand:</p>\n<pre><code><span>for</span> <span>(</span><span>let</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> <span>10000</span><span>;</span> i<span>++</span><span>)</span> <span>{</span><span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>for</span> <span>(</span><span>let</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> <span>1e7</span><span>;</span> i<span>++</span><span>)</span> <span>{</span><span>}</span>\n\n<span spellcheck=\"true\">// All the below will evaluate to true</span>\n<span>1e0</span> <span>===</span> <span>1</span><span>;</span>\n<span>1e1</span> <span>===</span> <span>10</span><span>;</span>\n<span>1e2</span> <span>===</span> <span>100</span><span>;</span>\n<span>1e3</span> <span>===</span> <span>1000</span><span>;</span>\n<span>1e4</span> <span>===</span> <span>10000</span><span>;</span>\n<span>1e5</span> <span>===</span> <span>100000</span><span>;</span>\n</code></pre>\n<h2>8. Object Property Shorthand</h2>\n<p>Defining object literals in JavaScript makes life much easier. ES6 provides an even easier way of assigning properties to objects. If the property name is the same as the key name, you can take advantage of the shorthand notation.</p>\n<p>Longhand:</p>\n<pre><code><span>const</span> obj <span>=</span> <span>{</span> x<span>:</span>x<span>,</span> y<span>:</span>y <span>}</span><span>;</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>const</span> obj <span>=</span> <span>{</span> x<span>,</span> y <span>}</span><span>;</span>\n</code></pre>\n<h2>9. Arrow Functions Shorthand</h2>\n<p>Classical functions are easy to read and write in their plain form, but they do tend to become a bit verbose and confusing once you start nesting them in other function calls.</p>\n<p>Longhand:</p>\n<pre><code><span>function</span> <span>sayHello</span><span>(</span>name<span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'Hello'</span><span>,</span> name<span>)</span><span>;</span>\n<span>}</span>\n\n<span>setTimeout</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'Loaded'</span><span>)</span>\n<span>}</span><span>,</span> <span>2000</span><span>)</span><span>;</span>\n\nlist<span>.</span><span>forEach</span><span>(</span><span>function</span><span>(</span>item<span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span>item<span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code>sayHello <span>=</span> name <span>=</span><span>&gt;</span> console<span>.</span><span>log</span><span>(</span><span>'Hello'</span><span>,</span> name<span>)</span><span>;</span>\n\n<span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=</span><span>&gt;</span> console<span>.</span><span>log</span><span>(</span><span>'Loaded'</span><span>)</span><span>,</span> <span>2000</span><span>)</span><span>;</span>\n\nlist<span>.</span><span>forEach</span><span>(</span>item <span>=</span><span>&gt;</span> console<span>.</span><span>log</span><span>(</span>item<span>)</span><span>)</span><span>;</span>\n</code></pre>\n<p>It’s important to note that the value of <code><span>this</span></code> inside an arrow function is determined differently than for longhand functions, so the two examples are not strictly equivalent. See <a href=\"https://www.sitepoint.com/es6-arrow-functions-new-fat-concise-syntax-javascript/\">this article on arrow function syntax</a> for more details.</p>\n<h2>10. Implicit Return Shorthand</h2>\n<p>Return is a keyword we use often to return the final result of a function. An arrow functions with a single statement will implicitly return the result its evaluation (the function must omit the braces (<code><span>{</span><span>}</span></code>) in order to omit the return keyword). </p>\n<p>To return a multi-line statement (such as an object literal), it’s necessary to use <code><span>(</span><span>)</span></code> instead of <code><span>{</span><span>}</span></code> to wrap your function body. This ensures the code is evaluated as a single statement.</p>\n<p>Longhand:</p>\n<pre><code><span>function</span> <span>calcCircumference</span><span>(</span>diameter<span>)</span> <span>{</span>\n  <span>return</span> Math<span>.</span>PI <span>*</span> diameter\n<span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code>calcCircumference <span>=</span> diameter <span>=</span><span>&gt;</span> <span>(</span>\n  Math<span>.</span>PI <span>*</span> diameter<span>;</span>\n<span>)</span>\n</code></pre>\n<h2>11. Default Parameter Values</h2>\n<p>You can use the if statement to define default values for function parameters. In ES6, you can define the default values in the function declaration itself.</p>\n<p>Longhand:</p>\n<pre><code><span>function</span> <span>volume</span><span>(</span>l<span>,</span> w<span>,</span> h<span>)</span> <span>{</span>\n  <span>if</span> <span>(</span>w <span>===</span> undefined<span>)</span>\n    w <span>=</span> <span>3</span><span>;</span>\n  <span>if</span> <span>(</span>h <span>===</span> undefined<span>)</span>\n    h <span>=</span> <span>4</span><span>;</span>\n  <span>return</span> l <span>*</span> w <span>*</span> h<span>;</span>\n<span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code>volume <span>=</span> <span>(</span>l<span>,</span> w <span>=</span> <span>3</span><span>,</span> h <span>=</span> <span>4</span> <span>)</span> <span>=</span><span>&gt;</span> <span>(</span>l <span>*</span> w <span>*</span> h<span>)</span><span>;</span>\n\n<span>volume</span><span>(</span><span>2</span><span>)</span> <span spellcheck=\"true\">//output: 24</span>\n</code></pre>\n<h2>12. Template Literals</h2>\n<p>Aren’t you tired of using <code><span>' + '</span></code> to concatenate multiple variables into a string? Isn’t there a much easier way of doing this? If you are able to use ES6, then you are in luck. All you need to do is use is the backtick, and <code>$<span>{</span><span>}</span></code> to enclose your variables.</p>\n<p>Longhand:</p>\n<pre><code><span>const</span> welcome <span>=</span> <span>'You have logged in as '</span> <span>+</span> first <span>+</span> <span>' '</span> <span>+</span> last <span>+</span> <span>'.'</span>\n\n<span>const</span> db <span>=</span> <span>'http://'</span> <span>+</span> host <span>+</span> <span>':'</span> <span>+</span> port <span>+</span> <span>'/'</span> <span>+</span> database<span>;</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>const</span> welcome <span>=</span> <span><span>`You have logged in as </span><span><span>${</span>first<span>}</span></span><span> </span><span><span>${</span>last<span>}</span></span><span>`</span></span><span>;</span>\n\n<span>const</span> db <span>=</span> <span><span>`http://</span><span><span>${</span>host<span>}</span></span><span>:</span><span><span>${</span>port<span>}</span></span><span>/</span><span><span>${</span>database<span>}</span></span><span>`</span></span><span>;</span>\n</code></pre>\n<h2>13. Destructuring Assignment Shorthand</h2>\n<p>If you are working with any popular web framework, there are high chances you will be using arrays or data in the form of object literals to pass information between components and APIs. Once the data object reaches a component, you’ll need to unpack it.</p>\n<p>Longhand:</p>\n<pre><code><span>const</span> observable <span>=</span> <span>require</span><span>(</span><span>'mobx/observable'</span><span>)</span><span>;</span>\n<span>const</span> action <span>=</span> <span>require</span><span>(</span><span>'mobx/action'</span><span>)</span><span>;</span>\n<span>const</span> runInAction <span>=</span> <span>require</span><span>(</span><span>'mobx/runInAction'</span><span>)</span><span>;</span>\n\n<span>const</span> store <span>=</span> <span>this</span><span>.</span>props<span>.</span>store<span>;</span>\n<span>const</span> form <span>=</span> <span>this</span><span>.</span>props<span>.</span>form<span>;</span>\n<span>const</span> loading <span>=</span> <span>this</span><span>.</span>props<span>.</span>loading<span>;</span>\n<span>const</span> errors <span>=</span> <span>this</span><span>.</span>props<span>.</span>errors<span>;</span>\n<span>const</span> entity <span>=</span> <span>this</span><span>.</span>props<span>.</span>entity<span>;</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>import</span> <span>{</span> observable<span>,</span> action<span>,</span> runInAction <span>}</span> <span>from</span> <span>'mobx'</span><span>;</span>\n\n<span>const</span> <span>{</span> store<span>,</span> form<span>,</span> loading<span>,</span> errors<span>,</span> entity <span>}</span> <span>=</span> <span>this</span><span>.</span>props<span>;</span>\n</code></pre>\n<p>You can even assign your own variable names:</p>\n<pre><code><span>const</span> <span>{</span> store<span>,</span> form<span>,</span> loading<span>,</span> errors<span>,</span> entity<span>:</span>contact <span>}</span> <span>=</span> <span>this</span><span>.</span>props<span>;</span>\n</code></pre>\n<h2>14. Multi-line String Shorthand</h2>\n<p>If you have ever found yourself in need of writing multi-line strings in code, this is how you would write it:</p>\n<p>Longhand:</p>\n<pre><code><span>const</span> lorem <span>=</span> <span>'Lorem ipsum dolor sit amet, consectetur\\n\\t'</span>\n    <span>+</span> <span>'adipisicing elit, sed do eiusmod tempor incididunt\\n\\t'</span>\n    <span>+</span> <span>'ut labore et dolore magna aliqua. Ut enim ad minim\\n\\t'</span>\n    <span>+</span> <span>'veniam, quis nostrud exercitation ullamco laboris\\n\\t'</span>\n    <span>+</span> <span>'nisi ut aliquip ex ea commodo consequat. Duis aute\\n\\t'</span>\n    <span>+</span> <span>'irure dolor in reprehenderit in voluptate velit esse.\\n\\t'</span>\n</code></pre>\n<p>But there is an easier way. Just use backticks.</p>\n<p>Shorthand:</p>\n<pre><code><span>const</span> lorem <span>=</span> <span><span>`Lorem ipsum dolor sit amet, consectetur\n    adipisicing elit, sed do eiusmod tempor incididunt\n    ut labore et dolore magna aliqua. Ut enim ad minim\n    veniam, quis nostrud exercitation ullamco laboris\n    nisi ut aliquip ex ea commodo consequat. Duis aute\n    irure dolor in reprehenderit in voluptate velit esse.`</span></span>\n</code></pre>\n<h2>15. Spread Operator Shorthand</h2>\n<p>The <strong>spread operator</strong>, introduced in ES6, has several use cases that make JavaScript code more efficient and fun to use. It can be used to replace certain array functions. The spread operator is simply a series of three dots.</p>\n<p>Longhand</p>\n<pre><code><span spellcheck=\"true\">// joining arrays</span>\n<span>const</span> odd <span>=</span> <span>[</span><span>1</span><span>,</span> <span>3</span><span>,</span> <span>5</span><span>]</span><span>;</span>\n<span>const</span> nums <span>=</span> <span>[</span><span>2</span> <span>,</span><span>4</span> <span>,</span> <span>6</span><span>]</span><span>.</span><span>concat</span><span>(</span>odd<span>)</span><span>;</span>\n\n<span spellcheck=\"true\">// cloning arrays</span>\n<span>const</span> arr <span>=</span> <span>[</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>]</span><span>;</span>\n<span>const</span> arr2 <span>=</span> arr<span>.</span><span>slice</span><span>(</span><span>)</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span spellcheck=\"true\">// joining arrays</span>\n<span>const</span> odd <span>=</span> <span>[</span><span>1</span><span>,</span> <span>3</span><span>,</span> <span>5</span> <span>]</span><span>;</span>\n<span>const</span> nums <span>=</span> <span>[</span><span>2</span> <span>,</span><span>4</span> <span>,</span> <span>6</span><span>,</span> <span>...</span>odd<span>]</span><span>;</span>\nconsole<span>.</span><span>log</span><span>(</span>nums<span>)</span><span>;</span> <span spellcheck=\"true\">// [ 2, 4, 6, 1, 3, 5 ]</span>\n\n<span spellcheck=\"true\">// cloning arrays</span>\n<span>const</span> arr <span>=</span> <span>[</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>]</span><span>;</span>\n<span>const</span> arr2 <span>=</span> <span>[</span><span>...</span>arr<span>]</span><span>;</span>\n</code></pre>\n<p>Unlike the <code><span>concat</span><span>(</span><span>)</span></code> function, you can use the spread operator to insert an array anywhere inside another array.</p>\n<pre><code><span>const</span> odd <span>=</span> <span>[</span><span>1</span><span>,</span> <span>3</span><span>,</span> <span>5</span> <span>]</span><span>;</span>\n<span>const</span> nums <span>=</span> <span>[</span><span>2</span><span>,</span> <span>...</span>odd<span>,</span> <span>4</span> <span>,</span> <span>6</span><span>]</span><span>;</span>\n</code></pre>\n<p>You can also combine the spread operator with ES6 destructuring notation:</p>\n<pre><code><span>const</span> <span>{</span> a<span>,</span> b<span>,</span> <span>...</span>z <span>}</span> <span>=</span> <span>{</span> a<span>:</span> <span>1</span><span>,</span> b<span>:</span> <span>2</span><span>,</span> c<span>:</span> <span>3</span><span>,</span> d<span>:</span> <span>4</span> <span>}</span><span>;</span>\nconsole<span>.</span><span>log</span><span>(</span>a<span>)</span> <span spellcheck=\"true\">// 1</span>\nconsole<span>.</span><span>log</span><span>(</span>b<span>)</span> <span spellcheck=\"true\">// 2</span>\nconsole<span>.</span><span>log</span><span>(</span>z<span>)</span> <span spellcheck=\"true\">// { c: 3, d: 4 }</span>\n</code></pre>\n<h2>16. Mandatory Parameter Shorthand</h2>\n<p>By default, JavaScript will set function parameters to <code>undefined</code> if they are not passed a value. Some other languages will throw a warning or error. To enforce parameter assignment, you can use an <code><span>if</span></code> statement to throw an error if <code>undefined</code>, or you can take advantage of the ‘Mandatory parameter shorthand’.</p>\n<p>Longhand:</p>\n<pre><code><span>function</span> <span>foo</span><span>(</span>bar<span>)</span> <span>{</span>\n  <span>if</span><span>(</span>bar <span>===</span> undefined<span>)</span> <span>{</span>\n    <span>throw</span> <span>new</span> <span>Error</span><span>(</span><span>'Missing parameter!'</span><span>)</span><span>;</span>\n  <span>}</span>\n  <span>return</span> bar<span>;</span>\n<span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code>mandatory <span>=</span> <span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  <span>throw</span> <span>new</span> <span>Error</span><span>(</span><span>'Missing parameter!'</span><span>)</span><span>;</span>\n<span>}</span>\n\nfoo <span>=</span> <span>(</span>bar <span>=</span> <span>mandatory</span><span>(</span><span>)</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  <span>return</span> bar<span>;</span>\n<span>}</span>\n</code></pre>\n<h2>17. Array.find Shorthand</h2>\n<p>If you have ever been tasked with writing a find function in plain JavaScript, you would probably have used a for loop. In ES6, a new array function named <code><span>find</span><span>(</span><span>)</span></code> was introduced.</p>\n<p>Longhand:</p>\n<pre><code><span>const</span> pets <span>=</span> <span>[</span>\n  <span>{</span> type<span>:</span> <span>'Dog'</span><span>,</span> name<span>:</span> <span>'Max'</span><span>}</span><span>,</span>\n  <span>{</span> type<span>:</span> <span>'Cat'</span><span>,</span> name<span>:</span> <span>'Karl'</span><span>}</span><span>,</span>\n  <span>{</span> type<span>:</span> <span>'Dog'</span><span>,</span> name<span>:</span> <span>'Tommy'</span><span>}</span><span>,</span>\n<span>]</span>\n\n<span>function</span> <span>findDog</span><span>(</span>name<span>)</span> <span>{</span>\n  <span>for</span><span>(</span><span>let</span> i <span>=</span> <span>0</span><span>;</span> i<span>&lt;</span>pets<span>.</span>length<span>;</span> <span>++</span>i<span>)</span> <span>{</span>\n    <span>if</span><span>(</span>pets<span>[</span>i<span>]</span><span>.</span>type <span>===</span> <span>'Dog'</span> <span>&amp;&amp;</span> pets<span>[</span>i<span>]</span><span>.</span>name <span>===</span> name<span>)</span> <span>{</span>\n      <span>return</span> pets<span>[</span>i<span>]</span><span>;</span>\n    <span>}</span>\n  <span>}</span>\n<span>}</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code>pet <span>=</span> pets<span>.</span><span>find</span><span>(</span>pet <span>=</span><span>&gt;</span> pet<span>.</span>type <span>===</span><span>'Dog'</span> <span>&amp;&amp;</span> pet<span>.</span>name <span>===</span> <span>'Tommy'</span><span>)</span><span>;</span>\nconsole<span>.</span><span>log</span><span>(</span>pet<span>)</span><span>;</span> <span spellcheck=\"true\">// { type: 'Dog', name: 'Tommy' }</span>\n</code></pre>\n<h2>18. Object [key] Shorthand</h2>\n<p>Did you know that <code>Foo<span>.</span>bar</code> can also be written as <code>Foo<span>[</span><span>'bar'</span><span>]</span></code>? At first, there doesn’t seem to be a reason why you should write it like that. However, this notation gives you the building block for writing re-usable code. </p>\n<p>Consider this simplified example of a validation function:</p>\n<pre><code><span>function</span> <span>validate</span><span>(</span>values<span>)</span> <span>{</span>\n  <span>if</span><span>(</span><span>!</span>values<span>.</span>first<span>)</span>\n    <span>return</span> <span>false</span><span>;</span>\n  <span>if</span><span>(</span><span>!</span>values<span>.</span>last<span>)</span>\n    <span>return</span> <span>false</span><span>;</span>\n  <span>return</span> <span>true</span><span>;</span>\n<span>}</span>\n\nconsole<span>.</span><span>log</span><span>(</span><span>validate</span><span>(</span><span>{</span>first<span>:</span><span>'Bruce'</span><span>,</span>last<span>:</span><span>'Wayne'</span><span>}</span><span>)</span><span>)</span><span>;</span> <span spellcheck=\"true\">// true</span>\n</code></pre>\n<p>This function does its job perfectly. However, consider a scenario where you have very many forms where you need to apply the validation but with different fields and rules. Wouldn’t it be nice to build a generic validation function that can be configured at runtime?</p>\n<p>Shorthand:</p>\n<pre><code><span spellcheck=\"true\">// object validation rules</span>\n<span>const</span> schema <span>=</span> <span>{</span>\n  first<span>:</span> <span>{</span>\n    required<span>:</span><span>true</span>\n  <span>}</span><span>,</span>\n  last<span>:</span> <span>{</span>\n    required<span>:</span><span>true</span>\n  <span>}</span>\n<span>}</span>\n\n<span spellcheck=\"true\">// universal validation function</span>\n<span>const</span> validate <span>=</span> <span>(</span>schema<span>,</span> values<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  <span>for</span><span>(</span>field <span>in</span> schema<span>)</span> <span>{</span>\n    <span>if</span><span>(</span>schema<span>[</span>field<span>]</span><span>.</span>required<span>)</span> <span>{</span>\n      <span>if</span><span>(</span><span>!</span>values<span>[</span>field<span>]</span><span>)</span> <span>{</span>\n        <span>return</span> <span>false</span><span>;</span>\n      <span>}</span>\n    <span>}</span>\n  <span>}</span>\n  <span>return</span> <span>true</span><span>;</span>\n<span>}</span>\n\n\nconsole<span>.</span><span>log</span><span>(</span><span>validate</span><span>(</span>schema<span>,</span> <span>{</span>first<span>:</span><span>'Bruce'</span><span>}</span><span>)</span><span>)</span><span>;</span> <span spellcheck=\"true\">// false</span>\nconsole<span>.</span><span>log</span><span>(</span><span>validate</span><span>(</span>schema<span>,</span> <span>{</span>first<span>:</span><span>'Bruce'</span><span>,</span>last<span>:</span><span>'Wayne'</span><span>}</span><span>)</span><span>)</span><span>;</span> <span spellcheck=\"true\">// true</span>\n</code></pre>\n<p>Now we have a validate function we can reuse in all forms without needing to write a custom validation function for each.</p>\n<h2>19. Double Bitwise NOT Shorthand</h2>\n<p>Bitwise operators are one of those features you learn about in beginner JavaScript tutorials and you never get to implement them anywhere. Besides, who wants to work with ones and zeroes if you are not dealing with binary?</p>\n<p>There is, however, a very practical use case for the Double Bitwise NOT operator. You can use it as a replacement for <code>Math<span>.</span><span>floor</span><span>(</span><span>)</span></code>. The advantage of the Double Bitwise NOT operator is that it performs the same operation much faster. You can read more about Bitwise operators <a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators\">here</a>.</p>\n<p>Longhand:</p>\n<pre><code>Math<span>.</span><span>floor</span><span>(</span><span>4.9</span><span>)</span> <span>===</span> <span>4</span>  <span spellcheck=\"true\">//true</span>\n</code></pre>\n<p>Shorthand:</p>\n<pre><code><span>~</span><span>~</span><span>4.9</span> <span>===</span> <span>4</span>  <span spellcheck=\"true\">//true</span>\n</code></pre>\n<h2>20. Suggest One?</h2>\n<p><br></p><div>\n      </div>\n      \n      </div></div></div>","dateUpdated":1540828894828,"author":"Michael Wanyoike & Sam Deering"}
{"date":"2018-11-14T15:39:07.911Z","title":"Angular Pipes: Isolated Unit Testing","sourceUrl":"https://www.amadousall.com/angular-pipes-unit-testing-angular-pipes/","path":"Angular/","category":"Angular","tags":["Angular"," Unit Testing"," TDD"],"author":"Amadou Sall","excerpt":"In Angular, pipes allow us to transform data before displaying it. Angular comes with a range of built-in pipes, but sometimes we need to write our own custom pipes. Well, in this case, we also have to write unit tests for them.","dateCreated":1542208960878,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Angular/'\ndate: 'Wed Nov 14 2018 21:09:07 GMT+0530 (India Standard Time)'\ntitle: 'Angular Pipes: Isolated Unit Testing'\ntags: ['Angular','Unit Testing','TDD']\ncategory: 'Angular'\ncategoryColor: '#F3C610'\nexcerpt: 'In Angular, pipes allow us to transform data before displaying it. Angular comes with a range of built-in pipes, but sometimes we need to write our own custom pipes. Well, in this case, we also have to write unit tests for them.'\ncoverImage: ''\nsourceUrl: 'https://www.amadousall.com/angular-pipes-unit-testing-angular-pipes/'\ntype: 'Post'\n---\n    ","htmlCode":"<p>A pipe is one of the most simple Angular concepts.It's a class annotated with the&nbsp;<code>@Pipe</code>decorator that implements the&nbsp;<code>PipeTransform</code>&nbsp;interface. Concretely, a pipe class has one method, the transform method:</p><p><img src=\"https://www.amadousall.com/content/images/2018/02/pipe-transform-interface.png\" alt=\"The PipeTransform interface\"></p><p>Because pipes rarely interact with DOM elements, they are very easy to test. Technically, we can test them without using the Angular testing utilities, or TestBed. But it is best to write some Angular tests for pipes because we will want to detect potential runtime bugs when pipes are used in conjunction with Angular components.</p><p>Therefore, we should write two types of unit tests:</p><ul><li>Isolated tests (without TestBed)</li><li>Integrated tests (with TestBed)</li></ul><p>In this article, we will learn how to write isolated unit tests for our pipes.<br>In a&nbsp;<a href=\"https://www.amadousall.com/angular-pipes-integrated-unit-testing/\">next blog post</a>, we will see how to test pipes using&nbsp;<code>TestBed</code>&nbsp;aka Angular tests.</p><p>We talk about isolated unit testing when we are testing the pipe as a standalone TypeScript class.</p><h2>The Code for the Pipe (mean.pipe.ts)</h2><p>To begin, let's write a pipe that transforms an array to its mean.</p><p><img src=\"https://www.amadousall.com/content/images/2018/02/mean.pipe.ts-1.png\" alt=\"The Mean Pipe\"></p><ol><li>Implement the&nbsp;<code>PipeTransform</code>&nbsp;interface.</li><li>Return the mean of the array of numbers.</li></ol><p>The full source code of this pipe can be found&nbsp;<a href=\"https://gist.github.com/amadousalldotcom/9bcbbc5ee1745bf10c890a5c423bd477\">here</a>.</p><h2>Testing the Pipe in Isolation (mean.pipe.spec.ts)</h2><p><img src=\"https://www.amadousall.com/content/images/2018/02/mean.pipe.spec.ts-1.png\" alt=\"The Mean Pipe - First test\"></p><ol><li>Declare a variable that will hold an instance of the pipe.</li><li>Check that the pipe is correctly instantiated.</li></ol><p>Note that we don't need a&nbsp;<code>BeforeEach</code>&nbsp;block because this pipe's transform method is a pure and stateless function.</p><p>Once we know that our pipe can be instantiated properly, we can start to write test suites.</p><p><img src=\"https://www.amadousall.com/content/images/2018/02/mean.pipe.spec.ts-2-2.png\" alt=\"The Mean Pipe Specs\"></p><ol><li>The 'Bad Inputs' test suite checks the behavior of our pipe when unexpected values are passed to its transform method.</li><li>The 'Calculations' test suite checks if the pipe transforms the data correctly when correct inputs are passed to it.</li></ol><p>The full source code of these test suites can be found&nbsp;<a href=\"https://gist.github.com/amadousalldotcom/34ba2a29df55ff57646efd9a413d170b\">here</a></p><h2>Summary</h2><p>In this article, we learned that there were two ways to unit test Angular pipes: isolated tests and integrated tests. But we put the focus on isolated tests and saw how easy it is to write isolated tests for our pipes.<br>In my&nbsp;<a href=\"https://www.amadousall.com/angular-pipes-integrated-unit-testing/\">next blog post</a>, we will learn how to write integrated tests for our Angular pipes.<br>Thank you very much for reading!</p>","filePath":"pages/Angular/.md","_id":"4v8d1kcnJRsLWBlN"}
{"date":"2018-11-06T14:49:46.100Z","title":"Making Websites Better through Accessibility","sourceUrl":"https://nystudio107.com/blog/making-websites-accessible-americans-with-disabilities-act-ada","path":"Accessibility/","category":"Accessibility","tags":["Accessibility"],"author":"Andrew Welch","excerpt":"Mak­ing your web­site acces­si­ble isn’t just about legal com­pli­ance, it also means not turn­ing away cus­tomers. Because who wants to do that?","dateCreated":1541515684032,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Accessibility/'\ndate: 'Tue Nov 06 2018 20:19:46 GMT+0530 (India Standard Time)'\ntitle: 'Making Websites Better through Accessibility'\ntags: ['Accessibility']\ncategory: 'Accessibility'\ncategoryColor: '#F3C610'\nexcerpt: 'Mak­ing your web­site acces­si­ble isn’t just about legal com­pli­ance, it also means not turn­ing away cus­tomers. Because who wants to do that?'\ncoverImage: ''\nsourceUrl: 'https://nystudio107.com/blog/making-websites-accessible-americans-with-disabilities-act-ada'\ntype: 'Post'\n---\n    ","htmlCode":"<div><div><p>Mak­ing your web­site acces­si­ble means mak­ing it avail­able to the largest num­ber of peo­ple pos­si­ble. It’s already a&nbsp;Her­culean task to get peo­ple to your web­site to begin with, so we cer­tain­ly don’t want to turn a % of peo­ple away due to acces­si­bil­i­ty issues.</p><p>I find that many devel­op­ers don’t real­ly under­stand acces­si­bil­i­ty, or shuf­fle it off to the&nbsp;<span></span>​<span>“</span>it’d be nice” list on their tasks. With a&nbsp;lit­tle edu­ca­tion and prop­er tool­ing, it doesn’t have to be that&nbsp;way.</p></div></div><div><div><blockquote>I view website accessibility as customer acquisition, as well as building an inclusive website that serves the most number of people as possible</blockquote></div></div><div><div><p>In many coun­tries, web­site acces­si­bil­i­ty is also man­dat­ed by the law. In the&nbsp;<span>USA</span>, for instance, there is the&nbsp;<a href=\"https://www.ada.gov/\" target=\"_blank\" rel=\"noreferrer noopener\">Amer­i­cans with Dis­abil­i­ties Act</a>&nbsp;(<span>ADA</span>), which the&nbsp;<span>DOJ</span>&nbsp;has made clear extends to the Internet.</p><p>Com­pa­nies such as Tar­get (see&nbsp;<a href=\"https://www.w3.org/WAI/bcase/target-case-study\" target=\"_blank\" rel=\"noreferrer noopener\"><span>NFB</span>&nbsp;V. Tar­get</a>) and Net­flix (see&nbsp;<a href=\"http://www.3playmedia.com/2015/07/23/nad-v-netflix-ada-lawsuit-requires-closed-captioning-on-streaming-video/\" target=\"_blank\" rel=\"noreferrer noopener\"><span>NAD</span>&nbsp;V. Net­flix</a>)&nbsp;have been the sub­ject of law­suits&nbsp;based on this; but it’s also just good busi­ness to allow as many peo­ple as pos­si­ble access to your company’s prod­uct or service.</p><p>If you plan on work­ing on a&nbsp;web­site for&nbsp;<span>US</span>&nbsp;Fed­er­al or State gov­ern­ments (which includes edu­ca­tion­al insti­tu­tions), the&nbsp;<a href=\"https://www.ada.gov/pcatoolkit/chap5toolkit.htm\" target=\"_blank\" rel=\"noreferrer noopener\">Web­site Acces­si­bil­i­ty Under Title&nbsp;<span>II</span>&nbsp;of the&nbsp;<span>ADA</span></a>&nbsp;doc­u­ment out­lines the acces­si­bil­i­ty man­dates for web­sites. Even pub­lic com­pa­nies may very well need to com­ply with the&nbsp;<span>ADA</span>; check out the&nbsp;<a href=\"http://www.logicsolutions.com/does-website-need-ada-compliance/\" target=\"_blank\" rel=\"noreferrer noopener\">Does your web­site need to be&nbsp;<span>ADA</span>&nbsp;com­pli­ant?</a>&nbsp;arti­cle for details.</p><p>I’m just going to assume that you want to make your web­site acces­si­ble for the prac­ti­cal rea­sons men­tioned above that go beyond legal com­pli­ance. Like many of the top­ics that I’ve dis­cussed before, this is all about&nbsp;<em>mak­ing the web bet­ter</em>.</p></div></div><div><div><blockquote>Both performance &amp; accessibility are not about padding proposals; they are about making websites that are more effective for both our clients, and their customers.</blockquote></div></div><div><div><p>This is also how we should sell acces­si­bil­i­ty to our clients, sim­i­lar to how we talked about sell­ing per­for­mance in the&nbsp;<a href=\"https://nystudio107.com/blog/a-pretty-website-isnt-enough\">A&nbsp;Pret­ty Web­site Isn’t Enough</a>&nbsp;arti­cle. We should build acces­si­bil­i­ty into our pro­pos­als, and inte­grate it into our design&nbsp;<span>&amp;</span>&nbsp;devel­op­ment work­flow. Edu­cate clients on why it is impor­tant, and they’ll quick­ly get on&nbsp;board.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwDh2gMYDN82DyKtRXQ8idEijTccqACSv0Jon%2F1R%2FwB81DbfeH1qE7nRKmon%2F9k%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwDh2gMYDN82DyKtRXQ8idEijTccqACSv0Jon%2F1R%2FwB81DbfeH1qE7nRKmon%2F9k%3D\" alt=\"Velvet Rope Let People In Accessibility\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/velvet-rope-let-people-in-accessibility.jpg 368w\"></picture></div></div></figure></div></section></div></div><div><div><p>The&nbsp;<a href=\"http://rosenfeldmedia.com/a-web-for-everyone/personas-for-accessible-ux/\" target=\"_blank\" rel=\"noreferrer noopener\">Per­sonas for Acces­si­ble&nbsp;<span>UX</span></a>&nbsp;arti­cle is a&nbsp;super-use­ful resource for under­stand­ing the type of dis­abil­i­ties peo­ple may have, and how that impacts their abil­i­ty to access your web­site. Take the time to read through the per­sonas list­ed there, and come back when you’re done.</p><p>Real­ly, it’s worth it. I’ll&nbsp;wait.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/making-websites-accessible-americans-with-disabilities-act-ada#major-use-cases\"><i></i><span>LINK</span></a></span>MAJOR USE CASES</h3><p>So here’s a&nbsp;non-exhaus­tive syn­op­sis of the dis­abil­i­ties that peo­ple may encounter with your web­site (cribbed from&nbsp;<a href=\"https://github.com/dpersing/ada-a11y-intro/blob/master/a11y-presentation.md\" target=\"_blank\" rel=\"noreferrer noopener\">here</a>):</p><ul><li>Vision&nbsp;(blind­ness, low vision, col­or blindness)<ul><li>Over&nbsp;<span>6</span>,<span>500</span>,<span>000</span>&nbsp;adults, most of them between&nbsp;<span>18</span>&nbsp;and&nbsp;<span>64</span>, and over&nbsp;<span>650</span>,<span>000</span>&nbsp;chil­dren in the&nbsp;<span>US</span>&nbsp;report­ed issues relat­ed to low vision or blind­ness in&nbsp;<span>2011</span>.</li><li>About&nbsp;<span>1</span>&nbsp;in&nbsp;<span>10</span>&nbsp;men are col­or&nbsp;blind.</li></ul></li><li>Hear­ing&nbsp;(deaf­ness)<ul><li>About&nbsp;<span>36</span>&nbsp;mil­lion adults in the&nbsp;<span>US</span>&nbsp;have some form of hear­ing&nbsp;loss.</li><li>About&nbsp;<span>2</span>&nbsp;in&nbsp;<span>1000</span>&nbsp;chil­dren in the&nbsp;<span>US</span>&nbsp;are born&nbsp;deaf.</li></ul></li><li>Motor skills&nbsp;(trou­ble with using a&nbsp;mouse)</li><li>Cog­ni­tive and learn­ing issues&nbsp;(autism, dyslex­ia,&nbsp;<span>ADD</span>,&nbsp;etc.)<ul><li>About&nbsp;<span>1</span>&nbsp;in&nbsp;<span>88</span>&nbsp;chil­dren in the&nbsp;<span>US</span>&nbsp;are on the autism spectrum.</li><li>Prob­a­bly about&nbsp;<span>20</span>% of peo­ple have some form of dyslexia.</li><li><span>11</span>% of chil­dren&nbsp;<span>4</span> – <span>17</span>&nbsp;years of age, and about&nbsp;<span>4</span>% of adults, in the&nbsp;<span>US</span>&nbsp;have been diag­nosed with&nbsp;<span>ADD</span>.</li></ul></li></ul><p>In gen­er­al, it’s esti­mat­ed that&nbsp;<span>12</span> – <span>20</span>% of peo­ple have a&nbsp;dis­abil­i­ty of some&nbsp;kind.</p><p>So let’s do some­thing about&nbsp;it!</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/making-websites-accessible-americans-with-disabilities-act-ada#pa11y-as-tooling-for-accessibility\"><i></i><span>LINK</span></a></span>PA11Y AS TOOLING FOR ACCESSIBILITY</h3><p>Actu­al­ly mak­ing web­sites acces­si­ble isn’t that hard; the hard part is know­ing&nbsp;<em>what</em>&nbsp;you should be doing. While there are some web-based tools out there, I’ve found that the&nbsp;<kbd>npm</kbd>&nbsp;pack­age&nbsp;<a href=\"https://www.npmjs.com/package/pa11y\" target=\"_blank\" rel=\"noreferrer noopener\">Pa<span>11</span>y</a>&nbsp;to be the most up to date and effec­tive tool for&nbsp;me.</p><p>Pa<span>11</span>y is just a&nbsp;<span>CLI</span>&nbsp;lay­er on top of&nbsp;<a href=\"http://squizlabs.github.io/HTML_CodeSniffer/\" target=\"_blank\" rel=\"noreferrer noopener\">HTML_​CodeSniffer</a>, which enforces the three con­for­mance lev­els of the&nbsp;<a href=\"http://www.w3.org/TR/WCAG/\" target=\"_blank\" rel=\"noreferrer noopener\">Web Con­tent Acces­si­bil­i­ty Guide­lines (<span>WCAG</span>)&nbsp;<span>2</span>.<span>0</span></a>, and the web-relat­ed com­po­nents of the&nbsp;<a href=\"https://www.section508.gov/\" target=\"_blank\" rel=\"noreferrer noopener\">U.S.&nbsp;<span></span>​<span>“</span>Sec­tion&nbsp;<span>508</span>” leg­is­la­tion</a>.</p><p>So let’s talk about how to use&nbsp;it.</p></div></div><div><div><blockquote>The abbreviation #a11y is often used for “accessibility”, where the number 11 refers to the number of letters omitted from “accessibility”</blockquote></div></div><div><div><p>I’ll state right upfront that I’m no expert on acces­si­bil­i­ty; if you want to do a&nbsp;deep-dive on acces­si­bil­i­ty, check out the&nbsp;<a href=\"https://www.w3.org/WAI/gettingstarted/\" target=\"_blank\" rel=\"noreferrer noopener\">Get­ting Start­ed with Web Acces­si­bil­i­ty</a>&nbsp;<span>&amp;</span>&nbsp;<a href=\"https://w3c.github.io/using-aria/\" target=\"_blank\" rel=\"noreferrer noopener\">Using Aria</a>&nbsp;resources. But if you use&nbsp;<a href=\"https://www.w3schools.com/html/html5_semantic_elements.asp\" target=\"_blank\" rel=\"noreferrer noopener\">seman­tic&nbsp;<span>HTML<span>5</span></span>&nbsp;ele­ments</a>, use a&nbsp;prop­er head­ing hier­ar­chy, and use&nbsp;<kbd>alt</kbd>&nbsp;attrib­ut­es for images, you’re halfway home.</p><p>For the rest of it,&nbsp;<kbd>pa11y</kbd>&nbsp;gives you a&nbsp;very easy to under­stand list of what’s bro­ken, and how to fix it. It’s very sim­i­lar to using the&nbsp;<a href=\"https://validator.w3.org/\" target=\"_blank\" rel=\"noreferrer noopener\"><span>WC<span>3</span></span>&nbsp;Val­ida­tor</a>&nbsp;to check your&nbsp;<span>HTML</span>&nbsp;for cor­rect­ness, so it’s not hard to get going on a&nbsp;bul­let-point­ed list of things to&nbsp;fix.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwDodUhdXM32mVVx90NwKAG6VM80m8z5jUYxnqaALGs%2F8ecn0oAqaB%2Fx6J%2BNAH%2F%2F2Q%3D%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwDodUhdXM32mVVx90NwKAG6VM80m8z5jUYxnqaALGs%2F8ecn0oAqaB%2Fx6J%2BNAH%2F%2F2Q%3D%3D\" alt=\"Kintsugi Fix Whats Broken\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/kintsugi-fix-whats-broken.jpg 368w\"></picture></div></div></figure></div></section></div></div><div><div><p>You will need to have&nbsp;<a href=\"https://nodejs.org/\" target=\"_blank\" rel=\"noreferrer noopener\">Node</a>&nbsp;<span>&amp;</span>&nbsp;<a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\"><span>NPM</span></a>&nbsp;(or&nbsp;<a href=\"https://yarnpkg.com/en/\" target=\"_blank\" rel=\"noreferrer noopener\">Yarn</a>) installed in order to take advan­tage of it, but hope­ful­ly you’re already up to speed using these tools. If you’re not, def­i­nite­ly con­sid­er get­ting on the band­wag­on, because fron­tend devel­op­ment is mov­ing inex­orably towards them.</p><p>So the first thing we’ll do is install a&nbsp;pack­age called&nbsp;<a href=\"https://www.npmjs.com/package/npx\" target=\"_blank\" rel=\"noreferrer noopener\">npx</a>; this lets you run node mod­ules with­out hav­ing to install them (either glob­al­ly or as part of a&nbsp;pack­age), either via&nbsp;<kbd>npm</kbd>&nbsp;or&nbsp;<kbd>yarn</kbd>:</p></div></div><div><div><section><div><pre><code><span>sudo</span> <span>npm</span> <span>install</span> -g npx</code></pre><aside><h5><i></i>&nbsp;npm</h5></aside></div></section></div></div><div><div><section><div><pre><code><span>sudo</span> yarn global add npx</code></pre><aside><h5><i></i>&nbsp;yarn</h5></aside></div></section></div></div><div><div><p>We’re installing the&nbsp;<kbd>npx</kbd>&nbsp;pack­age glob­al­ly, so we’re using&nbsp;<kbd>sudo</kbd>&nbsp;to make it hap­pen; but you can also con­sid­er check­ing out how to&nbsp;<a href=\"https://github.com/sindresorhus/guides/blob/master/npm-global-without-sudo.md\" target=\"_blank\" rel=\"noreferrer noopener\">install pack­ages glob­al­ly with­out sudo</a>&nbsp;if you choose to, or per­haps don’t have&nbsp;<kbd>sudo</kbd>&nbsp;access.</p><p>Of course, if you like you can add&nbsp;<kbd>pa11y</kbd>&nbsp;as a&nbsp;depen­den­cy in your project as well, if you pre­fer to do it that way. You could even install&nbsp;<kbd>pa11y</kbd>&nbsp;glob­al­ly, the same way we did with&nbsp;<kbd>npx</kbd>. But I&nbsp;want­ed to intro­duce using&nbsp;<kbd>npx</kbd>&nbsp;as a&nbsp;gen­er­al way to exe­cute Node mod­ules with­out hav­ing to install them.</p><p><kbd>npx</kbd>&nbsp;also has a&nbsp;spe­cif­ic ben­e­fit in this case: it’ll make sure we’re always run­ning the lat­est&nbsp;<kbd>pa11y</kbd>&nbsp;with the lat­est rule­sets, with­out hav­ing to keep it up to&nbsp;date.<br></p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/making-websites-accessible-americans-with-disabilities-act-ada#fixing-accessibility-problems\"><i></i><span>LINK</span></a></span>FIXING ACCESSIBILITY PROBLEMS</h3><p>So now that we have&nbsp;<kbd>npx</kbd>&nbsp;installed, we can run&nbsp;<kbd>pa11y</kbd>&nbsp;and gets its eval­u­a­tion of the acces­si­bil­i­ty of our web­site!&nbsp;We’ll use the&nbsp;<a href=\"https://nystudio107.com/blog\" target=\"_blank\" rel=\"noreferrer noopener\">blog page</a>&nbsp;of this very web­site as our guinea pig for acces­si­bil­i­ty issues:</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/guinea-pig-test.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/guinea-pig-test.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/guinea-pig-test.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/guinea-pig-test.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/guinea-pig-test.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/guinea-pig-test.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/guinea-pig-test.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/guinea-pig-test.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/guinea-pig-test.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/guinea-pig-test.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwCrDBN9ni8qMMS26RmXORnoSenFPtCG1GO9Esa7MYXB5xV2z%2F5AE%2F1H86xtP6p%2BFZKTuacqZ%2F%2FZ\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/guinea-pig-test.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/guinea-pig-test.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/guinea-pig-test.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/guinea-pig-test.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/guinea-pig-test.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwCrDBN9ni8qMMS26RmXORnoSenFPtCG1GO9Esa7MYXB5xV2z%2F5AE%2F1H86xtP6p%2BFZKTuacqZ%2F%2FZ\" alt=\"Guinea Pig Test\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/guinea-pig-test.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/guinea-pig-test.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/guinea-pig-test.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/guinea-pig-test.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/guinea-pig-test.jpg 368w\"></picture><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwCrDBN9ni8qMMS26RmXORnoSenFPtCG1GO9Esa7MYXB5xV2z%2F5AE%2F1H86xtP6p%2BFZKTuacqZ%2F%2FZ\"></div></div></figure></div></section></div></div><div><div><p>To run&nbsp;<kbd>pa11y</kbd>, we can just&nbsp;do:</p></div></div><div><div><section><div><pre><code>npx pa11y --standard <span>\"WCAG2AA\"</span> --ignore <span>\"notice;warning\"</span> https://nystudio107.com/blog</code></pre><aside><h5><i></i>&nbsp;Running pa11y</h5></aside></div></section></div></div><div><div><p>We’re telling it that we don’t want to see any&nbsp;<kbd>notice</kbd>s or&nbsp;<kbd>warning</kbd>s, but rather just errors. If you want to do a&nbsp;more com­pre­hen­sive check, you can show the&nbsp;<kbd>warning</kbd>s too, by omit­ting it from the command.</p><p>Out of the box,&nbsp;<kbd>pa11y</kbd>&nbsp;sup­ports&nbsp;<span>4</span>&nbsp;acces­si­bil­i­ty stan­dards:&nbsp;<kbd>Section508</kbd>,&nbsp;<kbd>WCAG2A</kbd>,&nbsp;<kbd>WCAG2AA</kbd>,&nbsp;<kbd>WCAG2AAA</kbd>. The default is&nbsp;<kbd>WCAG2AA</kbd>, but you can spec­i­fy any stan­dard you want via the&nbsp;<kbd>--standard</kbd>&nbsp;com­mand line argument.</p><p>All of the&nbsp;<kbd>WCAG2*</kbd>&nbsp;stan­dards are the same inter­na­tion­al stan­dard, but with dif­fer­ent lev­els of strict­ness (<kbd>A</kbd>&nbsp;being the least strict,&nbsp;<kbd>AAA</kbd>&nbsp;being the most strict).&nbsp;Addi­tion­al infor­ma­tion on&nbsp;<span>WCAG</span>&nbsp;lev­els can be found in&nbsp;<a href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/conformance.html#uc-levels-head\" target=\"_blank\" rel=\"noreferrer noopener\">Under­stand­ing Lev­els of Con­for­mance</a>.</p><p>The&nbsp;<kbd>Section508</kbd>&nbsp;stan­dard is for&nbsp;<span>US</span>&nbsp;Fed­er­al&nbsp;<span>&amp;</span>&nbsp;State gov­ern­ment insti­tu­tions, should you be work­ing on web­sites for&nbsp;them.</p><p>But we’re just going to use the default&nbsp;<kbd>WCAG2AA</kbd>&nbsp;stan­dard, which is mid­dle of the road in terms of strict­ness (and indeed is the stan­dard that&nbsp;<span>WCAG</span>&nbsp;sug­gests to use), and is used by default if we don’t spec­i­fy a&nbsp;<kbd>--standard</kbd>.</p><p>Here’s what the out­put looks&nbsp;like:</p></div></div><div><div><section><div><pre><code>vagrant@homestead:~$ npx pa11y --ignore \"notice;warning\" https://nystudio107.com/blog\nWelcome to Pa11y\n\n &gt; PhantomJS browser created\n &gt; Testing the page \"https://nystudio107.com/blog\"\n\nResults for https://nystudio107.com/blog:\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nav-menu &gt; div &gt; div:nth-child(1) &gt; div &gt; div &gt; a\n   └── &lt;a href=\"/\"&gt;&lt;svg xmlns=\"http://www.w3.org/2...&lt;/a&gt;\n\n • Error: This element has insufficient contrast at this conformance level. Expected a contrast ratio of at least 4.5:1, but text in this element has a contrast ratio of 2.93:1. Recommendation: change background to #3c3d3f.\n   ├── WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Fail\n   ├── #nav-menu &gt; div &gt; div:nth-child(3) &gt; ul &gt; li:nth-child(2) &gt; a\n   └── &lt;a href=\"/blog\" class=\"nav-link\"&gt;Blog&lt;/a&gt;\n\n • Error: This text input element does not have a name available to an accessibility API. Valid names are: label element, title attribute.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.InputText.Name\n   ├── #searchbox\n   └── &lt;input type=\"text\" id=\"searchbox\" placeholder=\"search\" autocomplete=\"off\" class=\"autocomplete-input\"&gt;\n\n • Error: This form field should be labelled in some way. Use the label element (either with a \"for\" attribute or wrapped around the form field), or \"title\", \"aria-label\" or \"aria-labelledby\" attributes as appropriate.\n   ├── WCAG2AA.Principle1.Guideline1_3.1_3_1.F68\n   ├── #searchbox\n   └── &lt;input type=\"text\" id=\"searchbox\" placeholder=\"search\" autocomplete=\"off\" class=\"autocomplete-input\"&gt;\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(1) &gt; div &gt; a\n   └── &lt;a href=\"/\"&gt; &lt;svg class=\"scaling-svg sub-lo...&lt;/a&gt;\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(2) &gt; a:nth-child(1)\n   └── &lt;a class=\"social\" href=\"mailto:info@nystudio107.com\"&gt;&lt;i class=\"icon-mail-alt\"&gt;&lt;/i&gt;&lt;/a&gt;\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(2) &gt; a:nth-child(2)\n   └── &lt;a rel=\"nofollow\" class=\"social\" href=\"https://www.facebook.com/newyorkstudio107\"&gt;&lt;i class=\"icon-facebook\"&gt;&lt;/i&gt;&lt;/a&gt;\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(2) &gt; a:nth-child(3)\n   └── &lt;a rel=\"nofollow\" class=\"social\" href=\"https://twitter.com/nystudio107\"&gt;&lt;i class=\"icon-twitter\"&gt;&lt;/i&gt;&lt;/a&gt;\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(2) &gt; a:nth-child(4)\n   └── &lt;a rel=\"nofollow\" class=\"social\" href=\"https://github.com/nystudio107\"&gt;&lt;i class=\"icon-github-circled\"&gt;...&lt;/a&gt;\n\n • Error: Iframe element requires a non-empty title attribute that identifies the frame.\n   ├── WCAG2AA.Principle2.Guideline2_4.2_4_1.H64.1\n   ├── #Smallchat &gt; iframe\n   └── &lt;iframe data-reactroot=\"\" style=\"z-index: 999999999; position: fixed; right: 0px; bottom: 0px; border: 0px; background-image: none; transition: width 200ms cubic-bezier(0.25, 0.25, 0.5, 1), height 200ms cubic-bezier(0.25, 0.25, 0.5, 1); -webkit-trans...\n\n10 Errors\n0 Warnings\n0 Notices</code></pre><aside><h5><i></i>&nbsp;pa11y accessibility errors</h5></aside></div></section></div></div><div><div><p>What it actu­al­ly does is pret­ty nifty: it fires up a&nbsp;<span></span>​<span>“</span>head­less” brows­er, ren­ders your web­page in it cour­tesy of&nbsp;<a href=\"http://phantomjs.org/\" target=\"_blank\" rel=\"noreferrer noopener\">Phan­tomJS</a>, and then ana­lyzes it for acces­si­bil­i­ty issues. This is pret­ty sim­i­lar to how Crit­i­cal&nbsp;<span>CSS</span>&nbsp;is gen­er­at­ed, as per the&nbsp;<a href=\"https://nystudio107.com/blog/implementing-critical-css\">Imple­ment­ing Crit­i­cal&nbsp;<span>CSS</span>&nbsp;on your web­site</a>&nbsp;article.</p><p>In any event, that’s quite a&nbsp;num­ber of errors, so let’s take them one by&nbsp;one!</p></div></div><div><div><section><div><pre><code>• Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nav-menu &gt; div &gt; div:nth-child(1) &gt; div &gt; div &gt; a\n   └── &lt;a href=\"/\"&gt;&lt;svg xmlns=\"http://www.w3.org/2...&lt;/a&gt;</code></pre></div></section></div></div><div><div><p>This can be fixed by adding a&nbsp;<kbd>&lt;title&gt;homepage&lt;/title&gt;</kbd>&nbsp;as a&nbsp;child of the&nbsp;<kbd>&lt;svg&gt;</kbd>&nbsp;that is dis­played inline in the glob­al site head­er, so there’s some text for screen read­ers to parse. Link tar­gets for screen read­ers should say&nbsp;<em>where</em>&nbsp;the link will take them, or&nbsp;<em>what</em>&nbsp;click­ing on the link will do, not describe what the thing inside the link is (a logo, in this&nbsp;case).</p><p>Just imag­ine some­one read­ing the web­page aloud to you, if they said&nbsp;<span></span>​<span>“</span>link nystudio<span>107</span>&nbsp;logo” you’d have no idea what click­ing on it does. If instead they said&nbsp;<span></span>​<span>“</span>link home­page” then you’d get&nbsp;it.</p><p>Anoth­er way that this issue can also be resolved is by putting text inside of the&nbsp;<kbd>&lt;a&gt;</kbd>&nbsp;tag that is invis­i­ble to the eye, but screen read­ers will pick up.&nbsp;We can do this with a&nbsp;<kbd>&lt;span class=\"sr-only\"&gt;</kbd>&nbsp;using the&nbsp;<span>CSS</span>&nbsp;from Twit­ter Bootstrap:</p></div></div><div><div><section><div><pre><code><span>.sr-only</span> <span>{</span>\n    <span>position</span><span>:</span> absolute<span>;</span>\n    <span>width</span><span>:</span> 1px<span>;</span>\n    <span>height</span><span>:</span> 1px<span>;</span>\n    <span>padding</span><span>:</span> 0<span>;</span>\n    <span>margin</span><span>:</span> -1px<span>;</span>\n    <span>overflow</span><span>:</span> hidden<span>;</span>\n    <span>clip</span><span>:</span> <span>rect</span><span>(</span>0,0,0,0<span>)</span><span>;</span>\n    <span>border</span><span>:</span> 0<span>;</span>\n<span>}</span></code></pre><aside><h5><i></i>&nbsp;Screen reader only CSS</h5></aside></div></section></div></div><div><div><p>That way, screen read­ers will have some­thing to&nbsp;read!</p></div></div><div><div><section><div><pre><code>• Error: This element has insufficient contrast at this conformance level. Expected a contrast ratio of at least 4.5:1, but text in this element has a contrast ratio of 2.93:1. Recommendation: change background to #3c3d3f.\n   ├── WCAG2AA.Principle1.Guideline1_4.1_4_3.G18.Fail\n   ├── #nav-menu &gt; div &gt; div:nth-child(3) &gt; ul &gt; li:nth-child(2) &gt; a\n   └── &lt;a href=\"/blog\" class=\"nav-link\"&gt;Blog&lt;/a&gt;</code></pre></div></section></div></div><div><div><p>This is say­ing that the con­trast ratio between our menu links and the head­er back­ground col­or isn’t high enough. It sug­gests chang­ing it from&nbsp;<kbd>#58595b</kbd>&nbsp;to&nbsp;<kbd>#3C3D3F</kbd>&nbsp;to increase the con­trast ratio. This is to assist with read­abilty for peo­ple who have vision problems.</p><p>Since these are the nystudio<span>107</span>&nbsp;brand­ing col­ors, the prob­lem could have been mit­i­gat­ed by apply­ing the tips from the arti­cle&nbsp;<a href=\"https://www.w3.org/WAI/gettingstarted/tips/designing\" target=\"_blank\" rel=\"noreferrer noopener\">Tips on Design­ing for Web Acces­si­bil­i­ty</a>&nbsp;dur­ing the design process.</p></div></div><div><div><section><div><pre><code>• Error: This text input element does not have a name available to an accessibility API. Valid names are: label element, title attribute.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.InputText.Name\n   ├── #searchbox\n   └── &lt;input type=\"text\" id=\"searchbox\" placeholder=\"search\" autocomplete=\"off\" class=\"autocomplete-input\"&gt;\n\n • Error: This form field should be labelled in some way. Use the label element (either with a \"for\" attribute or wrapped around the form field), or \"title\", \"aria-label\" or \"aria-labelledby\" attributes as appropriate.\n   ├── WCAG2AA.Principle1.Guideline1_3.1_3_1.F68\n   ├── #searchbox\n   └── &lt;input type=\"text\" id=\"searchbox\" placeholder=\"search\" autocomplete=\"off\" class=\"autocomplete-input\"&gt;</code></pre></div></section></div></div><div><div><p>This is say­ing that our&nbsp;<kbd>&lt;input&gt;</kbd>&nbsp;ele­ment used for site search lacks a&nbsp;<kbd>aria-label</kbd>&nbsp;attribute for screen read­ers. This can be fixed by adding them to our&nbsp;<a href=\"https://github.com/nystudio107/vue2-autocomplete\" target=\"_blank\" rel=\"noreferrer noopener\">vue<span>2</span>-auto­com­plete</a>&nbsp;Vue component.</p></div></div><div><div><section><div><pre><code>• Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(2) &gt; a:nth-child(1)\n   └── &lt;a class=\"social\" href=\"mailto:info@nystudio107.com\"&gt;&lt;i class=\"icon-mail-alt\"&gt;&lt;/i&gt;&lt;/a&gt;\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(2) &gt; a:nth-child(2)\n   └── &lt;a rel=\"nofollow\" class=\"social\" href=\"https://www.facebook.com/newyorkstudio107\"&gt;&lt;i class=\"icon-facebook\"&gt;&lt;/i&gt;&lt;/a&gt;\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(2) &gt; a:nth-child(3)\n   └── &lt;a rel=\"nofollow\" class=\"social\" href=\"https://twitter.com/nystudio107\"&gt;&lt;i class=\"icon-twitter\"&gt;&lt;/i&gt;&lt;/a&gt;\n\n • Error: Anchor element found with a valid href attribute, but no link content has been supplied.\n   ├── WCAG2AA.Principle4.Guideline4_1.4_1_2.H91.A.NoContent\n   ├── #nys-footer &gt; div &gt; div &gt; div &gt; div:nth-child(2) &gt; a:nth-child(4)\n   └── &lt;a rel=\"nofollow\" class=\"social\" href=\"https://github.com/nystudio107\"&gt;&lt;i class=\"icon-github-circled\"&gt;...&lt;/a&gt;</code></pre></div></section></div></div><div><div><p>These all refer to the social icons at the bot­tom of the screen, which are a&nbsp;cus­tom icon font cour­tesy of&nbsp;<a href=\"http://fontello.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Fontel­lo</a>&nbsp;(gen­er­at­ed via our&nbsp;<a href=\"https://www.npmjs.com/package/gulp-fontello\" target=\"_blank\" rel=\"noreferrer noopener\">Gulp</a>&nbsp;task). Con­trary to pop­u­lar belief, icon fonts can work with accessibility.</p><p>We just need to change the links to be like&nbsp;this:</p></div></div><div><div><section><div><pre><code><span><span><span>&lt;</span>a</span> <span>rel</span><span><span>=</span><span>\"</span>nofollow<span>\"</span></span> <span>class</span><span><span>=</span><span>\"</span>social<span>\"</span></span> <span>href</span><span><span>=</span><span>\"</span>https://www.facebook.com/newyorkstudio107<span>\"</span></span><span>&gt;</span></span>\n    <span><span><span>&lt;</span>i</span> <span>class</span><span><span>=</span><span>\"</span>icon-facebook<span>\"</span></span> <span>aria-hidden</span><span><span>=</span><span>\"</span>true<span>\"</span></span> <span>title</span><span><span>=</span><span>\"</span>Facebook<span>\"</span></span><span>&gt;</span></span><span><span><span>&lt;/</span>i</span><span>&gt;</span></span>\n    <span><span><span>&lt;</span>span</span> <span>class</span><span><span>=</span><span>\"</span>sr-only<span>\"</span></span><span>&gt;</span></span>Facebook<span><span><span>&lt;/</span>span</span><span>&gt;</span></span>\n<span><span><span>&lt;/</span>a</span><span>&gt;</span></span></code></pre></div></section></div></div><div><div><p>The&nbsp;<kbd>aria-hidden</kbd>&nbsp;attribute caus­es screen read­ers to skip the ele­ment, and the&nbsp;<kbd>title</kbd>&nbsp;attribute gives sight­ed peo­ple a&nbsp;mouseover tooltip. Then the&nbsp;<kbd>&lt;span class=\"sr-only\"&gt;</kbd>&nbsp;pro­vides the text for screen read­ers to parse, using the&nbsp;<span>CSS</span>&nbsp;from Twit­ter Bootstrap:</p></div></div><div><div><section><div><pre><code><span>.sr-only</span> <span>{</span>\n    <span>position</span><span>:</span> absolute<span>;</span>\n    <span>width</span><span>:</span> 1px<span>;</span>\n    <span>height</span><span>:</span> 1px<span>;</span>\n    <span>padding</span><span>:</span> 0<span>;</span>\n    <span>margin</span><span>:</span> -1px<span>;</span>\n    <span>overflow</span><span>:</span> hidden<span>;</span>\n    <span>clip</span><span>:</span> <span>rect</span><span>(</span>0,0,0,0<span>)</span><span>;</span>\n    <span>border</span><span>:</span> 0<span>;</span>\n<span>}</span></code></pre><aside><h5><i></i>&nbsp;Screen reader only CSS</h5></aside></div></section></div></div><div><div><p>That’s all there is to it, we now have nice acces­si­ble social icons.</p></div></div><div><div><section><div><pre><code>• Error: Iframe element requires a non-empty title attribute that identifies the frame.\n   ├── WCAG2AA.Principle2.Guideline2_4.2_4_1.H64.1\n   ├── #Smallchat &gt; iframe\n   └── &lt;iframe data-reactroot=\"\" style=\"z-index: 999999999; position: fixed; right: 0px; bottom: 0px; border: 0px; background-image: none; transition: width 200ms cubic-bezier(0.25, 0.25, 0.5, 1), height 200ms cubic-bezier(0.25, 0.25, 0.5, 1); -webkit-trans...</code></pre></div></section></div></div><div><div><p>This one, unfor­tu­nate­ly, we can’t fix… because it’s com­ing from the&nbsp;<a href=\"https://small.chat/\" target=\"_blank\" rel=\"noreferrer noopener\">Small­chat</a>&nbsp;library we use to allow site vis­i­tors to con­tact us via&nbsp;<a href=\"https://slack.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Slack</a>. How­ev­er what we&nbsp;<em>can</em>&nbsp;do is con­tact the authors of Small­chat, and point out the acces­si­bil­i­ty issues, so that they can fix them. Then&nbsp;<em>every­one</em>&nbsp;benefits.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/making-websites-accessible-americans-with-disabilities-act-ada#automating-accessibility-testing\"><i></i><span>LINK</span></a></span>AUTOMATING ACCESSIBILITY TESTING</h3><p>The cool thing about&nbsp;<kbd>pa11y</kbd>&nbsp;being a&nbsp;Node mod­ule is that we can inte­grate it into our fron­tend work­flow, and auto­mate test­ing. Take for exam­ple this&nbsp;<kbd>a11y</kbd>&nbsp;Gulp&nbsp;task:</p></div></div><div><div><section><div><pre><code><span>// Process data in an array synchronously, moving onto the n+1 item only after the nth item callback</span>\n<span>function</span> <span>doSynchronousLoop</span><span>(</span>data<span>,</span> processData<span>,</span> done<span>)</span> <span>{</span>\n    <span>if</span> <span>(</span>data<span>.</span>length <span>&gt;</span> <span>0</span><span>)</span> <span>{</span>\n        <span>const</span> <span>loop</span> <span>=</span> <span>(</span>data<span>,</span> i<span>,</span> processData<span>,</span> done<span>)</span> <span>=&gt;</span> <span>{</span>\n            <span>processData</span><span>(</span>data<span>[</span>i<span>]</span><span>,</span> i<span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n                <span>if</span> <span>(</span><span>++</span>i <span>&lt;</span> data<span>.</span>length<span>)</span> <span>{</span>\n                    <span>loop</span><span>(</span>data<span>,</span> i<span>,</span> processData<span>,</span> done<span>)</span><span>;</span>\n                <span>}</span> <span>else</span> <span>{</span>\n                    <span>done</span><span>(</span><span>)</span><span>;</span>\n                <span>}</span>\n            <span>}</span><span>)</span><span>;</span>\n        <span>}</span><span>;</span>\n        <span>loop</span><span>(</span>data<span>,</span> <span>0</span><span>,</span> processData<span>,</span> done<span>)</span><span>;</span>\n    <span>}</span> <span>else</span> <span>{</span>\n        <span>done</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span>\n<span>}</span>\n\n<span>// Run pa11y accessibility tests on each template</span>\n<span>function</span> <span>processAccessibility</span><span>(</span>element<span>,</span> i<span>,</span> callback<span>)</span> <span>{</span>\n    <span>const</span> accessibilitySrc <span>=</span> pkg<span>.</span>urls<span>.</span>critical <span>+</span> element<span>.</span>url<span>;</span>\n    <span>const</span> cliReporter <span>=</span> <span>require</span><span>(</span><span>'./node_modules/pa11y/reporter/cli.js'</span><span>)</span><span>;</span>\n    <span>const</span> options <span>=</span> <span>{</span>\n        log<span>:</span> cliReporter<span>,</span>\n        ignore<span>:</span>\n                <span>[</span>\n                    <span>'notice'</span><span>,</span>\n                    <span>'warning'</span>\n                <span>]</span><span>,</span>\n        <span>}</span><span>;</span>\n    <span>const</span> test <span>=</span> $<span>.</span><span>pa11y</span><span>(</span>options<span>)</span><span>;</span>\n\n    $<span>.</span><span>fancyLog</span><span>(</span><span>\"-&gt; Checking Accessibility for URL: \"</span> <span>+</span> $<span>.</span>chalk<span>.</span><span>cyan</span><span>(</span>accessibilitySrc<span>)</span><span>)</span><span>;</span>\n    test<span>.</span><span>run</span><span>(</span>accessibilitySrc<span>,</span> <span>(</span>error<span>,</span> results<span>)</span> <span>=&gt;</span> <span>{</span>\n        cliReporter<span>.</span><span>results</span><span>(</span>results<span>,</span> accessibilitySrc<span>)</span><span>;</span>\n        <span>callback</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span><span>)</span><span>;</span>\n<span>}</span>\n\n<span>// accessibility task</span>\ngulp<span>.</span><span>task</span><span>(</span><span>\"a11y\"</span><span>,</span> <span>(</span>callback<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>doSynchronousLoop</span><span>(</span>pkg<span>.</span>globs<span>.</span>critical<span>,</span> processAccessibility<span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n        <span>// all done</span>\n        <span>callback</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre></div></section></div></div><div><div><p>This pig­gy­backs off of the&nbsp;<kbd>package.json</kbd>&nbsp;set­up we out­lined in the&nbsp;<a href=\"https://nystudio107.com/blog/a-better-package-json-for-the-frontend\">A&nbsp;Bet­ter package.json for the Fron­tend</a>&nbsp;arti­cle, and uses the urls we already have in the&nbsp;<kbd>pkg.globs.critical</kbd>&nbsp;object from the&nbsp;<a href=\"https://nystudio107.com/blog/implementing-critical-css\">Imple­ment­ing Crit­i­cal&nbsp;<span>CSS</span>&nbsp;on your web­site</a>&nbsp;article.</p><p>We already have a&nbsp;<span>URL</span>&nbsp;to each major tem­plate our site uses for our Crit­i­cal&nbsp;<span>CSS</span>&nbsp;gen­er­a­tion, we can use them again to run our&nbsp;<kbd>pa11y</kbd>&nbsp;checks on every tem­plate on our website!</p><p>For this to work, you’ll need to do&nbsp;<kbd>npm install pa11y -D</kbd>&nbsp;or&nbsp;<kbd>yarn add pa11y -D</kbd>&nbsp;to add&nbsp;<kbd>pa11y</kbd>&nbsp;to our project’s&nbsp;<kbd>package.json</kbd>, but then we’re good to&nbsp;go!</p><p>So now we can just do&nbsp;<kbd>gulp a11y</kbd>&nbsp;and it’ll test our entire web­site for acces­si­bil­i­ty issues. Nice!</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/making-websites-accessible-americans-with-disabilities-act-ada#wrapping-up\"><i></i><span>LINK</span></a></span>WRAPPING UP</h3><p>Just use&nbsp;<kbd>pa11y</kbd>&nbsp;the way you use any oth­er audit­ing tool: you get a&nbsp;list of things to fix, you address them, and then you re-run the test. Lath­er, rinse, repeat until all of the issues you plan to address are tak­en care&nbsp;of.</p><p>One real­ly nice thing from a&nbsp;best prac­tices point of view is that if we’ve addressed&nbsp;<span>SEO</span>&nbsp;best prac­tices as per the&nbsp;<a href=\"https://nystudio107.com/blog/modern-seo-snake-oil-vs-substance\">Mod­ern&nbsp;<span>SEO</span>: Snake Oil vs. Sub­stance</a>&nbsp;arti­cle, we’ve already tak­en care of a&nbsp;num­ber of acces­si­bil­i­ty issues. Both&nbsp;<span>SEO</span>&nbsp;and acces­si­bil­i­ty want&nbsp;<kbd>alt</kbd>&nbsp;tags for images, for instance. Nice.</p><p>It makes sense if you think about it; search engines are essen­tial­ly screen read­ers. But it’s great to see the con­ver­gence of tech­niques that fall under the best prac­tices umbrella.</p><p>That’s it! It wasn’t so bad at all to address these things, and we prob­a­bly made a&nbsp;big dif­fer­ence to some peo­ple vis­it­ing our&nbsp;site.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/freedom-through-web-accessibility.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwDdk09IbtrkOzDZgjrjFWbR1VEcKcuoJwMZ98U1v9X%2BFV4ui%2FQV57m3ubKmlsf%2F2Q%3D%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/freedom-through-web-accessibility.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/freedom-through-web-accessibility.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/freedom-through-web-accessibility.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/freedom-through-web-accessibility.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/freedom-through-web-accessibility.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL%2F8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4%2BTl5ufo6erx8vP09fb3%2BPn6%2F8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL%2F8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3%2BPn6%2F9oADAMBAAIRAxEAPwDdk09IbtrkOzDZgjrjFWbR1VEcKcuoJwMZ98U1v9X%2BFV4ui%2FQV57m3ubKmlsf%2F2Q%3D%3D\" alt=\"Freedom Through Web Accessibility\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/freedom-through-web-accessibility.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/freedom-through-web-accessibility.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/freedom-through-web-accessibility.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/freedom-through-web-accessibility.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/freedom-through-web-accessibility.jpg 368w\"></picture></div></div></figure></div></section></div></div><div><div><p>Acces­si­bil­i­ty isn’t some­thing that’s ter­ri­bly dif­fi­cult to address, espe­cial­ly if you inte­grate it as part of your design&nbsp;<span>&amp;</span>&nbsp;devel­op­ment process, and use tools like&nbsp;<kbd>pa11y</kbd>&nbsp;to help you along the&nbsp;way.</p><p>As with any­thing, it’s much eas­i­er to build projects with acces­si­bil­i­ty in mind than it is to retroac­tive­ly add it. So make it part of your design&nbsp;<span>&amp;</span>&nbsp;devel­op­ment process.</p><p>It’s also worth not­ing that&nbsp;<a href=\"https://github.com/pa11y\" target=\"_blank\" rel=\"noreferrer noopener\">Pa<span>11</span>y</a>&nbsp;also has some oth­er cool projects based on it, such as&nbsp;<a href=\"https://github.com/pa11y/dashboard\" target=\"_blank\" rel=\"noreferrer noopener\">Pa<span>11</span>y Dash­board</a>&nbsp;and&nbsp;<a href=\"https://github.com/pa11y/webservice\" target=\"_blank\" rel=\"noreferrer noopener\">Pa<span>11</span>y Web­ser­vice</a>&nbsp;for more auto­mat­ed mon­i­tor­ing of your website’s acces­si­bil­i­ty. If you pre­fer&nbsp;<span>GUI</span>&nbsp;tools, check out&nbsp;<a href=\"https://chrome.google.com/webstore/detail/accessibility-developer-t/fpkknkljclfencbdbgkenhalefipecmb?hl=en\">Chrome Acces­si­bil­i­ty Devel­op­er Tools</a>&nbsp;and&nbsp;<a href=\"http://squizlabs.github.io/HTML_CodeSniffer/\">HTML_​Codesniffer</a>.</p><p>Go make some inclu­sive websites!</p></div></div><aside><div><div><h3>FURTHER READING</h3><ul><li><a href=\"https://nystudio107.com/blog/frontend-dev-best-practices-for-2017\">Frontend Dev Best Practices for 2017</a></li><li><a href=\"https://nystudio107.com/blog/image-optimization-project-results\">Post-Mortem: Applied Image Optimization</a></li><li><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development\">An Annotated webpack 4 Config for Frontend Web Development</a></li></ul></div></div></aside>","filePath":"pages/Accessibility/.md","_id":"5RoCoFBioNLJowWN"}
{"date":{"$$date":1542818686758},"title":"Complete introduction to nodejs","sourceUrl":"https://ordina-jworks.github.io/nodejs/2018/04/10/complete-introduction-to-nodejs.html","path":"Node.js/Node.js/Node.js/","category":"Node.js","tags":["Node.js"],"author":"Michael Vervloet ","excerpt":"","dateCreated":1542818481305,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Node.js/'\ndate: 'Wed Nov 21 2018 22:12:23 GMT+0530 (India Standard Time)'\ntitle: 'Complete introduction to nodejs'\ntags: ['Node.js']\ncategory: 'Node.js'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://ordina-jworks.github.io/nodejs/2018/04/10/complete-introduction-to-nodejs.html'\ntype: 'Post'\n---\n    ","htmlCode":"<h2>What Is node</h2>\n<p>NodeJs is a program that let’s you run JavaScript code on your machine without the need of a browser.\nUnderneath the surface of node is the V8 JavaScript runtime which is the engine that allows your browser to run JavaScript code.\nOn top of that, node adds some extra functionality to create server side applications\n(for example <code>fs</code> to interact with the file system, <code>http</code> or <code>https</code> to send and receive http calls, <code>net</code> for tcp streams, and many more).</p>\n\n<h2>Use cases:</h2>\n<p><strong>Real time applications (chat, stocks, IoT)</strong><br>\nThe event based nature of NodeJs and ‘keep-alive’ connections makes it ideal for real time applications, whenever an event occurs,\nfor example a chat message being received or a stock price being updated, it can emit an event on its connected sockets to update the client’s chat screen or stocks chart.</p>\n\n<p><strong>REST APIs</strong><br>\nThis will be a topic on its own, but with frameworks built on top of NodeJs like Express or Nest it is really easy to get a REST API up and running in no time at all.</p>\n\n<p><strong>Serverless:</strong><br>\nNodeJs is supported with almost any serverless provider (Amazon Lambda, Azure functions, Google Cloud functions, …).\nSo developers can focus on their code and business logic instead of maintaining and setting up complicated server architectures.</p>\n\n<p><strong>File uploading:</strong> <br>\nWhen writing applications that depend a lot on network access and accessing files on the disk we have to keep an eye on how the data is being transferred back and forward.\nFor ultimate efficiency, especially when dealing with large sets of data, we need to be able to access that data piece by piece.\nWhen that happens, we can start manipulating that data as soon as it arrives at the server.\nInstead of holding it in memory until all chunks have arrived and writing it to disk, node can for example create a writable stream on the disk and write the chunks directly to the files without keeping them in memory and without blocking the entire application.\nThis way it can also receive multiple files at the same time.</p>\n\n<h2>Benefits of Javascript across the stack</h2>\n<p>Not only does it make development quite a bit faster and easier by having a large community with lots of reusable code for your application (npm).\nIt also lowers the barriers between frontend and backend developers by using the same programming language over the entire stack.\nSo more efficiency and faster, leaner development which in turn means lower development costs.</p>\n\n<p>Also worth noting is that JavaScript is currently THE most popular programming language <a href=\"https://insights.stackoverflow.com/survey/2018/?utm_source=Iterable&amp;utm_medium=email&amp;utm_campaign=dev-survey-2018-promotion#most-popular-technologies\" target=\"blank\" rel=\"noopener noreferrer\">According to StackOverflow</a>,\nso more developers will be able to easily understand and contribute to the application if needed.\nAnother important criteria: when it comes to cloud hosting,\nRAM is probably the main influencing factor when it comes to pricing and since node is designed and encourages developers to write programs to use as less memory as possible it is often a cheaper alternative.</p>\n\n<h2>Multithreading</h2>\n<p>This is usually a big issue/talking point when it comes to node.</p>\n\n<p>In short: each NodeJs process is single threaded. \nIf you want multiple threads, you have to have multiple processes as well.\nYou could say that because of that, NodeJs encourages you to implement microservices when dealing with these larger and complicated applications.\nWhich is a good thing since it makes not only your entire application but also each process individually very scalable.\nThe downside is that this might introduce some added complexity to your application.\nBut with Node’s lively modular ecosystem (npm) you can imagine there are already solutions to make setting this up a lot easier, (i.e. Moleculer, Seneca, …).</p>\n\n<p>An important characteristic of microservices is “shared nothing”.\nNode has a shared-nothing model:</p>\n<blockquote>\n  <p>A shared-nothing architecture (SN) is a distributed-computing architecture in which each node is independent and self-sufficient,\nand there is no single point of contention across the system. More specifically, none of the nodes share memory or disk storage.\nThe advantages of SN architecture versus a central entity that controls the network (a controller-based architecture) include eliminating any single point of failure,\nallowing self-healing capabilities and providing an advantage with offering non-disruptive upgrade.\nA shared-nothing architecture (SN) is a distributed-computing architecture in which each node is independent and self-sufficient,\nand there is no single point of contention across the system. More specifically, none of the nodes share memory or disk storage.\nThe advantages of SN architecture versus a central entity that controls the network (a controller-based architecture) include eliminating any single point of failure,\n allowing self-healing capabilities and providing an advantage with offering non-disruptive upgrade.</p>\n</blockquote>\n\n<p>(src: <a href=\"https://en.wikipedia.org/wiki/Shared-nothing_architecture\" target=\"blank\" rel=\"noopener noreferrer\">Wikipedia</a>)</p>\n\n<p>Additionally, node has some other features to make use of multiple cores like for example the cluster:\na single instance of NodeJs runs in a single thread. \nTo take advantage of multi-core systems, the user will sometimes want to launch a cluster of NodeJs processes to handle the load.\nThe cluster module allows easy creation of child processes that share server ports and automatically load balances across these processes.</p>\n\n<h2>Blocking vs. Non-Blocking</h2>\n<p>As we’ve said before, NodeJs encourages you to take advantage of non-blocking code (like JavaScript promises).\nTo demonstrate how this works, I’ll give you an example in pseudo code for reading a file from the filesystem.</p>\n\n<p><strong>Blocking:</strong></p>\n<div><div><pre><code>    read file from filesystem,\n    print content\n    do something else`\n</code></pre></div></div>\n\n<p><strong>Non-Blocking:</strong></p>\n<div><div><pre><code>    read file from filesystem\n        Whenever we're complete, print contents (callback)\n    do something else\n</code></pre></div></div>\n\n<p><strong>Difference:</strong><br>\nWhen reading two files, the blocking code starts reading the file.\nIn case of a large file, let’s say this takes 5 seconds.\nAfter the file has been read, it logs its content. \nThen it starts reading the second file which again takes around 5 seconds and the content gets logged.</p>\n\n<p>In the non-blocking code, we tell the processor to start reading the file, and when it’s done, to “let us know” (resolve promise) so that we can do more stuff with it.\nAt the same time since there is another file to be read, we start reading the second file and again tell the processor to notify us when it is ready so that we can do stuff with it.\nWhenever a ‘Promise’ of reading a file resolves, its callback (in our case, the pseudo code: <code>print contents</code>) gets executed\n(this also means that, when file #2 takes less time to be read, it will be resolved and printed first which is something you might want to keep in mind).</p>\n\n<p><img src=\"/img/non-blocking.png\" alt=\"Blocking vs Non-blocking\" width=\"100%\"></p>\n\n<h2>V8 Runtime Engine</h2>\n<p>Node uses Google Chrome’s V8 runtime engine to run JavaScript code, we’ve shown this video in one of our previous blog posts before,\nbut since it might be useful to know how it works under the hood I’ve included the video once more.\nWhen it comes to node development there are some differences, since we don’t get events from the DOM.\nIn node we can get them from the NodeJs event emitter but the way it works stays the same.\nIt has some useful tips like avoiding to block the call stack.</p>\n<iframe src=\"https://player.vimeo.com/video/96425312\" width=\"100%\" height=\"360\" frameborder=\"0\" webkitallowfullscreen=\"\" mozallowfullscreen=\"\" allowfullscreen=\"\"></iframe>\n\n<p><a href=\"https://vimeo.com/96425312\" target=\"blank\" rel=\"noopener noreferrer\">Philip Roberts: Help, I'm stuck in an event-loop.</a></p>\n\n<h2>Installing NodeJs</h2>\n<p>Download the installer for your OS at <a href=\"https://nodejs.org/en/download/\" target=\"blank\" rel=\"noopener noreferrer\">https://nodejs.org/en/download/</a>.\nOr, if you are a Mac user and have brew installed you can install it with brew.</p>\n\n<p>Open a terminal and run the following commands:</p>\n\n<p>Install node<br>\n<code>brew install node</code></p>\n\n<p>Verify if node was successfully installed (should output your node’s version number)<br>\n<code>node -v </code></p>\n\n<h2>Node Modules</h2>\n<p>Previously I talked about one of the benefits of node being its vast ecosystem of open source code that you can exploit.\nTo avoid having to write the same common logic over and over again, node’s greatest feature is probably its modularity.\nYou can put common logic in a node module that you can reuse over and over again in different components of your projects or even reuse them in other projects.</p>\n\n<h2>NPM</h2>\n<p>NPM or ‘Node Package Manager’ is an online registry for node modules. \nWhen you’ve written a useful module, why not share it with the world.\nWhenever you’ve implemented some common logic that can be reused across projects, it is a common practice in the world of JavaScript development to make it Open Source and share it with other developers who might want to implement the same logic.\nThis way they don’t have to write it themselves which saves times and headaches.\nJust like using other people’s modules might do for you.</p>\n\n<p>Here are some useful npm commands to get you started:</p>\n\n<p><code>npm init </code> <br>Start a new project. This creates a <code>package.json</code> file that keeps track of the installed modules (if you save them).</p>\n\n<p><code>npm install &lt;module_name&gt;</code> <br>Downloads a module that is registered (by name) on the npm registry.\nTo see which modules modules are available, simply visit <a href=\"https://www.npmjs.com\" target=\"blank\" rel=\"noopener noreferrer\">npmjs.com</a> and search for whatever you need.\nThe downloaded code will be saved in the <code>node_modules</code> directory. (Unless global install)</p>\n\n<p><code>npm install &lt;module_name&gt; —save</code> <br> installs and also updates your project’s dependencies in <code>package.json</code></p>\n\n<p><code>npm install &lt;module_name&gt; —save-dev</code> <br> installs and updates your project’s development dependencies in <code>package.json</code> (dependencies that you don’t need at runtime, i.e. testing frameworks like Jasmine or Karma, build frameworks like gulp or webpack, …)</p>\n\n<p><code>npm install &lt;module_name&gt; --global</code> <br> installs the package globally, packages with command line interfaces like gulp-cli, angular-cli are installed globally.</p>\n\n<p><code>npm uninstall</code> <br> uninstalls packages from your project</p>\n\n<p><code>npm update</code> <br> updates your packages</p>\n\n<p>For a full overview of npm commands and further documentation of npm, check out this page: <a href=\"https://docs.npmjs.com/\" target=\"blank\" rel=\"noopener noreferrer\">https://docs.npmjs.com/</a></p>\n\n<h2>Node REPL</h2>\n<p>Once you have installed node you can open a terminal window and run node.\nThis will return a node REPL where you can run JavaScript code. For example:<br></p>\n<div><div><pre><code>function add(a, b){ return a + b } &lt;enter&gt;\nadd(4, 7) &lt;enter&gt;\n// Returns 11\n</code></pre></div></div>\n<p>To terminate the REPL hit <code>CTRL + C</code>.</p>\n\n<h2>Hello World</h2>\n<p>Using the REPL can be useful sometimes, but when we want to make some persistent programs,\nwe might want to write our code in a file and run the content of that file.</p>\n\n<p>In this example we’ll create a <code>helloworld.js</code> file.\nCreate it in your favourite IDE or run <code>touch helloworld.js</code> and open it in your IDE or Vim/nano/…</p>\n\n<p>To keep it simple for this first project, we’ll simply make a program that logs ‘hello’ and ‘world’ in your terminal,\nwe’ll log them separately just to show you that there’s different ways to log data with node.</p>\n\n<p><code>helloworld.js</code><br></p>\n\n<div><div><pre><code><span>// process is a global variable that refers to the current node process you are running,</span>\n<span>// it has a stdout property that has a write method which we can call to output data.</span>\n<span>process</span><span>.</span><span>stdout</span><span>.</span><span>write</span><span>(</span><span>'hello</span><span>\\</span><span>n'</span><span>);</span> <span>// the \\n creates a new line in the terminal</span>\n\n<span>// or a bit simpler, the one we are used to from the browser, console.log</span>\n<span>console</span><span>.</span><span>log</span><span>(</span><span>'world'</span><span>);</span>\n</code></pre></div></div>\n\n<h2>Hello World Async</h2>\n\n<p>An example of non-blocking code</p>\n\n<div><div><pre><code><span>// after 2 secs, print world</span>\n<span>setTimeout</span><span>(</span> <span>()</span><span>=&gt;</span> <span>{</span> <span>console</span><span>.</span><span>log</span><span>(</span><span>'world'</span><span>);</span> <span>},</span> <span>2000</span><span>);</span>\n\n<span>console</span><span>.</span><span>log</span><span>(</span><span>'hello</span><span>\\</span><span>n'</span><span>);</span>\n<span>// prints  'hello' first, then 'world'</span>\n</code></pre></div></div>\n\n<p>When you’ve watched the video about how the V8 Engine works, you’ll know why ‘hello’ gets logged first and ‘world’ second:\nWhat happens is:</p>\n<ul>\n  <li><code>setTimeout</code> is added to the call stack</li>\n  <li><code>setTimeout</code> has a timer and a callback, this fires up  V8’s timer Web API</li>\n  <li>now that the Web API is taking care of the <code>setTimeout</code>, it gets removed from the call stack</li>\n  <li><code>console.log</code> is added to the call stack, it logs ‘hello’, and removes <code>console.log</code> from the call stack</li>\n  <li>once the timer has completed, it pushes the callback to the task queue</li>\n  <li>since there are no more function calls on the call stack, the event loop adds the callback to the call stack</li>\n  <li>finally, ‘world’ is printed.</li>\n</ul>\n\n<p>There’s no need for an additional thread to pause the program for 2 seconds and after that log ‘world’.\nThe V8 Engine handles this for us just like it does with any other async functionality in the browser.\nSo this is a very simple example of how non-blocking code works in NodeJs, the timeout did not block our code, ‘hello’ got logged right away.</p>\n\n<h2>Hello Module</h2>\n<p>Now lets give you an example how to create a node module (a very simple and not a very useful one) but just to give you an idea of how you can export your code and use it in other files.</p>\n\n<p>We’re going to create a module that has a log function which takes a parameter (name) and logs ‘hello <name>' to the console.\nThen we'll import it in another file and call the function from there.</name></p>\n\n<p><code>log.js</code></p>\n\n<div><div><pre><code><span>// create our custom hello function</span>\n<span>const</span> <span>log</span> <span>=</span> <span>(</span><span>name</span><span>)</span> <span>=&gt;</span> <span>{</span> <span>console</span><span>.</span><span>log</span><span>(</span><span>`Hello </span><span>${</span><span>name</span><span>}</span><span>`</span><span>);</span> <span>}</span>\n<span>// export this functionality</span>\n<span>module</span><span>.</span><span>exports</span> <span>=</span> <span>log</span><span>;</span>\n</code></pre></div></div>\n\n<p><code>hello.js</code></p>\n\n<div><div><pre><code><span>// the way we import another module into our file is by using require(), require is a global module for node</span>\n<span>// when requiring local modules (not the ones we install with npm), we give it the path relative to the current file,</span>\n<span>// no need for extensions, since node looks for a .js file</span>\n<span>var</span> <span>log</span> <span>=</span> <span>require</span><span>(</span><span>'./log'</span><span>);</span>\n\n<span>// now that we have our functionality available in the log variable, we can use it</span>\n<span>log</span><span>(</span><span>'Mike'</span><span>);</span>\n<span>// logs 'hello Mike' to the console</span>\n</code></pre></div></div>\n\n<p>To import modules that you’ve installed with npm, don’t specify a path, but give it the package’s name.\nFor example:</p>\n<div><div><pre><code><span>// this imports the express module from the express package if we installed it`</span>\n<span>require</span><span>(</span><span>'express'</span><span>);</span>\n</code></pre></div></div>\n\n<p>To learn more about how to use <code>require</code> go check out this useful url: <a href=\"https://medium.freecodecamp.org/requiring-modules-in-node-js-everything-you-need-to-know-e7fbd119be8\" target=\"blank\" rel=\"noopener noreferrer\">Requiring Modules</a>.</p>\n\n<h2>Hello Server</h2>\n<p>Now that we know how to require other modules, let’s create a basic server application.\nWe’re not going to install any server frameworks (like Express) yet, instead we’ll require a module that comes with node.\nNode has some built-in modules that you can use like <code>http</code> (HTTP server), <code>https</code>, <code>fs</code> (file system), <code>net</code> (TCP sockets), … <br>\n(a list can be found here: <a href=\"https://www.w3schools.com/nodejs/ref_modules.asp\" target=\"blank\" rel=\"noopener noreferrer\">https://www.w3schools.com/nodejs/ref_modules.asp</a>)</p>\n\n<p>For this program, we’ll use node’s <code>http</code> module.</p>\n\n<p><code>hello-server.js</code></p>\n\n<div><div><pre><code><span>// import the http module (docs: https://nodejs.org/api/http.html)</span>\n<span>const</span> <span>http</span> <span>=</span> <span>require</span><span>(</span><span>'http'</span><span>);</span>\n\n<span>// we create a server that will send plaintext 'Hello World' back to the client and put it in a variable server</span>\n<span>const</span> <span>server</span> <span>=</span> <span>http</span><span>.</span><span>createServer</span><span>((</span><span>req</span><span>,</span> <span>res</span><span>)</span><span>=&gt;</span> <span>{</span>\n  <span>res</span><span>.</span><span>writeHead</span><span>(</span><span>200</span><span>,</span> <span>{</span><span>'Content-Type'</span><span>:</span> <span>'text/plain'</span><span>});</span>\n  <span>res</span><span>.</span><span>end</span><span>(</span><span>'Hello world</span><span>\\</span><span>n'</span><span>);</span>\n<span>});</span>\n\n<span>// we tell the server to start listening on port 3000</span>\n<span>server</span><span>.</span><span>listen</span><span>(</span><span>3000</span><span>,</span> <span>()</span><span>=&gt;</span><span>{</span>\n    <span>// once the server has successfully started listening on port 3000</span>\n    <span>// (if the port isn't already in use)</span>\n    <span>// we'll log this to the console</span>\n    <span>console</span><span>.</span><span>log</span><span>(</span><span>'Server running at localhost:3000/'</span><span>);</span>\n<span>});</span>\n\n</code></pre></div></div>\n<p>You can now open our browser, visit <a href=\"localhost:3000\" target=\"blank\" rel=\"noopener noreferrer\">localhost:3000</a> and should see our ‘Hello world’ response from the server.</p>\n\n<h2>Event Emitter</h2>\n<p>Another great feature that comes with NodeJs is the event emitter.\nThe event emitter allows us to emit and listen for named events,\nwhenever the EventEmitter emits an event all the functions attached to the named event are called synchronously.</p>\n\n<p>It’s real simple, let us show you with an example:</p>\n\n<div><div><pre><code><span>// first we require the 'events' module that comes with node</span>\n<span>const</span> <span>events</span> <span>=</span> <span>require</span><span>(</span><span>'events'</span><span>);</span>\n<span>// next we'll create a new instance of the events module's event emitter</span>\n<span>const</span> <span>eventEmitter</span> <span>=</span> <span>new</span> <span>events</span><span>.</span><span>EventEmitter</span><span>();</span>\n\n<span>// we'll tell the event emitter that we are going to listen for the 'hello' event</span>\n<span>// and give it a callback function that gets called when the event is triggered</span>\n<span>eventEmitter</span><span>.</span><span>on</span><span>(</span><span>'hello'</span><span>,</span> <span>(</span><span>data</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>// as you can see, our callback function accepts a data parameter,</span>\n  <span>// we'll check if the event was emitted with data and has a 'name' property, if so we log 'Hello name'</span>\n  <span>if</span> <span>(</span><span>data</span> <span>!=</span> <span>null</span> <span>&amp;&amp;</span> <span>data</span><span>.</span><span>name</span><span>)</span> <span>{</span>\n    <span>console</span><span>.</span><span>log</span><span>(</span><span>`Hello </span><span>${</span><span>data</span><span>.</span><span>name</span><span>}</span><span>`</span><span>);</span>\n  <span>}</span> <span>else</span> <span>{</span>\n    <span>// if no data was passed to the callback, we'll simply log 'Hello world'</span>\n    <span>console</span><span>.</span><span>log</span><span>(</span><span>'Hello world'</span><span>);</span>\n  <span>}</span>\n<span>});</span>\n\n<span>// now that we are listening for the 'hello' event, we'll emit the event, once with data, and once without data</span>\n<span>eventEmitter</span><span>.</span><span>emit</span><span>(</span><span>'hello'</span><span>,</span> <span>{</span><span>name</span><span>:</span> <span>'Mike'</span><span>});</span> <span>// logs 'Hello Mike'</span>\n<span>eventEmitter</span><span>.</span><span>emit</span><span>(</span><span>'hello'</span><span>);</span> <span>// logs 'Hello world'</span>\n</code></pre></div></div>\n\n<h2>Streams</h2>\n<p>There are many ways that you can utilise readable/writable streams with NodeJs, for example the file system to read/write to files.\nBut to give you a simple example, let’s reuse our code from our hello server.\nSince the request object is a readable stream and the response object is a writable stream,\nwe can create an application that pipes the data from the request, back to the response.\nLet’s see it in action with an example:</p>\n\n<p><code>streams.js</code></p>\n\n<div><div><pre><code><span>const</span> <span>http</span> <span>=</span> <span>require</span><span>(</span><span>'http'</span><span>);</span>\n\n<span>const</span> <span>server</span> <span>=</span> <span>http</span><span>.</span><span>createServer</span><span>((</span><span>request</span><span>,</span> <span>response</span><span>)</span><span>=&gt;</span> <span>{</span>\n  <span>res</span><span>.</span><span>writeHead</span><span>(</span><span>200</span><span>,</span> <span>{</span><span>'Content-Type'</span><span>:</span> <span>'text/plain'</span><span>});</span>\n  <span>// The request is a readable stream, this means that the connection isn't immediately closed,</span>\n  <span>// the connection stays open for as long as the client keeps sending data.</span>\n  <span>// Streams inherit from the event emitter, so we can listen for the request stream's 'readable' and 'end' events</span>\n  <span>// the readable event is triggered whenever the request has sent a chunk of data that can be read.</span>\n  <span>req</span><span>.</span><span>on</span><span>(</span><span>'readable'</span><span>,</span> <span>()</span><span>=&gt;</span><span>{</span>\n      <span>let</span> <span>chunk</span> <span>=</span> <span>null</span><span>;</span>\n      <span>// as long as we can read chunks from the request, we write those chunks to the response</span>\n      <span>while</span><span>(</span><span>null</span> <span>!==</span> <span>(</span><span>chunk</span> <span>=</span> <span>request</span><span>.</span><span>read</span><span>())){</span>\n         <span>// we can keep writing to the writable response stream as long as the connection is open,</span>\n         <span>// so we keep piping the readable data to the response</span>\n          <span>response</span><span>.</span><span>write</span><span>(</span><span>chunk</span><span>);</span>\n      <span>}</span>\n      <span>// you can test it with curl from the terminal by sending a 'hello' string as data,</span>\n      <span>// simply run: curl -d 'hello' http://localhost:3000</span>\n      <span>// the 'hello' string is being sent back to the client</span>\n  <span>});</span>\n\n  <span>req</span><span>.</span><span>on</span><span>(</span><span>'end'</span><span>,</span> <span>()</span><span>=&gt;</span><span>{</span>\n      <span>// once the request stream is closed, we also close the response stream</span>\n      <span>response</span><span>.</span><span>end</span><span>();</span>\n  <span>});</span>\n\n  <span>/*\n\tI've written it out completely to show you what is does,\n\tbut in fact we can use the pipe method to refactor the request's 'on readable' in some much simpler code\n\treq.on('readable', ()=&gt;{\n             request.pipe(response)\n        })\n   */</span>\n<span>});</span>\n\n<span>server</span><span>.</span><span>listen</span><span>(</span><span>3000</span><span>,</span> <span>()</span><span>=&gt;</span><span>{</span>\n    <span>console</span><span>.</span><span>log</span><span>(</span><span>'Server running at localhost:3000/'</span><span>);</span>\n<span>});</span>\n</code></pre></div></div>\n\n<h2>Cluster</h2>\n<p>A single instance of NodeJs runs in a single thread.\nTo take advantage of multi-core systems, the user will sometimes want to launch a cluster of NodeJs processes to handle the load.</p>\n\n<div><div><pre><code><span>// require the cluster module</span>\n<span>const</span> <span>cluster</span> <span>=</span> <span>require</span><span>(</span><span>'cluster'</span><span>);</span>\n<span>// we'll set up a http server on all cpus and load balance between them</span>\n<span>const</span> <span>http</span> <span>=</span> <span>require</span><span>(</span><span>'http'</span><span>);</span>\n<span>// we need to know the amount of cpus our machine has available,</span>\n<span>// so we do this with the 'os' module's cpus method which returns an array of cpus, to get the amount we get the array's length</span>\n<span>const</span> <span>numCPUs</span> <span>=</span> <span>require</span><span>(</span><span>'os'</span><span>).</span><span>cpus</span><span>().</span><span>length</span><span>;</span>\n\n<span>if</span> <span>(</span><span>cluster</span><span>.</span><span>isMaster</span><span>)</span> <span>{</span>\n  <span>// the cluster will first start up a master process that forks itself onto the other cpus and handles the load balancing between these workers</span>\n  <span>console</span><span>.</span><span>log</span><span>(</span><span>`Master </span><span>${</span><span>process</span><span>.</span><span>pid</span><span>}</span><span> is running`</span><span>);</span>\n\n  <span>// fork this process to a worker for every cpu that is left (note the &lt; and not &lt;=)</span>\n  <span>for</span> <span>(</span><span>let</span> <span>i</span> <span>=</span> <span>0</span><span>;</span> <span>i</span> <span>&lt;</span> <span>numCPUs</span><span>;</span> <span>i</span><span>++</span><span>)</span> <span>{</span>\n    <span>cluster</span><span>.</span><span>fork</span><span>();</span>\n  <span>}</span>\n\n  <span>// when a worker dies, it emits an exit event</span>\n  <span>cluster</span><span>.</span><span>on</span><span>(</span><span>'exit'</span><span>,</span> <span>(</span><span>worker</span><span>,</span> <span>code</span><span>,</span> <span>signal</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>console</span><span>.</span><span>log</span><span>(</span><span>`worker </span><span>${</span><span>worker</span><span>.</span><span>process</span><span>.</span><span>pid</span><span>}</span><span> died`</span><span>);</span>\n  <span>});</span>\n<span>}</span> <span>else</span> <span>{</span>\n  <span>// if the cluster is not master, it (in this case) sets up our http server</span>\n  <span>// workers can share any TCP connection</span>\n\n  <span>http</span><span>.</span><span>createServer</span><span>((</span><span>req</span><span>,</span> <span>res</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>res</span><span>.</span><span>writeHead</span><span>(</span><span>200</span><span>);</span>\n    <span>res</span><span>.</span><span>end</span><span>(</span><span>'hello world</span><span>\\</span><span>n'</span><span>);</span>\n  <span>}).</span><span>listen</span><span>(</span><span>8000</span><span>);</span>\n\n  <span>console</span><span>.</span><span>log</span><span>(</span><span>`Worker </span><span>${</span><span>process</span><span>.</span><span>pid</span><span>}</span><span> started`</span><span>);</span>\n<span>}</span>\n\n</code></pre></div></div>\n<p>More information on clusters on <a href=\"https://nodejs.org/api/cluster.html\" target=\"blank\" rel=\"noopener noreferrer\">https://nodejs.org/api/cluster.html</a></p>\n\n<h2>Finally</h2>\n<p>So that’s it for this blog post. I hope it was useful to you.\nIf you have any suggestions or feel like I’ve forgotten to mention some important stuff, feel free to comment below.\nI’m currently working on some follow-up tutorials:</p>\n<ul>\n  <li>Building REST APIs with NestJs (TypeScript),</li>\n  <li>Microservices with NodeJs (Moleculer),</li>\n  <li>Serverless with NodeJs</li>\n</ul>\n\n<p>Once these are finished I’ll add the links below, so stay tuned!</p>","filePath":"pages/Node.js/.md","_id":"5iyGZUFvZxEjjwza","dateUpdated":1542818686758}
{"date":"2018-12-26T15:45:49.147Z","title":"Understanding the For...of Loop In JavaScript","sourceUrl":"https://blog.bitsrc.io/understanding-the-for-of-loop-in-javascript-8aded97d7ef8","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"," Loop"],"author":"Chidume Nnamdi","excerpt":"","dateCreated":1545839005952,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Wed Dec 26 2018 21:15:49 GMT+0530 (India Standard Time)'\ntitle: 'Understanding the For...of Loop In JavaScript'\ntags: ['JavaScript','Loop']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://blog.bitsrc.io/understanding-the-for-of-loop-in-javascript-8aded97d7ef8'\ntype: 'Post'\n---\n    ","htmlCode":"<p><span>In</span>JavaScript, we have so many looping statements:</p><ul><li><code>while</code>&nbsp;statement</li><li><code>do...while</code>&nbsp;statement</li><li><code>for</code>&nbsp;statement</li><li><code>for...in</code>&nbsp;statement</li><li><code>for...of</code>&nbsp;statement</li></ul><p>All these have one basic function: they repeat until a certain condition is met.</p><p>In this article, we will look into the&nbsp;<code>for...of</code>&nbsp;statement to see how it works and where it can be used to write better code in our JS applications.</p><p>Tip: Build JS apps faster with&nbsp;<a href=\"https://github.com/teambit/bit\" data-href=\"https://github.com/teambit/bit\" rel=\"noopener\" target=\"_blank\">Bit (open-source)</a>. It’s the fastest way to share and reuse common components between projects, share them as a team and use them to build like Lego. It’s free, so feel free to give it a go.</p><div><a href=\"https://bitsrc.io/\" data-href=\"https://bitsrc.io\" title=\"https://bitsrc.io\"><span>Bit - Share and build with code components</span><br><span>Bit helps you share, discover and use code components between projects and applications to build new features and…</span>bitsrc.io</a><a href=\"https://bitsrc.io/\" data-media-id=\"037be1399614ce79f1e8922e23a61421\" data-thumbnail-img-id=\"0*XTvlfwdUs9TFPuUM\"></a></div><h3>for…of</h3><p><code>for...of</code>&nbsp;is a type of&nbsp;<code>for</code>&nbsp;statement to cycles through&nbsp;<code>iterables(iterable objects)</code>&nbsp;until it reaches the end of the line.</p><p>Let’s look at a basic example:</p><pre>let arr = [2,4,6,8,10]</pre><pre>for(let a of arr) {<br>    log(a)<br>}<br>// It logs:<br>// 2<br>// 4<br>// 6<br>// 8<br>// 10</pre><p>With much less code than the&nbsp;<code>for</code>&nbsp;statement, we looped through the&nbsp;<code>arr</code>array.</p><pre>let myname = \"Nnamdi Chidume\"</pre><pre>for (let a of myname) {<br>    log(a)<br>}</pre><pre>// It logs:<br>// N<br>// n<br>// a<br>// m<br>// d<br>// i<br>//<br>// C<br>// h<br>// i<br>// d<br>// u<br>// m<br>// e</pre><p>You know if we used for loop, we will have to employ some mathematics and logic to know when we reached the end of&nbsp;<code>myname</code>&nbsp;and quit. But you see with for..of loop we save ourselves some headache&nbsp;:).</p><p>As we can see&nbsp;<code>for...of</code>&nbsp;has the following general definition:</p><pre><code>for ( variable of iterable) {<br>    //...<br>}</code></pre><p><code>variable</code>&nbsp;- holds the value of each property of the iterable on each iteration.&nbsp;<code>iterable</code>&nbsp;- is the object to be iterated upon.</p><h3>Iterables and&nbsp;Iterator</h3><p>At the definition of for…of loop, we said it “cycles through&nbsp;<em>iterables(iterable objects)</em>”. So with this, it means to tell us that&nbsp;<code>for...of</code>&nbsp;loop could not be used unless the item it is going to try to loop over is an iterable.</p><p>Then, what are iterables?</p><p>Simply put, Iterables are objects that iteration could be performed on. In ECMAScript 2015 a coupla additions were made. These additions were new protocols. And among the protocols were the Iterator protocol and Iterable protocol.</p><p>According to Mozilla Developer, “The iterable protocol allows JavaScript objects to define or customize their iteration behavior, such as what values are looped over in a for..of construct.” and “In order to be iterable, an object must implement the&nbsp;<code>@@iterator</code>&nbsp;method, meaning that the object (or one of the objects up its prototype chain) must have a property with a&nbsp;<code>@@iterator</code>&nbsp;key which is available via constant&nbsp;<code>Symbol.iterator</code>.\"</p><p>What this actually means is that, for your objects to be able to be looped through by&nbsp;<code>for...of</code>&nbsp;it must be iterable in other words it must have the weird&nbsp;<code>@@iterator</code>&nbsp;as property. That's conforming to the iterable protocol.</p><p>So when the object with the&nbsp;<code>@@iterator</code>&nbsp;property is to be iterated by&nbsp;<code>for...of</code>, the @@iterator method is called by the same&nbsp;<code>for...of</code>. The @@iterator must return an iterator.</p><p>Now, the Iterator protocol defines a way by which a stream of values could be returned from an object. An iterator must implement the&nbsp;<code>next</code>&nbsp;method. The next method has a set of rules to follow:</p><ul><li>It must return an object with properties done, value {done, value}</li><li>The done is Boolean that denotes when the end of the stream is reached.</li><li>The value holds the value of the current cycle.</li></ul><p>Example:</p><pre>const createIterator = function () {<br>    var array = ['Nnamdi','Chidume']<br>    return  {<br>        next: function() {<br>            if(this.index == 0) {<br>                this.index++<br>                return { value: array[this.index], done: false }<br>            }<br>            if(this.index == 1) {<br>                return { value: array[this.index], done: true }<br>            }<br>        },<br>        index: 0 <br>    }<br>}<br>const iterator = createIterator()<br>log(iterator.next()) // Nnamdi<br>log(iterator.next()) // Chidume</pre><p>Basically, the @@iterator method returns an iterator which the&nbsp;<code>for...of</code>uses to cycle through the implementing object to get the values. So, if an object doesn't have the&nbsp;<code>@@iterator</code>&nbsp;method and/or returns an iterator, the&nbsp;<code>for...of</code>&nbsp;statement on it won't work.</p><pre>const nonIterable = //...<br> for( let a of nonIterable) {<br>     // ...<br> }</pre><pre>for( let a of nonIterable) {<br>               ^</pre><pre>TypeError: nonIterable is not iterable</pre><p>Examples of Iterables are:</p><ul><li>String</li><li>Map</li><li>TypedArray</li><li>Array</li><li>Set</li><li>Generator</li></ul><p>Notice that Object is missing. Object is not an iterable. If we try to use loop through an object’s properties using the for…of loop:</p><pre>let obj {<br>    firstname: \"Nnamdi\",<br>    surname: \"Chidume\"<br>}</pre><pre>for(const a of obj) {<br>    log(a)<br>}</pre><p>It will throw an error:</p><pre><code>for(const a of obj) {<br>               ^</code></pre><pre><code>TypeError: obj is not iterable</code></pre><p>We can check if an object is iterable by doing this:</p><pre>const str = new String('Chidume');<br>log(typeof str[Symbol.iterator]);</pre><pre>function</pre><p>See, it logs a&nbsp;<code>function</code>, that shows @@iterator property is present in String. If we try Object:</p><pre>const obj = {<br>    surname: \"Chidume\"<br>}<br>log(typeof obj[Symbol.iterator]);</pre><pre>undefined</pre><p>Woo!!&nbsp;<code>undefined</code>&nbsp;means not present.</p><h3>for…of: Array</h3><p>An Array is an iterable.</p><pre>log(typeof new Array(\"Nnamdi\", \"Chidume\")[Symbol.iterator]);<br>// function</pre><p>That’s why we can perform&nbsp;<code>for...of</code>&nbsp;on it.</p><pre>const arr = [\"Chidume\", \"Nnamdi\", \"loves\", \"JS\"]</pre><pre>for(const a of arr) {<br>    log(a)<br>}</pre><pre>// It logs:<br>// Chidume<br>// Nnamdi<br>// loves<br>// JS</pre><pre>const arr = new Array(\"Chidume\", \"Nnamdi\", \"loves\", \"JS\")<br>for(const a of arr) {<br>    log(a)<br>}</pre><pre>// It logs:<br>// Chidume<br>// Nnamdi<br>// loves<br>// JS</pre><h3>for…of: String</h3><p>String is also iterable.</p><pre>const myname = \"Chidume Nnamdi\"</pre><pre>for(const a of myname) {<br>    log(a)<br>}</pre><pre>// It logs:<br>// C<br>// h<br>// i<br>// d<br>// u<br>// m<br>// e<br>// <br>// N<br>// n<br>// a<br>// m<br>// d<br>// i</pre><pre>const str = new String(\"The Young\")</pre><pre>for(const a of str) {<br>    log(a)<br>}</pre><pre>// It logs:<br>// T<br>// h<br>// e<br>// <br>// Y<br>// o<br>// u<br>// n<br>// g</pre><h3>for…of: Map</h3><pre>const map = new Map([[\"surname\", \"Chidume\"],[\"firstname\",\"Nnamdi\"]])</pre><pre>for(const a of map) {<br>    log(a)<br>}</pre><pre>// It logs:<br>// [\"surname\", \"Chidume\"]<br>// [\"firstname\",\"Nnamdi\"]</pre><pre>for(const [key, value] of map) {<br>    log(`key: ${key}, value: ${value}`)<br>}<br>// It logs:<br>// key: surname, value: Chidume<br>// key: firstname, value: Nnamdi</pre><h3>for…of: Set</h3><pre>const set = new Set([\"Chidume\",\"Nnamdi\"])</pre><pre>for(const a of set) {<br>    log(a)<br>}</pre><pre>// It logs:<br>// Chidume<br>// Nnamdi</pre><h3>for…of: TypedArray</h3><pre>const typedarray = new Uint8Array([0xe8, 0xb4, 0xf8, 0xaa]);</pre><pre>for (const a of typedarray) {<br>  log(a);<br>}</pre><pre>// It logs:<br>// 232<br>// 180<br>// 248<br>// 170</pre><h3>for…of: arguments</h3><p>arguments is iterable? Well, let’s check it out:</p><pre>// testFunc.js<br>function testFunc(arg) {<br>    log(typeof arguments[Symbol.iterator])<br>}<br>testFunc()</pre><pre>$ node testFunc<br>function</pre><p>Well, that settles it. If we investigate further, arguments is actually of type IArguments and the class implementing the IArguments interface has the @@iterator property which makes arguments iterable.</p><pre>// testFunc.js<br>function testFunc(arg) {<br>    log(typeof arguments[Symbol.iterator])<br>    for(const a of arguments) {<br>        log(a)<br>    }<br>}<br>testFunc(\"Chidume\")</pre><pre>// It:<br>// Chidume</pre><h3>for…of: Custom Iterables</h3><p>Like we demonstrated in the previous sections we can create a custom iterable that can be iterated by&nbsp;<code>for..of</code>.</p><pre>var obj = {}<br>obj[Symbol.iterator] = function() {<br>    var array = [\"Chidume\", \"Nnamdi\"]<br>    return {<br>        next: function() {<br>            let value = null<br>            if (this.index == 0) {<br>                value = array[this.index]<br>                this.index++<br>                    return { value, done: false }<br>            }<br>            if (this.index == 1) {<br>                value = array[this.index]<br>                this.index++<br>                    return { value, done: false }<br>            }<br>            if (this.index == 2) {<br>                return { done: true }<br>            }<br>        },<br>        index: 0<br>    }<br>};</pre><p>I created an object&nbsp;<code>obj</code>&nbsp;and to make it iterable, I assigned a&nbsp;<code>@@iterator</code>property to it using the&nbsp;<code>[Symbol.iterator]</code>. Then, I made the function to return an iterator.</p><pre>//...<br>return {<br>    next: function() {...}<br>}<br>//...</pre><p>Remember, an iterator must have a&nbsp;<code>next()</code>&nbsp;function.</p><p>Inside the next function, I implemented the values will be returning to for..of during iteration. Looking at it above, you will see that what I did is quite clear.</p><p>Let’s test this our&nbsp;<code>obj</code>&nbsp;against a for..of to see what will happen:</p><pre>// customIterableTest.js<br>//...<br>for (let a of obj) {<br>    log(a)<br>}</pre><pre>$ node customIterableTest<br>Chidume<br>Nnamdi</pre><p>Yea!!! You see it worked!</p><h3>Making Object and plain objects&nbsp;iterable</h3><p>Plain objects are not iterable and also objects from&nbsp;<code>Object</code>&nbsp;are not iterable.</p><p>We can by-pass this by adding @@iterator to the Object.prototype with a custom iterator.</p><pre>Object.prototype[Symbol.iterator] = function() {<br>    let properties = Object.keys(this)<br>    let count = 0<br>    let isdone = false<br>    let next = () =&gt; {<br>        let value = this[properties[count]]<br>        if (count == properties.length) {<br>            isdone = true<br>        }<br>        count++<br>        return { done: isdone, value }<br>    }<br>    return { next }<br>}</pre><p>The&nbsp;<code>properties</code>&nbsp;variable holds the properties of the object gotten using the&nbsp;<code>Object.keys()</code>&nbsp;call. In the next function, we simply return each value from the properties variable and update the count so as to get the next value from the properties variable using the count variable as the index. When the count equals the length of the properties we set done to true, so the iteration stops.</p><p>Testing using Object:</p><pre>let o = new Object()<br>o.s = \"SK\"<br>o.me = 'SKODA'<br>for (let a of o) {<br>    log(a)<br>}</pre><pre>SK<br>SKODA</pre><p>It works!!!</p><p>With plain objects:</p><pre>let dd = {<br>    shit: 900,<br>    opp: 800<br>}</pre><pre>for (let a of dd) {<br>    log(a)<br>}</pre><pre>900<br>800</pre><p>Tada!!&nbsp;:)</p><p>So we can add this as a polyfill so we can use for..of on objects where ever we want in our app.</p><h3>Using for…of on ES6&nbsp;classes</h3><p>We can use for..of to iterate through a list of data in an instance of a class.</p><pre>class Profiles {<br>    constructor(profiles) {<br>        this.profiles = profiles<br>    }<br>}</pre><pre>const profiles = new Profiles([<br>    {<br>        firstname: \"Nnamdi\",<br>        surname: \"Chidume\"<br>    },<br>    {<br>        firstname: \"Philip\",<br>        surname: \"David\"<br>    }<br>])</pre><p>The class Profiles has a property&nbsp;<code>profile</code>&nbsp;that holds an array of users. We may need to display this data in our app using for...of. If we do this:</p><pre>//...<br>for(const a of profiles) {<br>    log(a)<br>}</pre><p>Obviously, it won’t work</p><pre>for(const a of profiles) {<br>               ^</pre><pre>TypeError: profiles is not iterable</pre><p>To make&nbsp;<code>profiles</code>&nbsp;iterable remember the rules:</p><ul><li>The object must have the&nbsp;<code>@@iterator</code>&nbsp;property.</li><li>The&nbsp;<code>@@iterator</code>&nbsp;function must return an iterator.</li><li>The&nbsp;<code>iterator</code>&nbsp;must implement the&nbsp;<code>next()</code>&nbsp;function.</li></ul><p>We define the @@iterator property using the familiar constant&nbsp;<code>[Symbol.iterator]</code>.</p><pre>class Profiles {<br>    constructor(profiles) {<br>            this.profiles = profiles<br>        }<br>        [Symbol.iterator]() {<br>            let props = this.profiles<br>            let propsLen = this.profiles.length<br>            let count = 0<br>            return {<br>                next: function() {<br>                    if (count &lt; propsLen) {<br>                        return { value: props[count++], done: false }<br>                    }<br>                    if (count == propsLen) {<br>                        return { done: true }<br>                    }<br>                }<br>            }<br>        }<br>}</pre><p>Then, if we run:</p><pre>//...<br>for(const a of profiles) {<br>    log(a)<br>}</pre><pre>$ node profile.js<br>{ firstname: 'Nnamdi', surname: 'Chidume' }<br>{ firstname: 'Philip', surname: 'David' }</pre><p>We have our profiles property displayed.</p><h3>Async Iterator</h3><p>A new construct was introduced to ECMAScript 2018 to be able to loop through an array of Promises, this new construct is&nbsp;<code>for-await-of</code>&nbsp;and a new Symbol&nbsp;<code>Symbol.asyncIterator</code>.</p><p>The&nbsp;<code>Symbol.asyncIterator</code>&nbsp;function in an iterable returns an iterator that returns a Promise.</p><pre>const f = {<br>    [Symbol.asyncIterator]() {<br>        return new Promise(...)<br>    }<br>}</pre><p>The difference between&nbsp;<code>[Symbol.iterator]</code>&nbsp;and&nbsp;<code>[Symbol.asyncIterator]</code>&nbsp;is that the former returns&nbsp;<code>{ value, done }</code>&nbsp;while the latter returns a&nbsp;<code>Promise</code>that resolves to&nbsp;<code>{ value, done }</code>.</p><p>Our f above will look like this:</p><pre>const f = {<br>    [Symbol.asyncIterator]() {<br>        return {<br>            next: function() {<br>                if (this.index == 0) {<br>                    this.index++<br>                        return new Promise(res =&gt; res({ value: 900, done: false }))<br>                }<br>                return new Promise(res =&gt; res({ value: 1900, done: true }))<br>            },<br>            index: 0<br>        }<br>    }<br>}</pre><p>The&nbsp;<code>f</code>&nbsp;is an async iterable. You see it always returns a Promise, the Promise has a resolve function that returns a value at each iteration.</p><p>To iterate through&nbsp;<code>f</code>, we will not use&nbsp;<code>for..of</code>&nbsp;rather we will use the new&nbsp;<code>for-await-of</code>&nbsp;like this:</p><pre>// ...<br>async function fAsyncLoop(){<br>    for await (const _f of f) {<br>        log(_f)<br>    }<br>}<br>fAsyncLoop()</pre><pre>$ node fAsyncLoop.js<br>900</pre><p>We can also use this&nbsp;<code>for-await-of</code>&nbsp;to loop through an array of Promises:</p><pre>const arrayOfPromises = [<br>    new Promise(res =&gt; res(\"Nnamdi\")),<br>    new Promise(res =&gt; res(\"Chidume\"))<br>]</pre><pre>async function arrayOfPromisesLoop(){<br>    for await (const p of arrayOfPromises) {<br>        log(p)<br>    }<br>}<br>arrayOfPromisesLoop()</pre><pre>$ node arrayOfPromisesLoop.js<br>Nnamdi<br>Chidume</pre><h3>Conclusion</h3><p>In this post we dug deep into&nbsp;<code>for...of</code>loop. We started by defining what for..of is, and went on to see what makes what iterable. Then, we looked at the complete list of iterables in JS and went through each of them to see how to work with&nbsp;<code>for...of</code>&nbsp;loop on them.</p><p>Like I said in the beginning, for..of saves us a lot of complexities and logic and helps make our code looks cleaner and readable. If you haven’t tried this awesome for- loop mutation, I think now will be the right time to do so.</p><p>If you have any question regarding this or anything I should add, correct or remove, feel free to comment below, and anything or DM me. Thanks for reading!&nbsp;:)</p>","filePath":"pages/JavaScript/.md","_id":"6AkFbyN5SRzqWTKh"}
{"date":{"$$date":1541516013550},"title":"How to Sort an Array of Dates with JavaScript","sourceUrl":"https://gist.github.com/onpubcom/1772996","path":"JavaScript/JavaScript/JavaScript/","category":"JavaScript","tags":["JavaScript"," Date"],"author":"onpubcom","excerpt":"","dateCreated":1541515832495,"coverImage":"","type":"Snippet","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Tue Nov 06 2018 20:22:19 GMT+0530 (India Standard Time)'\ntitle: 'How to Sort an Array of Dates with JavaScript'\ntags: ['JavaScript','Date']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://gist.github.com/onpubcom/1772996'\ntype: 'Snippet'\n---\n    ","htmlCode":"<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n// First let's create an array of JavaScript Date\n// objects.\n// More info about the Date class:\n// http://w3schools.com/js/js_obj_date.asp\nvar dates = [\nnew Date(2010, 4, 10, 10, 07, 16),\nnew Date(2010, 4, 8, 9, 16, 09),\nnew Date(2010, 3, 30, 0, 15, 49),\nnew Date(2010, 3, 8, 10, 08, 35)];\n\n// Now we will define our date comparison functions. These are callbacks\n// that we will be providing to the array sort method below.\nvar date_sort_asc = function (date1, date2) {\n  // This is a comparison function that will result in dates being sorted in\n  // ASCENDING order. As you can see, JavaScript's native comparison operators\n  // can be used to compare dates. This was news to me.\n  if (date1 &gt; date2) return 1;\n  if (date1 &lt; date2) return -1;\n  return 0;\n};\n\nvar date_sort_desc = function (date1, date2) {\n  // This is a comparison function that will result in dates being sorted in\n  // DESCENDING order.\n  if (date1 &gt; date2) return -1;\n  if (date1 &lt; date2) return 1;\n  return 0;\n};\n\n// Finally, we are now able to call the sort method on our array of dates.\n// More info about array sorting: http://w3schools.com/jsref/jsref_sort.asp\n\n// First let's sort the array in ascending order.\ndates.sort(date_sort_asc);\n\n// Now let's output the results to the page to show that the dates are now\n// sorted in ascending order.\ndocument.write('&lt;p&gt;Dates sorted in ascending order (oldest to newest):&lt;/p&gt;');\nfor (var i = 0; i &lt; dates.length; i++) {\n  document.write(i + ': ' + dates[i] + '&lt;br&gt;');\n}\n\n// Now let's sort the dates in descending order and output the results.\ndates.sort(date_sort_desc);\n\ndocument.write('&lt;p&gt;Dates sorted in descending order (newest to oldest):&lt;/p&gt;');\nfor (var i = 0; i &lt; dates.length; i++) {\n  document.write(i + ': ' + dates[i] + '&lt;br&gt;');\n}\n\n// That's all there is to it!\n// From: http://onpub.com/index.php?s=7&amp;a=109\n\n&lt;/script&gt;\n</code></pre>","filePath":"pages/JavaScript/.md","_id":"6RYLnNdi0TGijeMV","dateUpdated":1541516013551}
{"date":"2019-04-03T15:07:05.543Z","title":"Designing for accessibility is not that hard","sourceUrl":"https://uxdesign.cc/designing-for-accessibility-is-not-that-hard-c04cc4779d94","path":"Accessibility/","category":"Accessibility","tags":["accessibility"],"author":"Pablo Stanley","excerpt":"Seven easy-to-implement guidelines to design a more accessible web","dateCreated":1554303897220,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Accessibility/'\ndate: 'Wed Apr 03 2019 20:37:05 GMT+0530 (India Standard Time)'\ntitle: 'Designing for accessibility is not that hard'\ntags: ['accessibility']\ncategory: 'Accessibility'\ncategoryColor: '#F3C610'\nexcerpt: 'Seven easy-to-implement guidelines to design a more accessible web'\ncoverImage: ''\nsourceUrl: 'https://uxdesign.cc/designing-for-accessibility-is-not-that-hard-c04cc4779d94'\ntype: 'Post'\n---\n    ","htmlCode":"<div><p>Digital\n accessibility refers to the practice of building digital content and \napplications that can be used by a wide range of people, including \nindividuals who have visual, motor, auditory, speech, or cognitive \ndisabilities.</p><p>There’s\n a myth that making a website accessible is difficult and expensive, but\n it doesn’t have to. Designing a product from scratch that meets the \nrequirements for accessibility doesn’t add extra features or content; \ntherefore there shouldn’t be additional cost and effort.</p><p>Fixing\n a site that is already inaccessible may require some effort, though. \nWhen I used to work at Carbon Health, we checked the accessibility of \nour site using the <a href=\"https://chrome.google.com/webstore/detail/axe-coconut/iobddmbdndbbbfjopjdgadphaoihpojp?hl=en\" data-href=\"https://chrome.google.com/webstore/detail/axe-coconut/iobddmbdndbbbfjopjdgadphaoihpojp?hl=en\" rel=\"noopener\" target=\"_blank\">AXE Chrome Extension</a>.\n We found 28 violations that we needed to solve on the home page alone. \nIt sounded complicated, but we discovered that these problems were not \nthat hard to correct; it was just a matter of investing time and \nresearch to solve them. We were able to get to zero errors in a couple \nof days.</p><p>I\n want to share with you some of the simple steps we took so you can also\n make your sites more accessible. These principles focus on web and \nmobile accessibility.</p><p>But before we get started, let’s talk about why that’s important.</p><h3>Why designing for accessibility? 🤔</h3><p>As\n designers, we have the power and responsibility to make sure that \neveryone has access to what we create regardless of ability, context, or\n situation. The great thing about making our work accessible is that it \nbrings a better experience to everyone.</p><p>There\n are over 56 million people in the United States (nearly 1 in 5) and \nover 1 billion people worldwide who have a disability. In 2017, there \nwere <a href=\"https://www.adatitleiii.com/2018/01/2017-website-accessibility-lawsuit-recap-a-tough-year-for-businesses/\" data-href=\"https://www.adatitleiii.com/2018/01/2017-website-accessibility-lawsuit-recap-a-tough-year-for-businesses/\" rel=\"noopener\" target=\"_blank\">814 website accessibility lawsuits </a>filed\n in federal and state courts. These two pieces of data alone should \nconvince us of the importance of designing for accessibility.</p><p>There is also a <a href=\"https://www.w3.org/WAI/bcase/Overview\" data-href=\"https://www.w3.org/WAI/bcase/Overview\" rel=\"noopener\" target=\"_blank\">strong business case for accessibility</a>:\n studies show that accessible websites have better search results, they \nreach a bigger audience, they’re SEO friendly, have faster download \ntimes, they encourage good coding practices, and they always have better\n usability.</p><p>These seven guidelines are relatively easy to implement and can help your products get closer to meet level <a href=\"https://www.w3.org/TR/WCAG21/\" data-href=\"https://www.w3.org/TR/WCAG21/\" rel=\"noopener\" target=\"_blank\">AA of the Web Content Accessibility Guidelines</a>\n (WCAG 2.0), and work on the most commonly used assistive \ntechnologies — including screen readers, screen magnifiers, and speech \nrecognition tools.</p><h3>1. Add enough color contrast&nbsp;🖍</h3></div><div><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*TD0is7b5AnqHtyhkVJ4Qsw.gif\" data-width=\"1241\" data-height=\"698\" data-action=\"zoom\" data-action-value=\"1*TD0is7b5AnqHtyhkVJ4Qsw.gif\" data-scroll=\"native\"></div></div></figure></div><div><figure data-scroll=\"native\"><div><div data-image-id=\"1*TD0is7b5AnqHtyhkVJ4Qsw.gif\" data-width=\"1241\" data-height=\"698\" data-action=\"zoom\" data-action-value=\"1*TD0is7b5AnqHtyhkVJ4Qsw.gif\" data-scroll=\"native\"><img data-src=\"https://cdn-images-1.medium.com/max/2400/1*TD0is7b5AnqHtyhkVJ4Qsw.gif\" src=\"https://cdn-images-1.medium.com/max/2400/1*TD0is7b5AnqHtyhkVJ4Qsw.gif\"></div></div><figcaption>Buttons with good color contrast are easier to read for Guadalupe.</figcaption></figure></div><div><p>Color\n contrast is an often overlooked web accessibility problem. People who \nhave low vision could find it difficult to read text from a background \ncolor if it has low contrast. In a <a href=\"http://www.who.int/en/news-room/fact-sheets/detail/blindness-and-visual-impairment\" data-href=\"http://www.who.int/en/news-room/fact-sheets/detail/blindness-and-visual-impairment\" rel=\"noopener\" target=\"_blank\">fact sheet on visual impairment and blindness</a>,\n the World Health Organization (WHO) estimates that there are 217 \nmillion who have moderate to severe vision impairment. So, it is \ncritical to consider the sufficient contrast between text and \nbackgrounds.</p><p>According to the <a href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html\" data-href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html\" rel=\"noopener\" target=\"_blank\"><strong>W3C</strong></a>, the <a href=\"https://en.wikipedia.org/wiki/Contrast_ratio\" data-href=\"https://en.wikipedia.org/wiki/Contrast_ratio\" rel=\"noopener\" target=\"_blank\">contrast ratio</a>\n between text and its background should be at least 4.5 to 1 \n(conformance level AA.) The ratios become more forgiving with larger and\n heavier fonts since they’re easier to read at lower contrast. If your \ntype is at least 18 pt or 14 pt bold, the minimum contrast ratio drops \nto 3 to 1.</p><p>Some tools will help you check this quickly. If you use a Mac, I recommend getting the <a href=\"https://usecontrast.com/\" data-href=\"https://usecontrast.com/\" rel=\"noopener\" target=\"_blank\">Contrast app</a>,\n with this tool you can instantly check contrast using a color picker. \nIf you want to get a more detailed score, I recommend entering your \ncolor values onto the <a href=\"https://webaim.org/resources/contrastchecker/\" data-href=\"https://webaim.org/resources/contrastchecker/\" rel=\"noopener\" target=\"_blank\">WebAIM color contrast checker</a>. This tool will calculate the score for both regular and larger text sizes in different <a href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/conformance.html#uc-levels-head\" data-href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/conformance.html#uc-levels-head\" rel=\"noopener\" target=\"_blank\">conformance levels</a> (A, AA, AAA.) You can change the color values and see the results in real time.</p><p>Source: <a href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html\" data-href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html\" rel=\"noopener\" target=\"_blank\"><strong>WCAG Visual Contrast</strong></a></p><h3>2. Don’t use color alone to make critical information understandable 💈</h3></div><div><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*3zZomw8ROlQNk2QheEybaw.gif\" data-width=\"1128\" data-height=\"634\" data-action=\"zoom\" data-action-value=\"1*3zZomw8ROlQNk2QheEybaw.gif\" data-scroll=\"native\"></div></div></figure></div><div><figure data-scroll=\"native\"><div><div data-image-id=\"1*3zZomw8ROlQNk2QheEybaw.gif\" data-width=\"1128\" data-height=\"634\" data-action=\"zoom\" data-action-value=\"1*3zZomw8ROlQNk2QheEybaw.gif\" data-scroll=\"native\"><img data-src=\"https://cdn-images-1.medium.com/max/2400/1*3zZomw8ROlQNk2QheEybaw.gif\" src=\"https://cdn-images-1.medium.com/max/2400/1*3zZomw8ROlQNk2QheEybaw.gif\"></div></div><figcaption>René gets happy when graphs are colorblind friendly!</figcaption></figure></div><div><p>When\n you’re communicating something important, showing an action, or \nprompting a response, don’t use color as the only visual cue. People \nwith low visual acuity or color blindness will have a hard time \nunderstanding your content.</p><p>Try\n to use an indicator other than color such as text labels or patterns. \nWhen showing errors on the screen, don’t rely on colored text alone, add\n an icon or include a title to the message. Consider adding a visual cue\n such as font weight or underline text style to linked text in a \nparagraph, so the links stand out.</p><p>Elements\n with more complex information like charts and graphs can be especially \nhard to read when you only use color to distinguish the data. Use other \nvisual aspects to communicate information like shape, labels, and size. \nYou can also try incorporating patterns into your fills to make the \ndifferences more apparent. A great example of this guideline is <a href=\"https://twitter.com/trello/status/543420024166174721?lang=en\" data-href=\"https://twitter.com/trello/status/543420024166174721?lang=en\" rel=\"noopener\" target=\"_blank\">Trello’s colorblind mode</a>. When turned on, labels become more accessible by adding texture.</p><p>A\n good trick is to print your graph in black and white and see if you can\n still understand everything in it. You can also use an app like <a href=\"http://colororacle.org/\" data-href=\"http://colororacle.org/\" rel=\"noopener\" target=\"_blank\">Color Oracle</a>,\n which shows you in real time what people with common color vision \nimpairments see. These tips help you make sure that the information in \nyour site is color-agnostic.</p><p>Source: <a href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-without-color.html\" data-href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-without-color.html\" rel=\"noopener\" target=\"_blank\"><strong>WCAG Visual Contrast Without Color</strong></a></p><h3>3. Design usable focus states&nbsp;👀</h3></div><div><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*-5gYiq83__A9gVoFbtz34A.gif\" data-width=\"1136\" data-height=\"639\" data-action=\"zoom\" data-action-value=\"1*-5gYiq83__A9gVoFbtz34A.gif\" data-scroll=\"native\"></div></div></figure></div><div><figure data-scroll=\"native\"><div><div data-image-id=\"1*-5gYiq83__A9gVoFbtz34A.gif\" data-width=\"1136\" data-height=\"639\" data-action=\"zoom\" data-action-value=\"1*-5gYiq83__A9gVoFbtz34A.gif\" data-scroll=\"native\"><img data-src=\"https://cdn-images-1.medium.com/max/2400/1*-5gYiq83__A9gVoFbtz34A.gif\" src=\"https://cdn-images-1.medium.com/max/2400/1*-5gYiq83__A9gVoFbtz34A.gif\"></div></div><figcaption>Focus states are easy to navigate with Tyler’s prosthetic hand.</figcaption></figure></div><div><p>Have\n you noticed the blue outlines that sometimes show up around links, \ninputs, and buttons? These outlines are called focus indicators. \nBrowsers, by default, use a CSS pseudo class to show these outlines on \nelements when they’re selected. You might find these default focus \nindicators not very pretty and be tempted just to hide them. However, if\n you get rid of this default style, be sure to replace it with something\n else.</p><p>Focus\n indicators help people know which element has the keyboard focus and \nhelp them understand where they are when navigating your site. These are\n used by people who are blind and require screen readers, individuals \nwith limited mobility, individuals who have suffered injuries like \ncarpal tunnel, and power users who prefer this type of navigation. Oh, \nand some of us use the keyboard as their primary way of navigating the \nweb!</p><p>The \nelements that should be focusable are links, form fields, widgets, \nbuttons, and menu items. They need to have a focus indicator that makes \nthem look different from the elements around them.</p><p>You\n can design focus indicators that fit the style of your site and goes \nwell with your brand. Create a state that is highly visible, with good \ncontrast, so it stands out from the rest of the content.</p><p>Source: <a href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/navigation-mechanisms-focus-visible.html\" data-href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/navigation-mechanisms-focus-visible.html\" rel=\"noopener\" target=\"_blank\"><strong>W3C Focus Visible</strong></a></p><h3>4. Use labels or instructions with form fields and inputs&nbsp;✏️</h3></div><div><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*w8M7ANAO2sB8UJr8m1lCuA.gif\" data-width=\"1280\" data-height=\"654\" data-action=\"zoom\" data-action-value=\"1*w8M7ANAO2sB8UJr8m1lCuA.gif\" data-scroll=\"native\"></div></div></figure></div><div><figure data-scroll=\"native\"><div><div data-image-id=\"1*w8M7ANAO2sB8UJr8m1lCuA.gif\" data-width=\"1280\" data-height=\"654\" data-action=\"zoom\" data-action-value=\"1*w8M7ANAO2sB8UJr8m1lCuA.gif\" data-scroll=\"native\"><img data-src=\"https://cdn-images-1.medium.com/max/2400/1*w8M7ANAO2sB8UJr8m1lCuA.gif\" src=\"https://cdn-images-1.medium.com/max/2400/1*w8M7ANAO2sB8UJr8m1lCuA.gif\"></div></div><figcaption>Mr. López keeps trying to turn a placeholder text into a&nbsp;label.</figcaption></figure></div><div><p><span data-creator-ids=\"anon\">Using placeholder text as labels are one of the biggest mistakes when designing a form.</span>\n We might be tempted to go with this trend when real estate is limited \nor want to make our design more simple and modern—don’t. Placeholder \ntext is usually gray and has low contrast, so it’s hard to read. If you \nare like me, you usually forget what you’re even writing, so it’s hard \nto know what the fields are about once the label is gone.</p><p>People who use screen readers usually navigate through a form using the Tab key to jump through the form controls. The <code>&lt;label&gt;</code> elements are read for each form control. Any non-label text, as placeholder text, is usually skipped over.</p><p>Always\n help people understand what they should do and write in a form. It’s \nbest if labels don’t go away, even when the person is filling an input; \npeople should never lose context with what they’re writing. When \ndesigners hide descriptions or directions in their forms, <a href=\"https://www.nngroup.com/articles/form-design-placeholders/\" data-href=\"https://www.nngroup.com/articles/form-design-placeholders/\" rel=\"noopener\" target=\"_blank\">they’re sacrificing usability in favor of simplicity</a>.</p><p>This\n practice doesn’t mean that you have to clutter your design with \nunnecessary information, just make sure to provide essential cues. Too \nmuch instructional text can be just as much of a problem as too little. \nThe goal is to confirm that the individual has enough information to \ncomplete their tasks without friction.</p><p>Source: <a href=\"https://webaim.org/techniques/forms/\" data-href=\"https://webaim.org/techniques/forms/\" rel=\"noopener\" target=\"_blank\"><strong>WebAIM Creating Accessible Forms</strong></a></p><h3>5. Write useful alternative text for your images and other non-text content&nbsp;🖼</h3></div><div><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*XPVDPXgLa1LxlITCV5zdSA.gif\" data-width=\"1080\" data-height=\"644\" data-action=\"zoom\" data-action-value=\"1*XPVDPXgLa1LxlITCV5zdSA.gif\" data-scroll=\"native\"></div></div></figure></div><div><figure data-scroll=\"native\"><div><div data-image-id=\"1*XPVDPXgLa1LxlITCV5zdSA.gif\" data-width=\"1080\" data-height=\"644\" data-action=\"zoom\" data-action-value=\"1*XPVDPXgLa1LxlITCV5zdSA.gif\" data-scroll=\"native\"><img data-src=\"https://cdn-images-1.medium.com/max/2400/1*XPVDPXgLa1LxlITCV5zdSA.gif\" src=\"https://cdn-images-1.medium.com/max/2400/1*XPVDPXgLa1LxlITCV5zdSA.gif\"></div></div><figcaption>Robin found a new friend in a&nbsp;picture.</figcaption></figure></div><div><p>People\n with low vision often make use of screen readers to “hear” the web. \nThese tools convert text to speech so that the person can hear the words\n on a site.</p><p>There are two ways that you can present alternative text.</p><ul><li>Within the <code>&lt;alt&gt; </code>attribute of the image element.</li><li>Within context or surroundings of the image itself.</li></ul><p>Try\n to describe what’s happening in the image, and how it matters to the \nstory, rather than just saying something like “picture,” context is \neverything.</p><p>If\n the image is purely decorative or if it creates redundancy because the \nsurrounding context already explains the content. Then adding an empty <code>&lt;alt&gt;</code>\n attribute will make screen readers skip it. If you don’t write any alt \ntext, some screen readers will read the file name to the individual. \nThat’s the worst experience you can provide.</p><p>Google is working on an <a href=\"https://petapixel.com/2016/09/23/googles-image-captioning-ai-can-describe-photos-94-accuracy/\" data-href=\"https://petapixel.com/2016/09/23/googles-image-captioning-ai-can-describe-photos-94-accuracy/\" rel=\"noopener\" target=\"_blank\">image captioning AI that can describe photos with 94% accuracy</a>.\n This model is open sourced and still in research — hopefully, we’ll \nstart seeing it used in different products. In the meantime, we should \nmanually provide text that describes the meaning and function of the \nimages in our content.</p><p>Source: <a href=\"https://www.w3.org/TR/WCAG20-TECHS/H37.html\" data-href=\"https://www.w3.org/TR/WCAG20-TECHS/H37.html\" rel=\"noopener\" target=\"_blank\"><strong>W3C Using Alt Attributes</strong></a></p><h3>6. Use correct markup on your content&nbsp;🏗</h3></div><div><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*kOznuvaFWevV7OjAa5f5dg.gif\" data-width=\"1080\" data-height=\"608\" data-action=\"zoom\" data-action-value=\"1*kOznuvaFWevV7OjAa5f5dg.gif\" data-scroll=\"native\"></div></div></figure></div><div><figure data-scroll=\"native\"><div><div data-image-id=\"1*kOznuvaFWevV7OjAa5f5dg.gif\" data-width=\"1080\" data-height=\"608\" data-action=\"zoom\" data-action-value=\"1*kOznuvaFWevV7OjAa5f5dg.gif\" data-scroll=\"native\"><img data-src=\"https://cdn-images-1.medium.com/max/2400/1*kOznuvaFWevV7OjAa5f5dg.gif\" src=\"https://cdn-images-1.medium.com/max/2400/1*kOznuvaFWevV7OjAa5f5dg.gif\"></div></div><figcaption>Noah always wanted to be an architect.</figcaption></figure></div><div><p>Headings\n mark where the content starts — they’re tags given to text to define \nits style and purpose. Headings also establish the hierarchy of the \ncontent of the page.</p><p>Titles\n with big font sizes help a reader understand the order of the content \nbetter. Likewise, screen readers also use heading tags to read content. \nThis way, people with low-vision get an overview of the page by reading \neach heading in a hierarchal flow.</p><p>It’s\n important to use proper structural elements when you develop a site. \nHTML elements communicate to the browser what kind of content they \ncontain and how the browser should render or treat that content. The \ncomponents and structure of a page are what arranges an accessibility \ntree. This tree is what powers screen readers which are used by people \nwho are blind so they can “listen” to a page.</p><p>Not\n using markup correctly affects accessibility. Don’t use HTML tags for a\n style effect only. Screen readers navigate web pages by heading \nstructure (true headers, not just text that is styled big and bold) \nhierarchically. The people that use your site can listen to a list of \nall of the headings, jump the content by types of titles, or navigate \ndirectly to top-level headings <code>&lt;h1&gt;</code>.</p><p>Source: <a href=\"https://webaim.org/techniques/semanticstructure/\" data-href=\"https://webaim.org/techniques/semanticstructure/\" rel=\"noopener\" target=\"_blank\"><strong>WebAIM Semantic Structure</strong></a></p><h3>7. Support keyboard navigation ⌨️</h3></div><div><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*CSkLBSd5e9x3-n4kikV9ZA.gif\" data-width=\"1080\" data-height=\"608\" data-action=\"zoom\" data-action-value=\"1*CSkLBSd5e9x3-n4kikV9ZA.gif\" data-scroll=\"native\"></div></div></figure></div><section><div><div><figure data-scroll=\"native\"><div><div data-image-id=\"1*CSkLBSd5e9x3-n4kikV9ZA.gif\" data-width=\"1080\" data-height=\"608\" data-action=\"zoom\" data-action-value=\"1*CSkLBSd5e9x3-n4kikV9ZA.gif\" data-scroll=\"native\"><img data-src=\"https://cdn-images-1.medium.com/max/2400/1*CSkLBSd5e9x3-n4kikV9ZA.gif\" src=\"https://cdn-images-1.medium.com/max/2400/1*CSkLBSd5e9x3-n4kikV9ZA.gif\"></div></div><figcaption>Gael navigates with a keyboard while “hearing” the&nbsp;web.</figcaption></figure></div><div><p>Keyboard\n accessibility is one of the most critical aspects of web accessibility.\n People with motor disabilities, blind people that rely on screen \nreaders, people that don’t have precise muscle control, and even power \nusers are dependent on a keyboard to navigate content.</p><p>If you’re like me, you’ll typically use the <em>Tab</em> key on your keyboard to navigate through interactive elements on a web page: links, buttons, or input fields. The <em>focus state</em> that we discussed before provides a visual indicator of the component that is currently selected.</p><p>As\n you navigate through a page, the order of the interactive elements is \nessential, and the navigation must be logical and intuitive. The tab \norder should follow the visual flow of the page: left to right, top to \nbottom — header, main navigation, content buttons and inputs, and \nfinally the footer.</p><p>A good practice is testing your site only using a keyboard. Use the <em>Tab</em> key to move through links and forms. Test using the <em>Enter</em>\n key to select an element. Verify that all the interactive components \nare predictable and in order. If you can navigate through all your site \nwithout a mouse, you’re in a good spot!</p><p>Last,\n but not least. Be careful with the size of your navigation — this \nincludes the number of links and the length of the text. Tabbing through\n long menus may be demanding for people with motor disabilities. And \nlistening to lengthy links can be cumbersome for people that use screen \nreaders—try to be concise. Providing <a href=\"https://accessibility.oit.ncsu.edu/it-accessibility-at-nc-state/developers/accessibility-handbook/aria-landmarks/\" data-href=\"https://accessibility.oit.ncsu.edu/it-accessibility-at-nc-state/developers/accessibility-handbook/aria-landmarks/\" rel=\"noopener\" target=\"_blank\">ARIA landmark</a>s or HTML5 structural elements like <code>&lt;main&gt;</code> or <code>&lt;nav&gt;</code> will make navigation easier.</p><p>Source: <a href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/keyboard-operation-keyboard-operable.html\" data-href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/keyboard-operation-keyboard-operable.html\" rel=\"noopener\" target=\"_blank\"><strong>W3C Keyboard</strong></a></p><h3>Beyond these guidelines 🙌🏾</h3><p>These seven guidelines are a great start, and if you want to do more to make your product more accessible, I encourage you to</p><ul><li><strong>Get an Accessibility Audit.</strong>\n Use an audit service to find out if your product works with assistive \ntechnologies and meets WCAG 2.0 level AA. Use the audit results to fix \nproblems and do another test.</li><li><strong>Appoint an Auditor.</strong>\n You can appoint someone in your company to do recurrent accessibility \naudits. This could be someone in your QA team. If you don’t have someone\n with the experience, you can hire an external supplier.</li><li><strong>Make accessibility part of your design research.</strong>\n When doing research verify if your assumptions concerning accessibility\n were right and if there are any potential opportunities to improve. \nRecruiting people with disabilities requires a bit more work. Don’t \nhesitate to contact <a href=\"https://www.afb.org/default.aspx\" data-href=\"https://www.afb.org/default.aspx\" rel=\"noopener\" target=\"_blank\">associations</a>, and <a href=\"https://www.reddit.com/r/ColorBlind/\" data-href=\"https://www.reddit.com/r/ColorBlind/\" rel=\"noopener\" target=\"_blank\">communities</a>—people are willing to help.</li></ul></div></div></section><section><div><hr></div><div><div><h3>Conclusion 👏🏽</h3><p>That’s it. Seven guidelines that will help you make your web design get closer to meet level <a href=\"https://www.w3.org/TR/WCAG21/\" data-href=\"https://www.w3.org/TR/WCAG21/\" rel=\"noopener\" target=\"_blank\">AA of the Web Content Accessibility Guidelines</a>.</p><p>Designing\n for accessibility is something that I’m still trying to improve. I’m \nworking on practicing what I preach. I used to think that it was too \nhard and not that important. I was mistaken. I invite you to consider \nthese guidelines as part of your process and continue the conversation \non why accessibility matters.</p><p>As\n designers, it is our responsibility to champion accessibility. With it,\n we make technology usable to all people regardless of their abilities, \neconomic situation, age, education, or geographic location.</p><p>Design responsibly. Thank you.</p></div></div></section><section><div><hr></div><div><div><h4>Reading resources 📚</h4><ul><li><a href=\"https://webaim.org/\" data-href=\"https://webaim.org/\" rel=\"noopener\" target=\"_blank\">WebAIM</a>: Articles, resources, and training on web accessibility.</li><li><a href=\"https://medium.com/salesforce-ux/7-things-every-designer-needs-to-know-about-accessibility-64f105f0881b\" data-href=\"https://medium.com/salesforce-ux/7-things-every-designer-needs-to-know-about-accessibility-64f105f0881b\" target=\"_blank\">7 Things Every Designer Needs to Know about Accessibility</a> from Salesforce. Great article with excellent points.</li><li><a href=\"https://dcp.ucla.edu/\" data-href=\"https://dcp.ucla.edu/\" rel=\"noopener\" target=\"_blank\">UCLA Disabilities and Computing Program:</a> Not the prettiest or most modern site but it’s full of vast resources.</li><li><a href=\"http://uxmyths.com/\" data-href=\"http://uxmyths.com/\" rel=\"noopener\" target=\"_blank\">UX Myths: </a>A great list of misconceptions on UX design debunked with research. Some of them relate to accessibility.</li><li><a href=\"http://alistapart.com/article/color-accessibility-workflows\" data-href=\"http://alistapart.com/article/color-accessibility-workflows\" rel=\"noopener\" target=\"_blank\">Color Accessibility Workflows</a>: Some neat examples to nail the colors in your design by <a href=\"https://medium.com/@hellogeri\" data-href=\"https://medium.com/@hellogeri\" data-anchor-type=\"2\" data-user-id=\"bc5c6c5aef28\" data-action-value=\"bc5c6c5aef28\" data-action=\"show-user-card\" data-action-type=\"hover\" target=\"_blank\">Geri Coady</a>.</li><li><a href=\"https://www.w3.org/WAI/intro/wcag.php\" data-href=\"https://www.w3.org/WAI/intro/wcag.php\" rel=\"noopener\" target=\"_blank\">W3C</a>:\n This is the bible of web accessibility guidelines — visiting it can be \noverwhelming. But once you understand its navigation, you’ll find \nexcellent examples, tips, and resources.</li></ul><h4>Useful tools&nbsp;🔭</h4><ul><li><a href=\"https://webaim.org/resources/contrastchecker/\" data-href=\"https://webaim.org/resources/contrastchecker/\" rel=\"noopener\" target=\"_blank\">WebAIM Color Contrast Checker</a>: Great contrast color checker that gives you results in real time for regular and large text.</li><li><a href=\"https://inclusive-components.design/\" data-href=\"https://inclusive-components.design/\" rel=\"noopener\" target=\"_blank\">Inclusive Components</a>:\n A pattern library in the form of a blog, with a focus on inclusive \ndesign. Each post explores a common interface component and comes up \nwith a better, more robust and accessible version of it.</li><li><a href=\"http://colororacle.org/\" data-href=\"http://colororacle.org/\" rel=\"noopener\" target=\"_blank\">Color Oracle</a>:\n A free color blindness simulator for Windows, Mac, and Linux. It shows \nyou in real time what people with common color vision impairments see.</li><li><a href=\"http://accessibility.voxmedia.com/\" data-href=\"http://accessibility.voxmedia.com/\" rel=\"noopener\" target=\"_blank\">Vox Product Accessibility Guidelines:</a> A comprehensive checklist for designers, engineers, and project managers.</li><li><a href=\"https://chrome.google.com/webstore/detail/axe-coconut/iobddmbdndbbbfjopjdgadphaoihpojp?hl=en\" data-href=\"https://chrome.google.com/webstore/detail/axe-coconut/iobddmbdndbbbfjopjdgadphaoihpojp?hl=en\" rel=\"noopener\" target=\"_blank\">AXE Google Chrome Extension</a>: Test any site for accessibility violations using the Chrome inspector.</li><li><a href=\"https://usecontrast.com/\" data-href=\"https://usecontrast.com/\" rel=\"noopener\" target=\"_blank\">Contrast</a>: A macOS app for quick access to WCAG color contrast ratios.</li></ul></div></div></section><section><div><hr></div><div><div><figure><div><div></div><div data-image-id=\"1*OtiVedoV9YicOXGliFo7AA.jpeg\" data-width=\"120\" data-height=\"116\" data-scroll=\"native\"></div></div></figure></div></div></section><figure><div><div data-image-id=\"1*OtiVedoV9YicOXGliFo7AA.jpeg\" data-width=\"120\" data-height=\"116\" data-scroll=\"native\"><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*OtiVedoV9YicOXGliFo7AA.jpeg\" src=\"https://cdn-images-1.medium.com/max/1600/1*OtiVedoV9YicOXGliFo7AA.jpeg\"></div></div></figure><p>Hola, amigxs. I’m <a href=\"https://twitter.com/pablostanley\" data-href=\"https://twitter.com/pablostanley\" rel=\"noopener\" target=\"_blank\">Pablo Stanley</a>, designer at <a href=\"https://www.invisionapp.com/studio/platform\" data-href=\"https://www.invisionapp.com/studio/platform\" rel=\"noopener\" target=\"_blank\">InVision Studio</a>.</p><p>I write a comic series called <a href=\"https://thedesignteam.io/\" data-href=\"https://thedesignteam.io/\" rel=\"noopener\" target=\"_blank\">The Design Team</a> and I post design-related stuff on <a href=\"https://twitter.com/pablostanley\" data-href=\"https://twitter.com/pablostanley\" rel=\"noopener\" target=\"_blank\">Twitter</a>. You can also check out my<a href=\"https://www.youtube.com/c/sketchtogethertv\" data-href=\"https://www.youtube.com/c/sketchtogethertv\" rel=\"noopener\" target=\"_blank\"> YouTube channel, Sketch Together,</a> where you’ll find tons of design tutorials.</p><p>Que tu día este lleno de momentos memorables.</p>","filePath":"pages/Accessibility/.md","_id":"8Nd3hzuRDTsz8CK4"}
{"date":"2018-11-22T10:33:07.104Z","title":"SCSS : Functions vs. Extends vs. Mixins","sourceUrl":"http://selfteach.me/functions-extends-mixins/","path":"SCSS/","category":"SCSS","tags":["SCSS"],"author":"","excerpt":"","dateCreated":1542882701687,"coverImage":"","type":"Post","frontmatter":"---\npath: 'SCSS/'\ndate: 'Thu Nov 22 2018 16:03:07 GMT+0530 (India Standard Time)'\ntitle: 'SCSS : Functions vs. Extends vs. Mixins'\ntags: ['SCSS']\ncategory: 'SCSS'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'http://selfteach.me/functions-extends-mixins/'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Last week, Danny Lewandowski, commented on my post&nbsp;<a href=\"http://selfteach.me/sass-extends-mixins-functions/\">My Sass Mixins, Extends, and Functions,</a>&nbsp;asking my thoughts on Sass Extends vs. Mixins.</p><p>Let me provide a little bit of context:</p><p>The post was about a Sass broilerplate that I’ve created and use with every project. — It’s great because I don’t have to reinvent the wheel every time I start a new project. I always have a “go to” set of code I can use and don’t have to waste my time with dumb project set-up tasks.</p><p>At first, it might seem like code bloat: adding extra code that you may or may not use?&nbsp;<em>Oh contraire.</em>&nbsp;My Sass library only compiles what you actually use in your code! Awesome!</p><p>So what’s the difference between the three, Sass functions, mixins and extends?</p><div><h4>NOTE:</h4>If you already know an extend, mixin, and function is, feel free to&nbsp;<a href=\"http://selfteach.me/functions-extends-mixins/#now-what\">jump to the chase.</a>&nbsp;But, who knows, you may learning something along the way.&nbsp;<img draggable=\"false\" alt=\"🙂\" src=\"https://s.w.org/images/core/emoji/11/svg/1f642.svg\"></div><h2>AN EXTEND</h2><p>At first glance, an extend looks like an ordinary class:</p><div><div>SASS (SCSS)</div></div><pre><code><span>.heading </span><span>{</span>\n\t\t<span>font-family</span><span>:</span> sans-serif<span>;</span>\n\t\t<span>font-size</span><span>:</span> 22px<span>;</span>\n\t\t<span>font-weight</span><span>:</span> bold<span>;</span>\n<span>}</span>\n</code></pre><p>But, you can other classes reference it:</p><div><div>SASS (SCSS)</div></div><pre><code><span>h1 </span><span>{</span>\n\t\t<span>@extend</span> .heading<span>;</span>\n<span>}</span>\n\n<span>h2 </span><span>{</span>\n\t\t<span>@extend</span> .heading<span>;</span>\n\t\t<span>font-size</span><span>:</span> 18px<span>;</span>\n<span>}</span>\n\n<span>h3 </span><span>{</span>\n\t\t<span>@extend</span> .heading<span>;</span>\n\t\t<span>font-size</span><span>:</span> 16px<span>;</span>\n<span>}</span>\n</code></pre><p>Suddenly, the same styles that apply to&nbsp;<code>.heading</code>&nbsp;also apply to your&nbsp;<code>h1</code>,&nbsp;<code>h2</code>, and&nbsp;<code>h3</code>.</p><p>The rendered CSS looks like this:</p><div><div>CSS</div></div><pre><code><span>.heading, h1, h2, h3</span> <span>{</span>\n\t<span>font-family</span><span>:</span> sans-serif<span>;</span>\n\t<span>font-size</span><span>:</span> 22px<span>;</span>\n\t<span>font-weight</span><span>:</span> bold<span>;</span>\n<span>}</span>\n\n<span>h2</span> <span>{</span>\n\t<span>font-size</span><span>:</span> 18px<span>;</span>\n<span>}</span>\n\n<span>h3</span> <span>{</span>\n\t<span>font-size</span><span>:</span> 16px<span>;</span>\n<span>}</span>\n</code></pre><p>There are a few things to be aware of when working with mixins. Any change to the&nbsp;<code>.heading</code>&nbsp;class, automatically gets applied to&nbsp;<em>every</em>&nbsp;class extending it.</p><p>If you’re not careful, you could inadvertently royally mess up your code. When I’m using extends I like to prepend the class I’m extending with a&nbsp;<code>%</code>. That serves as a visual reminder. Plus, any classes that begin with a&nbsp;<code>%</code>aren’t rendered in your final CSS.</p><p>You’ll also notice that with my&nbsp;<code>h2</code>s and&nbsp;<code>h3</code>s, I wanted a different&nbsp;<code>font-size</code>, so I had to override them. That doesn’t exactly make for clean code. — Granted, you could remove&nbsp;<code>font-size</code>&nbsp;property from the&nbsp;<code>.heading</code>definition and then be explicit about it within the&nbsp;<code>h1</code>&nbsp;definition. But, I was trying to make a point:&nbsp;<span>Extends may cause your code to behave unexpectedly.</span></p><p>Take this Sass code, for example:</p><div><div>SASS (SCSS)</div></div><pre><code><span><span>%red</span> </span><span>{</span>\n\t<span>color</span><span>:</span> red<span>;</span>\n<span>}</span>\n\n<span>.one </span><span>{</span>\n\t<span>@extend</span> <span>%red</span><span>;</span>\n<span>}</span>\n\n<span>.two </span><span>{</span>\n\t<span>color</span><span>:</span> green<span>;</span>\n<span>}</span>\n\n<span>.three </span><span>{</span>\n\t<span>@extend</span> <span>%red</span><span>;</span>\n<span>}</span>\n</code></pre><p>The rendered CSS looks like this:</p><div><div>CSS</div></div><pre><code><span>.one, .three</span> <span>{</span>\n\t<span>color</span><span>:</span> red<span>;</span>\n<span>}</span>\n\n<span>.two</span> <span>{</span>\n\t<span>color</span><span>:</span> green<span>;</span>\n<span>}</span>\n</code></pre><p>Now, for the HTML:</p><div><div>HTML</div></div><pre><code><span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>\"</span>one two<span>\"</span></span><span>&gt;</span></span>Some text<span><span><span>&lt;/</span>div</span><span>&gt;</span></span>\n</code></pre><p>What color is our text? See the confusion? You may look at this example and said, I would write code like that. It’s a dumb implementation. True. When it is this simplified it’s dumb, but when you start writing more complex classes, it’s&nbsp;<em>incredibly easy to do.</em>&nbsp;— By the way, the answer is green, since&nbsp;<code>two</code>&nbsp;is listed in the HTML last.</p><hr><h2>A MIXIN</h2><p>Let me start by giving you an example:</p><div><div>SASS (SCSS)</div></div><pre><code><span>@mixin</span> <span>heading</span><span>(</span><span>)</span> <span>{</span>\n\t\t<span>font-family</span><span>:</span> sans-serif<span>;</span>\n\t<span>font-size</span><span>:</span> 18px<span>;</span>\n\t<span>font-weight</span><span>:</span> bold<span>;</span>\n<span>}</span>\n</code></pre><p>When you want to reference it elsewhere in your code:</p><div><div>SASS (SCSS)</div></div><pre><code><span>h1 </span><span>{</span>\n\t<span>@include</span> heading<span>;</span>\n<span>}</span>\n</code></pre><div><h4>NOTE:</h4>One thing that I’ve always thought was a little strange is the fact that it’s called a&nbsp;<span>mixin</span>&nbsp;— and when you declare it, you use the&nbsp;<code>mixin</code>&nbsp;keyword.&nbsp;<em>But,</em>&nbsp;when you implement it, you use the keyword&nbsp;<code>@include</code>. Oh well. Nobody asked me.</div><p>If you’re familiar with other coding languages, a mixin looks like a function —&nbsp;<em>and,</em>&nbsp;in fact, you can pass parameters into them:</p><div><div>SASS (SCSS)</div></div><pre><code><span>@mixin</span> <span>heading</span><span>(</span><span>$size</span><span>)</span> <span>{</span>\n\t\t<span>font-family</span><span>:</span> sans-serif<span>;</span>\n\t<span>font-size</span><span>:</span> <span>$size</span><span>;</span>\n\t<span>font-weight</span><span>:</span> bold<span>;</span>\n<span>}</span>\n</code></pre><p>Right off, that gives our code a little more flexibility.</p><div><div>SASS (SCSS)</div></div><pre><code><span>h1 </span><span>{</span>\n\t<span>@include</span> <span>heading</span><span>(</span>22px<span>)</span><span>;</span>\n<span>}</span>\n</code></pre><p>You can also set a default value, so that you don’t have to pass in a parameter&nbsp;<em>every single time.</em></p><div><div>SASS (SCSS)</div></div><pre><code><span>@mixin</span> <span>heading</span><span>(</span><span>$size</span><span>:</span> 18px<span>)</span> <span>{</span>\n\t\t<span>font-family</span><span>:</span> sans-serif<span>;</span>\n\t<span>font-size</span><span>:</span> <span>$size</span><span>;</span>\n\t<span>font-weight</span><span>:</span> bold<span>;</span>\n<span>}</span>\n</code></pre><p>Within your rendered CSS, a mixin looks different. Let’s take this Sass, for example:</p><div><div>SASS (SCSS)</div></div><pre><code><span>h1 </span><span>{</span>\n\t<span>@include</span> <span>heading</span><span>(</span>22px<span>)</span><span>;</span>\n<span>}</span>\n\n<span>h2 </span><span>{</span>\n\t<span>@include</span> <span>heading</span><span>(</span>18px<span>)</span><span>;</span>\n<span>}</span>\n\n<span>h3 </span><span>{</span>\n\t<span>@include</span> <span>heading</span><span>(</span>16px<span>)</span><span>;</span>\n<span>}</span>\n</code></pre><p>When rendered it looks like this:</p><div><div>SASS (SCSS)</div></div><pre><code><span>h1 </span><span>{</span>\n\t<span>font-family</span><span>:</span> sans-serif<span>;</span>\n \t<span>font-size</span><span>:</span> 22px<span>;</span>\n \t<span>font-weight</span><span>:</span> bold<span>;</span>\n<span>}</span>\n\n<span>h2 </span><span>{</span>\n\t<span>font-family</span><span>:</span> sans-serif<span>;</span>\n\t<span>font-size</span><span>:</span> 18px<span>;</span>\n  \t<span>font-weight</span><span>:</span> bold<span>;</span>\n<span>}</span>\n\n<span>h3 </span><span>{</span>\n\t<span>font-family</span><span>:</span> sans-serif<span>;</span>\n  \t<span>font-size</span><span>:</span> 16px<span>;</span>\n  \t<span>font-weight</span><span>:</span> bold<span>;</span>\n<span>}</span>\n</code></pre><p>There’s a lot more code. It basically takes the places where your&nbsp;<code>include</code>&nbsp;is and copies and pastes, or&nbsp;<em>includes</em>the code from your mixin.</p><hr><h2>A FUNCTION</h2><p>Moving on, a function may&nbsp;<em>seem</em>&nbsp;kind of like a&nbsp;<em>mixin</em>, but the difference is,&nbsp;<span>it’s handling a snippet of code</span>&nbsp;and not the whole class.</p><p>Here’s my most used function.</p><div><div>SASS (SCSS)</div></div><pre><code><span>$browser-context</span><span>:</span> 16<span>;</span>\n\n<span>@function</span> <span>em</span><span>(</span><span>$pixels</span>, <span>$context</span><span>:</span> <span>$browser-context</span><span>)</span> <span>{</span>\n  <span>@if</span> <span>(</span><span>unitless</span><span>(</span><span>$pixels</span><span>)</span><span>)</span> <span>{</span>\n    <span>$pixels</span><span>:</span> <span>$pixels</span> <span>*</span> 1px<span>;</span>\n  <span>}</span>\n\n  <span>@if</span> <span>(</span><span>unitless</span><span>(</span><span>$context</span><span>)</span><span>)</span> <span>{</span>\n    <span>$context</span><span>:</span> <span>$context</span> <span>*</span> 1px<span>;</span>\n  <span>}</span>\n\n  <span>@return</span> <span>$pixels</span> <span>/</span> <span>$context</span> <span>*</span> 1em<span>;</span>\n<span>}</span>\n</code></pre><p>And its implementation:</p><div><div>SASS (SCSS)</div></div><pre><code><span>h1 </span><span>{</span>\n\t<span>font-size</span><span>:</span> <span>em</span><span>(</span>22px<span>)</span><span>;</span>\n<span>}</span>\n</code></pre><p>I’m creating the font size in ems by passing in a pixel value. I think in pixels. Pixels make sense to me, even though I know ems are the way of internet type. So, why not make the computer work for me? I can still think and work in pixels and let the computer do the conversion to ems for me.</p><p>Let’s look at another example:</p><div><div>SASS (SCSS)</div></div><pre><code><span>@function</span> <span>path</span><span>(</span><span>$src</span>, <span>$dir</span><span>:</span> img<span>)</span> <span>{</span>\n\t<span>$src</span><span>:</span> <span>unquote</span><span>(</span><span>$src</span><span>)</span><span>;</span>\n\t<span>@return</span> <span>url</span><span>(</span><span>unquote</span><span>(</span><span>\"..\"</span><span>)</span>/<span>$dir</span>/<span>$src</span><span>)</span><span>;</span>\n<span>}</span>\n</code></pre><p>And its implementation:</p><div><div>SASS (SCSS)</div></div><pre><code><span>.hero </span><span>{</span>\n\t\t<span>background</span><span>:</span> <span>path</span><span>(</span><span>'bg.jpg'</span><span>)</span> center top no-repeat<span>;</span>\n<span>}</span>\n</code></pre><p>This&nbsp;<code>path</code>&nbsp;function creates the full image path for me. — Otherwise, I’d have to write:</p><div><div>SASS (SCSS)</div></div><pre><code><span>.hero </span><span>{</span>\n\t<span>background</span><span>:</span> <span>path</span><span>(</span><span>'../img/bg.jpg'</span><span>)</span> center top no-repeat<span>;</span>\n<span>}</span>\n</code></pre><p>That might not seem like much of a difference, but add that up over time and consider&nbsp;<em>all</em>&nbsp;the background images paths used throughout the site! — Then, what happens if your file path changes? You have to go back through&nbsp;<em>every single instance</em>&nbsp;in your code and change the path, instead of simply changing the path in&nbsp;<em>one</em>&nbsp;place: your function.</p><p>The other point I wanted to make with this snippet: you’ll notice that I call the function&nbsp;<code><span>path</span><span>(</span><span>)</span></code>&nbsp;and pass in the image file name. Because the function only handles a snippet of my code, I can still use the other&nbsp;<code>background</code>properties:&nbsp;<code>center top no-repeat</code>&nbsp;without interfering.</p><hr><h2>NOW WHAT?</h2><p>We’ve gone through a brief synopsis of how each work. Let’s go back to Danny’s question:</p><blockquote><p>I wonder what your thoughts on the debate over mixins vs extends is? Seems that extends are very unpopular.</p></blockquote><p>I decided to do a little digging. It would be easy for me to answer based on my personal assumptions and biases, but I never want to be&nbsp;<em>that</em>&nbsp;person. One of the values for this site is to&nbsp;<span>celebrate differences</span>. In code, there are multiple ways to do one thing. Sometimes (but not always), there’s an obvious right and wrong answer. Other times, you can make a case for a&nbsp;<em>better</em>&nbsp;answer. But, I want to make sure, I approach topics with an open mind — also understanding that&nbsp;<span>best practices change as technology evolves.</span></p><p>I found two great articles, both by&nbsp;<a href=\"https://csswizardry.com/\" target=\"_blank\">Harry Roberts of CSS Wizardry.</a>&nbsp;Harry is a great thought leader on CSS. He wrote&nbsp;<a href=\"http://cssguideline.es/\" target=\"_blank\">cssguideline.es</a>, which is one of my favorite resources when it comes to naming things in CSS.</p><ol><li><a href=\"https://csswizardry.com/2014/11/when-to-use-extend-when-to-use-a-mixin/\" target=\"_blank\">When to use @extend; when to use a mixin</a></li><li><a href=\"https://csswizardry.com/2016/02/mixins-better-for-performance/\" target=\"_blank\">Mixins Better for Performance</a></li></ol><p>My biggest take-aways from these two articles were</p><h3>RELATED ITEMS SHOULD BE GROUPED TOGETHER</h3><p>You want related items to be grouped together. — This makes sense because the implications extend beyond programming. Who wants the contents of their kitchen pantry spread across their house? No one, you want them all grouped together. And if you wanted to more specific, you’d want cans together, cereal together, etc.</p><p>How does this apply practically to our Sass / CSS? Let’s say you have an&nbsp;<code>h3</code>&nbsp;style. There’s no need for those styles to be applied to a&nbsp;<code>button</code>&nbsp;because they’re unrelated. It’s makes it harder for you to maintain and update your code in the future.</p><p>An&nbsp;<code><span>@extend</span></code>&nbsp;would associate those two items, grouping them together.</p><div><div>CSS</div></div><pre><code><span>h3, button</span> <span>{</span>\n\t\t<span>font-size</span><span>:</span> 16px<span>;</span>\n\t\t<span>font-weight</span><span>:</span> bold<span>;</span>\n<span>}</span>\n</code></pre><p><em>But,</em>&nbsp;a&nbsp;<code>@mixin</code>&nbsp;makes complete sense. Not only does that allow you to keep the items separate, it also provides the consistency within your code base that you’re looking for.</p><div><div>CSS</div></div><pre><code><span>h3</span> <span>{</span>\n\t<span>font-size</span><span>:</span> 16px<span>;</span>\n\t<span>font-weight</span><span>:</span> bold<span>;</span>\n<span>}</span>\n\n<span>button</span> <span>{</span>\n\t<span>font-size</span><span>:</span> 16px<span>;</span>\n\t<span>font-weight</span><span>:</span> bold<span>;</span>\n<span>}</span>\n</code></pre><p>Let’s look at the proper use case for an&nbsp;<code><span>@extend</span></code>. Here’s some Sass:</p><div><div>SASS (SCSS)</div></div><pre><code><span>@extend</span> <span><span>%tag</span> </span><span>{</span>\n\t<span>border-radius</span><span>:</span> 30px<span>;</span>\n\t<span>font-size</span><span>:</span> 14px<span>;</span>\n\t<span>padding</span><span>:</span> 5px 10px<span>;</span>\n\t<span>text-transform</span><span>:</span> uppercase<span>;</span>\n<span>}</span>\n\n<span>.tag </span><span>{</span>\n\t<span>@extend</span> <span>%tag</span><span>;</span>\n\t<span>backgrond</span><span>:</span> gray<span>;</span>\n<span>}</span>\n\n<span>.tag--alert </span><span>{</span>\n\t<span>@extend</span> <span>%tag</span><span>;</span>\n\t<span>background</span><span>:</span> red<span>;</span>\n<span>}</span>\n\n<span>.tag--caution </span><span>{</span>\n\t\t<span>@extend</span> <span>%tag</span><span>;</span>\n\t<span>background</span><span>:</span> yellow<span>;</span>\n<span>}</span>\n</code></pre><p>Our CSS output will look like this:</p><div><div>CSS</div></div><pre><code><span>.tag, .tag--alert, .tag--caution</span> <span>{</span>\n\t<span>border-radius</span><span>:</span> 30px<span>;</span>\n\t<span>font-size</span><span>:</span> 14px<span>;</span>\n\t<span>padding</span><span>:</span> 5px 10px<span>;</span>\n\t<span>text-transform</span><span>:</span> uppercase<span>;</span>\n<span>}</span>\n\n<span>.tag</span> <span>{</span>\n\t\t<span>background</span><span>:</span> gray<span>;</span>\n<span>}</span>\n\n<span>.tag--alert</span> <span>{</span>\n\t\t<span>background</span><span>:</span> red<span>;</span>\n<span>}</span>\n\n<span>.tag--caution</span> <span>{</span>\n\t<span>background</span><span>:</span> yellow<span>;</span>\n<span>}</span>\n</code></pre><p>Yes, the items are all grouped together at the top, but that’s OK, because they’re related! They’re all tags. It makes sense that those items would be together.</p><h3>D-R-Y</h3><p>Dry is a popular programming concept that stands for&nbsp;<span>“Don’t Repeat Yourself.”</span>&nbsp;— but the point that Harry makes is: don’t repeat&nbsp;<span>yourself</span>. It’s not about completely avoiding repetition.</p><blockquote><p>Repetition in a compiled system is not a bad thing: repetition in source is a bad thing.</p></blockquote><p>If you think about it, that is true for programming across the board. Take PHP, for example, you’ll have includes for header and footer files. You’re not repeating yourself&nbsp;<em>in source</em>, but the system is. It will compile and include all those pieces, repeating those elements so you don’t have to.</p><h3>PERFORMANCE / FILE SIZE</h3><p>Let’s take a look at performance and file size.</p><p>Organization and DRY code are great programming principles, but if the end result slows down your site, creating larger files, is it really worth it?</p><p>Actually, it was file size and performance that first turned me onto to&nbsp;<code><span>@extend</span></code>s. It produced less code in my CSS files, so it seemed like a better option. …This is true, sort of.</p><blockquote><p>Mixins are better than @extends when gzipped.</p></blockquote><p>In fact, it’s almost as if&nbsp;<code>@mixins</code>&nbsp;were made for gzipping.</p><div><h4>NOTE:</h4><span>What is gzip exactly?</span>&nbsp;gzip is a type of file compression. It looks for repetitive elements within your code (<em>COUGH</em>&nbsp;like mixins) and compresses it.</div><p>If you look at&nbsp;<a href=\"https://csswizardry.com/2016/02/mixins-better-for-performance/\">Harry’s post, “Mixins Better for Performance”</a>&nbsp;he ran a few tests to prove his point. To summarize, briefly, he found:</p><ul><li>mixin.css came in at&nbsp;<span>108K</span></li><li>extend.css came in at&nbsp;<span>72K</span></li></ul><p>That means that mixin.css was&nbsp;<span>36K larger, that’s almost 150%!</span></p><p><span><em>BUT</em></span>&nbsp;minified and gzipped:</p><ul><li>mixin.css came in at&nbsp;<span>12K</span></li><li>extend.css came in at&nbsp;<span>18K</span></li></ul><p>That’s a difference of&nbsp;<span>6K</span>. Mixins suddenly went from being 1.5x larger, to&nbsp;<span>33.333% smaller</span>!</p><blockquote><p>To get the full benefit of mixins, you must minify and gzip your code.</p></blockquote><h3>YOU’VE CONVINCED ME. NOW, WHAT?</h3><p>Good. Welcome to light. ?</p><ol><li>Use extends&nbsp;<em>only where appropriate.</em></li><li>Default to mixins.</li><li>Minify and gzip your code. Here’s how.</li></ol>","filePath":"pages/SCSS/.md","_id":"9DsDpqdwlFXptFuI"}
{"date":"2018-11-12T16:55:32.626Z","title":"Build a Simple Web App with Express, React and GraphQL","sourceUrl":"https://www.sitepoint.com/build-a-simple-api-service-with-express-and-graphql/","path":"React/","category":"React","tags":["React"," GraphQL"," Express"],"author":"Braden Kelley","excerpt":"","dateCreated":1542041609805,"coverImage":"","type":"Post","frontmatter":"---\npath: 'React/'\ndate: 'Mon Nov 12 2018 22:25:32 GMT+0530 (India Standard Time)'\ntitle: 'Build a Simple Web App with Express, React and GraphQL'\ntags: ['React','GraphQL','Express']\ncategory: 'React'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://www.sitepoint.com/build-a-simple-api-service-with-express-and-graphql/'\ntype: 'Post'\n---\n    ","htmlCode":"<p><em>This article was originally published on <a href=\"https://developer.okta.com/blog/2018/10/11/build-simple-web-app-with-express-react-graphql\" rel=\"nofollow\">the Okta developer blog</a>. Thank you for supporting the partners who make SitePoint possible.</em></p>\n<p>GraphQL and React have both become quite popular in the last few years, and it’s safe to say they go together like avocado and toast. A GraphQL server can be written in Node and lets you easily create a flexible API using JavaScript classes and functions. When a frontend developer queries the server, only the information asked for gets processed. This means you can make the backend as robust as you want while keeping the frontend light by only requesting information needed for the page you’re viewing.</p>\n<p>GraphQL is a relatively new standard for defining types and querying data, and there are quite a few different implementations of it, both server-side and client-side. Today I’ll show you how to use Express to create a GraphQL server, as well as how to create a single-page app in React that uses Apollo’s client to query the server.</p>\n<h2>Create the React App</h2>\n<div><div><span>--ADVERTISEMENT--</span></div>\n\n\n<script src=\"https://play.aniview.com/5858ed930b8ee8851941a7bb/59627b0528a0616e231692a2/SitepointPMP.js\"></script><script>\nvar el = document.getElementById('aniBox');\nvar adBox = document.getElementById('adBox');\n// create an observer instance\nvar observer = new MutationObserver(function(mutations) {\n  mutations.forEach(function(mutation) {\n    if(mutation.attributeName == 'style'){\n      var s = el.getAttribute('style');\n      if(s.search('height: 360px') !=  -1) {\n        adBox.style = 'display: block';\n      }\n      else {\n        adBox.style = 'display: none';\n      }\n}\n  });    \n});\n\n// configuration of the observer:\nvar config = { attributes: true, attributeFilter: ['style']};\n \n// pass in the target node, as well as the observer options\nobserver.observe(el, config);\n</script></div><p>The quickest way to get started with a React app is to use <a href=\"https://github.com/facebook/create-react-app\">Create React App</a>. If you don’t already have Node, Yarn, and Create React App installed, you can run the following commands:</p>\n<pre><code>curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash\nnpm install --global yarn create-react-app\n</code></pre>\n<p>Next, create and start a new app:</p>\n<pre><code>create-react-app graphql-express-react\ncd graphql-express-react\nyarn start\n</code></pre>\n<p>When you run <code>create-react-app</code>, you’ll get a new folder with everything you need to get started, and all the dependencies you need will be installed locally using <code>yarn</code>. When you type <code>yarn start</code> from within the folder, you’re starting the frontend development server that will automatically update whenever you edit any files.</p>\n<p><img src=\"https://developer.okta.com/assets/blog/graphql-express-react/create-react-app-f1bc3c3d59d01040f1ce6ae716e14f647788afd5451d5d87c4b63bfa2f43985a.png\" alt=\"create-react-app bootstrapped app\"></p>\n<h2>Create the GraphQL Server</h2>\n<p>Before we continue writing the frontend, you’ll need a server to connect to. Run the following commands to install the dependencies you’ll need to get up and running:</p>\n<pre><code>yarn add express@4.16.3 cors@2.8.4 graphql@14.0.2 express-graphql@0.6.12 graphql-tag@2.9.2\n</code></pre>\n<p>Create a new directory in your project’s <code>src</code> folder, named <code>server</code>:</p>\n<pre><code>mkdir src/server\n</code></pre>\n<p>In there, create a new file named <code>index.js</code>, with the following code:</p>\n<pre><code>const express = require('express');\nconst cors = require('cors');\nconst graphqlHTTP = require('express-graphql');\nconst gql = require('graphql-tag');\nconst { buildASTSchema } = require('graphql');\n\nconst POSTS = [\n  { author: \"John Doe\", body: \"Hello world\" },\n  { author: \"Jane Doe\", body: \"Hi, planet!\" },\n];\n\nconst schema = buildASTSchema(gql`\n  type Query {\n    posts: [Post]\n    post(id: ID!): Post\n  }\n\n  type Post {\n    id: ID\n    author: String\n    body: String\n  }\n`);\n\nconst mapPost = (post, id) =&gt; post &amp;&amp; ({ id, ...post });\n\nconst root = {\n  posts: () =&gt; POSTS.map(mapPost),\n  post: ({ id }) =&gt; mapPost(POSTS[id], id),\n};\n\nconst app = express();\napp.use(cors());\napp.use('/graphql', graphqlHTTP({\n  schema,\n  rootValue: root,\n  graphiql: true,\n}));\n\nconst port = process.env.PORT || 4000\napp.listen(port);\nconsole.log(`Running a GraphQL API server at localhost:${port}/graphql`);\n</code></pre>\n<p>Let me explain the different parts of this code.</p>\n<p>At the top of the file, you use the <code>require</code> tag to import your dependencies. Native Node doesn’t support the <code>import</code> tag yet, but you can use <code>require</code> instead. A future version of Node will likely support <code>import</code>. Create React App uses <code>babel</code> to transpile the code before running it, which allows you to use the <code>import</code> syntax in the React code, so you’ll see that when we get to the frontend code.</p>\n<p>For now, this is just using some mock data, which is what the <code>const POSTS</code> contains. Each item contains an <code>author</code> and a <code>body</code>.</p>\n<p>The <code>gql</code> tag allows your favorite code editor to realize that you’re writing GraphQL code so that it can stylize it appropriately. It also parses the string and converts it to GraphQL AST <a href=\"https://blog.buildo.io/a-tour-of-abstract-syntax-trees-906c0574a067\">Abstract Syntax Tree</a>. You then need to build a schema using <code>buildASTSchema</code>.</p>\n<p>The GraphQL schema might be the most interesting part of this code. This is what defines the different types and allows you to say what the client can query. This will also automatically generate some very useful documentation so that you can just focus on coding.</p>\n<pre><code>type Query {\n  posts: [Post]\n  post(id: ID!): Post\n}\n\ntype Post {\n  id: ID\n  author: String\n  body: String\n}\n</code></pre>\n<p>Here, you’ve defined a <code>Post</code> type, which contains an <code>id</code>, and <code>author</code>, and a <code>body</code>. You need to say what the types are for each element. Here, <code>author</code> and <code>body</code> both use the primitive <code>String</code> type, and <code>id</code> is an <code>ID</code>.</p>\n<p>The <code>Query</code> type is a special type that lets you query the data. Here, you’re saying that <code>posts</code> will give you an array of <code>Post</code>s, but if you want a single <code>Post</code> you can query it by calling <code>post</code> and passing in the ID.</p>\n<pre><code>const mapPost = (post, id) =&gt; post &amp;&amp; ({ id, ...post });\n\nconst root = {\n  posts: () =&gt; POSTS.map(mapPost),\n  post: ({ id }) =&gt; mapPost(POSTS[id], id),\n};\n</code></pre>\n<p>You need to provide a set of resolvers to tell GraphQL how to handle the queries. When someone queries <code>posts</code>, it will run this function, providing an array of all the <code>POSTS</code>, using their index as an ID.</p>\n<p>When you query <code>post</code>, it expects an <code>id</code> and will return the post at the given index.</p>\n<pre><code>const app = express();\napp.use(cors());\napp.use('/graphql', graphqlHTTP({\n  schema,\n  rootValue: root,\n  graphiql: true,\n}));\n\nconst port = process.env.PORT || 4000\napp.listen(port);\nconsole.log(`Running a GraphQL API server at localhost:${port}/graphql`);\n</code></pre>\n<p>Now you are able to create the server. The <code>graphqlHTTP</code> function creates an Express server running GraphQL, which expects the resolvers as <code>rootValue</code>, and the schema. The <code>graphiql</code> flag is optional and will run a server for you allowing you to more easily visualize the data and see the auto-generated documentation. When you run <code>app.listen</code>, you’re starting the GraphQL server.</p>\n<p>To make sure we can easily run both the server and client at the same time, add the following dev dependencies:</p>\n<pre><code>yarn add -D nodemon@1.18.4 npm-run-all@4.1.3\n</code></pre>\n<p>Next, edit your <code>package.json</code> file so that the <code>scripts</code> section looks like this:</p>\n<pre><code>{\n  \"start\": \"npm-run-all --parallel watch:server start:web\",\n  \"start:web\": \"react-scripts start\",\n  \"start:server\": \"node src/server\",\n  \"watch:server\": \"nodemon --watch src/server src/server\",\n  \"build\": \"react-scripts build\",\n  \"test\": \"react-scripts test --env=jsdom\",\n  \"eject\": \"react-scripts eject\"\n},\n</code></pre>\n<p>Close your existing web server, then simply type <code>yarn start</code> again to run both the server and client at the same time. Whenever you make changes to the server, just the server will restart. Whenever you make changes to the frontend code, the page should automatically refresh with the latest changes.</p>\n<p>Point your browser to <code>http://localhost:4000/graphql</code> to get the GraphiQL server. You can always come back here and refresh after changing some code around in the server to see the latest Schema and test your queries.</p>\n<p><img src=\"https://developer.okta.com/assets/blog/graphql-express-react/graphiql-743319c6b059cfd1ed5bc28394749854af242b7f56d5c8521d43e106d548e9f0.png\" alt=\"GraphiQL\"></p>\n<h2>Connect React to GraphQL</h2>\n<p>Next, you need to connect the frontend to GraphQL. I’ll use Bootstrap for some decent styling with minimal effort. <a href=\"https://www.apollographql.com/docs/react/\">Apollo</a> makes a great React client that can link up to any GraphQL server. To install the dependencies you need for the frontend, run the following:</p>\n<pre><code>yarn add bootstrap@4.1.3 reactstrap@6.4.0 apollo-boost@0.1.16 react-apollo@2.1.11\n</code></pre>\n<p>You’ll need to configure the Apollo client to know where to connect to the backend. Create a new file <code>src/apollo.js</code> with the following code:</p>\n<pre><code>import ApolloClient from 'apollo-boost';\n\nexport default new ApolloClient({\n  uri: \"http://localhost:4000/graphql\",\n});\n</code></pre>\n<p>In order for Apollo’s <code>Query</code> React component to be able to connect using the client, the entire app needs to be wrapped in an <code>ApolloProvider</code> component. You’ll also want to include the styling for Bootstrap, and you can get rid of the <code>index.css</code> file that came with Create React App now. Make the following changes to your <code>src/index.js</code> file:</p>\n<pre><code>@@ -1,8 +1,17 @@\n import React from 'react';\n import ReactDOM from 'react-dom';\n-import './index.css';\n+import { ApolloProvider } from 'react-apollo';\n+\n+import 'bootstrap/dist/css/bootstrap.min.css';\n import App from './App';\n import registerServiceWorker from './registerServiceWorker';\n+import client from './apollo';\n\n-ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));\n+ReactDOM.render(\n+  &lt;ApolloProvider client={client}&gt;\n+    &lt;App /&gt;\n+  &lt;/ApolloProvider&gt;,\n+  document.getElementById('root')\n+);\n serviceWorker.unregister();\n+if (module.hot) module.hot.accept();\n</code></pre>\n<p>The <code>module.hot.accept()</code> isn’t really necessary, but makes it so that just the components changing within the app will refresh as you update them, rather than refreshing the entire page. Every once in a while you may need to refresh just to reset the state of the app, but generally, this leads to a quicker turnaround time.</p>\n<p>Create a new file <code>src/PostViewer.js</code> that will fetch the data and render it in a table:</p>\n<pre><code>import React from 'react';\nimport gql from 'graphql-tag';\nimport { Query } from 'react-apollo';\nimport { Table } from 'reactstrap';\n\nexport const GET_POSTS = gql`\n  query GetPosts {\n    posts {\n      id\n      author\n      body\n    }\n  }\n`;\n\nexport default () =&gt; (\n  &lt;Query query={GET_POSTS}&gt;\n    {({ loading, data }) =&gt; !loading &amp;&amp; (\n      &lt;Table&gt;\n        &lt;thead&gt;\n          &lt;tr&gt;\n            &lt;th&gt;Author&lt;/th&gt;\n            &lt;th&gt;Body&lt;/th&gt;\n          &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n          {data.posts.map(post =&gt; (\n            &lt;tr key={post.id}&gt;\n              &lt;td&gt;{post.author}&lt;/td&gt;\n              &lt;td&gt;{post.body}&lt;/td&gt;\n            &lt;/tr&gt;\n          ))}\n        &lt;/tbody&gt;\n      &lt;/Table&gt;\n    )}\n  &lt;/Query&gt;\n);\n</code></pre>\n<p>The <code>Query</code> component requires a GraphQL query. In this case, you’re just getting all of the posts with their ID and the <code>author</code> and <code>body</code>. The <code>Query</code> component also requires a render function as its only child. It provides a <code>loading</code> state, but in our case, we just won’t show anything while it’s loading, since it will be really quick to fetch the data locally. Once it’s done loading, the <code>data</code> variable will be an object including the data you requested.</p>\n<p>The above code renders a table (<code>Table</code> is a component that includes all the Bootstrap classes you need to make it look pretty) with all of the posts.</p>\n<p>You should now change your <code>src/App.js</code> file to include the <code>PostViewer</code> component you just made. It should look like this:</p>\n<pre><code>import React, { Component } from 'react';\n\nimport PostViewer from './PostViewer';\n\nclass App extends Component {\n  render() {\n    return (\n      &lt;main&gt;\n        &lt;PostViewer /&gt;\n      &lt;/main&gt;\n    );\n  }\n}\n\nexport default App;\n</code></pre>\n<p>Now if you go to <code>http://localhost:3000</code> you should see this:</p>\n<p><img src=\"https://developer.okta.com/assets/blog/graphql-express-react/plain-table-596b8d563739fbc4032de03fe94e3501bbfd156cdd7193bc49a053d2d5ea16b5.png\" alt=\"plain table\"></p>\n<h2>Add the Ability to Edit Posts in GraphQL</h2>\n<p>In GraphQL, a query is typically read-only. If you want to modify data, you should use what’s known as a <em>mutation</em> instead.</p>\n<p>Create a new <code>Mutation</code> type in your <code>const schema</code> in <code>src/server/index.js</code> to submit a post. You can create an <code>input</code> type to simplify your input variables. The new mutation should return the new <code>Post</code> on success:</p>\n<pre><code>type Mutation {\n  submitPost(input: PostInput!): Post\n}\n\ninput PostInput {\n  id: ID\n  author: String!\n  body: String!\n}\n</code></pre>\n<p>You’ll need to update your <code>root</code> variable to create a new resolver for <code>submitPost</code> as well. Add the following resolver:</p>\n<pre><code>submitPost: ({ input: { id, author, body } }) =&gt; {\n  const post = { author, body };\n  let index = POSTS.length;\n\n  if (id != null &amp;&amp; id &gt;= 0 &amp;&amp; id &lt; POSTS.length) {\n    if (POSTS[id].authorId !== authorId) return null;\n\n    POSTS.splice(id, 1, post);\n    index = id;\n  } else {\n    POSTS.push(post);\n  }\n\n  return mapPost(post, index);\n},\n</code></pre>\n<p>If you provide an <code>id</code>, it will try to find the post at that index and replace the data with the <code>author</code> and <code>body</code> that was provided. Otherwise, it will add a new post. Then it returns the post you provided along with the new <code>id</code> for it. When you send a mutation request to GraphQL, you can define which pieces you want back:</p>\n<p><img src=\"https://developer.okta.com/assets/blog/graphql-express-react/submit-post-d2e4223335b436d4e6a5110e2f64b9d8ddfda355f2ea54477d8815bcefbc7aee.png\" alt=\"submit post\"></p>\n<p>For the frontend, you’ll need to create a new component for editing posts. Forms in React can be made easier by a library called <a href=\"https://github.com/final-form/react-final-form\">Final Form</a>. Install it with <code>yarn</code>:</p>\n<pre><code>yarn add final-form@4.10.0 react-final-form@3.6.5\n</code></pre>\n<p>Now, make a new file <code>src/PostEditor.js</code> and fill it with the following (I’ll explain it in more detail just below):</p>\n<pre><code>import React from 'react';\nimport gql from 'graphql-tag';\nimport {\n  Button,\n  Form,\n  FormGroup,\n  Label,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n} from 'reactstrap';\nimport { Form as FinalForm, Field } from 'react-final-form';\n\nimport client from './apollo';\nimport { GET_POSTS } from './PostViewer';\n\nconst SUBMIT_POST = gql`\n  mutation SubmitPost($input: PostInput!) {\n    submitPost(input: $input) {\n      id\n    }\n  }\n`;\n\nconst PostEditor = ({ post, onClose }) =&gt; (\n  &lt;FinalForm\n    onSubmit={async ({ id, author, body }) =&gt; {\n      const input = { id, author, body };\n\n      await client.mutate({\n        variables: { input },\n        mutation: SUBMIT_POST,\n        refetchQueries: () =&gt; [{ query: GET_POSTS }],\n      });\n\n      onClose();\n    }}\n    initialValues={post}\n    render={({ handleSubmit, pristine, invalid }) =&gt; (\n      &lt;Modal isOpen toggle={onClose}&gt;\n        &lt;Form onSubmit={handleSubmit}&gt;\n          &lt;ModalHeader toggle={onClose}&gt;\n            {post.id ? 'Edit Post' : 'New Post'}\n          &lt;/ModalHeader&gt;\n          &lt;ModalBody&gt;\n            &lt;FormGroup&gt;\n              &lt;Label&gt;Author&lt;/Label&gt;\n              &lt;Field\n                required\n                name=\"author\"\n                className=\"form-control\"\n                component=\"input\"\n              /&gt;\n            &lt;/FormGroup&gt;\n            &lt;FormGroup&gt;\n              &lt;Label&gt;Body&lt;/Label&gt;\n              &lt;Field\n                required\n                name=\"body\"\n                className=\"form-control\"\n                component=\"input\"\n              /&gt;\n            &lt;/FormGroup&gt;\n          &lt;/ModalBody&gt;\n          &lt;ModalFooter&gt;\n            &lt;Button type=\"submit\" disabled={pristine} color=\"primary\"&gt;Save&lt;/Button&gt;\n            &lt;Button color=\"secondary\" onClick={onClose}&gt;Cancel&lt;/Button&gt;\n          &lt;/ModalFooter&gt;\n        &lt;/Form&gt;\n      &lt;/Modal&gt;\n    )}\n  /&gt;\n);\n\nexport default PostEditor;\n</code></pre>\n<p>The <code>submitPost</code> mutation is the new mutation to connect to the backend. It can use the <code>PostInput</code> type defined in the server:</p>\n<pre><code>const SUBMIT_POST = gql`\n  mutation SubmitPost($input: PostInput!) {\n    submitPost(input: $input) {\n      id\n    }\n  }\n`;\n</code></pre>\n<p>Final Form takes an <code>onSubmit</code> function that will pass in the data entered by the user. After the post is submitted, you’ll want to close the modal, so <code>PostEditor</code> takes an <code>onClose</code> prop to call when you’re done submitting.</p>\n<p>Final Form also takes an <code>initialValues</code> object to define what values the form should initially have. In this case, the <code>PostEditor</code> component will take a <code>post</code> prop that has the variables you need in it, so that gets passed along as the initial values.</p>\n<p>The other required prop is the <code>render</code> function, which will render the form. Final Form gives you a few useful form props so you can know if the form is valid or not, or if it’s been modified from the <code>initialValues</code>.</p>\n<pre><code>const PostEditor = ({ post, onClose }) =&gt; (\n  &lt;FinalForm\n    onSubmit={/* ... */}\n    initialValues={post}\n    render={/* ... */}\n  /&gt;\n);\n\nexport default PostEditor;\n</code></pre>\n<p>In the <code>onSubmit</code> function, you’ll call the mutation needed to submit the post. Apollo lets you re-fetch queries. Since you know your list of posts will be out of date once you submit edits, you can re-fetch the <code>GET_POSTS</code> query here.</p>\n<pre><code>onSubmit={async ({ id, author, body }) =&gt; {\n  const input = { id, author, body };\n\n  await client.mutate({\n    variables: { input },\n    mutation: SUBMIT_POST,\n    refetchQueries: () =&gt; [{ query: GET_POSTS }],\n  });\n\n  onClose();\n}}\n</code></pre>\n<p>The <code>render</code> function will display a Bootstrap modal. This <code>PostEditor</code> component will only be rendered when you want it to be open, so <code>isOpen</code> is just set to <code>true</code>. Here you also use the <code>onClose</code> prop to close the modal when the user clicks outside the modal, hits <code>Esc</code>, or clicks the Cancel button.</p>\n<p>The form needs to have the <code>handleSubmit</code> function passed to it as an <code>onSubmit</code> prop. This tells the form to go through Final Form instead of sending a <code>POST</code> request to the page.</p>\n<p>Final Form also handles all the boilerplate needed to have a controlled <code>input</code>. Instead of storing the data in state whenever the user types something, you can just use the <code>Field</code> component.</p>\n<pre><code>render={({ handleSubmit, pristine, invalid }) =&gt; (\n  &lt;Modal isOpen toggle={onClose}&gt;\n    &lt;Form onSubmit={handleSubmit}&gt;\n      &lt;ModalHeader toggle={onClose}&gt;\n        {post.id ? 'Edit Post' : 'New Post'}\n      &lt;/ModalHeader&gt;\n      &lt;ModalBody&gt;\n        &lt;FormGroup&gt;\n          &lt;Label&gt;Author&lt;/Label&gt;\n          &lt;Field\n            required\n            name=\"author\"\n            className=\"form-control\"\n            component=\"input\"\n          /&gt;\n        &lt;/FormGroup&gt;\n        &lt;FormGroup&gt;\n          &lt;Label&gt;Body&lt;/Label&gt;\n          &lt;Field\n            required\n            name=\"body\"\n            className=\"form-control\"\n            component=\"input\"\n          /&gt;\n        &lt;/FormGroup&gt;\n      &lt;/ModalBody&gt;\n      &lt;ModalFooter&gt;\n        &lt;Button type=\"submit\" disabled={pristine} color=\"primary\"&gt;Save&lt;/Button&gt;\n        &lt;Button color=\"secondary\" onClick={onClose}&gt;Cancel&lt;/Button&gt;\n      &lt;/ModalFooter&gt;\n    &lt;/Form&gt;\n  &lt;/Modal&gt;\n)}\n</code></pre>\n<p>Next, you’ll have to make a couple small changes to your <code>PostViewer</code>. This adds a hook to each row so that you can determine whether the row should be editable or not and if so, changes the styles a bit and lets you click on the row. Clicking on the row calls another callback, which you can use to set which post is being edited.</p>\n<pre><code>diff --git a/src/PostViewer.js b/src/PostViewer.js\nindex 5c53b5a..84177e0 100644\n--- a/src/PostViewer.js\n+++ b/src/PostViewer.js\n@@ -13,7 +13,11 @@ export const GET_POSTS = gql`\n   }\n `;\n\n-export default () =&gt; (\n+const rowStyles = (post, canEdit) =&gt; canEdit(post)\n+  ? { cursor: 'pointer', fontWeight: 'bold' }\n+  : {};\n+\n+const PostViewer = ({ canEdit, onEdit }) =&gt; (\n   &lt;Query query={GET_POSTS}&gt;\n     {({ loading, data }) =&gt; !loading &amp;&amp; (\n       &lt;Table&gt;\n@@ -25,7 +29,11 @@ export default () =&gt; (\n         &lt;/thead&gt;\n         &lt;tbody&gt;\n           {data.posts.map(post =&gt; (\n-            &lt;tr key={post.id}&gt;\n+            &lt;tr\n+              key={post.id}\n+              style={rowStyles(post, canEdit)}\n+              onClick={() =&gt; canEdit(post) &amp;&amp; onEdit(post)}\n+            &gt;\n               &lt;td&gt;{post.author}&lt;/td&gt;\n               &lt;td&gt;{post.body}&lt;/td&gt;\n             &lt;/tr&gt;\n@@ -35,3 +43,10 @@ export default () =&gt; (\n     )}\n   &lt;/Query&gt;\n );\n+\n+PostViewer.defaultProps = {\n+  canEdit: () =&gt; false,\n+  onEdit: () =&gt; null,\n+};\n+\n+export default PostViewer;\n</code></pre>\n<p>Now, tie this all together in <code>src/App.js</code>. You can create a “New Post” button to create a new post, and make it so that you can edit any other existing post as well:</p>\n<pre><code>import React, { Component } from 'react';\nimport { Button, Container } from 'reactstrap';\n\nimport PostViewer from './PostViewer';\nimport PostEditor from './PostEditor';\n\nclass App extends Component {\n  state = {\n    editing: null,\n  };\n\n  render() {\n    const { editing } = this.state;\n\n    return (\n      &lt;Container fluid&gt;\n        &lt;Button\n          className=\"my-2\"\n          color=\"primary\"\n          onClick={() =&gt; this.setState({ editing: {} })}\n        &gt;\n          New Post\n        &lt;/Button&gt;\n        &lt;PostViewer\n          canEdit={() =&gt; true}\n          onEdit={(post) =&gt; this.setState({ editing: post })}\n        /&gt;\n        {editing &amp;&amp; (\n          &lt;PostEditor\n            post={editing}\n            onClose={() =&gt; this.setState({ editing: null })}\n          /&gt;\n        )}\n      &lt;/Container&gt;\n    );\n  }\n}\n\nexport default App;\n</code></pre>\n<h2>Add User Authentication to the React + GraphQL Web App</h2>\n<p>One simple way to add authentication to your project is with Okta. Okta is a cloud service that allows developers to create, edit, and securely store user accounts and user account data, and connect them with one or multiple applications. If you don’t already have one, <a href=\"https://developer.okta.com/signup/\">sign up for a forever-free developer account</a>. Log in to your developer console, navigate to <strong>Applications</strong>, then click <strong>Add Application</strong>. Select <strong>Single-Page App</strong>, then click <strong>Next</strong>.</p>\n<p>Since Create React App runs on port 3000 by default, you should add that as a Base URI and Login Redirect URI. Your settings should look like the following:</p>\n<p><img src=\"https://developer.okta.com/assets/blog/graphql-express-react/create-new-application-settings-31cf8fdf708dbb8c222e9e5dd07b7e89f53cc2bae6b5c69acf427a44faadaeef.png\" alt=\"create new application settings\"></p>\n<p>Click <strong>Done</strong> to save your app, then copy your <strong>Client ID</strong> and paste it as a variable into a file called <code>.env.local</code> in the root of your project. This will allow you to access the file in your code without needing to store credentials in source control. You’ll also need to add your organization URL (without the <code>-admin</code> suffix). Environment variables (other than <code>NODE_ENV</code>) need to start with <code>REACT_APP_</code> in order for Create React App to read them, so the file should end up looking like this:</p>\n<p><strong>.env.local</strong></p>\n<pre><code>REACT_APP_OKTA_CLIENT_ID={yourClientId}\nREACT_APP_OKTA_ORG_URL=https://{yourOktaDomain}\n</code></pre>\n<p>You’re also going to need an API token later for the server, so while you’re in there, navigate to <strong>API</strong> -&gt; <strong>Tokens</strong>, then click on <strong>Create Token</strong>. You can have many tokens, so just give this one a name that reminds you what it’s for, like “GraphQL Express”. You’ll be given a token that you can only see right now. If you lose the token, you’ll have to create another one. Add this to <code>.env</code> also.</p>\n<pre><code>REACT_APP_OKTA_TOKEN={yourOktaAPIToken}\n</code></pre>\n<p>The easiest way to add Authentication with Okta to a React app is to use <a href=\"https://github.com/okta/okta-oidc-js/tree/master/packages/okta-react\">Okta’s React SDK</a>. You’ll also need to add routes, which can be done using <a href=\"https://reacttraining.com/react-router/\">React Router</a>.</p>\n<pre><code>yarn add @okta/okta-react@1.1.1 react-router-dom@4.3.1\n</code></pre>\n<p>In order to know if the user is authenticated, Okta requires the app to be wrapped in a <code>Security</code> component with some configuration. It also depends on React Router, so you’ll end up with a <code>BrowserRouter</code> component, wrapping a <code>Security</code> component, wrapping an <code>ApolloProvider</code> component, which finally wraps your <code>App</code> in a <code>Route</code>. Your <code>src/index.js</code> file should end up looking like this:</p>\n<pre><code>import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport { Security, ImplicitCallback } from '@okta/okta-react';\nimport { ApolloProvider } from 'react-apollo';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\nimport client from './apollo';\n\nReactDOM.render(\n  &lt;BrowserRouter&gt;\n    &lt;Security\n      issuer={`${process.env.REACT_APP_OKTA_ORG_URL}/oauth2/default`}\n      redirect_uri={`${window.location.origin}/implicit/callback`}\n      client_id={process.env.REACT_APP_OKTA_CLIENT_ID}\n    &gt;\n      &lt;ApolloProvider client={client}&gt;\n        &lt;Route path=\"/implicit/callback\" component={ImplicitCallback} /&gt;\n        &lt;Route path=\"/\" component={App} /&gt;\n      &lt;/ApolloProvider&gt;\n    &lt;/Security&gt;\n  &lt;/BrowserRouter&gt;,\n  document.getElementById('root')\n);\nregisterServiceWorker();\nif (module.hot) module.hot.accept();\n</code></pre>\n<p>The Okta SDK comes with a <code>withAuth</code> higher order component (HoC) that can be used for a wide variety of auth-related things, but for this example, you’ll only need to know whether or not you’re authenticated, and some information about the user. To make this a little easier, I wrote a simple HoC to override the one that comes with the Okta SDK. Create a new file <code>src/withAuth.js</code> containing the following:</p>\n<pre><code>import React from 'react';\nimport { withAuth } from '@okta/okta-react';\n\nexport default Component =&gt; withAuth(class WithAuth extends React.Component {\n  state = {\n    ...this.props.auth,\n    authenticated: null,\n    user: null,\n    loading: true,\n  };\n\n  componentDidMount() {\n    this.updateAuth();\n  }\n\n  componentDidUpdate() {\n    this.updateAuth();\n  }\n\n  async updateAuth() {\n    const authenticated = await this.props.auth.isAuthenticated();\n    if (authenticated !== this.state.authenticated) {\n      const user = await this.props.auth.getUser();\n      this.setState({ authenticated, user, loading: false });\n    }\n  }\n\n  render() {\n    const { auth, ...props } = this.props;\n    return &lt;Component {...props} auth={this.state} /&gt;;\n  }\n});\n</code></pre>\n<p>By wrapping a component with this new function, your app will automatically be re-rendered whenever a user logs in or out, and you’ll be able to access information about the user.</p>\n<p>Now you can wrap the <code>App</code> component with this <code>withAuth</code> HoC. For a short time when the app first loads, Okta won’t quite be sure whether a user is logged in or not. To keep things simple, just don’t render anything in your <code>App</code> component during this loading period. You could, however, choose to render the posts and just disable editing until you know more information about the user.</p>\n<p>At the very top of your render function in <code>src/App.js</code>, add the following:</p>\n<pre><code>const { auth } = this.props;\nif (auth.loading) return null;\n\nconst { user, login, logout } = auth;\n</code></pre>\n<p>Now you can replace the “New Post” button with the following code, which will render a “Sign In” button if you’re not logged in. If you are logged in, you’ll instead see both the “New Post” button you had before, as well as a “Sign Out” button. This will make it so that you must be logged in order to create a new post.</p>\n<pre><code>{user ? (\n  &lt;div&gt;\n    &lt;Button\n      className=\"my-2\"\n      color=\"primary\"\n      onClick={() =&gt; this.setState({ editing: {} })}\n    &gt;\n      New Post\n    &lt;/Button&gt;\n    &lt;Button\n      className=\"m-2\"\n      color=\"secondary\"\n      onClick={() =&gt; logout()}\n    &gt;\n      Sign Out (signed in as {user.name})\n    &lt;/Button&gt;\n  &lt;/div&gt;\n) : (\n  &lt;Button\n    className=\"my-2\"\n    color=\"primary\"\n    onClick={() =&gt; login()}\n  &gt;\n    Sign In\n  &lt;/Button&gt;\n)}\n</code></pre>\n<p>To make sure you also can’t edit a post unless you’re logged, change the <code>canEdit</code> prop to check that you have a user.</p>\n<pre><code>canEdit={() =&gt; Boolean(user)}\n</code></pre>\n<p>You also need to export <code>withAuth(App)</code> instead of <code>App</code>. Your <code>src/App.js</code> file should now look like this:</p>\n<pre><code>import React, { Component } from 'react';\nimport { Button, Container } from 'reactstrap';\n\nimport PostViewer from './PostViewer';\nimport PostEditor from './PostEditor';\nimport withAuth from './withAuth';\n\nclass App extends Component {\n  state = {\n    editing: null,\n  };\n\n  render() {\n    const { auth } = this.props;\n    if (auth.loading) return null;\n\n    const { user, login, logout } = auth;\n    const { editing } = this.state;\n\n    return (\n      &lt;Container fluid&gt;\n        {user ? (\n          &lt;div&gt;\n            &lt;Button\n              className=\"my-2\"\n              color=\"primary\"\n              onClick={() =&gt; this.setState({ editing: {} })}\n            &gt;\n              New Post\n            &lt;/Button&gt;\n            &lt;Button\n              className=\"m-2\"\n              color=\"secondary\"\n              onClick={() =&gt; logout()}\n            &gt;\n              Sign Out (signed in as {user.name})\n            &lt;/Button&gt;\n          &lt;/div&gt;\n        ) : (\n          &lt;Button\n            className=\"my-2\"\n            color=\"primary\"\n            onClick={() =&gt; login()}\n          &gt;\n            Sign In\n          &lt;/Button&gt;\n        )}\n        &lt;PostViewer\n          canEdit={() =&gt; Boolean(user)}\n          onEdit={(post) =&gt; this.setState({ editing: post })}\n        /&gt;\n        {editing &amp;&amp; (\n          &lt;PostEditor\n            post={editing}\n            onClose={() =&gt; this.setState({ editing: null })}\n          /&gt;\n        )}\n      &lt;/Container&gt;\n    );\n  }\n}\n\nexport default withAuth(App);\n</code></pre>\n<h2>Add User Authentication to the Server</h2>\n<p>The web app now requires you to be logged in to create a post, but a savvy user could still modify the data by sending a request directly to your server. To prevent this, add some authentication to the server. You’ll need to add Okta’s Node SDK and the JWT Verifier as dependencies. You’ll also need to use <code>dotenv</code> in order to read the variables from <code>.env.local</code>.</p>\n<pre><code>yarn add @okta/jwt-verifier@0.0.12 @okta/okta-sdk-nodejs@1.2.0 dotenv@6.0.0\n</code></pre>\n<p>At the top of your <code>src/server/index.js</code> file, you’ll need to tell <code>dotenv</code> to read in the environment variables:</p>\n<pre><code>require('dotenv').config({ path: '.env.local' });\n</code></pre>\n<p>You’re going to need the frontend to send a JSON Web Token (JWT) so that users can identify themselves. When you get a JWT on the server, you’ll need to verify it using Okta’s JWT Verifier. To get more information about a user, you’ll also need to use Okta’s Node SDK. You can set these up near the top of your server, just after all the other <code>require</code> statements.</p>\n<pre><code>const { Client } = require('@okta/okta-sdk-nodejs');\nconst OktaJwtVerifier = require('@okta/jwt-verifier');\n\nconst oktaJwtVerifier = new OktaJwtVerifier({\n  clientId: process.env.REACT_APP_OKTA_CLIENT_ID,\n  issuer: `${process.env.REACT_APP_OKTA_ORG_URL}/oauth2/default`,\n});\n\nconst client = new Client({\n  orgUrl: process.env.REACT_APP_OKTA_ORG_URL,\n  token: process.env.REACT_APP_OKTA_TOKEN,\n});\n</code></pre>\n<p>Now that you’re going to be using real users, it doesn’t make as much sense to just send a string with the username, especially since that could change over time. It would be better if a post is associated with a user. To set this up, create a new <code>AUTHORS</code> variable for your users, and change the <code>POSTS</code> variable to just have an <code>authorId</code> instead of an <code>author</code> string:</p>\n<pre><code>const AUTHORS = {\n  1: { id: 1, name: \"John Doe\" },\n  2: { id: 2, name: \"Jane Doe\" },\n};\n\nconst POSTS = [\n  { authorId: 1, body: \"Hello world\" },\n  { authorId: 2, body: \"Hi, planet!\" },\n];\n</code></pre>\n<p>In your schema, you’ll no longer need the <code>author: String</code> input in <code>PostInput</code>, and <code>author</code> on <code>Post</code> should now be of type <code>Author</code> instead of <code>String</code>. You’ll also need to make this new <code>Author</code> type:</p>\n<pre><code>type Author {\n  id: ID\n  name: String\n}\n</code></pre>\n<p>When looking up your user, you’ll now want to pull the author from the <code>AUTHORS</code> variable:</p>\n<pre><code>const mapPost = (post, id) =&gt; post &amp;&amp; ({\n  ...post,\n  id,\n  author: AUTHORS[post.authorId],\n});\n</code></pre>\n<p>Now, you’ll need to create a <code>getUserId</code> function that can verify the access token and fetch some information about the user. The token will be sent as an <code>Authorization</code> header, and will look something like <code>Bearer eyJraWQ...7h-zfqg</code>. The following function will add the author’s name to the <code>AUTHORS</code> object if it doesn’t already exist.</p>\n<pre><code>const getUserId = async ({ authorization }) =&gt; {\n  try {\n    const accessToken = authorization.trim().split(' ')[1];\n    const { claims: { uid } } = await oktaJwtVerifier.verifyAccessToken(accessToken);\n\n    if (!AUTHORS[uid]) {\n      const { profile: { firstName, lastName } } = await client.getUser(uid);\n\n      AUTHORS[uid] = {\n        id: uid,\n        name: [firstName, lastName].filter(Boolean).join(' '),\n      };\n    }\n\n    return uid;\n  } catch (error) {\n    return null;\n  }\n};\n</code></pre>\n<p>Now you can change the <code>submitPost</code> function to get the user’s ID when they post. If the user isn’t logged in, you can just return <code>null</code>. This will prevent the post from getting created. You can also return <code>null</code> if the user is trying to edit a post they didn’t create.</p>\n<pre><code>-  submitPost: ({ input: { id, author, body } }) =&gt; {\n-    const post = { author, body };\n+  submitPost: async ({ input: { id, body } }, { headers }) =&gt; {\n+    const authorId = await getUserId(headers);\n+    if (!authorId) return null;\n+\n+    const post = { authorId, body };\n     let index = POSTS.length;\n\n     if (id != null &amp;&amp; id &gt;= 0 &amp;&amp; id &lt; POSTS.length) {\n+      if (POSTS[id].authorId !== authorId) return null;\n+\n       POSTS.splice(id, 1, post);\n       index = id;\n     } else {\n</code></pre>\n<p>Your final <code>src/server/index.js</code> file should now look like this:</p>\n<pre><code>require('dotenv').config({ path: '.env.local' });\n\nconst express = require('express');\nconst cors = require('cors');\nconst graphqlHTTP = require('express-graphql');\nconst gql = require('graphql-tag');\nconst { buildASTSchema } = require('graphql');\nconst { Client } = require('@okta/okta-sdk-nodejs');\nconst OktaJwtVerifier = require('@okta/jwt-verifier');\n\nconst oktaJwtVerifier = new OktaJwtVerifier({\n  clientId: process.env.REACT_APP_OKTA_CLIENT_ID,\n  issuer: `${process.env.REACT_APP_OKTA_ORG_URL}/oauth2/default`,\n});\n\nconst client = new Client({\n  orgUrl: process.env.REACT_APP_OKTA_ORG_URL,\n  token: process.env.REACT_APP_OKTA_TOKEN,\n});\n\nconst AUTHORS = {\n  1: { id: 1, name: \"John Doe\" },\n  2: { id: 2, name: \"Jane Doe\" },\n};\n\nconst POSTS = [\n  { authorId: 1, body: \"Hello world\" },\n  { authorId: 2, body: \"Hi, planet!\" },\n];\n\nconst schema = buildASTSchema(gql`\n  type Query {\n    posts: [Post]\n    post(id: ID): Post\n  }\n\n  type Mutation {\n    submitPost(input: PostInput!): Post\n  }\n\n  input PostInput {\n    id: ID\n    body: String\n  }\n\n  type Post {\n    id: ID\n    author: Author\n    body: String\n  }\n\n  type Author {\n    id: ID\n    name: String\n  }\n`);\n\nconst mapPost = (post, id) =&gt; post &amp;&amp; ({\n  ...post,\n  id,\n  author: AUTHORS[post.authorId],\n});\n\nconst getUserId = async ({ authorization }) =&gt; {\n  try {\n    const accessToken = authorization.trim().split(' ')[1];\n    const { claims: { uid } } = await oktaJwtVerifier.verifyAccessToken(accessToken);\n\n    if (!AUTHORS[uid]) {\n      const { profile: { firstName, lastName } } = await client.getUser(uid);\n\n      AUTHORS[uid] = {\n        id: uid,\n        name: [firstName, lastName].filter(Boolean).join(' '),\n      };\n    }\n\n    return uid;\n  } catch (error) {\n    return null;\n  }\n};\n\nconst root = {\n  posts: () =&gt; POSTS.map(mapPost),\n  post: ({ id }) =&gt; mapPost(POSTS[id], id),\n  submitPost: async ({ input: { id, body } }, { headers }) =&gt; {\n    const authorId = await getUserId(headers);\n    if (!authorId) return null;\n\n    const post = { authorId, body };\n    let index = POSTS.length;\n\n    if (id != null &amp;&amp; id &gt;= 0 &amp;&amp; id &lt; POSTS.length) {\n      if (POSTS[id].authorId !== authorId) return null;\n\n      POSTS.splice(id, 1, post);\n      index = id;\n    } else {\n      POSTS.push(post);\n    }\n\n    return mapPost(post, index);\n  },\n};\n\nconst app = express();\napp.use(cors());\napp.use('/graphql', graphqlHTTP({\n  schema,\n  rootValue: root,\n  graphiql: true,\n}));\n\nconst port = process.env.PORT || 4000\napp.listen(port);\nconsole.log(`Running a GraphQL API server at localhost:${port}/graphql`);\n</code></pre>\n<p>You’ll now need to make a few more frontend changes to make sure you’re requesting an <code>author</code> object instead of assuming it’s a string, and you’ll need to pass in your auth token as a header.</p>\n<p>The <code>PostViewer</code> component will need a minor update</p>\n<pre><code>diff --git a/src/PostViewer.js b/src/PostViewer.js\nindex 84177e0..6bfddb9 100644\n--- a/src/PostViewer.js\n+++ b/src/PostViewer.js\n@@ -7,7 +7,10 @@ export const GET_POSTS = gql`\n   query GetPosts {\n     posts {\n       id\n-      author\n+      author {\n+        id\n+        name\n+      }\n       body\n     }\n   }\n@@ -34,7 +37,7 @@ const PostViewer = ({ canEdit, onEdit }) =&gt; (\n               style={rowStyles(post, canEdit)}\n               onClick={() =&gt; canEdit(post) &amp;&amp; onEdit(post)}\n             &gt;\n-              &lt;td&gt;{post.author}&lt;/td&gt;\n+              &lt;td&gt;{post.author.name}&lt;/td&gt;\n               &lt;td&gt;{post.body}&lt;/td&gt;\n             &lt;/tr&gt;\n           ))}\n</code></pre>\n<p>In <code>PostEditor</code> you’ll just need to get rid of the <code>author</code> altogether since that won’t be editable by the user, and will be determined by the auth token.</p>\n<pre><code>diff --git a/src/PostEditor.js b/src/PostEditor.js\nindex 182d1cc..6cb075c 100644\n--- a/src/PostEditor.js\n+++ b/src/PostEditor.js\n@@ -25,8 +25,8 @@ const SUBMIT_POST = gql`\n\n const PostEditor = ({ post, onClose }) =&gt; (\n   &lt;FinalForm\n-    onSubmit={async ({ id, author, body }) =&gt; {\n-      const input = { id, author, body };\n+    onSubmit={async ({ id, body }) =&gt; {\n+      const input = { id, body };\n\n       await client.mutate({\n         variables: { input },\n@@ -44,15 +44,6 @@ const PostEditor = ({ post, onClose }) =&gt; (\n             {post.id ? 'Edit Post' : 'New Post'}\n           &lt;/ModalHeader&gt;\n           &lt;ModalBody&gt;\n-            &lt;FormGroup&gt;\n-              &lt;Label&gt;Author&lt;/Label&gt;\n-              &lt;Field\n-                required\n-                name=\"author\"\n-                className=\"form-control\"\n-                component=\"input\"\n-              /&gt;\n-            &lt;/FormGroup&gt;\n             &lt;FormGroup&gt;\n               &lt;Label&gt;Body&lt;/Label&gt;\n               &lt;Field\n</code></pre>\n<p>Your Apollo Client is where you’ll be sending the auth token. In order to access the auth token, you’ll need some sort of closure. On each request, Apollo lets you modify headers. Change <code>src/apollo.js</code> to the following:</p>\n<pre><code>import ApolloClient from 'apollo-boost';\n\nlet auth;\n\nexport const updateAuth = (newAuth) =&gt; {\n  auth = newAuth;\n};\n\nexport default new ApolloClient({\n  uri: \"http://localhost:4000/graphql\",\n  request: async (operation) =&gt; {\n    const token = await auth.getAccessToken();\n    operation.setContext({\n      headers: {\n        authorization: `Bearer ${token}`,\n      },\n    });\n  },\n});\n</code></pre>\n<p>Now you’ll need to call the <code>updateAuth</code> component whenever <code>auth</code> changes in <code>src/withAuth.js</code>, to make sure that’s always up to date.</p>\n<pre><code>diff --git a/src/withAuth.js b/src/withAuth.js\nindex cce1b24..6d29dcc 100644\n--- a/src/withAuth.js\n+++ b/src/withAuth.js\n@@ -1,6 +1,8 @@\n import React from 'react';\n import { withAuth } from '@okta/okta-react';\n\n+import { updateAuth } from './apollo';\n+\n export default Component =&gt; withAuth(class WithAuth extends React.Component {\n   state = {\n     ...this.props.auth,\n@@ -18,6 +20,8 @@ export default Component =&gt; withAuth(class WithAuth extends React.Component {\n   }\n\n   async updateAuth() {\n+    updateAuth(this.props.auth);\n+\n     const authenticated = await this.props.auth.isAuthenticated();\n     if (authenticated !== this.state.authenticated) {\n       const user = await this.props.auth.getUser();\n</code></pre>\n<p>Now if you change <code>canEdit</code> in your <code>src/App.js</code> file once again, you can make it so users can only edit their own posts:</p>\n<pre><code>onChange={(post) =&gt; user &amp;&amp; user.sub === post.author.id}\n</code></pre>\n<h2>Learn more about GraphQL, React, Express and Web Security</h2>\n<p>You’ve now successfully built a GraphQL server, hooked it up to React, and locked it down with secure user authentication! As an exercise, see if you can switch the server from using simple, in-memory JavaScript objects to using a persistent data storage. For an example of using Sequelize in Node, check out <a href=\"https://developer.okta.com/blog/2018/06/28/tutorial-build-a-basic-crud-app-with-node\">Randall’s blog</a>.</p>\n<p>If you’d like to see the final sample code, you can find it <a href=\"https://github.com/oktadeveloper/okta-graphql-react-express-example\">on github</a>.</p>\n<p>If you’d like to learn more about GraphQL, Express, or React, check out some of these other posts on the Okta developer blog:</p>\n<ul><li><a href=\"https://developer.okta.com/blog/2018/09/13/build-and-understand-express-middleware-through-examples\">Build and Understand Express Middleware Through Examples</a></li>\n<li><a href=\"https://developer.okta.com/blog/2018/07/10/build-a-basic-crud-app-with-node-and-react\">Build a Basic CRUD App with Node and React</a></li>\n<li><a href=\"https://developer.okta.com/blog/2018/08/17/build-and-understand-user-authentication-in-node\">Build and Understand a Simple Node.js Website with User Authentication</a></li>\n<li><a href=\"https://developer.okta.com/blog/2018/07/11/build-react-graphql-api-user-authentication\">Build a Health Tracking App with React, GraphQL, and User Authentication</a></li>\n</ul>","filePath":"pages/React/.md","_id":"9KnPTaOovPGeRDjH"}
{"date":"2018-11-14T16:42:35.365Z","title":"A Bunch of Options for Looping Over querySelectorAll NodeLists","sourceUrl":"https://css-tricks.com/a-bunch-of-options-for-looping-over-queryselectorall-nodelists/","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"," ES6"],"author":"CHRIS COYIER","excerpt":"A common need when writing vanilla JavaScript is to find a selection of elements in the DOM and loop over them. For example, finding instances of a button and attaching a click handler to them.","dateCreated":1542213354715,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Wed Nov 14 2018 22:12:35 GMT+0530 (India Standard Time)'\ntitle: 'A Bunch of Options for Looping Over querySelectorAll NodeLists'\ntags: ['JavaScript','ES6']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: 'A common need when writing vanilla JavaScript is to find a selection of elements in the DOM and loop over them. For example, finding instances of a button and attaching a click handler to them.'\ncoverImage: ''\nsourceUrl: 'https://css-tricks.com/a-bunch-of-options-for-looping-over-queryselectorall-nodelists/'\ntype: 'Post'\n---\n    ","htmlCode":"<p>A common need when writing vanilla JavaScript is to find a selection of elements in the DOM and loop over them. For example, finding instances of a button and attaching a click handler to them.</p><pre rel=\"JavaScript\"><code><span>const</span> buttons <span>=</span> document<span>.</span><span>querySelectorAll</span><span>(</span><span>\".js-do-thing\"</span><span>)</span><span>;</span>\n<span spellcheck=\"true\">// There could be any number of these! </span>\n<span spellcheck=\"true\">// I need to loop over them and attach a click handler.</span></code></pre><p>There are SO MANY ways to go about it. Let's go through them.</p><p><span></span></p><h3><a href=\"https://css-tricks.com/a-bunch-of-options-for-looping-over-queryselectorall-nodelists/#article-header-id-0\">#</a>forEach</h3><p><code>forEach</code>&nbsp;is normally for arrays, and interestingly, what comes back from&nbsp;<code>querySelectorAll</code>&nbsp;is not an array but a NodeList. Fortunately, most modern browsers support using&nbsp;<code>forEach</code>&nbsp;on NodeLists anyway.</p><pre rel=\"JavaScript\"><code>buttons<span>.</span><span>forEach</span><span>(</span><span>(</span>button<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  button<span>.</span><span>addEventListener</span><span>(</span><span>'click'</span><span>,</span> <span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n    console<span>.</span><span>log</span><span>(</span><span>\"forEach worked\"</span><span>)</span><span>;</span>\n  <span>}</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><p>If you're worried that&nbsp;<code>forEach</code>&nbsp;might not work on your NodeList, you could spread it into an array first:</p><pre rel=\"JavaScript\"><code><span>[</span><span>.</span><span>.</span><span>.</span>buttons<span>]</span><span>.</span><span>forEach</span><span>(</span><span>(</span>button<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  button<span>.</span><span>addEventListener</span><span>(</span><span>'click'</span><span>,</span> <span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n    console<span>.</span><span>log</span><span>(</span><span>\"spread forEach worked\"</span><span>)</span><span>;</span>\n  <span>}</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><p>But I'm not actually sure if that helps anything since it seems a bit unlikely there are browsers that support spreads but not&nbsp;<code>forEach</code>on NodeLists. Maybe it gets weird when transpiling gets involved, though I dunno. Either way, spreading is nice in case you want to use anything else array-specific, like&nbsp;<code>.map()</code>,&nbsp;<code>.filter()</code>, or&nbsp;<code>.reduce()</code>.</p><p>A slightly older method is to jack into the array's natural&nbsp;<code>forEach</code>with this little hack:</p><pre rel=\"JavaScript\"><code><span>[</span><span>]</span><span>.</span>forEach<span>.</span><span>call</span><span>(</span>buttons<span>,</span> <span>(</span>button<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  button<span>.</span><span>addEventListener</span><span>(</span><span>'click'</span><span>,</span> <span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n    console<span>.</span><span>log</span><span>(</span><span>\"array forEach worked\"</span><span>)</span><span>;</span>\n  <span>}</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><p>Todd Motto once&nbsp;<a href=\"https://toddmotto.com/ditch-the-array-foreach-call-nodelist-hack/\">called out this method</a>&nbsp;pretty hard though, so be advised. He recommended building your own method (updated for ES6):</p><pre rel=\"JavaScript\"><code><span>const</span> forEach <span>=</span> <span>(</span>array<span>,</span> callback<span>,</span> scope<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  <span>for</span> <span>(</span><span>var</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> array<span>.</span>length<span>;</span> i<span>++</span><span>)</span> <span>{</span>\n    callback<span>.</span><span>call</span><span>(</span>scope<span>,</span> i<span>,</span> array<span>[</span>i<span>]</span><span>)</span><span>;</span> \n  <span>}</span>\n<span>}</span><span>;</span></code></pre><p>...which we would use like this:</p><pre rel=\"JavaScript\"><code><span>forEach</span><span>(</span>buttons<span>,</span> <span>(</span>index<span>,</span> button<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>\"our own function worked\"</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><h3><a href=\"https://css-tricks.com/a-bunch-of-options-for-looping-over-queryselectorall-nodelists/#article-header-id-1\">#</a>for .. of</h3><p><a href=\"http://kangax.github.io/compat-table/es6/#for..of_loops\">Browser support</a>&nbsp;for&nbsp;<code>for .. of</code>&nbsp;loops looks pretty good and this seems like a super clean syntax to me:</p><pre rel=\"JavaScript\"><code><span>for</span> <span>(</span><span>const</span> button <span>of</span> buttons<span>)</span> <span>{</span>\n  button<span>.</span><span>addEventListener</span><span>(</span><span>'click'</span><span>,</span> <span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n    console<span>.</span><span>log</span><span>(</span><span>\"for .. of worked\"</span><span>)</span><span>;</span>\n  <span>}</span><span>)</span><span>;</span>\n<span>}</span></code></pre><h3><a href=\"https://css-tricks.com/a-bunch-of-options-for-looping-over-queryselectorall-nodelists/#article-header-id-2\">#</a>Make an array right away</h3><pre rel=\"JavaScript\"><code><span>const</span> buttons <span>=</span> Array<span>.</span>prototype<span>.</span>slice<span>.</span><span>apply</span><span>(</span>\n  document<span>.</span><span>querySelectorAll</span><span>(</span><span>\".js-do-thing\"</span><span>)</span>\n<span>)</span><span>;</span></code></pre><p>Now you can use all the normal array functions.</p><pre rel=\"JavaScript\"><code>buttons<span>.</span><span>forEach</span><span>(</span><span>(</span>button<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>\"apply worked\"</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><h3><a href=\"https://css-tricks.com/a-bunch-of-options-for-looping-over-queryselectorall-nodelists/#article-header-id-3\">#</a>Old for loop</h3><p>If you need maximum possible browser support, there is no shame in an ancient classic&nbsp;<code>for</code>&nbsp;loop:</p><pre rel=\"JavaScript\"><code><span>for</span> <span>(</span><span>let</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> buttons<span>.</span>length<span>;</span> <span>++</span>i<span>)</span> <span>{</span>\n  buttons<span>[</span>i<span>]</span><span>.</span><span>addEventListener</span><span>(</span><span>'click'</span><span>,</span> <span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n    console<span>.</span><span>log</span><span>(</span><span>\"for loop worked\"</span><span>)</span><span>;</span>\n  <span>}</span><span>)</span><span>;</span>\n<span>}</span></code></pre><h3><a href=\"https://css-tricks.com/a-bunch-of-options-for-looping-over-queryselectorall-nodelists/#article-header-id-4\">#</a>Libraries</h3><p>If you're using jQuery, you don't even have to bother....</p><pre rel=\"jQuery\"><code><span>$</span><span>(</span><span>\".buttons\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>\"jQuery works\"</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><p>If you're using a React/JSX setup, you don't need think about this kind of binding at all.</p><p>Lodash has a&nbsp;<code>_.forEach</code>&nbsp;as well, which presumably helps with older browsers.</p><pre rel=\"JavaScript\"><code>_<span>.</span><span>forEach</span><span>(</span>buttons<span>,</span> <span>(</span>button<span>,</span> key<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>\"lodash worked\"</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre>","filePath":"pages/JavaScript/.md","_id":"Apdjx1HtgA2MjfhZ"}
{"date":"2019-03-01T16:00:11.598Z","title":"RxJS: Subjects, Behavior Subjects & Replay Subjects","sourceUrl":"https://alligator.io/rxjs/subjects/","path":"RxJs/","category":"RxJs","tags":["RxJS"," Observable"],"author":"","excerpt":"","dateCreated":1551455944067,"coverImage":"","type":"Post","frontmatter":"---\npath: 'RxJs/'\ndate: 'Fri Mar 01 2019 21:30:11 GMT+0530 (India Standard Time)'\ntitle: 'RxJS: Subjects, Behavior Subjects & Replay Subjects'\ntags: ['RxJS','Observable']\ncategory: 'RxJs'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://alligator.io/rxjs/subjects/'\ntype: 'Post'\n---\n    ","htmlCode":"<p>A subject in Rx is a special hybrid that can act as both an observable and an observer at the same time. This way, data can be pushed into a subject and the subject’s subscribers will in turn receive that pushed data.</p><p>Subjects are useful for multicasting or for when a source of data is not easily transformed into an observable. It’s easy to overuse&nbsp;subjects&nbsp;and oftentimes, as illustrated in&nbsp;<a href=\"https://medium.com/@benlesh/on-the-subject-of-subjects-in-rxjs-2b08b7198b93\">this excellent post</a>, subjects can be avoided when an observable source can be created otherwise.</p><p>On top of vanilla subjects, there are also a few specialized types of subjects like&nbsp;<span>async subjects</span>,&nbsp;<span>behavior subjects</span>&nbsp;and&nbsp;<span>replay subjects</span>. In this post, we’ll introduce&nbsp;subjects,&nbsp;behavior subjects&nbsp;and&nbsp;replay subjects.</p><p><span>Using Subjects</span></p><p>Creating a subject is as simple as newing a new instance of RxJS’s&nbsp;<span>Subject</span>:</p><pre><code><span>const</span> mySubject = <span>new</span> Rx.Subject();</code></pre><p>Multiple subscriptions can be created and internally the subject will keep a list of subscriptions:</p><pre><code><span>const</span> mySub = mySubject.subscribe(<span><span>x</span> =&gt;</span> <span>console</span>.log(<span>`<span>${x}</span> <span>${x}</span>`</span>));\n<span>const</span> mySub2 = mySubject.subscribe(<span><span>x</span> =&gt;</span> <span>console</span>.log(x.toUpperCase()));</code></pre><p>Data can be pushed into the subject using its&nbsp;<span>next</span>&nbsp;method:</p><pre><code>mySubject.next(<span>'👋 Hello!'</span>);\n\n<span>// 👋 Hello! 👋 Hello!</span>\n<span>// 👋 HELLO!</span></code></pre><p>When data is pushed into a subject, it’ll go through its internal list of subscriptions and next the data into each one.</p><h3>Simple example</h3><p>Here’s an example that demonstrates how data gets is pushed to the subscriptions:</p><pre><code><span>const</span> mySubject = <span>new</span> Rx.Subject();\n\nmySubject.next(<span>1</span>);\n\n<span>const</span> subscription1 = mySubject.subscribe(<span><span>x</span> =&gt;</span> {\n  <span>console</span>.log(<span>'From subscription 1:'</span>, x);\n});\n\nmySubject.next(<span>2</span>);\n\n<span>const</span> subscription2 = mySubject.subscribe(<span><span>x</span> =&gt;</span> {\n  <span>console</span>.log(<span>'From subscription 2:'</span>, x);\n});\n\nmySubject.next(<span>3</span>);\n\nsubscription1.unsubscribe();\n\nmySubject.next(<span>4</span>);</code></pre><p>With this example, here’s the result that’ll be printed in the console:</p><pre><code>From subscription 1: 2\nFrom subscription 1: 3\nFrom subscription 2: 3\nFrom subscription 2: 4</code></pre><p>Note how subscriptions that arrive late are missing out on some of the data that’s been pushed into the subject. We’ll see how to manage that below with&nbsp;<span>Behavior Subjects</span>&nbsp;or&nbsp;<span>Replay Subjects</span>.</p><h3>Error and Completion</h3><p>When a subject completes or errors out, all the internal subscriptions also complete or error out:</p><pre><code><span>const</span> mySubject = <span>new</span> Rx.Subject();\n\n<span>const</span> sub1 = mySubject.subscribe(<span>null</span>, err =&gt;\n  <span>console</span>.log(<span>'From sub1:'</span>, err.message)\n);\n\n<span>const</span> sub2 = mySubject.subscribe(<span>null</span>, err =&gt;\n  <span>console</span>.log(<span>'From sub2:'</span>, err.message)\n);\n\nmySubject.error(<span>new</span> <span>Error</span>(<span>'Oh nooo!'</span>));\n\n<span>// From sub1: Oh nooo!</span>\n<span>// From sub2: Oh nooo!</span></code></pre><h3>Multicasting</h3><p>The real power of subjects comes into play with&nbsp;<span>multicasting</span>, where a subject is passed as the observer to an observable, which will mean that, when the observable emits, the data is&nbsp;multicasted&nbsp;to all of the subject’s subscriptions:</p><p>Here’s an example where a&nbsp;<span>trickleWords</span>&nbsp;observable emits a word every 750ms.</p><pre><code><span>const</span> mySubject = <span>new</span> Rx.Subject();\n<span>const</span> words = [<span>'Hot Dog'</span>, <span>'Pizza'</span>, <span>'Hamburger'</span>];\n\n<span>const</span> trickleWords = Rx.Observable.zip(\n  Rx.Observable.from(words),\n  Rx.Observable.interval(<span>750</span>),\n  word =&gt; word\n);\n\n<span>const</span> subscription1 = mySubject.subscribe(<span><span>x</span> =&gt;</span> {\n  <span>console</span>.log(x.toUpperCase());\n});\n\n<span>const</span> subscription2 = mySubject.subscribe(<span><span>x</span> =&gt;</span> {\n  <span>console</span>.log(\n    x\n      .toLowerCase()\n      .split(<span>''</span>)\n      .reverse()\n      .join(<span>''</span>)\n  );\n});\n\ntrickleWords.subscribe(mySubject);</code></pre><p>Here’s the printed result after all the values have been emitted:</p><pre><code>HOT DOG\ngod toh\nPIZZA\nazzip\nHAMBURGER\nregrubmah</code></pre><h3>asObservable</h3><p>The&nbsp;<span>asObservable</span>&nbsp;operator can be used to transform a subject into an observable. This can be useful when you’d like to expose the data from the subject, but at the same time prevent having data inadvertently pushed into the subject:</p><pre><code><span>const</span> mySubject = <span>new</span> Rx.Subject();\n<span>const</span> myObs = mySubject.asObservable();\n\nmySubject.next(<span>'Hello'</span>);\nmyObs.next(<span>'World!'</span>); <span>// TypeError: myObs.next is not a function</span>\n</code></pre><h2><a href=\"https://alligator.io/rxjs/subjects/#replay-subjects\" aria-label=\"Anchor\" data-anchorjs-icon=\"\"></a>Replay Subjects</h2><p>As you saw previously, late subject subscriptions will miss out on the data that was emitted previously. Replay subjects can help with that by keeping a buffer of previous values that will be emitted to new subscriptions.</p><p>Here’s a usage example for replay subjects where a buffer of 2 previous values are kept and emitted on new subscriptions:</p><pre><code><span>const</span> mySubject = <span>new</span> Rx.ReplaySubject(<span>2</span>);\n\nmySubject.next(<span>1</span>);\nmySubject.next(<span>2</span>);\nmySubject.next(<span>3</span>);\nmySubject.next(<span>4</span>);\n\nmySubject.subscribe(<span><span>x</span> =&gt;</span> {\n  <span>console</span>.log(<span>'From 1st sub:'</span>, x);\n});\n\nmySubject.next(<span>5</span>);\n\nmySubject.subscribe(<span><span>x</span> =&gt;</span> {\n  <span>console</span>.log(<span>'From 2nd sub:'</span>, x);\n});</code></pre><p>Here’s what that gives us at the console:</p><pre><code>From 1st sub: 3\nFrom 1st sub: 4\nFrom 1st sub: 5\nFrom 2nd sub: 4\nFrom 2nd sub: 5</code></pre><h2><a href=\"https://alligator.io/rxjs/subjects/#behavior-subjects\" aria-label=\"Anchor\" data-anchorjs-icon=\"\"></a>Behavior Subjects</h2><p>Behavior subjects are similar to replay subjects, but will re-emit only the last emitted value, or a default value if no value has been previously emitted:</p><pre><code><span>const</span> mySubject = <span>new</span> Rx.BehaviorSubject(<span>'Hey now!'</span>);\n\nmySubject.subscribe(<span><span>x</span> =&gt;</span> {\n  <span>console</span>.log(<span>'From 1st sub:'</span>, x);\n});\n\nmySubject.next(<span>5</span>);\n\nmySubject.subscribe(<span><span>x</span> =&gt;</span> {\n  <span>console</span>.log(<span>'From 2nd sub:'</span>, x);\n});</code></pre><p>And the result:</p><pre><code>From 1st sub: Hey now!\nFrom 1st sub: 5\nFrom 2nd sub: 5</code></pre>","filePath":"pages/RxJs/.md","_id":"BRMTuZTgCSY42CTm"}
{"date":"2018-11-16T11:17:38.611Z","title":"Conditional Rendering in React","sourceUrl":"https://hackernoon.com/conditional-rendering-on-react-57a864c2d04d","path":"React/","category":"React","tags":["React"],"author":"Vinicius Dacal","excerpt":"","dateCreated":1542366970131,"coverImage":"","type":"Post","frontmatter":"---\npath: 'React/'\ndate: 'Fri Nov 16 2018 16:47:38 GMT+0530 (India Standard Time)'\ntitle: 'Conditional Rendering in React'\ntags: ['React']\ncategory: 'React'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://hackernoon.com/conditional-rendering-on-react-57a864c2d04d'\ntype: 'Post'\n---\n    ","htmlCode":"<h1>Conditional Rendering in&nbsp;React</h1><p>When we are developing a React application, we often need to show or hide an element given a certain condition. Be it a user interaction, the presence of data coming from a request, or even permission levels. This is called conditional rendering, and we’ll look at different approaches to handling those cases.</p><h3>IF</h3><p>IF is the most basic approach of all and probably the one you will mostly see, but it is restricted to the total block of the component. You use an IF with your condition and return the element to be rendered. Observe the example below:</p><pre><code>const UserList = ({ isLoading, results }) =&gt; {<br>  if (isLoading) {<br>    return &lt;span&gt;Loading...&lt;/span&gt;<br>  }<br><br>  return (<br>    &lt;ul&gt;<br>      {result.map((user) =&gt; (<br>        &lt;li&gt;{user.name}&lt;/li&gt;<br>      ))}   <br>    &lt;/ul&gt;<br>  )<br>};</code></pre><p>Above we have a list of users, who receives the&nbsp;<code>isLoading</code>&nbsp;props and&nbsp;<code>results</code>. If&nbsp;<code>isLoading</code>&nbsp;is true, we return a message stating that it is loading, otherwise, we render the list of users.</p><blockquote>Note that we&nbsp;<span>DO NOT</span>&nbsp;use&nbsp;<span>ELSE</span>&nbsp;since there is no need as we use the&nbsp;<span>return</span>&nbsp;within the first&nbsp;<span>IF</span>. Do not be afraid to use more than one&nbsp;<span>return</span>&nbsp;per function, this practice will help you to reduce the complexity of the code.</blockquote><p>There is nothing wrong with the above example, on the contrary, the code is simple and readable. However, as I mentioned, this approach is restricted to rendering a whole block and in many cases, we can not use it.</p><p>Imagine that our List of users is more complex, that it has a title and a button to create a new user. In this case, the page should always show the title and button. Loading message would only appear in the place of the list, as shown below:</p><figure><div><div></div><div data-image-id=\"1*urlZK7IVsyMj9VblOxbqkw.png\" data-width=\"600\" data-height=\"400\" data-scroll=\"native\"><canvas width=\"75\" height=\"50\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/800/1*urlZK7IVsyMj9VblOxbqkw.png\" src=\"https://cdn-images-1.medium.com/max/800/1*urlZK7IVsyMj9VblOxbqkw.png\"></div></div></figure><p>Considering the above image, we can not use the&nbsp;<span>IF</span>&nbsp;because we would need to repeat an entire block of code just to change the contents of the list.</p><p>For these cases, we can write an expression using the&nbsp;<code>&amp;&amp;</code>&nbsp;logical operator within our&nbsp;<em>JSX</em>, as in the example below:</p><pre><code>const UserList = ({ isLoading, results }) =&gt; (<br>  &lt;div&gt;<br>    &lt;div&gt;<br>      &lt;h1&gt;Users&lt;/h1&gt;<br>      &lt;a href=\"/users/create\"&gt;New User&lt;/a&gt;<br>    &lt;/div&gt;<br>    &lt;div&gt;<br>      {isLoading &amp;&amp; &lt;span&gt;Loading...&lt;/span&gt;}<br><br>      {!isLoading &amp;&amp; (<br>        &lt;ul&gt;<br>          {result.map((user) =&gt; (<br>            &lt;li key={user.id}&gt;{user.name}&lt;/li&gt;<br>          ))}<br>        &lt;/ul&gt;<br>      )}<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>);</code></pre><p>As in the example above, we can use braces (<code>{}</code>) to insert a&nbsp;<em>JS</em>&nbsp;expression inside&nbsp;<em>JSX</em>. React will get the result of each expression and will render on the screen. When an expression returns a&nbsp;<code>Boolean</code>,&nbsp;<code>undefined</code>&nbsp;or&nbsp;<code>null</code>,&nbsp;<em>React</em>&nbsp;just ignores, not rendering anything!</p><blockquote><span>React Native</span>&nbsp;will&nbsp;<span>NOT</span>&nbsp;ignore&nbsp;<code>undefined</code>&nbsp;and you end up with a run time error. Rather to convert the value to boolean in that case if you are using React outside of web environment.</blockquote><h4>Understanding expressions</h4><p>When we use the logical operator&nbsp;<code>&amp;&amp;</code>&nbsp;JS will interpret each value of the expression until it reaches the last value or some of the evaluation end up in a&nbsp;<a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Falsy\" data-href=\"https://developer.mozilla.org/en-US/docs/Glossary/Falsy\" rel=\"noopener\" target=\"_blank\"><em>falsy value</em></a>. In any case, the last value interpreted will be the result of the expression. Example:</p><pre><code>const user = {<br>  name: 'John',<br>  surname: 'Doe',<br>  address: null,<br>};<br><br>const userName = user &amp;&amp; user.name // John<br>const address = user &amp;&amp; user.address // null<br>const zipCode = user &amp;&amp; user.address &amp;&amp; user.address.zipcode // null</code></pre><p>As in the example above, from line 7, the first element,&nbsp;<code>user</code>, is interpreted. Since it is a&nbsp;<a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Truthy\" data-href=\"https://developer.mozilla.org/en-US/docs/Glossary/Truthy\" rel=\"noopener\" target=\"_blank\"><em>truthy value</em></a>, the cursor passes to the second element, which is&nbsp;<code>user.name</code>. Since this is the last interpreted element, the result of the expression will be the value of the second element:&nbsp;<code>'John'</code>.</p><p>In the case of the&nbsp;<code>address</code>, the first element,&nbsp;<code>user</code>, is interpreted and identified as&nbsp;<em>truthy</em>&nbsp;and then the cursor passes to the second element&nbsp;<code>user.address</code>, which in this case has the value of&nbsp;<code>null</code>. Since we have no more elements and the last value interpreted was&nbsp;<code>null</code>, this becomes the result of the expression.</p><p>Finally, in the case of&nbsp;<code>zipCode</code>, the same process as the&nbsp;<code>address</code>&nbsp;occurs. It interprets the first, then it passes to the second. However, since the second element is&nbsp;<em>falsy</em>, the cursor finishes the execution of the expression and, as always, assumes the last interpreted value, in this case:&nbsp;<code>null</code>.</p><p>It is important to understand how the expressions work, because sometimes you may be expecting the result to be&nbsp;<code>false</code>, and then you get&nbsp;<code>null</code>&nbsp;or&nbsp;<code>0</code>.</p><h4>Readability</h4><p>Since we are including logic within&nbsp;<em>JSX</em>, we have to be careful to maintain the readability of the code. For this reason, for expressions with more than two items, it is interesting to create a variable to abstract the validation items. An example:</p><pre>{!isLoading &amp;&amp; !results.length &amp;&amp; (<br>  &lt;span&gt;<span>NO RESULTS FOUND</span>&lt;/span&gt;<br>)}</pre><pre>// VS</pre><pre>const shouldDisplayNotFound = !isLoading &amp;&amp; !results.length;</pre><pre>{shouldDisplayNotFound &amp;&amp; (<br>  &lt;span&gt;<span>NO RESULTS FOUND</span>&lt;/span&gt;<br>)}</pre><p>The above example serves only to understand the concept, I know that we do not see clearly the advantages of one approach to another. That’s because we have a small block of code in front of us. But below we will see this same applied concept in a more practical way.</p><p>Let’s say for our list of users, we need to show a message when no record has been found. However, we can only display this message after the result has already been loaded. In this way, we can check the number of results through&nbsp;<code>results.length</code>. Below, we will see how this logic would look without using variables.</p><pre><code><br>const UserList = ({ isLoading, results }) =&gt; (<br>  &lt;div&gt;<br>    &lt;div&gt;<br>      &lt;h1&gt;Users&lt;/h1&gt;<br>      &lt;a href=\"/users/create\"&gt;New User&lt;/a&gt;<br>    &lt;/div&gt;<br>    &lt;div&gt;<br>      {isLoading &amp;&amp; &lt;span&gt;Loading...&lt;/span&gt;}<br>      {!isLoading &amp;&amp; !results.length &amp;&amp; (<br>        &lt;span&gt;No Results Found&lt;/span&gt;<br>      )}<br>      {!isLoading &amp;&amp; results.length &gt; 0 &amp;&amp; (<br>        &lt;ul&gt;<br>          {result.map((user) =&gt; (<br>            &lt;li key={user.id}&gt;{user.name}&lt;/li&gt;<br>          ))}<br>        &lt;/ul&gt;<br>      )}<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>);</code></pre><p>Above we see that the logic begins to get a bit complex to be in the middle of&nbsp;<em>JSX</em>, but we still can understand it. Basically, in all checks, we need to consider&nbsp;<code>isLoading</code>, to ensure that the list is loaded and only then base us on&nbsp;<code>results.length</code>&nbsp;to tell whether there are results or not.</p><blockquote>Note that to show the list, we checked whether the length was greater than&nbsp;<code>0</code>. Remember how the values of an expression are interpreted and how the result of the expression is obtained? If we just checked if the length was truthy, writing&nbsp;<code>results.length &amp;&amp;</code>, if it were&nbsp;<code>0</code>, that would be the result of the expression and then React would print&nbsp;<code>0</code>&nbsp;on the screen.</blockquote><p>Considering the previous example, imagine now that besides treating a state where there are no results, you also need to display a different message if there is an error in the request. Notice what the code looks like:</p><pre><code><br>const UserList = ({ isLoading, results, error }) =&gt; (<br>  &lt;div&gt;<br>    &lt;div&gt;<br>      &lt;h1&gt;Users&lt;/h1&gt;<br>      &lt;a href=\"/users/create\"&gt;New User&lt;/a&gt;<br>    &lt;/div&gt;<br>    &lt;div&gt;<br>      {error &amp;&amp; &lt;span&gt;Something is not right!&lt;/span&gt;}<br>      {!error &amp;&amp; isLoading &amp;&amp; &lt;span&gt;Loading...&lt;/span&gt;}<br>      {!error &amp;&amp; !isLoading &amp;&amp; !results.length &amp;&amp; (<br>        &lt;span&gt;No Results Found&lt;/span&gt;<br>      )}<br>      {!error &amp;&amp; !isLoading &amp;&amp; results.length &gt; 0 &amp;&amp; (<br>        &lt;ul&gt;<br>          {result.map((user) =&gt; (<br>            &lt;li key={user.id}&gt;{user.name}&lt;/li&gt;<br>          ))}<br>        &lt;/ul&gt;<br>      )}<br>      {!error &amp;&amp; !isLoading &amp;&amp; results.length &gt; 0 &amp;&amp; (<br>        &lt;ul&gt;<br>          {result.map((user) =&gt; (<br>            &lt;li key={user.id}&gt;{user.name}&lt;/li&gt;<br>          ))}<br>        &lt;/ul&gt;<br>      )}<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>);</code></pre><p>Notice that the complexity begins to get bigger and it becomes difficult to understand what is happening. Let’s explore ways to simplify our code!</p><h3>Transforming Validations into Variables</h3><p>As mentioned above, it is possible to take the piece from each expression that refers to the validation and extract them to variables, with declarative names. In this way, our logic will become a bit clearer. Note the code below:</p><pre><code>const UserList = ({ isLoading, results, error }) =&gt; {<br>  const shouldDisplayLoader = !error &amp;&amp; isLoading;<br>  const shouldDisplayNoResults = !error &amp;&amp; !isLoading &amp;&amp; !results.length;<br>  const shouldDisplayList = !error &amp;&amp; !isLoading &amp;&amp; results.length &gt; 0;<br><br>  return (<br>    &lt;div&gt;<br>      &lt;div&gt;<br>        &lt;h1&gt;Users&lt;/h1&gt;<br>        &lt;a href=\"/users/create\"&gt;New User&lt;/a&gt;<br>      &lt;/div&gt;<br>      &lt;div&gt;<br>        {error &amp;&amp; &lt;span&gt;Something is not right!&lt;/span&gt;}<br>        {shouldDisplayLoader &amp;&amp; &lt;span&gt;Loading...&lt;/span&gt;}<br>        {shouldDisplayNoResults &amp;&amp; (<br>          &lt;span&gt;No Results Found&lt;/span&gt;<br>        )}<br>        {shouldDisplayList &amp;&amp; (<br>          &lt;ul&gt;<br>            {result.map((user) =&gt; (<br>              &lt;li key={user.id}&gt;{user.name}&lt;/li&gt;<br>            ))}<br>          &lt;/ul&gt;<br>        )}<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>  );<br>};</code></pre><p>We can see that extracting the logic from the middle of&nbsp;<em>JSX</em>, it is possible to understand it more easily, besides the variable name already make clear what the expression represents. Anyone who would maintain the code in the future could change the validations without much fear.</p><h3>Extraction of&nbsp;blocks</h3><p>Note that in our example, most validations are centered on a single block. So, we can extract the block in question into a function, or turn it into another component, as in the example below:</p><pre><code>const UserListResults = ({ error, results, isLoading }) =&gt; {<br>  if (error) {<br>    return &lt;span&gt;Something is not right!&lt;/span&gt;;<br>  }<br><br>  if (isLoading) {<br>    return &lt;span&gt;Loading...&lt;/span&gt;;<br>  }<br><br>  if (!results.length) {<br>    return &lt;span&gt;No Results Found&lt;/span&gt;;<br>  }<br><br>  return (<br>    &lt;ul&gt;<br>      {result.map((user) =&gt; (<br>        &lt;li key={user.id}&gt;{user.name}&lt;/li&gt;<br>      ))}<br>    &lt;/ul&gt;<br>  );<br>}<br><br>const UserList = ({ isLoading, results, error }) =&gt; (<br>  &lt;div&gt;<br>    &lt;h1&gt;Users&lt;/h1&gt;<br>    &lt;a href=\"/users/create\"&gt;New User&lt;/a&gt;<br>  &lt;/div&gt;<br>  &lt;div&gt;<br>    &lt;UserListResults<br>      error={error}<br>      results={results}<br>      isLoading={isLoading}<br>    /&gt;<br>  &lt;/div&gt;<br>);</code></pre><p>Observe how all our logic got simpler by extracting the block to another component. See also that we are using again the approach of the&nbsp;<span>IFs</span>&nbsp;with the return. This approach is also known as Early return. When we use&nbsp;<em>Early return</em>, our logics tend to be simpler, since the next validation does not have to worry about the previous one. Ex: To check if it is loading, I do not have to worry if an error has occurred or not, since this case has already been handled in the previous&nbsp;<span>IF</span>.</p><h3>Use of&nbsp;ternary</h3><p>Ternaries are also welcome in cases where two blocks alternate given a certain condition. Note the mockup below a form for user creation:</p><figure><div><div></div><div data-image-id=\"1*H6stD5AbpDZvhMxx_L-qbw.jpeg\" data-width=\"600\" data-height=\"400\" data-scroll=\"native\"><canvas width=\"75\" height=\"50\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/800/1*H6stD5AbpDZvhMxx_L-qbw.jpeg\" src=\"https://cdn-images-1.medium.com/max/800/1*H6stD5AbpDZvhMxx_L-qbw.jpeg\"></div></div></figure><p>As the image above, we have the fields: Name, Email, Country and a place reserved for what would be the Province field. The Province field, requires you to select a country first. Once the country is selected, the status field will be available on the screen, according to the code below:</p><pre><code>const UserForm = ({ onChange, values }) =&gt; (<br>  &lt;div&gt;<br>    &lt;h1&gt;User&lt;/h1&gt;<br>    &lt;div&gt;<br>      &lt;div className=\"row\"&gt;<br>        &lt;div className=\"form-group\"&gt;<br>          &lt;label&gt;Name&lt;/label&gt;<br>          &lt;input type=\"text\" name=\"name\" value={values.name} onChange={onChange} /&gt;<br>        &lt;/div&gt;<br>        &lt;div className=\"form-group\"&gt;<br>          &lt;label&gt;Email&lt;/label&gt;<br>          &lt;input type=\"email\" name=\"email\" value={values.email} onChange={onChange} /&gt;<br>        &lt;/div&gt;<br>      &lt;/div&gt;<br>      &lt;div className=\"row\"&gt;<br>        &lt;div className=\"form-group\"&gt;<br>          &lt;label&gt;Country&lt;/label&gt;<br>          &lt;CountrySelector name=\"country\" value={values.country} onChange={onChange} /&gt;<br>        &lt;/div&gt;<br>        &lt;div className=\"form-group\"&gt;<br>          &lt;label&gt;Province&lt;/label&gt;<br>          {values.country<br>            ? &lt;ProvinceSelector name=\"province\" value={values.province} onChange={onChange} /&gt;<br>            : &lt;span&gt;Select a country first&lt;/span&gt;<br>          }<br>        &lt;/div&gt;<br>      &lt;/div&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>);</code></pre><blockquote>Let’s not go into the&nbsp;<code>onChange</code>&nbsp;or into the logic to save the state, just assume that&nbsp;<code>values</code>&nbsp;will always have the updated value of the form fields.</blockquote><p>Based on values, we write a ternary to display the&nbsp;<code>ProvinceSelector</code>&nbsp;if the&nbsp;<code>country</code>&nbsp;value is present, otherwise, we will display the message. The ternary is very useful, but it is not applicable everywhere. I would avoid using it to render large blocks of code, by making it difficult to read in some cases.</p><h3>Using Handlers</h3><p>Handlers are also used in specific cases. When you need to render different content to the same block, all of them based on a given value.</p><p>Imagine that you are developing a generic component for presenting data. Each data has a type, which can be&nbsp;<code>date</code>,&nbsp;<code>number</code>,&nbsp;<code>currency</code>, etc&nbsp;… For each type, you need to designate a different formatting/style. For this situation, we could use handlers.</p><pre><code>const handlers = {<br>  number: value =&gt; &lt;NumberDisplay&gt;{value}&lt;/NumberDisplay&gt;<br>  currency: value =&gt; &lt;CurrencyDisplay customProps value={value} /&gt;<br>  time: value =&gt; &lt;TimeDisplay time={value} customProps /&gt;<br>  date: value =&gt; &lt;DateDisplay date={value}  showTime={false} /&gt;<br>  default: value =&gt; value,<br>};<br><br>const displayData = (type, value) =&gt; {<br>  const handler = handlers[type] || handlers.default;<br>  return handler(value);<br>};<br><br>const DataDisplay = ({ type, value }) =&gt; (<br>  &lt;div&gt;<br>    {displayData(type, value)}<br>  &lt;/div&gt;<br>);</code></pre><p>Handlers are nothing more than a key-value object, where the&nbsp;<span>key</span>&nbsp;is the unique identifier of each handler within the context and the&nbsp;<span>value</span>&nbsp;is a function that will be responsible for rendering the particular block.</p><p>In the example above, each handler receives the&nbsp;<code>value</code>&nbsp;argument, but you could receive as many arguments as you need since the handlers execution logic is implemented by you.</p><p>Note that in the&nbsp;<code>displayData</code>&nbsp;function, we get a&nbsp;<code>type</code>&nbsp;and a&nbsp;<code>value</code>&nbsp;as arguments. in line 10, we assign one of the handlers to the&nbsp;<code>const</code>&nbsp;handler, based on the&nbsp;<code>type</code>&nbsp;or assign the default handler, using a&nbsp;<a href=\"https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Operators/Operadores_Logicos#Short-Circuit_Evaluation\" data-href=\"https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Operators/Operadores_Logicos#Short-Circuit_Evaluation\" rel=\"noopener\" target=\"_blank\">short-circuit</a>evaluation.</p><blockquote>Short-circuit evaluations tend to perform better than a switch case, since it evaluates only the existence of the value.</blockquote><p>In line 11, we execute the handler passing the value and we return the result.</p><p>Finally, we execute the&nbsp;<code>displayData</code>&nbsp;function inside our&nbsp;<code>DataDisplay</code>component, passing the&nbsp;<code>type</code>&nbsp;and&nbsp;<code>value</code>.</p><p>Using other approaches to solve this kind of problem, your code could turn into chaos. In contrast, you might notice that using handlers, the example above would easily scale, rendering 10, 20, or even 30 different data types based on the type, if necessary.</p><h3>Conclusion</h3><p>All of the above approaches are valid when used in the right context, it is up to us to use the super power called “Good Sense” to use each one in the appropriate situation.</p><p>And you, do you use any specific approach you would like to share with us?</p><p>Did you like the post? Help us spread the word by giving a like and sharing on social networks so that more people have access! ❤️ ️</p><p>Don’t forget to follow me, to be notified about future posts! ✌</p>","filePath":"pages/React/.md","_id":"Bc5ghjsmCKzihCnG"}
{"date":{"$$date":1542038951537},"title":"React Render Props","sourceUrl":"https://tylermcginnis.com/react-render-props/","path":"React/React/","category":"React","tags":["React"],"author":"Tyler McGinnis","excerpt":"","dateCreated":1541518228325,"coverImage":"","type":"Post","frontmatter":"---\npath: 'React/'\ndate: 'Tue Nov 06 2018 21:04:13 GMT+0530 (India Standard Time)'\ntitle: 'React Render Props'\ntags: ['React']\ncategory: 'React'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://tylermcginnis.com/react-render-props/'\ntype: 'Post'\n---\n    ","htmlCode":"<p><span>There’s two important things to note before we get started. First, what we’re going to talk about is just a pattern. It’s not really even a React thing as much as it is a component architecture thing. Second, this isn’t required knowledge to build a React app. You could skip this post, never learn what we’re about to talk about, and still build fine React applications. However, just like building anything, the more tools you have available the better the outcome will be. If you write React apps, you’d be doing yourself a disservice by not having this in your “toolbox”.</span><br></p><div data-reactid=\"229\"><blockquote><p>If you want to read a similar article but about Higher-Order Components instead, check out&nbsp;<a href=\"https://tylermcginnis.com/react-higher-order-components\">React Higher-Order Components</a></p></blockquote><p>You can’t get very far into studying software development before you hear the (almost cultish) mantra of&nbsp;<code>Don't Repeat Yourself</code>&nbsp;or&nbsp;<code>D.R.Y</code>. Sometimes it can be taken a bit too far, but for the most part, it’s a worthwhile goal. In this post we’re going to look at the most popular pattern for accomplishing DRY in a React codebase, Higher-Order Components. However before we can explore the solution, we must first fully understand the problem.</p><p>Let’s say we were in charge of recreating a dashboard similar to Stripe’s. As most projects go, everything goes great until the very end. Just when you think you’re about to be done, you notice that the dashboard has a bunch of different tooltips that need to appear when certain elements are hovered over.</p><p><img src=\"https://tylermcginnis.com/images/posts/react-fundamentals/tool-tips.gif\" alt=\"GIF of Stripe's dashboard with lots of tooltips\"></p><p>There are a few ways to approach this. The one you decide to go with is to detect the hover state of the individual components and from that state, show or not show the tooltip. There are three components you need to add this hover detection functionality to -&nbsp;<code>Info</code>,&nbsp;<code>TrendChart</code>&nbsp;and&nbsp;<code>DailyChart</code>.</p><p>Let’s start with&nbsp;<code>Info</code>. Right now it’s just a simple SVG icon.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>Info</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span><span><span>&lt;</span></span></span><span><span><span>svg</span>\n        <span>className</span></span></span><span><span><span>=</span></span></span><span><span><span><span>\"Icon-svg Icon--hoverable-svg\"</span></span></span></span><span><span>\n        <span>height</span></span></span><span><span><span>=</span></span></span><span><span><span><span>{</span></span></span></span><span><span><span><span>this</span></span></span></span><span><span><span><span>.</span></span></span></span><span><span><span>props</span></span></span><span><span><span><span>.</span></span></span></span><span><span><span>height</span></span></span><span><span><span><span>}</span></span></span></span><span><span>\n        <span>viewBox</span></span></span><span><span><span>=</span></span></span><span><span><span><span>\"0 0 16 16\"</span></span></span></span><span><span> <span>width</span></span></span><span><span><span>=</span></span></span><span><span><span><span>\"16\"</span></span></span></span><span><span><span>&gt;</span></span></span><span>\n          </span><span><span><span>&lt;</span></span></span><span><span><span>path</span> <span>d</span></span></span><span><span><span>=</span></span></span><span><span><span><span>\"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\"</span></span></span></span><span><span> </span></span><span><span><span>/</span></span></span><span><span><span>&gt;</span></span></span><span>\n      </span><span><span><span>&lt;</span></span></span><span><span><span>/</span></span></span><span><span><span>svg</span></span></span><span><span><span>&gt;</span></span></span><span>\n    </span><span><span>)</span></span><span>\n  </span><span><span>}</span></span><span>\n</span><span><span>}</span></span></code></pre></div><p>Now we need to add functionality to it so it can detect whether it’s being hovered over or not. We can use the&nbsp;<code>onMouseOver</code>&nbsp;and&nbsp;<code>onMouseOut</code>&nbsp;mouse events that come with React. The function we pass to&nbsp;<code>onMouseOver</code>&nbsp;will be invoked when the component is hovered over and the function we pass to&nbsp;<code>onMouseOut</code>&nbsp;will be invoked when the component is no longer being hovered over. To do this the React way, we’ll add a&nbsp;<code>hovering</code>&nbsp;state property to our component so that we can cause a re-render when the&nbsp;<code>hovering</code>&nbsp;state changes, showing or hiding our tooltip.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>Info</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span><span>{</span></span>\n  state <span>=</span> <span>{</span> hovering<span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> hovering<span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> hovering<span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span>&lt;</span><span>&gt;</span>\n        <span>{</span><span><span>this</span></span><span>.</span>state<span>.</span>hovering <span>===</span> <span><span>true</span></span>\n          <span>?</span> <span>&lt;</span>Tooltip id<span>=</span><span>{</span><span><span>this</span></span><span>.</span>props<span>.</span>id<span>}</span> <span>/</span><span>&gt;</span>\n          <span>:</span> <span>null</span><span>}</span>\n        <span>&lt;</span>svg\n          onMouseOver<span>=</span><span>{</span><span><span>this</span></span><span>.</span>mouseOver<span>}</span>\n          onMouseOut<span>=</span><span>{</span><span><span>this</span></span><span>.</span>mouseOut<span>}</span>\n          className<span>=</span><span><span>\"Icon-svg Icon--hoverable-svg\"</span></span>\n          height<span>=</span><span>{</span><span><span>this</span></span><span>.</span>props<span>.</span>height<span>}</span>\n          viewBox<span>=</span><span><span>\"0 0 16 16\"</span></span> width<span>=</span><span><span>\"16\"</span></span><span>&gt;</span>\n            <span>&lt;</span>path d<span>=</span><span><span>\"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\"</span></span> <span>/</span><span>&gt;</span>\n        <span>&lt;</span><span>/</span>svg<span>&gt;</span>\n      <span>&lt;</span><span>/</span><span>&gt;</span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span></code></pre></div><p>Looking good. Now we need to add the same functionality to our other two components,&nbsp;<code>TrendChart</code>&nbsp;and&nbsp;<code>DailyChart</code>. If it’s not broke, don’t fix it. Our hover logic for&nbsp;<code>Info</code>&nbsp;worked great so let’s use that same code again.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>TrendChart</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span>&lt;</span><span>&gt;</span>\n        <span>{</span><span>this</span><span>.</span>state<span>.</span>hovering <span>===</span> <span>true</span>\n          <span>?</span> <span>&lt;</span>Tooltip id<span>=</span><span>{</span><span>this</span><span>.</span>props<span>.</span>id<span>}</span><span>/</span><span>&gt;</span>\n          <span>:</span> <span>null</span><span>}</span>\n        <span>&lt;</span>Chart\n          type<span>=</span><span>'trend'</span>\n          onMouseOver<span>=</span><span>{</span><span>this</span><span>.</span>mouseOver<span>}</span>\n          onMouseOut<span>=</span><span>{</span><span>this</span><span>.</span>mouseOut<span>}</span>\n        <span>/</span><span>&gt;</span>\n      <span>&lt;</span><span>/</span><span>&gt;</span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span></code></pre></div><p>You probably know the next step. We can do the same thing for our final&nbsp;<code>DailyChart</code>&nbsp;component.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>DailyChart</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span>&lt;</span><span>&gt;</span>\n        <span>{</span><span>this</span><span>.</span>state<span>.</span>hovering <span>===</span> <span>true</span>\n          <span>?</span> <span>&lt;</span>Tooltip id<span>=</span><span>{</span><span>this</span><span>.</span>props<span>.</span>id<span>}</span><span>/</span><span>&gt;</span>\n          <span>:</span> <span>null</span><span>}</span>\n        <span>&lt;</span>Chart\n          type<span>=</span><span>'daily'</span>\n          onMouseOver<span>=</span><span>{</span><span>this</span><span>.</span>mouseOver<span>}</span>\n          onMouseOut<span>=</span><span>{</span><span>this</span><span>.</span>mouseOut<span>}</span>\n        <span>/</span><span>&gt;</span>\n      <span>&lt;</span><span>/</span><span>&gt;</span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span></code></pre></div><p>And with that, we’re all finished. You may have written React like this before. It’s not the end of the world (#shipit), but it’s not very “DRY”. As you saw, we’re repeating the exact same hover logic in every one of our components.</p><p>At this point, the&nbsp;<span>problem</span>&nbsp;should be pretty clear,&nbsp;<span>we want to avoid duplicating our hover logic anytime a new component needs it</span>. So what’s the&nbsp;<span>solution</span>? Well before we get to that, we need to get a refresh on two fundamental aspects of React. They are components which don’t render UI and passing functions as props.</p><h5>No UI Components</h5><p>In most cases whenever you build a React component, the end goal it to show some UI to the screen.</p><div><pre><code><span>View</span> <span>=</span> <span>fn</span><span>(</span>state<span>)</span></code></pre></div><p>However, that doesn’t always need to be the case. It’s entirely reasonable to have components which act as “Wrapper” components. They’re responsible for handling some logic but instead of rendering their own UI, they just render another component passing it data.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>Users</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span>\n    <span>users</span><span>:</span> <span><span>null</span></span>\n  <span>}</span>\n  <span>componentDidMount</span><span>(</span><span>)</span> <span>{</span>\n    <span>getUsers</span><span>(</span><span>)</span>\n      <span>.</span><span>then</span><span>(</span><span><span>(</span></span><span><span>users</span></span><span><span>)</span></span><span> </span><span><span>=&gt;</span></span> <span>{</span>\n        <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> users <span>}</span><span>)</span>\n      <span>}</span><span>)</span>\n  <span>}</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span>&lt;</span>Grid data<span>=</span><span>{</span><span><span>this</span></span><span>.</span>state<span>.</span>users<span>}</span> <span>/</span><span>&gt;</span>\n  <span>}</span>\n<span>}</span></code></pre></div><p>In the example above&nbsp;<code>Users</code>&nbsp;is responsible for getting the users, then passing them to the&nbsp;<code>Grid</code>component. It doesn’t have its own UI, instead, it uses the UI from the&nbsp;<code>Grid</code>&nbsp;component.</p><h5>Passing functions as props</h5><p>As you know, props are part of React’s component API that allow you to pass data into a component.</p><div><pre><code><span><span>&lt;</span></span><span><span>User</span> <span>id</span></span><span><span>=</span></span><span><span><span>'tylermcginnis'</span></span></span><span> </span><span><span>/</span></span><span><span>&gt;</span></span></code></pre></div><p>Then inside of the&nbsp;<code>User</code>&nbsp;component, the&nbsp;<code>props</code>&nbsp;object would have an&nbsp;<code>id</code>&nbsp;property referencing the string&nbsp;<code>tylermcginnis</code>.</p><div><pre><code><span><span><span>function</span></span></span><span> </span><span><span><span>User</span></span></span><span> </span><span><span>(</span></span><span><span>props</span></span><span><span>)</span></span><span> </span><span>{</span>\n  <span><span>const</span></span> id <span>=</span> props<span>.</span>id <span><span>// tylermcginnis</span></span>\n<span>}</span></code></pre></div><p>Now what if instead of passing a string as a prop, we passed a function?</p><div><pre><code><span><span>&lt;</span></span><span><span>User</span> <span>id</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span>'tylermcginnis'</span><span>}</span> <span>/</span><span>&gt;</span></code></pre></div><p>Now the&nbsp;<code>props</code>&nbsp;object still has an&nbsp;<code>id</code>&nbsp;property, only now instead of being a string, it references a function. So in order to get the id, we need to invoke the function.</p><div><pre><code><span><span><span>function</span></span></span><span> </span><span><span><span>User</span></span></span><span> </span><span><span>(</span></span><span><span>props</span></span><span><span>)</span></span><span> </span><span>{</span>\n  <span><span>const</span></span> id <span>=</span> props<span>.</span><span>id</span><span>(</span><span>)</span> <span><span>// tylermcginnis</span></span>\n<span>}</span></code></pre></div><p>Now what if we wanted to pass the function prop some data? Well, it’s just a function so we could do it just like we normally would by passing it an argument.</p><div><pre><code><span><span><span>function</span></span></span><span> </span><span><span><span>User</span></span></span><span> </span><span><span><span>(</span></span></span><span><span>props</span></span><span><span><span>)</span></span></span><span> </span><span>{</span>\n  <span><span>const</span></span> id <span>=</span> props<span>.</span><span>id</span><span>(</span><span><span>true</span></span><span>)</span> <span><span>// tylermcginnis</span></span>\n<span>}</span>\n\n<span>&lt;</span>User id<span>=</span><span>{</span><span>(</span>isAuthed<span>)</span> <span>=&gt;</span> isAuthed <span>===</span> <span><span>true</span></span> <span>?</span> <span><span>'tylermcginnis'</span></span> <span>:</span> <span><span>null</span></span><span>}</span> <span>/</span><span>&gt;</span></code></pre></div><hr><p>OK… but what do both of these have to do with the problem we saw earlier of duplicating our hover logic anytime a new component needs it? Well we can combine both of these simple concepts in order to solve our problem.</p><p>First, we want to create a “Wrapper” component which is responsible for managing the hover state. We’ll call it, naturally,&nbsp;<code>Hover</code>&nbsp;and it’ll contain all the hover logic that we had to duplicate from earlier.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>Hover</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span><span><span>&lt;</span></span></span><span><span><span>div</span> <span>onMouseOver</span></span></span><span><span><span>=</span></span></span><span><span><span><span>{</span></span></span></span><span><span><span><span>this</span></span></span></span><span><span><span><span>.</span></span></span></span><span><span><span>mouseOver</span></span></span><span><span><span><span>}</span></span></span></span><span><span> <span>onMouseOut</span></span></span><span><span><span>=</span></span></span><span><span><span><span>{</span></span></span></span><span><span><span><span>this</span></span></span></span><span><span><span><span>.</span></span></span></span><span><span><span>mouseOut</span></span></span><span><span><span><span>}</span></span></span></span><span><span><span>&gt;</span></span></span><span>\n\n      </span><span><span><span>&lt;</span></span></span><span><span><span>/</span></span></span><span><span><span>div</span></span></span><span><span><span>&gt;</span></span></span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span></code></pre></div><p>The next question becomes what should&nbsp;<code>Hover</code>&nbsp;render? This is where are function prop knowledge comes into play. Let’s have&nbsp;<code>Hover</code>&nbsp;receive a prop called&nbsp;<code>render</code>. This&nbsp;<code>render</code>&nbsp;prop is going to be a function that we can pass the&nbsp;<code>hovering</code>&nbsp;state to and it will return some UI.</p><div><pre><code><span><span><span><span>&lt;</span></span><span><span>Hover</span></span></span><span> </span><span><span><span>render</span></span></span><span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>(</span></span></span><span><span>hovering</span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span>\n  <span><span><span><span>&lt;</span></span><span><span>div</span></span></span><span><span>&gt;</span></span></span>\n    Is hovering<span>?</span> <span>{</span>hovering <span>===</span> <span>true</span> <span>?</span> <span>'Yes'</span> <span>:</span> <span>'No'</span><span>}</span>\n  <span><span><span><span>&lt;</span></span><span><span>div</span></span></span><span><span>&gt;</span></span></span>\n<span>}</span></span> <span>/&gt;</span></span></code></pre></div><p>Now the last change we need to make is in our&nbsp;<code>Hover</code>&nbsp;component. All we need to do is invoke&nbsp;<code>this.props.render</code>&nbsp;passing it&nbsp;<code>this.state.hover</code>.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>Hover</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span><span><span>&lt;</span></span></span><span><span><span>div</span> <span>onMouseOver</span></span></span><span><span><span>=</span></span></span><span><span><span><span>{</span></span></span></span><span><span><span><span>this</span></span></span></span><span><span><span><span>.</span></span></span></span><span><span><span>mouseOver</span></span></span><span><span><span><span>}</span></span></span></span><span><span> <span>onMouseOut</span></span></span><span><span><span>=</span></span></span><span><span><span><span>{</span></span></span></span><span><span><span><span>this</span></span></span></span><span><span><span><span>.</span></span></span></span><span><span><span>mouseOut</span></span></span><span><span><span><span>}</span></span></span></span><span><span><span>&gt;</span></span></span><span>\n        </span><span><span>{</span></span><span><span>this</span></span><span><span>.</span></span><span>props</span><span><span>.</span></span><span><span>render</span></span><span><span>(</span></span><span><span>this</span></span><span><span>.</span></span><span>state</span><span><span>.</span></span><span>hovering</span><span><span>)</span></span><span><span>}</span></span><span>\n      </span><span><span><span>&lt;</span></span></span><span><span><span>/</span></span></span><span><span><span>div</span></span></span><span><span><span>&gt;</span></span></span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span></code></pre></div><p>Well would you look at that. Now that we have our&nbsp;<code>Hover</code>&nbsp;component, any time we need a component to be aware of its hover state, we just wrap it inside of a&nbsp;<code>Hover</code>s&nbsp;<code>render</code>&nbsp;prop.</p><p>Finally let’s head back to the original code we had and see how we no longer have to duplicate all the hover logic since we have our&nbsp;<code>Hover</code>&nbsp;component.</p><p>This is what we had before.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>Info</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span> hovering<span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span> hovering<span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span> hovering<span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span>&lt;</span><span>&gt;</span>\n        <span>{</span><span>this</span><span>.</span>state<span>.</span>hovering <span>===</span> <span><span>true</span></span>\n          <span>?</span> <span>&lt;</span>Tooltip id<span>=</span><span>{</span><span>this</span><span>.</span>props<span>.</span>id<span>}</span> <span>/</span><span>&gt;</span>\n          <span>:</span> <span><span>null</span></span><span>}</span>\n        <span>&lt;</span>svg\n          onMouseOver<span>=</span><span>{</span><span>this</span><span>.</span>mouseOver<span>}</span>\n          onMouseOut<span>=</span><span>{</span><span>this</span><span>.</span>mouseOut<span>}</span>\n          className<span>=</span><span><span>\"Icon-svg Icon--hoverable-svg\"</span></span>\n          height<span>=</span><span>{</span><span>this</span><span>.</span>props<span>.</span>height<span>}</span>\n          viewBox<span>=</span><span><span>\"0 0 16 16\"</span></span> width<span>=</span><span><span>\"16\"</span></span><span>&gt;</span>\n            <span>&lt;</span>path d<span>=</span><span><span>\"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\"</span></span> <span>/</span><span>&gt;</span>\n        <span>&lt;</span><span>/</span>svg<span>&gt;</span>\n      <span>&lt;</span><span>/</span><span>&gt;</span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span><span>class</span></span></span><span> </span><span><span><span>TrendChart</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span> hovering<span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span> hovering<span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span> hovering<span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span>&lt;</span><span>&gt;</span>\n        <span>{</span><span>this</span><span>.</span>state<span>.</span>hovering <span>===</span> <span><span>true</span></span>\n          <span>?</span> <span>&lt;</span>Tooltip id<span>=</span><span>{</span><span>this</span><span>.</span>props<span>.</span>id<span>}</span><span>/</span><span>&gt;</span>\n          <span>:</span> <span><span>null</span></span><span>}</span>\n        <span>&lt;</span>Chart\n          type<span>=</span><span><span>'trend'</span></span>\n          onMouseOver<span>=</span><span>{</span><span>this</span><span>.</span>mouseOver<span>}</span>\n          onMouseOut<span>=</span><span>{</span><span>this</span><span>.</span>mouseOut<span>}</span>\n        <span>/</span><span>&gt;</span>\n      <span>&lt;</span><span>/</span><span>&gt;</span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span><span>class</span></span></span><span> </span><span><span><span>DailyChart</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span> hovering<span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span> hovering<span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span> hovering<span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span>&lt;</span><span>&gt;</span>\n        <span>{</span><span>this</span><span>.</span>state<span>.</span>hovering <span>===</span> <span><span>true</span></span>\n          <span>?</span> <span>&lt;</span>Tooltip id<span>=</span><span>{</span><span>this</span><span>.</span>props<span>.</span>id<span>}</span><span>/</span><span>&gt;</span>\n          <span>:</span> <span><span>null</span></span><span>}</span>\n        <span>&lt;</span>Chart\n          type<span>=</span><span><span>'daily'</span></span>\n          onMouseOver<span>=</span><span>{</span><span>this</span><span>.</span>mouseOver<span>}</span>\n          onMouseOut<span>=</span><span>{</span><span>this</span><span>.</span>mouseOut<span>}</span>\n        <span>/</span><span>&gt;</span>\n      <span>&lt;</span><span>/</span><span>&gt;</span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span><span>function</span></span></span><span> </span><span><span><span>App</span></span></span><span> </span><span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span>{</span>\n  <span><span>return</span></span> <span>(</span>\n    <span>&lt;</span><span>&gt;</span>\n      <span>&lt;</span>Info <span>/</span><span>&gt;</span>\n      <span>&lt;</span>TrendChart <span>/</span><span>&gt;</span>\n      <span>&lt;</span>DailyChart <span>/</span><span>&gt;</span>\n    <span>&lt;</span><span>/</span><span>&gt;</span>\n  <span>)</span>\n<span>}</span></code></pre></div><p>And now with our&nbsp;<code>Hover</code>&nbsp;component, instead of each component having to duplicate the hover logic, we can wrap each one inside of the&nbsp;<code>render</code>&nbsp;prop we pass to&nbsp;<code>Hover</code>&nbsp;and then pass down the&nbsp;<code>hovering</code>argument as a prop.</p><div><pre><code><span>function</span> <span>Info</span> <span>(</span>props<span>)</span> <span>{</span>\n  <span>return</span> <span>(</span>\n    <span><span>&lt;</span></span><span><span>&gt;</span></span>\n<span>      <span>{</span>props<span>.</span>hovering <span>===</span> <span>true</span>\n</span>        <span>?</span> <span><span>&lt;</span></span><span><span>Tooltip</span> <span>id</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>props</span></span><span><span><span>.</span></span></span><span><span>id</span></span><span><span><span>}</span></span></span><span> </span><span><span>/</span></span><span><span>&gt;</span></span>\n        <span>:</span> <span>null</span><span>}</span>\n      <span><span>&lt;</span></span><span><span>svg</span>\n        <span>onMouseOver</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>mouseOver</span></span><span><span><span>}</span></span></span><span>\n        <span>onMouseOut</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>mouseOut</span></span><span><span><span>}</span></span></span><span>\n        <span>className</span></span><span><span>=</span></span><span><span><span>\"Icon-svg Icon--hoverable-svg\"</span></span></span><span>\n        <span>height</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>props</span></span><span><span><span>.</span></span></span><span><span>height</span></span><span><span><span>}</span></span></span><span>\n        <span>viewBox</span></span><span><span>=</span></span><span><span><span>\"0 0 16 16\"</span></span></span><span> <span>width</span></span><span><span>=</span></span><span><span><span>\"16\"</span></span></span><span><span>&gt;</span></span>\n          <span><span>&lt;</span></span><span><span>path</span> <span>d</span></span><span><span>=</span></span><span><span><span>\"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z\"</span></span></span><span> </span><span><span>/</span></span><span><span>&gt;</span></span>\n      <span><span>&lt;</span></span><span><span>/</span></span><span><span>svg</span></span><span><span>&gt;</span></span>\n    <span><span>&lt;</span></span><span><span>/</span></span><span><span>&gt;</span></span>\n  <span>)</span>\n<span>}</span>\n\n<span>function</span> <span>TrendChart</span> <span>(</span>props<span>)</span> <span>{</span>\n  <span>return</span> <span>(</span>\n    <span><span>&lt;</span></span><span><span>&gt;</span></span>\n<span>      <span>{</span>props<span>.</span>hovering <span>===</span> <span>true</span>\n</span>        <span>?</span> <span><span>&lt;</span></span><span><span>Tooltip</span> <span>id</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>props</span></span><span><span><span>.</span></span></span><span><span>id</span></span><span><span><span>}</span></span></span><span><span><span>/</span></span></span><span><span>&gt;</span></span>\n        <span>:</span> <span>null</span><span>}</span>\n      <span><span>&lt;</span></span><span><span>Chart</span>\n        <span>type</span></span><span><span>=</span></span><span><span><span>'trend'</span></span></span><span>\n        <span>onMouseOver</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>mouseOver</span></span><span><span><span>}</span></span></span><span>\n        <span>onMouseOut</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>mouseOut</span></span><span><span><span>}</span></span></span><span>\n      </span><span><span>/</span></span><span><span>&gt;</span></span>\n    <span><span>&lt;</span></span><span><span>/</span></span><span><span>&gt;</span></span>\n  <span>)</span>\n<span>}</span>\n\n\n<span>function</span> <span>DailyChart</span> <span>(</span>props<span>)</span> <span>{</span>\n  <span>return</span> <span>(</span>\n    <span><span>&lt;</span></span><span><span>&gt;</span></span>\n<span>      <span>{</span>props<span>.</span>hovering <span>===</span> <span>true</span>\n</span>        <span>?</span> <span><span>&lt;</span></span><span><span>Tooltip</span> <span>id</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>props</span></span><span><span><span>.</span></span></span><span><span>id</span></span><span><span><span>}</span></span></span><span><span><span>/</span></span></span><span><span>&gt;</span></span>\n        <span>:</span> <span>null</span><span>}</span>\n      <span><span>&lt;</span></span><span><span>Chart</span>\n        <span>type</span></span><span><span>=</span></span><span><span><span>'daily'</span></span></span><span>\n        <span>onMouseOver</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>mouseOver</span></span><span><span><span>}</span></span></span><span>\n        <span>onMouseOut</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>this</span></span></span><span><span><span>.</span></span></span><span><span>mouseOut</span></span><span><span><span>}</span></span></span><span>\n      </span><span><span>/</span></span><span><span>&gt;</span></span>\n    <span><span>&lt;</span></span><span><span>/</span></span><span><span>&gt;</span></span>\n  <span>)</span>\n<span>}</span>\n\n<span>function</span> <span>App</span> <span>(</span><span>)</span> <span>{</span>\n  <span>return</span> <span>(</span>\n    <span><span>&lt;</span></span><span><span>&gt;</span></span>\n<span>      <span><span>&lt;</span></span><span><span>Hover</span> <span>render</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>(</span></span></span><span><span>hovering</span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span>\n</span><span>        <span><span>&lt;</span></span><span><span>Info</span> <span>hovering</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span>hovering</span></span><span><span><span>}</span></span></span><span><span>&gt;</span></span>\n</span><span>      <span>}</span><span>&gt;</span>\n</span><span>\n</span><span>      <span><span>&lt;</span></span><span><span>Hover</span> <span>render</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>(</span></span></span><span><span>hovering</span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span>\n</span><span>        <span><span>&lt;</span></span><span><span>TrendChart</span> <span>hovering</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span>hovering</span></span><span><span><span>}</span></span></span><span><span>&gt;</span></span>\n</span><span>      <span>}</span><span>&gt;</span>\n</span><span>\n</span><span>      <span><span>&lt;</span></span><span><span>Hover</span> <span>render</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span><span>(</span></span></span><span><span>hovering</span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span>\n</span><span>        <span><span>&lt;</span></span><span><span>DailyChart</span> <span>hovering</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span>hovering</span></span><span><span><span>}</span></span></span><span><span>&gt;</span></span>\n</span><span>      <span>}</span><span>&gt;</span>\n</span>    <span><span>&lt;</span></span><span><span>/</span></span><span><span>&gt;</span></span>\n  <span>)</span>\n<span>}</span></code></pre></div><p>This pattern, as you probably guessed by now, is called&nbsp;<code>Render Props</code>. Summarized in the React docs, “the term render prop refers to a technique for sharing code between React components using a prop whose value is a function”.</p><hr><p>Another way to utilize the render props pattern is with React’s&nbsp;<code>children</code>&nbsp;prop. If you’ve never used&nbsp;<code>props.children</code>&nbsp;before, it’s just like any other prop, accept instead of you passing it explicitly to the component, React automatically does it for you and it reference whatever is in the body of the component.</p><div><pre><code><span><span><span>function</span></span></span><span> </span><span><span><span>User</span></span></span><span> </span><span><span>(</span></span><span><span>props</span></span><span><span>)</span></span><span> </span><span>{</span>\n  <span><span>return</span></span> <span>(</span>\n    <span><span><span>&lt;</span></span></span><span><span><span>div</span></span></span><span><span><span>&gt;</span></span></span><span>\n      </span><span><span>{</span></span><span>props</span><span><span>.</span></span><span>children</span><span><span>}</span></span><span>\n    </span><span><span><span>&lt;</span></span></span><span><span><span>/</span></span></span><span><span><span>div</span></span></span><span><span><span>&gt;</span></span></span>\n  <span>)</span>\n<span>}</span>\n\n<span>&lt;</span>User<span>&gt;</span>\n  This is props<span>.</span>children\n<span>&lt;</span><span><span>/</span></span><span>User</span><span><span>&gt;</span></span></code></pre></div><p>In the example above, what’s going to get rendered to the UI is a&nbsp;<code>div</code>&nbsp;with the words&nbsp;<code>This is props.children</code>&nbsp;inside of it.</p><p>Now what if instead of having&nbsp;<code>props.children</code>&nbsp;be a string, it was a function? Just as we saw earlier, we’d need to invoke it to get the value.</p><div><pre><code><span><span><span>function</span></span></span><span> </span><span><span><span>User</span></span></span><span> </span><span><span>(</span></span><span><span>props</span></span><span><span>)</span></span><span> </span><span>{</span>\n  <span><span>return</span></span> <span>(</span>\n    <span><span><span>&lt;</span></span></span><span><span><span>div</span></span></span><span><span><span>&gt;</span></span></span><span>\n</span><span><span>      </span><span><span>{</span></span><span>props</span><span><span>.</span></span><span><span>children</span></span><span><span>(</span></span><span><span>)</span></span><span><span>}</span></span><span>\n</span></span><span>    </span><span><span><span>&lt;</span></span></span><span><span><span>/</span></span></span><span><span><span>div</span></span></span><span><span><span>&gt;</span></span></span>\n  <span>)</span>\n<span>}</span>\n\n<span>&lt;</span>User<span>&gt;</span>\n<span>  <span>{</span><span>(</span><span>)</span> <span>=&gt;</span> This is props<span>.</span>children<span>}</span>\n</span><span>&lt;</span><span><span>/</span></span><span>User</span><span><span>&gt;</span></span></code></pre></div><p>With our newly formed knowledge of&nbsp;<code>props.children</code>, let’s update our examples from earlier. Now instead of&nbsp;<code>Hover</code>&nbsp;having a&nbsp;<code>render</code>&nbsp;prop, let’s get rid of that all together and use&nbsp;<code>props.children</code>&nbsp;instead.</p><div><pre><code><span>function</span> <span>App</span> <span>(</span><span>)</span> <span>{</span>\n  <span>return</span> <span>(</span>\n    <span><span>&lt;</span></span><span><span>&gt;</span></span>\n      <span><span>&lt;</span></span><span><span>Hover</span></span><span><span>&gt;</span></span>\n        <span>{</span><span>(</span>hovering<span>)</span> <span>=&gt;</span> <span><span>&lt;</span></span><span><span>Info</span> <span>hovering</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span>hovering</span></span><span><span><span>}</span></span></span><span><span>&gt;</span></span><span>}</span>\n      <span><span>&lt;</span></span><span><span>/</span></span><span><span>Hover</span></span><span><span>&gt;</span></span>\n\n      <span><span>&lt;</span></span><span><span>Hover</span></span><span><span>&gt;</span></span>\n        <span>{</span><span>(</span>hovering<span>)</span> <span>=&gt;</span> <span><span>&lt;</span></span><span><span>TrendChart</span> <span>hovering</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span>hovering</span></span><span><span><span>}</span></span></span><span><span>&gt;</span></span><span>}</span>\n      <span><span>&lt;</span></span><span><span>/</span></span><span><span>Hover</span></span><span><span>&gt;</span></span>\n\n      <span><span>&lt;</span></span><span><span>Hover</span></span><span><span>&gt;</span></span>\n        <span>{</span><span>(</span>hovering<span>)</span> <span>=&gt;</span> <span><span>&lt;</span></span><span><span>DailyChart</span> <span>hovering</span></span><span><span>=</span></span><span><span><span>{</span></span></span><span><span>hovering</span></span><span><span><span>}</span></span></span><span><span>&gt;</span></span><span>}</span>\n      <span><span>&lt;</span></span><span><span>/</span></span><span><span>Hover</span></span><span><span>&gt;</span></span>\n    <span><span>&lt;</span></span><span><span>/</span></span><span><span>&gt;</span></span>\n  <span>)</span>\n<span>}</span></code></pre></div><p>Looks good. Now we need to update&nbsp;<code>Hover</code>&nbsp;so instead of invoking&nbsp;<code>this.props.render</code>, it invokes&nbsp;<code>this.props.children</code>.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>Hover</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  state <span>=</span> <span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span>\n  <span>mouseOver</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>true</span></span> <span>}</span><span>)</span>\n  <span>mouseOut</span> <span>=</span> <span><span><span>(</span></span></span><span><span><span>)</span></span></span><span> </span><span><span>=&gt;</span></span> <span><span>this</span></span><span>.</span><span>setState</span><span>(</span><span>{</span> <span>hovering</span><span>:</span> <span><span>false</span></span> <span>}</span><span>)</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>return</span></span> <span>(</span>\n      <span><span><span>&lt;</span></span></span><span><span><span>div</span> <span>onMouseOver</span></span></span><span><span><span>=</span></span></span><span><span><span><span>{</span></span></span></span><span><span><span><span>this</span></span></span></span><span><span><span><span>.</span></span></span></span><span><span><span>mouseOver</span></span></span><span><span><span><span>}</span></span></span></span><span><span> <span>onMouseOut</span></span></span><span><span><span>=</span></span></span><span><span><span><span>{</span></span></span></span><span><span><span><span>this</span></span></span></span><span><span><span><span>.</span></span></span></span><span><span><span>mouseOut</span></span></span><span><span><span><span>}</span></span></span></span><span><span><span>&gt;</span></span></span><span>\n</span><span><span>        </span><span><span>{</span></span><span><span>this</span></span><span><span>.</span></span><span>props</span><span><span>.</span></span><span><span>children</span></span><span><span>(</span></span><span><span>this</span></span><span><span>.</span></span><span>state</span><span><span>.</span></span><span>hovering</span><span><span>)</span></span><span><span>}</span></span><span>\n</span></span><span>      </span><span><span><span>&lt;</span></span></span><span><span><span>/</span></span></span><span><span><span>div</span></span></span><span><span><span>&gt;</span></span></span>\n    <span>)</span>\n  <span>}</span>\n<span>}</span></code></pre></div><p>Nice. Is this better? Not really, it’s just different. I prefer it, but there’s nothing objectively better about it.</p><hr><p>If you read our post about&nbsp;<a href=\"https://tylermcginnis.com/react-higher-order-components\">Higher Order Components</a>, you’ll be familiar with how HOCs have some pitfalls. The biggest one was with inversion of control and naming collisions. Because you have to pass your component over to the Higher-Order component, you have no control over how it’s rendered. We looked at an example with React Router’s&nbsp;<code>withRouter</code>&nbsp;HOC.&nbsp;<code>withRouter</code>&nbsp;will pass&nbsp;<code>match</code>,&nbsp;<code>location</code>, and&nbsp;<code>history</code>props to the wrapped component whenever it renders.</p><div><pre><code><span><span><span>class</span></span></span><span> </span><span><span><span>Game</span></span></span><span> </span><span><span><span>extends</span></span></span><span> </span><span><span><span>React</span></span><span><span>.</span></span><span><span>Component</span></span></span><span> </span><span>{</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>const</span></span> <span>{</span> match<span>,</span> location<span>,</span> history <span>}</span> <span>=</span> <span><span>this</span></span><span>.</span>props <span><span>// From React Router</span></span>\n\n    <span>...</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>export</span></span> <span><span>default</span></span> <span>withRouter</span><span>(</span>Game<span>)</span></code></pre></div><p>If our Game component is already receiving&nbsp;<code>match</code>,&nbsp;<code>location</code>, or&nbsp;<code>history</code>&nbsp;as a prop, we’re going to have a naming collision and it’s going to be a hard bug to track down.</p><p>Does this same pitfall occur with Render Props? Nope. Instead of handing over the component, we hand over a function. Then, when that function is invoked, it’ll be passed the data we need. No inversion of control and no naming collisions since we can decide how the component is rendered.</p><div><pre><code><span>&lt;</span>Hover<span>&gt;</span>\n  <span>{</span><span>(</span>hovering<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span><span>// We can do whatever we want here.</span></span>\n    <span><span>// We decide how and when to render the component</span></span>\n    <span><span>return</span></span> <span><span><span>&lt;</span></span></span><span><span><span>Info</span> <span>anyNameWeWant</span></span></span><span><span><span>=</span></span></span><span><span><span><span>{</span></span></span></span><span><span><span>hovering</span></span></span><span><span><span><span>}</span></span></span></span><span><span> </span></span><span><span><span>/</span></span></span><span><span><span>&gt;</span></span></span><span>\n  </span><span><span>}</span></span><span><span>}</span></span><span>\n</span><span><span><span>&lt;</span></span></span><span><span><span>/</span></span></span><span><span><span>Hover</span></span></span><span><span><span>&gt;</span></span></span></code></pre></div><hr><p>Now the big question is, should you use Render Props or Higher Order Components? Well, that’s up to you. You now know how to use them both which means you have enough information to make an informed decision for yourself.</p></div>","filePath":"pages/React/.md","_id":"Bol9U59ZaBQfCjZs","favorite":true,"dateUpdated":1542038951537}
{"date":"2018-10-31T16:23:50.119Z","title":"How to pass props to components in React","sourceUrl":"https://www.robinwieruch.de/react-pass-props-to-component/","path":"React/","category":"React","tags":["React"],"author":"","excerpt":"","dateCreated":1541002881296,"coverImage":"","type":"Post","frontmatter":"---\npath: 'React/'\ndate: 'Wed Oct 31 2018 21:53:50 GMT+0530 (India Standard Time)'\ntitle: 'How to pass props to components in React'\ntags: ['React']\ncategory: 'React'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://www.robinwieruch.de/react-pass-props-to-component/'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Everyone who is new to React is confused by these so called props, because they are never mentioned in any other web framework, and rarely explained on their own. They are one of the early things you will learn in React after initially grasping React’s JSX syntax. Basically props are used to pass data from component to component. In this guide, I want to explain React props in greater detail. First, it explains the&nbsp;<em>“What are props in React?” question</em>, followed by different props examples to see how they can be used in React.</p><h2>Table of Contents</h2><ul><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props\">What are Props in React?</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-vs-state\">React Props vs. State</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-child-parent\">How to pass Props from child to parent Component?</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-state-derived-properties\">Props can be state, props, or derived properties</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-code-style\">React Props and Code Style</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-syntax-spread-rest\">React …props syntax</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-default-value\">React props with default value</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-children\">React’s children prop</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-components-as-props\">How to pass Components as Props?</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-children-as-a-function\">Children as a Function</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-context-api\">React’s Context API</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-to-state\">How to set props to state?</a></li><li><a href=\"https://www.robinwieruch.de/react-pass-props-to-component/#react-props-pitfalls\">React Props Pitfalls</a></li></ul><h2>What are Props in React?</h2><p>Normally you start out with React’s JSX syntax for rendering something to the browser when learning about React. Basically JSX mixes HTML with JavaScript to get the best of both worlds.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n<span>    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n</span><span>\n</span><span>    <span>return</span> <span>(</span>\n</span><span>      <span>&lt;</span><span>div</span><span>&gt;</span>\n</span><span>        <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;</span>\n</span><span>      <span>&lt;</span><span>/div&gt;</span>\n</span><span>    <span>);</span>\n</span>  <span>}</span>\n<span>}</span>\n\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>Pretty soon you will split out your first React component.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>class</span> <span>Greeting</span> <span>extends</span> <span>Component</span> <span>{</span>\n</span><span>  <span>render</span><span>()</span> <span>{</span>\n</span><span>    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n</span><span>\n</span><span>    <span>return</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n</span><span>  <span>}</span>\n</span><span><span>}</span>\n</span>\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>A common question followed by this act:&nbsp;<span>how to pass the data as params (parameters) from one React component to another component?</span>&nbsp;That’s because you don’t want to have a component rendering static data, but pass dynamic data to your component instead. That’s where React’s props come into play. You can pass data in React by defining custom HTML attributes to which you assign your data with JSX syntax. So don’t forget the curly braces.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>class</span> <span>Greeting</span> <span>extends</span> <span>Component</span> <span>{</span>\n</span><span>  <span>render</span><span>()</span> <span>{</span>\n</span><span>    <span>return</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>this</span><span>.</span><span>props</span><span>.</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n</span><span>  <span>}</span>\n</span><span><span>}</span>\n</span>\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>As you can see, the props are received in React’s class component via the&nbsp;<code>this</code>&nbsp;instance of the class. A common question which comes up then:&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/facebook/react/issues/1387\">Why aren’t the props received in the render methods signature?</a>It would be similar to functional stateless components then. As for now, the team behind React considered it, but didn’t change the API for React class components yet. Maybe it will be changed at some point.</p><div>Read more:&nbsp;<a href=\"https://www.robinwieruch.de/javascript-fundamentals-react-requirements/\" itemprop=\"url\">React class components and functional stateless components</a></div><p>In a functional stateless component, the props are received in the function signature as arguments:</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n        <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>/&gt;</span>\n      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>const</span> <span>Greeting</span> <span>=</span> <span>props</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>props</span><span>.</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n</span>\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>Since you will find always the props in the function signature, which most of the time is only the container object of your data, but not the data to be used, you can&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment\">destructure</a>&nbsp;the props early in the function signature. One would call it React props destructuring:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n</code></pre></div><p>As you have seen, props enable you to pass variables from one to another component down the component tree. In the previous example, it was only a string variable. But props can be anything from integers over objects to arrays. Even React components, but you will learn about this later. You can also define the props inline. In case of strings, you can pass props inside double quotes (or single quotes) too.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>\"Welcome to React\"</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>But you can also pass other data structures with inline props. In case of objects, it can be confusing for React beginners, because you have two curly braces: one for the JSX and one for the object. That’s especially confusing when passing a style object to a style attribute in React the first time.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{{</span> <span>text</span><span>:</span> <span>'Welcome to React'</span> <span>}}</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>.</span><span>text</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n</span>\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>Note: It is important to note that is could lead to performance issues, because every time the component renders a new object is created again. But it can be a premature optimization as well when learning only about React.</p><p>Basically that’s how props are passed to React components. As you may have noticed, props are only passed from top to bottom in React’s component tree. There is no way to pass props up to a parent component. We will revisit this issue later in this article. In addition, it’s important to know that React’s props are read only. There is&nbsp;<span>no way in React to set props</span>&nbsp;(even though it was possible in the past). After all, props are only used to pass data from one component to another component React, but only from parent to child components down the component tree.</p><h2>React Props vs. State</h2><p>Passing only props from component to component doesn’t make the component interactive, because nothing is there to change the props. Props are read-only. That’s the time when React state comes into play which can be changed. The state is co-located to a React component.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n<span>  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n</span><span>    <span>super</span><span>(</span><span>props</span><span>);</span>\n</span><span>\n</span><span>    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n</span><span>      <span>isShow</span><span>:</span> <span>true</span><span>,</span>\n</span><span>    <span>};</span>\n</span><span>  <span>}</span>\n</span>\n<span>  <span>toggleShow</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n</span><span>    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>isShow</span><span>:</span> <span>!</span><span>state</span><span>.</span><span>isShow</span> <span>}));</span>\n</span><span>  <span>};</span>\n</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>isShow</span> <span>?</span> <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>/&gt;</span> <span>:</span> <span>null</span><span>}</span>\n</span>\n<span>        <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>toggleShow</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n</span><span>          <span>Toggle</span> <span>Show</span>\n</span><span>        <span>&lt;</span><span>/button&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>In this case, the code uses a ternary operator to either show the greeting or not. You can read up&nbsp;<a href=\"https://www.robinwieruch.de/conditional-rendering-react/\">this tutorial about all the conditional renderings in React</a>. The state makes the React components interactive. You can&nbsp;<span>read and write state</span>, whereas&nbsp;<span>props are read-only</span>. Once the state changes, the component renders again. In addition, state can be passed as props to child components too.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n    <span>super</span><span>(</span><span>props</span><span>);</span>\n\n    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n      <span>isShow</span><span>:</span> <span>true</span><span>,</span>\n    <span>};</span>\n  <span>}</span>\n\n  <span>toggleShow</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>isShow</span><span>:</span> <span>!</span><span>state</span><span>.</span><span>isShow</span> <span>}));</span>\n  <span>};</span>\n\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>isShow</span><span>=</span><span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>isShow</span><span>}</span> <span>/&gt;</span>\n</span>\n        <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>toggleShow</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n          <span>Toggle</span> <span>Show</span>\n        <span>&lt;</span><span>/button&gt;</span>\n      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span><span>,</span> <span>isShow</span> <span>})</span> <span>=&gt;</span>\n</span><span>  <span>isShow</span> <span>?</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt; : null;</span>\n</span>\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>The child component doesn’t know whether the incoming props are state or props from the parent component. The component just consumes the data as props. And the child component re-renders too once the incoming props changed.</p><p>In conclusion, every time the props or state change, the rendering mechanism of the affected component is triggered. That’s how the whole component tree becomes interactive, because after all, state is passed as props to other components, and once the state in a component changes, which may be passed as props to the child components, all affected components render again.</p><h2>How to pass Props from child to parent Component?</h2><p>This a common question for React newcomers and the answer for it is brief: there is&nbsp;<span>no way to pass props from a child to a parent component</span>. Let’s revisit the previous example, but this time with an additional Button component for the toggle mechanism.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>{</span><span>isShow</span> <span>?</span> <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>/&gt;</span> <span>:</span> <span>null</span><span>}</span>\n</span>\n<span>        <span>&lt;</span><span>Button</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>class</span> <span>Button</span> <span>extends</span> <span>Component</span> <span>{</span>\n</span><span>  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n</span><span>    <span>super</span><span>(</span><span>props</span><span>);</span>\n</span><span>\n</span><span>    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n</span><span>      <span>isShow</span><span>:</span> <span>true</span><span>,</span>\n</span><span>    <span>};</span>\n</span><span>  <span>}</span>\n</span><span>\n</span><span>  <span>toggleShow</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n</span><span>    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>isShow</span><span>:</span> <span>!</span><span>state</span><span>.</span><span>isShow</span> <span>}));</span>\n</span><span>  <span>};</span>\n</span><span>\n</span><span>  <span>render</span><span>()</span> <span>{</span>\n</span><span>    <span>return</span> <span>(</span>\n</span><span>      <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>toggleShow</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n</span><span>        <span>Toggle</span> <span>Show</span>\n</span><span>      <span>&lt;</span><span>/button&gt;</span>\n</span><span>    <span>);</span>\n</span><span>  <span>}</span>\n</span><span><span>}</span>\n</span>\n<span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>So far, the Button component manages its own co-located state. Since the Button component manages the&nbsp;<code>isShow</code>&nbsp;property, there is no way to pass it up as props to the App component. The App component needs the&nbsp;<code>isShow</code>&nbsp;property though for the conditional rendering of the Greeting component. At the moment, the application wouldn’t work this way. That’s the point when you have to&nbsp;<span>lift state</span>&nbsp;up for making it accessible for other components (in this case the App component itself) as state (or as passed props for other components).</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n<span>  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n</span><span>    <span>super</span><span>(</span><span>props</span><span>);</span>\n</span><span>\n</span><span>    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n</span><span>      <span>isShow</span><span>:</span> <span>true</span><span>,</span>\n</span><span>    <span>};</span>\n</span><span>  <span>}</span>\n</span><span>\n</span><span>  <span>toggleShow</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n</span><span>    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>isShow</span><span>:</span> <span>!</span><span>state</span><span>.</span><span>isShow</span> <span>}));</span>\n</span><span>  <span>};</span>\n</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>isShow</span> <span>?</span> <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>/&gt;</span> <span>:</span> <span>null</span><span>}</span>\n</span>\n<span>        <span>&lt;</span><span>Button</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>toggleShow</span><span>}</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>const</span> <span>Button</span> <span>=</span> <span>({</span> <span>onClick</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n</span><span>  <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>onClick</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n</span><span>    <span>Toggle</span> <span>Show</span>\n</span><span>  <span>&lt;</span><span>/button&gt;</span>\n</span><span><span>);</span>\n</span>\n<span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>The important ingredient is that the App component&nbsp;<span>passes down a function in the props</span>&nbsp;to the Button component now. The function is used for the click handler in the Button component. However, the Button doesn’t know the business logic of the function, only that it has to trigger the function when the button gets clicked. Above in the App component, the state is changed when the passed function is called, and thus all affected components, which use the changed state or consume it as props, render again. Now you can even pass the state as props to the Greeting component.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n    <span>super</span><span>(</span><span>props</span><span>);</span>\n\n    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n      <span>isShow</span><span>:</span> <span>true</span><span>,</span>\n    <span>};</span>\n  <span>}</span>\n\n  <span>toggleShow</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>isShow</span><span>:</span> <span>!</span><span>state</span><span>.</span><span>isShow</span> <span>}));</span>\n  <span>};</span>\n\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>isShow</span><span>=</span><span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>isShow</span><span>}</span> <span>/&gt;</span>\n</span>\n        <span>&lt;</span><span>Button</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>toggleShow</span><span>}</span> <span>/&gt;</span>\n      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Button</span> <span>=</span> <span>({</span> <span>onClick</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>onClick</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n    <span>Toggle</span> <span>Show</span>\n  <span>&lt;</span><span>/button&gt;</span>\n<span>);</span>\n\n<span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span><span>,</span> <span>isShow</span> <span>})</span> <span>=&gt;</span>\n</span><span>  <span>isShow</span> <span>?</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>greeting</span><span>}</span><span>&lt;</span><span>/h1&gt; : null;</span>\n</span>\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>As said, there is no way passing props from a child to a parent component. But&nbsp;<span>you can always pass functions from parent to child components</span>, whereas the child components make use of these functions and the functions may change the state in a parent component above. Once the state has changed, the state is passed down as props again. All affected components will render again. For instance, the same pattern applies for having page components in your React application. Once you want to pass data from page to another in React, you can lift the state up to the component (usually App component) which has all page components as its child components. Then the data is managed as state in the top level component but still can be distributed to all child components.</p><h2>Props can be state, props, or derived properties</h2><p>Regardless of passing props or state to a component, the component just receives the data as props. It doesn’t differentiate between props or state. Everything incoming is props, everything managed by the component itself is state. However, there is one other thing apart from props and state which is sometimes mentioned:&nbsp;<span>derived props</span>&nbsp;(<span>derived properties</span>). Basically it is the same as props, but only a variation of the props before they are passed to the next component.</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n<span>    <span>const</span> <span>greeting</span> <span>=</span> <span>{</span>\n</span><span>      <span>subject</span><span>:</span> <span>'React'</span><span>,</span>\n</span><span>      <span>description</span><span>:</span> <span>'Your component library for ...'</span><span>,</span>\n</span><span>    <span>};</span>\n</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>greeting</span> <span>})</span> <span>=&gt;</span>\n  <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>    <span>&lt;</span><span>Title</span> <span>title</span><span>=</span><span>{</span><span>`Welcome to </span><span>${</span><span>greeting</span><span>.</span><span>subject</span><span>}</span><span>`</span><span>}</span> <span>/&gt;</span>\n</span>    <span>&lt;</span><span>Description</span> <span>description</span><span>=</span><span>{</span><span>greeting</span><span>.</span><span>description</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/div&gt;</span>\n\n<span><span>const</span> <span>Title</span> <span>=</span> <span>({</span> <span>title</span> <span>})</span> <span>=&gt;</span>\n</span><span>  <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>title</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n</span>\n<span>const</span> <span>Description</span> <span>=</span> <span>({</span> <span>description</span> <span>})</span> <span>=&gt;</span>\n  <span>&lt;</span><span>p</span><span>&gt;</span><span>{</span><span>description</span><span>}</span><span>&lt;</span><span>/p&gt;;</span>\n\n<span>export</span> <span>default</span> <span>App</span><span>;</span>\n</code></pre></div><p>In this scenario, the title in the Title component is a derived property from props plus a string interpolation in the Greeting component. This is the most basic example for it, but you can imagine how state or any other business logic could be used to change the passed props on the way down the component tree. Later you will learn about derived state too.</p><h2>React Props and Code Style</h2><p>Passing lots of props down to a component can have a terrible effect on the code style:</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n<span>import</span> <span>logo</span> <span>from</span> <span>'./logo.svg'</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>{</span>\n      <span>subject</span><span>:</span> <span>'React'</span><span>,</span>\n      <span>description</span><span>:</span> <span>'Your component library for ...'</span><span>,</span>\n    <span>};</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>subject</span><span>=</span><span>{</span><span>greeting</span><span>.</span><span>subject</span><span>}</span> <span>description</span><span>=</span><span>{</span><span>greeting</span><span>.</span><span>description</span><span>}</span> <span>logo</span><span>=</span><span>{</span><span>logo</span><span>}</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>subject</span><span>,</span> <span>description</span><span>,</span> <span>logo</span> <span>})</span> <span>=&gt;</span>\n  <span>...</span>\n</code></pre></div><p>So how to overcome this bad code style which is hard to read and maintain? One way would be passing the props with multiple indented lines to a component. The destructuring could follow the same rules:</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n<span>import</span> <span>logo</span> <span>from</span> <span>'./logo.svg'</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>{</span>\n      <span>subject</span><span>:</span> <span>'React'</span><span>,</span>\n      <span>description</span><span>:</span> <span>'Your component library for ...'</span><span>,</span>\n    <span>};</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n        <span>&lt;</span><span>Greeting</span>\n<span>          <span>subject</span><span>=</span><span>{</span><span>greeting</span><span>.</span><span>subject</span><span>}</span>\n</span><span>          <span>description</span><span>=</span><span>{</span><span>greeting</span><span>.</span><span>description</span><span>}</span>\n</span><span>          <span>logo</span><span>=</span><span>{</span><span>logo</span><span>}</span>\n</span>        <span>/&gt;</span>\n      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Greeting</span> <span>=</span> <span>({</span>\n<span>  <span>subject</span><span>,</span>\n</span><span>  <span>description</span><span>,</span>\n</span><span>  <span>logo</span><span>,</span>\n</span><span>})</span> <span>=&gt;</span>\n  <span>...</span>\n</code></pre></div><p>You can do all of this code formatting on your own or use a code formatter instead.&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/prettier/prettier\">Prettier</a>&nbsp;is the most popular choice when it comes to opinionated code formatters. If you are interested in using Prettier, here you can read up on how to set it up on&nbsp;<a href=\"https://www.robinwieruch.de/react-js-windows-setup/\">Windows</a>&nbsp;or&nbsp;<a href=\"https://www.robinwieruch.de/react-js-macos-setup/\">MacOS</a>&nbsp;in Visual Studio Code.</p><h2>React ...props syntax</h2><p>Another strategy for passing all props to a child component is the&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax\">JavaScript spread operator</a>. JavaScript’s spread operator in React is a useful power feature and you can read people referring to it as the&nbsp;<span>React …props syntax</span>&nbsp;even though it is not really a React feature but just a thing coming from JavaScript.</p><div><pre><code data-lang=\"javascript\"><span></span><span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>{</span>\n      <span>subject</span><span>:</span> <span>'React'</span><span>,</span>\n      <span>description</span><span>:</span> <span>'Your component library for ...'</span><span>,</span>\n    <span>};</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>        <span>&lt;</span><span>Greeting</span> <span>{...</span><span>greeting</span><span>}</span> <span>/&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>subject</span><span>,</span> <span>description</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>div</span><span>&gt;</span>\n    <span>&lt;</span><span>Title</span> <span>title</span><span>=</span><span>{</span><span>`Welcome to </span><span>${</span><span>subject</span><span>}</span><span>`</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Description</span> <span>description</span><span>=</span><span>{</span><span>description</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>Title</span> <span>=</span> <span>({</span> <span>title</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>title</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n\n<span>const</span> <span>Description</span> <span>=</span> <span>({</span> <span>description</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>p</span><span>&gt;</span><span>{</span><span>description</span><span>}</span><span>&lt;</span><span>/p&gt;;</span>\n</code></pre></div><p>The props spreading can be used to spread a whole object with key value pairs down to a child component. It has the same effect as passing each value of the object by its own to the component as before. The child component gets the props the same way as before too. Another thing which builds up on top of the&nbsp;<span>prop spread</span>&nbsp;is the&nbsp;<span>prop spread with rest</span>.</p><div><pre><code data-lang=\"javascript\"><span></span><span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>{</span>\n      <span>subject</span><span>:</span> <span>'React'</span><span>,</span>\n      <span>description</span><span>:</span> <span>'Your component library for ...'</span><span>,</span>\n    <span>};</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n        <span>&lt;</span><span>Greeting</span> <span>{...</span><span>greeting</span><span>}</span> <span>/&gt;</span>\n      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>subject</span><span>,</span> <span>...</span><span>other</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n</span>  <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>    <span>&lt;</span><span>Title</span> <span>title</span><span>=</span><span>{</span><span>`Welcome to </span><span>${</span><span>subject</span><span>}</span><span>`</span><span>}</span> <span>/&gt;</span>\n</span><span>    <span>&lt;</span><span>Description</span> <span>{...</span><span>other</span><span>}</span> <span>/&gt;</span>\n</span>  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>Title</span> <span>=</span> <span>({</span> <span>title</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>{</span><span>title</span><span>}</span><span>&lt;</span><span>/h1&gt;;</span>\n\n<span>const</span> <span>Description</span> <span>=</span> <span>({</span> <span>description</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>p</span><span>&gt;</span><span>{</span><span>description</span><span>}</span><span>&lt;</span><span>/p&gt;;</span>\n</code></pre></div><p>As you can see, in the Greeting component the props are destructured but with a&nbsp;<span>rest assignment</span>&nbsp;which is called&nbsp;<code>other</code>&nbsp;in this case. So you have the&nbsp;<code>subject</code>&nbsp;prop but also the&nbsp;<code>other</code>&nbsp;prop which is essentially just an object with all the remaining properties (in this case only the&nbsp;<code>description</code>). Now you can spread the rest of the props to the Description component, because all the relevant props for the other components (here the Title component) were separated from it.</p><h2>React props with default value</h2><p>In some cases you may want to pass default values as props. Historically the best approach to it was using JavaScript’s logical OR operator.</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>subject</span><span>,</span> <span>description</span> <span>})</span> <span>=&gt;</span> <span>{</span>\n<span>  <span>subject</span> <span>=</span> <span>subject</span> <span>||</span> <span>'Earth'</span><span>;</span>\n</span>\n  <span>return</span> <span>(</span>\n    <span>&lt;</span><span>div</span><span>&gt;</span>\n      <span>&lt;</span><span>Title</span> <span>title</span><span>=</span><span>{</span><span>`Welcome to </span><span>${</span><span>subject</span><span>}</span><span>`</span><span>}</span> <span>/&gt;</span>\n      <span>&lt;</span><span>Description</span> <span>description</span><span>=</span><span>{</span><span>description</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>/div&gt;</span>\n  <span>);</span>\n<span>};</span>\n</code></pre></div><p>You can also inline it as prop:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>subject</span><span>,</span> <span>description</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>div</span><span>&gt;</span>\n<span>    <span>&lt;</span><span>Title</span> <span>title</span><span>=</span><span>{</span><span>`Welcome to </span><span>${</span><span>subject</span> <span>||</span> <span>'Earth'</span><span>}</span><span>`</span><span>}</span> <span>/&gt;</span>\n</span>    <span>&lt;</span><span>Description</span> <span>description</span><span>=</span><span>{</span><span>description</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n</code></pre></div><p>However, with JavaScript language additions there are other features you can use for it. For instance&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters\">JavaScript’s default parameter</a>&nbsp;for the default value of the prop:</p><div><pre><code data-lang=\"javascript\"><span></span><span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>subject</span> <span>=</span> <span>'Earth'</span><span>,</span> <span>description</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n</span>  <span>&lt;</span><span>div</span><span>&gt;</span>\n    <span>&lt;</span><span>Title</span> <span>title</span><span>=</span><span>{</span><span>`Welcome to </span><span>${</span><span>subject</span><span>}</span><span>`</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Description</span> <span>description</span><span>=</span><span>{</span><span>description</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n</code></pre></div><p>The latter is the most popular choice when using only JavaScript for the default value. However, in case you are using&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://reactjs.org/docs/typechecking-with-proptypes.html\">React’s PropTypes</a>, it’s is also possible to pass&nbsp;<span>default prop values</span>&nbsp;the React way:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>Greeting</span> <span>=</span> <span>({</span> <span>subject</span><span>,</span> <span>description</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>div</span><span>&gt;</span>\n    <span>&lt;</span><span>Title</span> <span>title</span><span>=</span><span>{</span><span>`Welcome to </span><span>${</span><span>subject</span><span>}</span><span>`</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Description</span> <span>description</span><span>=</span><span>{</span><span>description</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n\n<span><span>Greeting</span><span>.</span><span>defaultProps</span> <span>=</span> <span>{</span>\n</span><span>  <span>subject</span><span>:</span> <span>'Earth'</span><span>,</span>\n</span><span><span>};</span>\n</span></code></pre></div><p>After all, my recommendation would be using JavaScript’s default parameter, because everyone outside of the React world understands it as well. Moreover, often you will not have React’s PropTypes in your project for making use of the PropTypes default in the first place.</p><h2>React's children prop</h2><p>The children prop in React can be used for composing React components into each other. Rather than using inheritance (due to the nature of React’s class components), React&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://reactjs.org/docs/composition-vs-inheritance.html\">embraces composition over inheritance</a>. That’s why you can just put any string, element(s) or React component(s) in between of the opening and closing component tags.</p><div><pre><code data-lang=\"javascript\"><span></span><span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>...</span>\n\n  <span>render</span><span>()</span> <span>{</span>\n    <span>const</span> <span>greeting</span> <span>=</span> <span>'Welcome to React'</span><span>;</span>\n\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n        <span>&lt;</span><span>Greeting</span> <span>greeting</span><span>=</span><span>{</span><span>greeting</span><span>}</span> <span>isShow</span><span>=</span><span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>isShow</span><span>}</span> <span>/&gt;</span>\n\n<span>        <span>&lt;</span><span>Button</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>toggleShow</span><span>}</span><span>&gt;</span><span>Toggle</span> <span>Show</span><span>&lt;</span><span>/Button&gt;</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span><span>const</span> <span>Button</span> <span>=</span> <span>({</span> <span>onClick</span><span>,</span> <span>children</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n</span>  <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>onClick</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n<span>    <span>{</span><span>children</span><span>}</span>\n</span>  <span>&lt;</span><span>/button&gt;</span>\n<span>);</span>\n</code></pre></div><p>In this case, only a string is put in between of the component tags. Then in the child component, you can make use of everything which is in between of the tags (string, element(s), component(s)), by using&nbsp;<span>React’s children prop</span>. For instance, you can just render the content of the children prop like it is done in this example. In the following sections, you will see how the children prop can be used as a function too.</p><h2>How to pass Components as Props?</h2><p>Before you have learned about React’s children prop to pass a component as prop to another component.</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>User</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>Profile</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span><span>&gt;</span>\n    <span>&lt;</span><span>AvatarRound</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/Profile&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>Profile</span> <span>=</span> <span>({</span> <span>user</span><span>,</span> <span>children</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>div</span> <span>className</span><span>=</span><span>\"profile\"</span><span>&gt;</span>\n    <span>&lt;</span><span>div</span><span>&gt;</span><span>{</span><span>children</span><span>}</span><span>&lt;</span><span>/div&gt;</span>\n    <span>&lt;</span><span>div</span><span>&gt;</span>\n      <span>&lt;</span><span>p</span><span>&gt;</span><span>{</span><span>user</span><span>.</span><span>name</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n    <span>&lt;</span><span>/div&gt;</span>\n  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>AvatarRound</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>img</span> <span>className</span><span>=</span><span>\"round\"</span> <span>alt</span><span>=</span><span>\"avatar\"</span> <span>src</span><span>=</span><span>{</span><span>user</span><span>.</span><span>avatarUrl</span><span>}</span> <span>/&gt;</span>\n<span>);</span>\n</code></pre></div><p>However, what if you want to&nbsp;<span>pass more than one component and place them at different positions</span>? Then again you don’t need to use the children prop and instead you just use regular props:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>User</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>Profile</span>\n    <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span>\n    <span>avatar</span><span>=</span><span>{</span><span>&lt;</span><span>AvatarRound</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span><span>}</span>\n    <span>biography</span><span>=</span><span>{</span><span>&lt;</span><span>BiographyFat</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span><span>}</span>\n  <span>/&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>Profile</span> <span>=</span> <span>({</span> <span>user</span><span>,</span> <span>avatar</span><span>,</span> <span>biography</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>div</span> <span>className</span><span>=</span><span>\"profile\"</span><span>&gt;</span>\n    <span>&lt;</span><span>div</span><span>&gt;</span><span>{</span><span>avatar</span><span>}</span><span>&lt;</span><span>/div&gt;</span>\n    <span>&lt;</span><span>div</span><span>&gt;</span>\n      <span>&lt;</span><span>p</span><span>&gt;</span><span>{</span><span>user</span><span>.</span><span>name</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n      <span>{</span><span>biography</span><span>}</span>\n    <span>&lt;</span><span>/div&gt;</span>\n  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>AvatarRound</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>img</span> <span>className</span><span>=</span><span>\"round\"</span> <span>alt</span><span>=</span><span>\"avatar\"</span> <span>src</span><span>=</span><span>{</span><span>user</span><span>.</span><span>avatarUrl</span><span>}</span> <span>/&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>BiographyFat</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>p</span> <span>className</span><span>=</span><span>\"fat\"</span><span>&gt;</span><span>{</span><span>user</span><span>.</span><span>biography</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n<span>);</span>\n</code></pre></div><p>Often this approach is used when having a surrounding layout component which takes multiple components as content with props. Now you can exchange the Avatar or Biography components dynamically with other components such as:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>AvatarSquare</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>img</span> <span>className</span><span>=</span><span>\"square\"</span> <span>alt</span><span>=</span><span>\"avatar\"</span> <span>src</span><span>=</span><span>{</span><span>user</span><span>.</span><span>avatarUrl</span><span>}</span> <span>/&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>BiographyItalic</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>p</span> <span>className</span><span>=</span><span>\"italic\"</span><span>&gt;</span><span>{</span><span>user</span><span>.</span><span>biography</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n<span>);</span>\n</code></pre></div><p>Many people refer to this as&nbsp;<span>slot pattern</span>&nbsp;in React. You can find a working minimal project on&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/the-road-to-learn-react/react-slot-pattern-example\">GitHub</a>. And again, that’s how composition in React shines. You don’t need to touch the Profile component. Moreover, you don’t need to pass props, in this case the user, multiple levels down the component tree, but rather pass it to the slotted components.</p><h2>Children as a Function</h2><p>The concept of&nbsp;<span>children as a function</span>&nbsp;or&nbsp;<span>child as a function</span>, also called&nbsp;<span>render prop</span>, is one of the advanced patterns in React (next to&nbsp;<a href=\"https://www.robinwieruch.de/gentle-introduction-higher-order-components/\">higher-order components</a>). The components which implement this pattern can be called&nbsp;<span>render prop components.</span></p><p>The following implementations can be difficult to follow when not having used render props in React before. Please read up this article&nbsp;<a href=\"https://www.robinwieruch.de/react-render-props-pattern/\">as introduction to render props in React</a>&nbsp;first.</p><p>First, let’s start with the render prop. Basically it is a function passed as prop (usually called render, but the name can be anything). The function receives arguments (in this case the amount), but also renders JSX (in this case the components for the currency conversion).</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>App</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>div</span><span>&gt;</span>\n    <span>&lt;</span><span>h1</span><span>&gt;</span><span>US</span> <span>Dollar</span> <span>to</span> <span>Euro</span><span>:&lt;</span><span>/h1&gt;</span>\n<span>    <span>&lt;</span><span>Amount</span> <span>render</span><span>=</span><span>{</span><span>amount</span> <span>=&gt;</span> <span>&lt;</span><span>Euro</span> <span>amount</span><span>=</span><span>{</span><span>amount</span><span>}</span> <span>/&gt;</span><span>}</span> <span>/&gt;</span>\n</span>\n    <span>&lt;</span><span>h1</span><span>&gt;</span><span>US</span> <span>Dollar</span> <span>to</span> <span>Pound</span><span>:&lt;</span><span>/h1&gt;</span>\n<span>    <span>&lt;</span><span>Amount</span> <span>render</span><span>=</span><span>{</span><span>amount</span> <span>=&gt;</span> <span>&lt;</span><span>Pound</span> <span>amount</span><span>=</span><span>{</span><span>amount</span><span>}</span> <span>/&gt;</span><span>}</span> <span>/&gt;</span>\n</span>  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n\n<span>class</span> <span>Amount</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n    <span>super</span><span>(</span><span>props</span><span>);</span>\n\n    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n      <span>amount</span><span>:</span> <span>0</span><span>,</span>\n    <span>};</span>\n  <span>}</span>\n\n  <span>onIncrement</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>amount</span><span>:</span> <span>state</span><span>.</span><span>amount</span> <span>+</span> <span>1</span> <span>}));</span>\n  <span>};</span>\n\n  <span>onDecrement</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>amount</span><span>:</span> <span>state</span><span>.</span><span>amount</span> <span>-</span> <span>1</span> <span>}));</span>\n  <span>};</span>\n\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n        <span>&lt;</span><span>button</span> <span>type</span><span>=</span><span>\"button\"</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>onIncrement</span><span>}</span><span>&gt;</span>\n          <span>+</span>\n        <span>&lt;</span><span>/button&gt;</span>\n        <span>&lt;</span><span>button</span> <span>type</span><span>=</span><span>\"button\"</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>onDecrement</span><span>}</span><span>&gt;</span>\n          <span>-</span>\n        <span>&lt;</span><span>/button&gt;</span>\n\n        <span>&lt;</span><span>p</span><span>&gt;</span><span>US</span> <span>Dollar</span><span>:</span> <span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>amount</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n\n<span>        <span>{</span><span>this</span><span>.</span><span>props</span><span>.</span><span>render</span><span>(</span><span>this</span><span>.</span><span>state</span><span>.</span><span>amount</span><span>)}</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Euro</span> <span>=</span> <span>({</span> <span>amount</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>p</span><span>&gt;</span><span>Euro</span><span>:</span> <span>{</span><span>amount</span> <span>*</span> <span>0.86</span><span>}</span><span>&lt;</span><span>/p&gt;;</span>\n\n<span>const</span> <span>Pound</span> <span>=</span> <span>({</span> <span>amount</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>p</span><span>&gt;</span><span>Pound</span><span>:</span> <span>{</span><span>amount</span> <span>*</span> <span>0.76</span><span>}</span><span>&lt;</span><span>/p&gt;;</span>\n</code></pre></div><p>Second, refactor the whole thing from having a render prop to having the children as a function:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>App</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>div</span><span>&gt;</span>\n    <span>&lt;</span><span>h1</span><span>&gt;</span><span>US</span> <span>Dollar</span> <span>to</span> <span>Euro</span><span>:&lt;</span><span>/h1&gt;</span>\n<span>    <span>&lt;</span><span>Amount</span><span>&gt;</span><span>{</span><span>amount</span> <span>=&gt;</span> <span>&lt;</span><span>Euro</span> <span>amount</span><span>=</span><span>{</span><span>amount</span><span>}</span> <span>/&gt;</span><span>}</span><span>&lt;</span><span>/Amount&gt;</span>\n</span>\n    <span>&lt;</span><span>h1</span><span>&gt;</span><span>US</span> <span>Dollar</span> <span>to</span> <span>Pound</span><span>:&lt;</span><span>/h1&gt;</span>\n<span>    <span>&lt;</span><span>Amount</span><span>&gt;</span><span>{</span><span>amount</span> <span>=&gt;</span> <span>&lt;</span><span>Pound</span> <span>amount</span><span>=</span><span>{</span><span>amount</span><span>}</span> <span>/&gt;</span><span>}</span><span>&lt;</span><span>/Amount&gt;</span>\n</span>  <span>&lt;</span><span>/div&gt;</span>\n<span>);</span>\n\n<span>class</span> <span>Amount</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n    <span>super</span><span>(</span><span>props</span><span>);</span>\n\n    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n      <span>amount</span><span>:</span> <span>0</span><span>,</span>\n    <span>};</span>\n  <span>}</span>\n\n  <span>onIncrement</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>amount</span><span>:</span> <span>state</span><span>.</span><span>amount</span> <span>+</span> <span>1</span> <span>}));</span>\n  <span>};</span>\n\n  <span>onDecrement</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>(</span><span>state</span> <span>=&gt;</span> <span>({</span> <span>amount</span><span>:</span> <span>state</span><span>.</span><span>amount</span> <span>-</span> <span>1</span> <span>}));</span>\n  <span>};</span>\n\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n        <span>&lt;</span><span>button</span> <span>type</span><span>=</span><span>\"button\"</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>onIncrement</span><span>}</span><span>&gt;</span>\n          <span>+</span>\n        <span>&lt;</span><span>/button&gt;</span>\n        <span>&lt;</span><span>button</span> <span>type</span><span>=</span><span>\"button\"</span> <span>onClick</span><span>=</span><span>{</span><span>this</span><span>.</span><span>onDecrement</span><span>}</span><span>&gt;</span>\n          <span>-</span>\n        <span>&lt;</span><span>/button&gt;</span>\n\n        <span>&lt;</span><span>p</span><span>&gt;</span><span>US</span> <span>Dollar</span><span>:</span> <span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>amount</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n\n<span>        <span>{</span><span>this</span><span>.</span><span>props</span><span>.</span><span>children</span><span>(</span><span>this</span><span>.</span><span>state</span><span>.</span><span>amount</span><span>)}</span>\n</span>      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n\n<span>const</span> <span>Euro</span> <span>=</span> <span>({</span> <span>amount</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>p</span><span>&gt;</span><span>Euro</span><span>:</span> <span>{</span><span>amount</span> <span>*</span> <span>0.86</span><span>}</span><span>&lt;</span><span>/p&gt;;</span>\n\n<span>const</span> <span>Pound</span> <span>=</span> <span>({</span> <span>amount</span> <span>})</span> <span>=&gt;</span> <span>&lt;</span><span>p</span><span>&gt;</span><span>Pound</span><span>:</span> <span>{</span><span>amount</span> <span>*</span> <span>0.76</span><span>}</span><span>&lt;</span><span>/p&gt;;</span>\n</code></pre></div><p>That’s essentially everything to distinguish between a render prop or a children as a function in a render prop component. The former is passed as a normal prop and the latter is passed as a children prop. You have seen before that functions can be passed as callback handlers (e.g. button click) to React components, but this time the function is passed to actually render something whereas the responsibility for&nbsp;<em>what to render</em>&nbsp;was partially moved outside of the render prop component but the props are provided by the render prop component itself.</p><p>You can find a working minimal project on&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/the-road-to-learn-react/react-children-as-a-function-example\">GitHub</a>. And again, if you had any problems following the last examples, check the referenced article, because this guide doesn’t go into detail for render prop components in React.</p><h2>React's Context API</h2><p>At some point, you are passing a lot of props down your component tree. Depending on the depth of the component tree, it can happen that many props are passed from a top level component to all the leaf components. Every component in between has to pass the props even though it may not be interested in the props. The problem is called&nbsp;<span>prop drilling</span>&nbsp;in React. There are a couple of solutions to overcome this “problem”. You have already learned about one solution: passing components as props by using the slot pattern. Then you don’t have to pass a prop through all components, but rather distribute the props at a top level to all slotted components.</p><p>Another solution is&nbsp;<span>React’s Context API</span>&nbsp;which can be used to pass props implicitly down to component tree. Every component which is interested in the props passed by React’s Context API can consume them. All the other components don’t need to consume them and thus they will never know about the props. Moreover, the components between the top level and the leaf components don’t need to know about the props as well. Checkout&nbsp;<a href=\"https://www.robinwieruch.de/react-context-api/\">React’s Context API</a>&nbsp;if you are interested in using it.</p><h2>How to set props to state?</h2><p>Previously you have got to know more about props and state in React. Sometimes there is one question which comes up for React beginners, but also for experienced React developers when implementing React components:&nbsp;<span>How to set props to state?</span>&nbsp;In case of the initial state, it is totally fine to derive it from the props. You can do it in the constructor of a class component:</p><div><pre><code data-lang=\"javascript\"><span></span><span>class</span> <span>Profile</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n    <span>super</span><span>(</span><span>props</span><span>);</span>\n\n    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n<span>      <span>value</span><span>:</span> <span>props</span><span>.</span><span>initialValue</span><span>,</span>\n</span>    <span>};</span>\n  <span>}</span>\n\n  <span>onChange</span> <span>=</span> <span>event</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>({</span> <span>value</span><span>:</span> <span>event</span><span>.</span><span>target</span><span>.</span><span>value</span> <span>});</span>\n  <span>}</span>\n\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>label</span><span>&gt;</span>\n        <span>Name</span><span>:</span>\n\n        <span>&lt;</span><span>input</span>\n          <span>value</span><span>=</span><span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>value</span><span>}</span>\n          <span>onChange</span><span>=</span><span>{</span><span>this</span><span>.</span><span>onChange</span><span>}</span>\n          <span>type</span><span>=</span><span>\"text\"</span>\n        <span>/&gt;</span>\n      <span>&lt;</span><span>/label&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n</code></pre></div><p>That’s a common pattern in React. But what about incoming props which are changing and should be set to the state then? You can do it by using the&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://reactjs.org/docs/react-component.html#static-getderivedstatefromprops\">getDerivedStateFromProps(props, state) lifecycle method</a>. It is invoked before the render lifecycle method for the mounting and update lifecycles of the component. By using this lifecycle method, it is possible to set the state of the component based on changing props.</p><p>However, the&nbsp;<code>getDerivedStateFromProps()</code>&nbsp;lifecycle method exists only for rare use cases. Usually one should think twice about the implementation logic of the component(s) before using this lifecycle method. This article doesn’t go into detail about this topic, because there already exists an excellent article about it:&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html\">You Probably Don’t Need Derived State</a>. You should definitely check it out in case you are running into an edge case where derived state is applicable. Usually there is a way around this lifecycle method and the article explains these scenarios in great detail.</p><h2>React Props Pitfalls</h2><p>There are a couple of pitfalls when passing props in React. Here I want to collect a list of these things in case someone stumbles upon them:</p><h3>React props are not being passed in Components</h3><p>Sometimes you run into the problem that your React props are not being passed. Personally I ran into this issue several times when I forgot to use the curly braces for the props destructuring in my functional stateless components:</p><div><pre><code data-lang=\"javascript\"><span></span><span><span>const</span> <span>Button</span> <span>=</span> <span>(</span><span>onClick</span><span>,</span> <span>children</span><span>)</span> <span>=&gt;</span> <span>(</span>\n</span>  <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>onClick</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n    <span>{</span><span>children</span><span>}</span>\n  <span>&lt;</span><span>/button&gt;</span>\n<span>);</span>\n</code></pre></div><p>In this case, the&nbsp;<code>onClick</code>&nbsp;argument is the actual props. So you have to destructure it, so the first argument of the function, for accessing the&nbsp;<code>onClick</code>&nbsp;and&nbsp;<code>children</code>&nbsp;props.</p><div><pre><code data-lang=\"javascript\"><span></span><span><span>const</span> <span>Button</span> <span>=</span> <span>({</span> <span>onClick</span><span>,</span> <span>children</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n</span>  <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>onClick</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n    <span>{</span><span>children</span><span>}</span>\n  <span>&lt;</span><span>/button&gt;</span>\n<span>);</span>\n</code></pre></div><p>Most often that’s already the solution to the problem. If not, you should track down the prop from parent to child component by adding&nbsp;<code>console.log(props)</code>&nbsp;calls to your components. If you have a functional stateless component, you don’t necessarily need to add an arrow function body to your component for putting the&nbsp;<code>console.log()</code>&nbsp;in between. Instead you can use this neat trick:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>Button</span> <span>=</span> <span>({</span> <span>onClick</span><span>,</span> <span>children</span> <span>})</span> <span>=&gt;</span>\n<span>  <span>console</span><span>.</span><span>log</span><span>(</span><span>onClick</span><span>,</span> <span>children</span><span>)</span> <span>||</span> <span>(</span>\n</span>  <span>&lt;</span><span>button</span> <span>onClick</span><span>=</span><span>{</span><span>onClick</span><span>}</span> <span>type</span><span>=</span><span>\"button\"</span><span>&gt;</span>\n    <span>{</span><span>children</span><span>}</span>\n  <span>&lt;</span><span>/button&gt;</span>\n<span>);</span>\n</code></pre></div><p>The&nbsp;<code>console.log()</code>&nbsp;always evaluates to true and thus the component is still being rendered. That’s how you can easily get a logging for your props in between your input and output of your functional stateless component.</p><h3>React props key is undefined</h3><p>When rendering lists in React, you have to use a key prop identifying the element in the list. React uses the key for performance reasons, but also for keeping track of the element in case your list changes (e.g. due ordering, removing, adding of items). That’s why you should use a unique identifier which is associated to the rendered item.</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>List</span> <span>=</span> <span>({</span> <span>users</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>ul</span><span>&gt;</span>\n    <span>{</span><span>users</span><span>.</span><span>map</span><span>(</span><span>user</span> <span>=&gt;</span> <span>&lt;</span><span>Item</span> <span>key</span><span>=</span><span>{</span><span>user</span><span>.</span><span>id</span><span>}</span><span>&gt;</span><span>{</span><span>user</span><span>.</span><span>name</span><span>}</span><span>&lt;</span><span>/Item&gt;)}</span>\n  <span>&lt;</span><span>/ul&gt;</span>\n<span>);</span>\n\n<span>const</span> <span>Item</span> <span>=</span> <span>({</span> <span>children</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>p</span><span>&gt;</span><span>{</span><span>children</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n<span>);</span>\n</code></pre></div><p>So far, everything is alright with this code. However, sometimes you want to get the key prop in the child component.</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>List</span> <span>=</span> <span>({</span> <span>users</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>ul</span><span>&gt;</span>\n    <span>{</span><span>users</span><span>.</span><span>map</span><span>(</span><span>user</span> <span>=&gt;</span> <span>&lt;</span><span>Item</span> <span>key</span><span>=</span><span>{</span><span>user</span><span>.</span><span>id</span><span>}</span><span>&gt;</span><span>{</span><span>user</span><span>.</span><span>name</span><span>}</span><span>&lt;</span><span>/Item&gt;)}</span>\n  <span>&lt;</span><span>/ul&gt;</span>\n<span>);</span>\n\n<span><span>const</span> <span>Item</span> <span>=</span> <span>({</span> <span>key</span><span>,</span> <span>children</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n</span><span>  <span>&lt;</span><span>p</span><span>&gt;</span><span>{</span><span>key</span><span>}</span> <span>{</span><span>children</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n</span><span>);</span>\n</code></pre></div><p>That’s not working and you will also see a warning in your developer console log:&nbsp;<em>”… key is not a prop. Trying to access it will result in undefined being returned.</em>&nbsp;In this case, you have to pass a second prop when you want to get the key from the props.</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>List</span> <span>=</span> <span>({</span> <span>users</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n  <span>&lt;</span><span>ul</span><span>&gt;</span>\n    <span>{</span><span>users</span><span>.</span><span>map</span><span>(</span><span>user</span> <span>=&gt;</span> <span>(</span>\n<span>      <span>&lt;</span><span>Item</span> <span>key</span><span>=</span><span>{</span><span>user</span><span>.</span><span>id</span><span>}</span> <span>id</span><span>=</span><span>{</span><span>user</span><span>.</span><span>id</span><span>}</span><span>&gt;</span>\n</span>        <span>{</span><span>user</span><span>.</span><span>name</span><span>}</span>\n      <span>&lt;</span><span>/Item&gt;</span>\n    <span>))}</span>\n  <span>&lt;</span><span>/ul&gt;</span>\n<span>);</span>\n\n<span><span>const</span> <span>Item</span> <span>=</span> <span>({</span> <span>id</span><span>,</span> <span>children</span> <span>})</span> <span>=&gt;</span> <span>(</span>\n</span><span>  <span>&lt;</span><span>p</span><span>&gt;</span><span>{</span><span>id</span><span>}</span> <span>{</span><span>children</span><span>}</span><span>&lt;</span><span>/p&gt;</span>\n</span><span>);</span>\n</code></pre></div><p>In the end, that’s the workaround to pass props (e.g. key) which are internally used by React and not passed to the child components.</p><h3>Pass props to Styled Components</h3><p>Did you hear about&nbsp;<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/styled-components/styled-components\">styled components</a>? They can be used for styling your components in React. Rather than thinking about cascading style sheets as for HTML styles, you only style your components. So the style becomes more co-located to your components. In fact, in the case of styled components, the style becomes a React component:</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n<span>import</span> <span>styled</span> <span>from</span> <span>'styled-components'</span><span>;</span>\n\n<span>const</span> <span>Input</span> <span>=</span> <span>styled</span><span>.</span><span>input</span><span>`</span>\n<span>  padding: 0.5em;</span>\n<span>  margin: 0.5em;</span>\n<span>  color: palevioletred;</span>\n<span>  background: papayawhip;</span>\n<span>  border: none;</span>\n<span>  border-radius: 3px;</span>\n<span>`</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>constructor</span><span>(</span><span>props</span><span>)</span> <span>{</span>\n    <span>super</span><span>(</span><span>props</span><span>);</span>\n\n    <span>this</span><span>.</span><span>state</span> <span>=</span> <span>{</span>\n      <span>value</span><span>:</span> <span>''</span><span>,</span>\n    <span>};</span>\n  <span>}</span>\n\n  <span>onChange</span> <span>=</span> <span>event</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>({</span> <span>value</span><span>:</span> <span>event</span><span>.</span><span>target</span><span>.</span><span>value</span> <span>});</span>\n  <span>}</span>\n\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n        <span>&lt;</span><span>Input</span>\n          <span>value</span><span>=</span><span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>value</span><span>}</span>\n          <span>onChange</span><span>=</span><span>{</span><span>this</span><span>.</span><span>onChange</span><span>}</span>\n        <span>/&gt;</span>\n      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n</code></pre></div><p>The input element which is used to implement the Input styled component gets the&nbsp;<code>value</code>&nbsp;and&nbsp;<code>onChange</code>as props automatically. But what if you want to get props in a styled component to do something with them? Then you can add a string interpolation in the template literal and get the props in the inlined function’s signature:</p><div><pre><code data-lang=\"javascript\"><span></span><span>import</span> <span>React</span><span>,</span> <span>{</span> <span>Component</span> <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n<span>import</span> <span>styled</span> <span>from</span> <span>'styled-components'</span><span>;</span>\n\n<span>const</span> <span>Input</span> <span>=</span> <span>styled</span><span>.</span><span>input</span><span>`</span>\n<span>  padding: 0.5em;</span>\n<span>  margin: 0.5em;</span>\n<span>  color: palevioletred;</span>\n<span>  background: papayawhip;</span>\n<span>  border: none;</span>\n<span><span>  border-radius: </span><span>${</span><span>props</span> <span>=&gt;</span> <span>props</span><span>.</span><span>hasRadius</span> <span>?</span> <span>'3px'</span> <span>:</span> <span>'0px'</span><span>}</span><span>;</span>\n</span><span>`</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>...</span>\n\n  <span>render</span><span>()</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span><span>div</span><span>&gt;</span>\n        <span>&lt;</span><span>Input</span>\n          <span>value</span><span>=</span><span>{</span><span>this</span><span>.</span><span>state</span><span>.</span><span>value</span><span>}</span>\n          <span>onChange</span><span>=</span><span>{</span><span>this</span><span>.</span><span>onChange</span><span>}</span>\n<span>          <span>hasRadius</span><span>=</span><span>{</span><span>true</span><span>}</span>\n</span>        <span>/&gt;</span>\n      <span>&lt;</span><span>/div&gt;</span>\n    <span>);</span>\n  <span>}</span>\n<span>}</span>\n</code></pre></div><p>Basically that’s how you pass props to styled components and how you get props in a styled component. If you haven’t used styled components yet, you should give them a shot for styling your React components without thinking about CSS files.</p><h3>Pass props with React Router</h3><p>React Router is another&nbsp;<a href=\"https://www.robinwieruch.de/essential-react-libraries-framework/\">essential React library</a>&nbsp;which is often used to complement React applications. Mapping URL routes to React components usually looks similar to this:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>App</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span>\n  <span>&lt;</span><span>Router</span><span>&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>exact</span> <span>path</span><span>=</span><span>'/'</span> <span>component</span><span>=</span><span>{</span><span>Home</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>path</span><span>=</span><span>'/articles'</span> <span>component</span><span>=</span><span>{</span><span>Article</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>path</span><span>=</span><span>'/about'</span> <span>component</span><span>=</span><span>{</span><span>About</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/Router&gt;</span>\n</code></pre></div><p>But how would you pass props to the child component in React Router? You can use the render prop instead of the component prop for passing props to the child component.</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>App</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span>\n  <span>&lt;</span><span>Router</span><span>&gt;</span>\n    <span>&lt;</span><span>Route</span>\n      <span>exact</span> <span>path</span><span>=</span><span>'/'</span>\n<span>      <span>render</span><span>=</span><span>{()</span> <span>=&gt;</span> <span>&lt;</span><span>Home</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span><span>}</span>\n</span>    <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span>\n      <span>path</span><span>=</span><span>'/articles'</span>\n<span>      <span>render</span><span>=</span><span>{()</span> <span>=&gt;</span> <span>&lt;</span><span>Article</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span><span>}</span>\n</span>    <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span>\n      <span>path</span><span>=</span><span>'/about'</span>\n<span>      <span>render</span><span>=</span><span>{()</span> <span>=&gt;</span> <span>&lt;</span><span>About</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span><span>}</span>\n</span>    <span>/&gt;</span>\n  <span>&lt;</span><span>/Router&gt;</span>\n</code></pre></div><p>Whereas the component prop would re-render the component every time when using an inline function, the render prop doesn’t perform the remounting. So you can be sure that the components are kept mounted and yet you can pass props to them. In addition, you receive the React Router props in the render prop function, in case you want to do something with them, too:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>App</span> <span>=</span> <span>({</span> <span>user</span> <span>})</span> <span>=&gt;</span>\n  <span>&lt;</span><span>Router</span><span>&gt;</span>\n    <span>&lt;</span><span>Route</span>\n      <span>exact</span> <span>path</span><span>=</span><span>'/'</span>\n<span>      <span>render</span><span>=</span><span>{</span><span>props</span> <span>=&gt;</span> <span>&lt;</span><span>Home</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span><span>}</span>\n</span>    <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span>\n      <span>path</span><span>=</span><span>'/articles'</span>\n<span>      <span>render</span><span>=</span><span>{</span><span>props</span> <span>=&gt;</span> <span>&lt;</span><span>Article</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span><span>}</span>\n</span>    <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span>\n      <span>path</span><span>=</span><span>'/about'</span>\n<span>      <span>render</span><span>=</span><span>{</span><span>props</span> <span>=&gt;</span> <span>&lt;</span><span>About</span> <span>user</span><span>=</span><span>{</span><span>user</span><span>}</span> <span>/&gt;</span><span>}</span>\n</span>    <span>/&gt;</span>\n  <span>&lt;</span><span>/Router&gt;</span>\n</code></pre></div><p>The route props include match, location, and history which are used to get the current route state from React Router within your component. So regardless of the component prop or render prop, for both you would receive the match, location, and history props in the Home, Article and About components:</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>App</span> <span>=</span> <span>()</span> <span>=&gt;</span>\n  <span>&lt;</span><span>Router</span><span>&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>exact</span> <span>path</span><span>=</span><span>'/'</span> <span>component</span><span>=</span><span>{</span><span>Home</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>path</span><span>=</span><span>'/articles'</span> <span>component</span><span>=</span><span>{</span><span>Article</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>path</span><span>=</span><span>'/about'</span> <span>component</span><span>=</span><span>{</span><span>About</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/Router&gt;</span>\n\n<span><span>const</span> <span>Home</span> <span>=</span> <span>(</span><span>props</span><span>)</span> <span>=&gt;</span>\n</span><span>  <span>console</span><span>.</span><span>log</span><span>(</span><span>props</span><span>.</span><span>history</span><span>)</span> <span>||</span>\n</span><span>  <span>console</span><span>.</span><span>log</span><span>(</span><span>props</span><span>.</span><span>match</span><span>)</span> <span>||</span>\n</span><span>  <span>console</span><span>.</span><span>log</span><span>(</span><span>props</span><span>.</span><span>location</span><span>)</span> <span>||</span>\n</span>  <span>&lt;</span><span>h1</span><span>&gt;</span><span>My</span> <span>Home</span> <span>Page</span><span>&lt;</span><span>/h1&gt;</span>\n\n<span>...</span>\n</code></pre></div><p>Often when working with React Router you are confronted with one of the following errors:</p><ul><li>props.location undefined</li><li>props.history undefined</li><li>props.match undefined</li></ul><p>As mentioned, you only have access to these props when using the component in the Route component from React Router. Every other component doesn’t have the React Router props, unless you pass them further down the component tree to these components. Another way of making the React Router props available in your component is using the&nbsp;<code>withRouter()</code>&nbsp;higher-order component from React Router.</p><div><pre><code data-lang=\"javascript\"><span></span><span>const</span> <span>App</span> <span>=</span> <span>()</span> <span>=&gt;</span>\n  <span>&lt;</span><span>Router</span><span>&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>exact</span> <span>path</span><span>=</span><span>'/'</span> <span>component</span><span>=</span><span>{</span><span>Home</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>path</span><span>=</span><span>'/articles'</span> <span>component</span><span>=</span><span>{</span><span>Article</span><span>}</span> <span>/&gt;</span>\n    <span>&lt;</span><span>Route</span> <span>path</span><span>=</span><span>'/about'</span> <span>component</span><span>=</span><span>{</span><span>About</span><span>}</span> <span>/&gt;</span>\n  <span>&lt;</span><span>/Router&gt;</span>\n\n<span>const</span> <span>Home</span> <span>=</span> <span>()</span> <span>=&gt;</span>\n<span>  <span>&lt;</span><span>TitleWithRouter</span> <span>/&gt;</span>\n</span>\n<span>const</span> <span>Title</span> <span>=</span> <span>(</span><span>props</span><span>)</span> <span>=&gt;</span>\n  <span>console</span><span>.</span><span>log</span><span>(</span><span>props</span><span>)</span> <span>||</span> <span>&lt;</span><span>h1</span><span>&gt;</span><span>My</span> <span>Home</span> <span>Page</span><span>&lt;</span><span>/h1&gt;;</span>\n\n<span><span>// without withRouter the props in the Title component would be an empty object</span>\n</span><span><span>const</span> <span>TitleWithRouter</span> <span>=</span> <span>withRouter</span><span>(</span><span>Title</span><span>);</span>\n</span></code></pre></div><p>Basically these are the most common pitfalls when using React Router. You should definitely try React Router once you have learned the fundamentals of React.</p><hr><p>I guess the article almost covered everything about (passing) props in React. In the end, props aren’t difficult. They are read-only and enable you to pass data down the component tree. Everything else which makes React interactive is mostly state. Or, as you have read, changing props which are triggering a re-render for the components as well. So I hope this article gave you a good overview about all the different usages of props in React.</p>","filePath":"pages/React/.md","_id":"CureHzlw5JWBQ7ZG"}
{"date":{"$$date":1542039558552},"title":"The Evolution of Async JavaScript: From Callbacks, to Promises, to Async/Await","sourceUrl":"https://tylermcginnis.com/async-javascript-from-callbacks-to-promises-to-async-await/","path":"JavaScript/JavaScript/JavaScript/","category":"JavaScript","tags":["JavaScript"," Async/Await"],"author":"Tyler McGinnis","excerpt":"","dateCreated":1541516432499,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Tue Nov 06 2018 20:31:57 GMT+0530 (India Standard Time)'\ntitle: 'The Evolution of Async JavaScript: From Callbacks, to Promises, to Async/Await'\ntags: ['JavaScript','Async/Await']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://tylermcginnis.com/async-javascript-from-callbacks-to-promises-to-async-await/'\ntype: 'Post'\n---\n    ","htmlCode":"<div data-reactid=\"219\">This is part of our&nbsp;<a href=\"https://tylermcginnis.com/courses/advanced-javascript/\" data-reactid=\"221\">Advanced JavaScript</a>&nbsp;course.&nbsp;Check it out if you like this post.</div><div data-reactid=\"224\"><div data-reactid=\"225\"><div data-reactid=\"226\"></div><img alt=\"The Evolution of Async JavaScript: From Callbacks, to Promises, to Async/Await image\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAC4jAAAuIwF4pT92AAACOUlEQVQoz4VTzWsTURDfv8CbV/Hg2Yuo54LgRaQHL9pLDx48iFSEQlEPIkXBSAtVTImEpqLSGttDMNWoJzWHGmljVdqYpE2y+WyTbvYzu293f857SbQi6sAw897b+c1vPlZiugajVEJnextmuUwq07kIQy7B3t2FVa3A9zxw8X1fWEVtI3JvEhcP78PL0dPAygeYnQ6pA8k1TQFiVasE2oBZKUMvbEHfzJNfEcmYYQggrwe8/DGF0MQ4xgaOIDhwCAsnjiH+JAzX1iAxTYWWy0Lf2kSn0YBVr0HP53qAZfFm1arYK0W5gkg4hKtXRnBh8BRCB/dj5ugBFOaCkBxVFeVxlnarKYCUz2lh1cyGAOVMHaUFRmDPZicRnziPVruNOlU0Px/FraGzGB8+g9HBkwRID0axAJN6xVX0rtkUPjN0KsOG59iC2eraNwyNjOEcBV8KPkZ6RxP3DUXBo9lpxGILVDL1x6rVBAvOkrPigLx0z+4COb1SHTqvppYxfP0ujl8O4FosBeb5v7VD9FD9nhGDMGVZMNSyWagb63AZA7MtLCXTSLxYQquSBx8LI8Yra19x+06AJttN6vVU4qvguy48CvZdJlaE+x7d8dy2ZSHx5i1mHkawmHiH9KcvFOn+osTjuTVM+DQPCf+Q/t7V6nW8isfxfDqEqQdhZLK5n2skvvA9rN+/iVzgRo/hf5SLS6ZJwHPRKN4nk937PjuyuadTqL5e/DvDPtBeUC479EcVC4U/33gvmYsfm3Uc52YTHv4AAAAASUVORK5CYII=\" data-reactid=\"227\"><img alt=\"The Evolution of Async JavaScript: From Callbacks, to Promises, to Async/Await image\" srcset=\"/static/evolutionOfAsync-b8ee8c6bde0531e6dea3d798d8c3cdf2-0a0cc.png 200w,\n/static/evolutionOfAsync-b8ee8c6bde0531e6dea3d798d8c3cdf2-ae85a.png 400w,\n/static/evolutionOfAsync-b8ee8c6bde0531e6dea3d798d8c3cdf2-b64db.png 800w,\n/static/evolutionOfAsync-b8ee8c6bde0531e6dea3d798d8c3cdf2-73708.png 1200w,\n/static/evolutionOfAsync-b8ee8c6bde0531e6dea3d798d8c3cdf2-5f837.png 1280w\" src=\"https://tylermcginnis.com/static/evolutionOfAsync-b8ee8c6bde0531e6dea3d798d8c3cdf2-b64db.png\" sizes=\"(max-width: 800px) 100vw, 800px\"></div></div><div data-reactid=\"229\"><h3>Video</h3><div><div><iframe src=\"https://www.youtube.com/embed/gB-OmN1egV8\" frameborder=\"0\" allowfullscreen=\"\"></iframe></div></div><h3>Post</h3><p>One of my favorite sites is&nbsp;<a href=\"http://www.berkshirehathaway.com/\">BerkshireHathaway.com</a>&nbsp;- it’s simple, effective, and has been doing its job well since it launched in 1997. Even more remarkable, over the last 20 years, there’s a good chance this site has never had a bug. Why? Because it’s all static. It’s been pretty much the same since it launched over 20 years ago. Turns out sites are pretty simple to build if you have all of your data up front. Unfortunately, most sites now days don’t. To compensate for this, we’ve invented “patterns” for handling fetching external data for our apps. Like most things, these patterns each have tradeoffs that have changed over time. In this post we’ll break down the pros and cons of three of the most common patterns,&nbsp;<code>Callbacks</code>,&nbsp;<code>Promises</code>, and&nbsp;<code>Async/Await</code>&nbsp;and talk about their significance and progression from a historical context.</p><p>Let’s start with the OG of these data fetching patterns, Callbacks.</p><h3>Callbacks</h3><blockquote><p>I’m going to assume you know exactly 0 about callbacks. If I’m assuming wrong, just scroll down a bit.</p></blockquote><p>When I was first learning to program, it helped me to think about functions as machines. These machines can do anything you want them to. They can even accept input and return a value. Each machine has a button on it that you can press when you want the machine to run, ().</p><div><pre><code><span>function</span> <span>add</span> <span>(</span>x<span>,</span> y<span>)</span> <span>{</span>\n  <span>return</span> x <span>+</span> y\n<span>}</span>\n\n<span>add</span><span>(</span><span>2</span><span>,</span><span>3</span><span>)</span> <span>// 5 - Press the button, run the machine.</span></code></pre></div><p>Whether&nbsp;<span>I</span>&nbsp;press the button,&nbsp;<span>you</span>&nbsp;press the button, or&nbsp;<span>someone else</span>&nbsp;presses the button doesn’t matter. Whenever the button is pressed, like it or not, the machine is going to run.</p><div><pre><code><span>function</span> <span>add</span> <span>(</span>x<span>,</span> y<span>)</span> <span>{</span>\n  <span>return</span> x <span>+</span> y\n<span>}</span>\n\n<span>const</span> me <span>=</span> add\n<span>const</span> you <span>=</span> add\n<span>const</span> someoneElse <span>=</span> add\n\n<span>me</span><span>(</span><span>2</span><span>,</span><span>3</span><span>)</span> <span>// 5 - Press the button, run the machine.</span>\n<span>you</span><span>(</span><span>2</span><span>,</span><span>3</span><span>)</span> <span>// 5 - Press the button, run the machine.</span>\n<span>someoneElse</span><span>(</span><span>2</span><span>,</span><span>3</span><span>)</span> <span>// 5 - Press the button, run the machine.</span></code></pre></div><p>In the code above we assign the&nbsp;<code>add</code>&nbsp;function to three different variables,&nbsp;<code>me</code>,&nbsp;<code>you</code>, and&nbsp;<code>someoneElse</code>. It’s important to note that the original&nbsp;<code>add</code>&nbsp;and each of the variables we created are pointing to the same spot in memory. They’re literally the exact same thing under different names. So when we invoke&nbsp;<code>me</code>,&nbsp;<code>you</code>, or&nbsp;<code>someoneElse</code>, it’s as if we’re invoking&nbsp;<code>add</code>.</p><p>Now what if we take our&nbsp;<code>add</code>&nbsp;machine and pass it to another machine? Remember, it doesn’t matter who presses the () button, if it’s pressed, it’s going to run.</p><div><pre><code><span>function</span> <span>add</span> <span>(</span>x<span>,</span> y<span>)</span> <span>{</span>\n  <span>return</span> x <span>+</span> y\n<span>}</span>\n\n<span>function</span> <span>addFive</span> <span>(</span>x<span>,</span> addReference<span>)</span> <span>{</span>\n  <span>return</span> <span>addReference</span><span>(</span>x<span>,</span> <span>5</span><span>)</span> <span>// 15 - Press the button, run the machine.</span>\n<span>}</span>\n\n<span>addFive</span><span>(</span><span>10</span><span>,</span> add<span>)</span> <span>// 15</span></code></pre></div><p>Your brain might have got a little weird on this one, nothing new is going on here though. Instead of “pressing the button” on&nbsp;<code>add</code>, we pass&nbsp;<code>add</code>&nbsp;as an argument to&nbsp;<code>addFive</code>, rename it&nbsp;<code>addReference</code>, and then we “press the button” or invoke it.</p><p>This highlights some important concepts of the JavaScript language. First, just as you can pass a string or a number as an argument to a function, so too can you pass a reference to a function as an argument. When you do this the function you’re passing as an argument is called a&nbsp;<span>callback</span>&nbsp;function and the function you’re passing the callback function to is called a&nbsp;<span>higher order function</span>.</p><p>Because vocabulary is important, here’s the same code with the variables re-named to match the concepts they’re demonstrating.</p><div><pre><code><span>function</span> <span>add</span> <span>(</span>x<span>,</span>y<span>)</span> <span>{</span>\n  <span>return</span> x <span>+</span> y\n<span>}</span>\n\n<span>function</span> <span>higherOrderFunction</span> <span>(</span>x<span>,</span> callback<span>)</span> <span>{</span>\n  <span>return</span> <span>callback</span><span>(</span>x<span>,</span> <span>5</span><span>)</span>\n<span>}</span>\n\n<span>higherOrderFunction</span><span>(</span><span>10</span><span>,</span> add<span>)</span></code></pre></div><p>This pattern should look familiar, it’s everywhere. If you’ve ever used any of the JavaScript&nbsp;<a href=\"https://tylermcginnis.com/javascript-array-methods-you-should-know/\">Array methods</a>, you’ve used a callback. If you’ve ever used lodash, you’ve used a callback. If you’ve ever used jQuery, you’ve used a callback.</p><div><pre><code><span>[</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>]</span><span>.</span><span>map</span><span>(</span><span>(</span>i<span>)</span> <span>=&gt;</span> i <span>+</span> <span>5</span><span>)</span>\n\n_<span>.</span><span>filter</span><span>(</span><span>[</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>,</span><span>4</span><span>]</span><span>,</span> <span>(</span>n<span>)</span> <span>=&gt;</span> n <span>%</span> <span>2</span> <span>===</span> <span>0</span> <span>)</span><span>;</span>\n\n<span>$</span><span>(</span><span>'#btn'</span><span>)</span><span>.</span><span>on</span><span>(</span><span>'click'</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span>\n  console<span>.</span><span>log</span><span>(</span><span>'Callbacks are everywhere'</span><span>)</span>\n<span>)</span></code></pre></div><p>In general, there are two popular use cases for callbacks. The first, and what we see in the&nbsp;<code>.map</code>&nbsp;and&nbsp;<code>_.filter</code>&nbsp;examples, is a nice abstraction over turning one value into another. We say “Hey, here’s an array and a function. Go ahead and get me a new value based on the function I gave you”. The second, and what we see in the jQuery example, is delaying execution of a function until a particular time. “Hey, here’s this function. Go ahead and invoke it whenever the element with an id of&nbsp;<code>btn</code>&nbsp;is clicked.” It’s this second use case that we’re going to focus on, “delaying execution of a function until a particular time”.</p><p>Right now we’ve only looked at examples that are synchronous. As we talked about at the beginning of this post, most of the apps we build don’t have all the data they need up front. Instead, they need to fetch external data as the user interacts with the app. We’ve just seen how callbacks can be a great use case for this because, again, they allow you to “delay execution of a function until a particular time”. It doesn’t take much imagination to see how we can adapt that sentence to work with data fetching. Instead of delaying execution of a function until&nbsp;<em>a particular time</em>, we can delay execution of a function&nbsp;<em>until we have the data we need</em>. Here’s probably the most popular example of this, jQuery’s&nbsp;<code>getJSON</code>&nbsp;method.</p><div><pre><code><span>// updateUI and showError are irrelevant.</span>\n<span>// Pretend they do what they sound like.</span>\n\n<span>const</span> id <span>=</span> <span>'tylermcginnis'</span>\n\n$<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n  url<span>:</span> <span><span>`https://api.github.com/users/</span><span><span>${</span>id<span>}</span></span><span>`</span></span><span>,</span>\n  success<span>:</span> updateUI<span>,</span>\n  error<span>:</span> showError<span>,</span>\n<span>}</span><span>)</span></code></pre></div><p>We can’t update the UI of our app until we have the user’s data. So what do we do? We say, “Hey, here’s an object. If the request succeeds, go ahead and call&nbsp;<code>success</code>&nbsp;passing it the user’s data. If it doesn’t, go ahead and call&nbsp;<code>error</code>&nbsp;passing it the error object. You don’t need to worry about what each method does, just be sure to call them when you’re supposed to”. This is a perfect demonstration of using a callback for async requests.</p><hr><p>At this point we’ve learned about what callbacks are and how they can be beneficial both in synchronous and asynchronous code. What we haven’t talked yet is the dark side of callbacks. Take a look at this code below. Can you tell what’s happening?</p><div><pre><code><span>// updateUI, showError, and getLocationURL are irrelevant.</span>\n<span>// Pretend they do what they sound like.</span>\n\n<span>const</span> id <span>=</span> <span>'tylermcginnis'</span>\n\n<span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n    url<span>:</span> <span><span>`https://api.github.com/users/</span><span><span>${</span>id<span>}</span></span><span>`</span></span><span>,</span>\n    success<span>:</span> <span>(</span>user<span>)</span> <span>=&gt;</span> <span>{</span>\n      $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n        url<span>:</span> <span>getLocationURL</span><span>(</span>user<span>.</span>location<span>.</span><span>split</span><span>(</span><span>','</span><span>)</span><span>)</span><span>,</span>\n        <span>success</span> <span>(</span>weather<span>)</span> <span>{</span>\n          <span>updateUI</span><span>(</span><span>{</span>\n            user<span>,</span>\n            weather<span>:</span> weather<span>.</span>query<span>.</span>results\n          <span>}</span><span>)</span>\n        <span>}</span><span>,</span>\n        error<span>:</span> showError<span>,</span>\n      <span>}</span><span>)</span>\n    <span>}</span><span>,</span>\n    error<span>:</span> showError\n  <span>}</span><span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>If it helps, you can play around with the&nbsp;<a href=\"https://codesandbox.io/s/v06mmo3j7l\">live version here</a>.</p><p>Notice we’ve added a few more layers of callbacks. First we’re saying don’t run the initial AJAX request until the element with an id of&nbsp;<code>btn</code>&nbsp;is clicked. Once the button is clicked, we make the first request. If that request succeeds, we make a second request. If that request succeeds, we invoke the&nbsp;<code>updateUI</code>&nbsp;method passing it the data we got from both requests. Regardless of if you understood the code at first glance or not, objectively it’s much harder to read than the code before. This brings us to the topic of “Callback Hell”.</p><p>As humans, we naturally think sequentially. When you have nested callbacks inside of nested callbacks, it forces you out of your natural way of thinking. Bugs happen when there’s a disconnect between how your software is read and how you naturally think.</p><p>Like most solutions to software problems, a commonly prescribed approach for making “Callback Hell” easier to consume is to modularize your code.</p><div><pre><code><span>function</span> <span>getUser</span><span>(</span>id<span>,</span> onSuccess<span>,</span> onFailure<span>)</span> <span>{</span>\n  $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n    url<span>:</span> <span><span>`https://api.github.com/users/</span><span><span>${</span>id<span>}</span></span><span>`</span></span><span>,</span>\n    success<span>:</span> onSuccess<span>,</span>\n    error<span>:</span> onFailure\n  <span>}</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>getWeather</span><span>(</span>user<span>,</span> onSuccess<span>,</span> onFailure<span>)</span> <span>{</span>\n  $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n    url<span>:</span> <span>getLocationURL</span><span>(</span>user<span>.</span>location<span>.</span><span>split</span><span>(</span><span>','</span><span>)</span><span>)</span><span>,</span>\n    success<span>:</span> onSuccess<span>,</span>\n    error<span>:</span> onFailure<span>,</span>\n  <span>}</span><span>)</span>\n<span>}</span>\n\n<span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>getUser</span><span>(</span><span>\"tylermcginnis\"</span><span>,</span> <span>(</span>user<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>getWeather</span><span>(</span>user<span>,</span> <span>(</span>weather<span>)</span> <span>=&gt;</span> <span>{</span>\n      <span>updateUI</span><span>(</span><span>{</span>\n        user<span>,</span>\n        weather<span>:</span> weather<span>.</span>query<span>.</span>results\n      <span>}</span><span>)</span>\n    <span>}</span><span>,</span> showError<span>)</span>\n  <span>}</span><span>,</span> showError<span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>If it helps, you can play around with the&nbsp;<a href=\"https://codesandbox.io/s/m587rq0lox\">live version here</a>.</p><p>OK, the function names help us understand what’s going on, but is it objectively “better”? Not by much. We’ve put a band-aid over the readability issue of Callback Hell. The problem still exists that we naturally think sequentially and, even with the extra functions, nested callbacks break us out of that sequential way of thinking.</p><hr><p>The next issue of callbacks has to do with&nbsp;<a href=\"https://en.wikipedia.org/wiki/Inversion_of_control\">inversion of control</a>. When you write a callback, you’re assuming that the program you’re giving the callback to is responsible and will call it when (and only when) it’s supposed to. You’re essentially inverting the control of your program over to another program. When you’re dealing with libraries like jQuery, lodash, or even vanilla JavaScript, it’s safe to assume that the callback function will be invoked at the correct time with the correct arguments. However, for many third party libraries, callback functions are the interface for how you interact with them. It’s entirely plausible that a third party library could, whether on purpose or accidentally, break how they interact with your callback.</p><div><pre><code><span>function</span> <span>criticalFunction</span> <span>(</span><span>)</span> <span>{</span>\n  <span>// It's critical that this function</span>\n  <span>// gets called and with the correct</span>\n  <span>// arguments.</span>\n<span>}</span>\n\n<span>thirdPartyLib</span><span>(</span>criticalFunction<span>)</span></code></pre></div><p>Since you’re not the one calling&nbsp;<code>criticalFunction</code>, you have 0 control over when and with what argument it’s invoked.&nbsp;<em>Most</em>&nbsp;of the time this isn’t an issue, but when it is, it’s a big one.</p><hr><h3>Promises</h3><p>Have you ever been to a busy restaurant without a reservation? When this happens, the restaurant needs a way to get back in contact with you when a table opens up. Historically, they’d just take your name and yell it when your table was ready. Then, as naturally occurs, they decided to start getting fancy. One solution was, instead of taking your name, they’d take your number and text you once a table opened up. This allowed you to be out of yelling range but more importantly, it allowed them to target your phone with ads whenever they wanted. Sound familiar? It should! OK, maybe it shouldn’t. It’s a metaphor for callbacks!&nbsp;<span>Giving your number to a restaurant is just like giving a callback function to a third party service. You&nbsp;<em>expect</em>&nbsp;the restaurant to text you when a table opens up, just like you&nbsp;<em>expect</em>&nbsp;the third party service to invoke your function when and how they said they would.</span>&nbsp;Once your number or callback function is in their hands though, you’ve lost all control.</p><p>Thankfully, there is another solution that exists. One that, by design, allows you to keep all the control. You’ve probably even experienced it before - it’s that little buzzer thing they give you. You know, this one.</p><br><p><img src=\"https://tylermcginnis.com/images/posts/advanced-javascript/buzzy.png\" alt=\"Restaurant Buzzer\"></p><br><p>If you’ve never used one before, the idea is simple. Instead of taking your name or number, they give you this device. When the device starts buzzing and glowing, your table is ready. You can still do whatever you’d like as you’re waiting for your table to open up, but now you don’t have to give up anything. In fact, it’s the exact opposite.&nbsp;<span>They</span>&nbsp;have to give&nbsp;<span>you</span>&nbsp;something. There is no inversion of control.</p><p>The buzzer will always be in one of three different states -&nbsp;<code>pending</code>,&nbsp;<code>fulfilled</code>, or&nbsp;<code>rejected</code>.</p><p><code>pending</code>&nbsp;is the default, initial state. When they give you the buzzer, it’s in this state.</p><p><code>fulfilled</code>&nbsp;is the state the buzzer is in when it’s flashing and your table is ready.</p><p><code>rejected</code>&nbsp;is the state the buzzer is in when something goes wrong. Maybe the restaurant is about to close or they forgot someone rented out the restaurant for the night.</p><p>Again, the important thing to remember is that you, the receiver of the buzzer, have all the control. If the buzzer gets put into&nbsp;<code>fulfilled</code>, you can go to your table. If it gets put into&nbsp;<code>fulfilled</code>&nbsp;and you want to ignore it, cool, you can do that too. If it gets put into&nbsp;<code>rejected</code>, that sucks but you can go somewhere else to eat. If nothing ever happens and it stays in&nbsp;<code>pending</code>, you never get to eat but you’re not actually out anything.</p><p>Now that you’re a master of the restaurant buzzer thingy, let’s apply that knowledge to something that matters.</p><p><span>If giving the restaurant your number is like giving them a callback function, receiving the little buzzy thing is like receiving what’s called a “Promise”.</span></p><p>As always, let’s start with&nbsp;<span>why</span>. Why do Promises exist? They exist to make the complexity of making asynchronous requests more manageable. Exactly like the buzzer, a&nbsp;<code>Promise</code>&nbsp;can be in one of three states,&nbsp;<code>pending</code>,&nbsp;<code>fulfilled</code>&nbsp;or&nbsp;<code>rejected</code>. Unlike the buzzer, instead of these states representing the status of a table at a restaurant, they represent the status of an asynchronous request.</p><p>If the async request is still ongoing, the&nbsp;<code>Promise</code>&nbsp;will have a status of&nbsp;<code>pending</code>. If the async request was successfully completed, the&nbsp;<code>Promise</code>&nbsp;will change to a status of&nbsp;<code>fulfilled</code>. If the async request failed, the&nbsp;<code>Promise</code>&nbsp;will change to a status of&nbsp;<code>rejected</code>. The buzzer metaphor is pretty spot on, right?</p><p>Now that you understand why Promises exist and the different states they can be in, there are three more questions we need to answer.</p><ol><li>How do you create a Promise?</li><li>How do you change the status of a promise?</li><li>How do you listen for when the status of a promise changes?</li></ol><h5>1) How do you create a Promise?</h5><p>This one is pretty straight forward. You create a&nbsp;<code>new</code>&nbsp;instance of&nbsp;<code>Promise</code>.</p><div><pre><code><span>const</span> promise <span>=</span> <span>new</span> <span>Promise</span><span>(</span><span>)</span></code></pre></div><h5>2) How do you change the status of a promise?</h5><p>The&nbsp;<code>Promise</code>&nbsp;constructor function takes in a single argument, a (callback) function. This function is going to be passed two arguments,&nbsp;<code>resolve</code>&nbsp;and&nbsp;<code>reject</code>.</p><p><code>resolve</code>&nbsp;- a function that allows you to change the status of the promise to&nbsp;<code>fulfilled</code></p><p><code>reject</code>&nbsp;- a function that allows you to change the status of the promise to&nbsp;<code>rejected</code>.</p><p>In the code below, we use&nbsp;<code>setTimeout</code>&nbsp;to wait 2 seconds and then invoke&nbsp;<code>resolve</code>. This will change the status of the promise to&nbsp;<code>fulfilled</code>.</p><div><pre><code><span>const</span> promise <span>=</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>,</span> reject<span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>resolve</span><span>(</span><span>)</span> <span>// Change status to 'fulfilled'</span>\n  <span>}</span><span>,</span> <span>2000</span><span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>We can see this change in action by logging the promise right after we create it and then again roughly 2 seconds later after&nbsp;<code>resolve</code>&nbsp;has been called.</p><p><img src=\"https://tylermcginnis.com/images/posts/advanced-javascript/resolve.gif\" alt=\"Use resolve to change the status of a promise to fulfilled\"></p><p>Notice the promise goes from&nbsp;<code>&lt;pending&gt;</code>&nbsp;to&nbsp;<code>&lt;resolved&gt;</code>.</p><h4>3) How do you listen for when the status of a promise changes?</h4><p>In my opinion this is the most important question. It’s cool we know how to create a promise and change its status, but that’s worthless if we don’t know how to do anything after the status changes.</p><p>One thing we haven’t talked about yet is what a promise actually is. When you create a&nbsp;<code>new Promise</code>, you’re really just creating a plain old JavaScript object. This object can invoke two methods,&nbsp;<code>then</code>, and&nbsp;<code>catch</code>. Here’s the key. When the status of the promise changes to&nbsp;<code>fulfilled</code>, the function that was passed to&nbsp;<code>.then</code>&nbsp;will get invoked. When the status of a promise changes to&nbsp;<code>rejected</code>, the function that was passed to&nbsp;<code>.catch</code>&nbsp;will be invoked. What this means is that once you create a promise, you’ll pass the function you want to run if the async request is successful to&nbsp;<code>.then</code>. You’ll pass the function you want to run if the async request fails to&nbsp;<code>.catch</code>.</p><p>Let’s take a look at an example. We’ll use&nbsp;<code>setTimeout</code>&nbsp;again to change the status of the promise to&nbsp;<code>fulfilled</code>&nbsp;after two seconds (2000 milliseconds).</p><div><pre><code><span>function</span> <span>onSuccess</span> <span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'Success!'</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>onError</span> <span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'💩'</span><span>)</span>\n<span>}</span>\n\n<span>const</span> promise <span>=</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>,</span> reject<span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>resolve</span><span>(</span><span>)</span>\n  <span>}</span><span>,</span> <span>2000</span><span>)</span>\n<span>}</span><span>)</span>\n\npromise<span>.</span><span>then</span><span>(</span>onSuccess<span>)</span>\npromise<span>.</span><span>catch</span><span>(</span>onError<span>)</span></code></pre></div><p>If you run the code above you’ll notice that roughly 2 seconds later, you’ll see “Success!” in the console. Again the reason this happens is because of two things. First, when we created the promise, we invoked&nbsp;<code>resolve</code>&nbsp;after ~2000 milliseconds - this changed the status of the promise to&nbsp;<code>fulfilled</code>. Second, we passed the&nbsp;<code>onSuccess</code>&nbsp;function to the promises’&nbsp;<code>.then</code>&nbsp;method. By doing that we told the promise to invoke&nbsp;<code>onSuccess</code>&nbsp;when the status of the promise changed to&nbsp;<code>fulfilled</code>&nbsp;which it did after ~2000 milliseconds.</p><p>Now let’s pretend something bad happened and we wanted to change the status of the promise to&nbsp;<code>rejected</code>. Instead of calling&nbsp;<code>resolve</code>, we would call&nbsp;<code>reject</code>.</p><div><pre><code><span>function</span> <span>onSuccess</span> <span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'Success!'</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>onError</span> <span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'💩'</span><span>)</span>\n<span>}</span>\n\n<span>const</span> promise <span>=</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>,</span> reject<span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n<span>    <span>reject</span><span>(</span><span>)</span>\n</span>  <span>}</span><span>,</span> <span>2000</span><span>)</span>\n<span>}</span><span>)</span>\n\npromise<span>.</span><span>then</span><span>(</span>onSuccess<span>)</span>\npromise<span>.</span><span>catch</span><span>(</span>onError<span>)</span></code></pre></div><p>Now this time instead of the&nbsp;<code>onSuccess</code>&nbsp;function being invoked, the&nbsp;<code>onError</code>&nbsp;function will be invoked since we called&nbsp;<code>reject</code>.</p><hr><p>Now that you know your way around the Promise API, let’s start looking at some real code.</p><p>Remember the last async callback example we saw earlier?</p><div><pre><code><span>function</span> <span>getUser</span><span>(</span>id<span>,</span> onSuccess<span>,</span> onFailure<span>)</span> <span>{</span>\n  $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n    url<span>:</span> <span><span>`https://api.github.com/users/</span><span><span>${</span>id<span>}</span></span><span>`</span></span><span>,</span>\n    success<span>:</span> onSuccess<span>,</span>\n    error<span>:</span> onFailure\n  <span>}</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>getWeather</span><span>(</span>user<span>,</span> onSuccess<span>,</span> onFailure<span>)</span> <span>{</span>\n  $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n    url<span>:</span> <span>getLocationURL</span><span>(</span>user<span>.</span>location<span>.</span><span>split</span><span>(</span><span>','</span><span>)</span><span>)</span><span>,</span>\n    success<span>:</span> onSuccess<span>,</span>\n    error<span>:</span> onFailure<span>,</span>\n  <span>}</span><span>)</span>\n<span>}</span>\n\n<span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>getUser</span><span>(</span><span>\"tylermcginnis\"</span><span>,</span> <span>(</span>user<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>getWeather</span><span>(</span>user<span>,</span> <span>(</span>weather<span>)</span> <span>=&gt;</span> <span>{</span>\n      <span>updateUI</span><span>(</span><span>{</span>\n        user<span>,</span>\n        weather<span>:</span> weather<span>.</span>query<span>.</span>results\n      <span>}</span><span>)</span>\n    <span>}</span><span>,</span> showError<span>)</span>\n  <span>}</span><span>,</span> showError<span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>Is there anyway we could use the Promise API here instead of using callbacks? What if we wrap our AJAX requests inside of a promise? Then we can simply&nbsp;<code>resolve</code>&nbsp;or&nbsp;<code>reject</code>&nbsp;depending on how the request goes. Let’s start with&nbsp;<code>getUser</code>.</p><div><pre><code><span>function</span> <span>getUser</span><span>(</span>id<span>)</span> <span>{</span>\n  <span>return</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>,</span> reject<span>)</span> <span>=&gt;</span> <span>{</span>\n    $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n      url<span>:</span> <span><span>`https://api.github.com/users/</span><span><span>${</span>id<span>}</span></span><span>`</span></span><span>,</span>\n      success<span>:</span> resolve<span>,</span>\n      error<span>:</span> reject\n    <span>}</span><span>)</span>\n  <span>}</span><span>)</span>\n<span>}</span></code></pre></div><p>Nice. Notice that the parameters of&nbsp;<code>getUser</code>&nbsp;have changed. Instead of receiving&nbsp;<code>id</code>,&nbsp;<code>onSuccess</code>, and&nbsp;<code>onFailure</code>, it just receives&nbsp;<code>id</code>. There’s no more need for those other two callback functions because we’re no longer inverting control. Instead, we use the Promise’s&nbsp;<code>resolve</code>&nbsp;and&nbsp;<code>reject</code>&nbsp;functions.&nbsp;<code>resolve</code>&nbsp;will be invoked if the request was successful,&nbsp;<code>reject</code>&nbsp;will be invoked if there was an error.</p><p>Next let’s refactor&nbsp;<code>getWeather</code>. We’ll follow the same strategy here. Instead of taking in&nbsp;<code>onSuccess</code>&nbsp;and&nbsp;<code>onFailure</code>&nbsp;callback functions, we’ll use&nbsp;<code>resolve</code>&nbsp;and&nbsp;<code>reject</code>.</p><div><pre><code><span>function</span> <span>getWeather</span><span>(</span>user<span>)</span> <span>{</span>\n  <span>return</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>,</span> reject<span>)</span> <span>=&gt;</span> <span>{</span>\n    $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n      url<span>:</span> <span>getLocationURL</span><span>(</span>user<span>.</span>location<span>.</span><span>split</span><span>(</span><span>','</span><span>)</span><span>)</span><span>,</span>\n      success<span>:</span> resolve<span>,</span>\n      error<span>:</span> reject<span>,</span>\n    <span>}</span><span>)</span>\n  <span>}</span><span>)</span>\n<span>}</span></code></pre></div><p>Looking good. Now the last thing we need to update is our click handler. Remember, here’s the flow we want to take.</p><ol><li>Get the user’s information from the Github API.</li><li>Use the user’s location to get their weather from the Yahoo Weather API.</li><li>Update the UI with the users info and their weather.</li></ol><p>Let’s start with #1 - getting the user’s information from the Github API.</p><div><pre><code><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>const</span> userPromise <span>=</span> <span>getUser</span><span>(</span><span>'tylermcginnis'</span><span>)</span>\n\n  userPromise<span>.</span><span>then</span><span>(</span><span>(</span>user<span>)</span> <span>=&gt;</span> <span>{</span>\n\n  <span>}</span><span>)</span>\n\n  userPromise<span>.</span><span>catch</span><span>(</span>showError<span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>Notice that now instead of&nbsp;<code>getUser</code>&nbsp;taking in two callback functions, it returns us a promise that we can call&nbsp;<code>.then</code>&nbsp;and&nbsp;<code>.catch</code>&nbsp;on. If&nbsp;<code>.then</code>&nbsp;is called, it’ll be called with the user’s information. If&nbsp;<code>.catch</code>&nbsp;is called, it’ll be called with the error.</p><p>Next let’s do #2 - Use the user’s location to get their weather.</p><div><pre><code><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>const</span> userPromise <span>=</span> <span>getUser</span><span>(</span><span>'tylermcginnis'</span><span>)</span>\n\n  userPromise<span>.</span><span>then</span><span>(</span><span>(</span>user<span>)</span> <span>=&gt;</span> <span>{</span>\n<span>    <span>const</span> weatherPromise <span>=</span> <span>getWeather</span><span>(</span>user<span>)</span>\n</span><span>    weatherPromise<span>.</span><span>then</span><span>(</span><span>(</span>weather<span>)</span> <span>=&gt;</span> <span>{</span>\n</span><span>\n</span><span>    <span>}</span><span>)</span>\n</span><span>\n</span><span>    weatherPromise<span>.</span><span>catch</span><span>(</span>showError<span>)</span>\n</span>  <span>}</span><span>)</span>\n\n  userPromise<span>.</span><span>catch</span><span>(</span>showError<span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>Notice we follow the exact same pattern we did in #1 but now we invoke&nbsp;<code>getWeather</code>&nbsp;passing it the&nbsp;<code>user</code>object we got from&nbsp;<code>userPromise</code>.</p><p>Finally, #3 - Update the UI with the users info and their weather.</p><div><pre><code><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>const</span> userPromise <span>=</span> <span>getUser</span><span>(</span><span>'tylermcginnis'</span><span>)</span>\n\n  userPromise<span>.</span><span>then</span><span>(</span><span>(</span>user<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>const</span> weatherPromise <span>=</span> <span>getWeather</span><span>(</span>user<span>)</span>\n    weatherPromise<span>.</span><span>then</span><span>(</span><span>(</span>weather<span>)</span> <span>=&gt;</span> <span>{</span>\n<span>      <span>updateUI</span><span>(</span><span>{</span>\n</span><span>        user<span>,</span>\n</span><span>        weather<span>:</span> weather<span>.</span>query<span>.</span>results\n</span><span>      <span>}</span><span>)</span>\n</span>    <span>}</span><span>)</span>\n\n    weatherPromise<span>.</span><span>catch</span><span>(</span>showError<span>)</span>\n  <span>}</span><span>)</span>\n\n  userPromise<span>.</span><span>catch</span><span>(</span>showError<span>)</span>\n<span>}</span><span>)</span></code></pre></div><p><a href=\"https://codesandbox.io/s/l9xrjq88p7\">Here’s the full code</a>&nbsp;you can play around with.</p><p>Our new code is&nbsp;<em>better</em>, but there are still some improvement we can make. Before we can make those improvements though, there are two more features of promises you need to be aware of, chaining and passing arguments from&nbsp;<code>resolve</code>&nbsp;to&nbsp;<code>then</code>.</p><h4>Chaining</h4><p>Both&nbsp;<code>.then</code>&nbsp;and&nbsp;<code>.catch</code>&nbsp;will return a new promise. That seems like a small detail but it’s important because it means that promises can be chained.</p><p>In the example below, we call&nbsp;<code>getPromise</code>&nbsp;which returns us a promise that will resolve in at least 2000 milliseconds. From there, because&nbsp;<code>.then</code>&nbsp;will return a promise, we can continue to chain our&nbsp;<code>.then</code>s together until we throw a&nbsp;<code>new Error</code>&nbsp;which is caught by the&nbsp;<code>.catch</code>&nbsp;method.</p><div><pre><code><span>function</span> <span>getPromise</span> <span>(</span><span>)</span> <span>{</span>\n  <span>return</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>setTimeout</span><span>(</span>resolve<span>,</span> <span>2000</span><span>)</span>\n  <span>}</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>logA</span> <span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'A'</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>logB</span> <span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'B'</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>logCAndThrow</span> <span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'C'</span><span>)</span>\n\n  <span>throw</span> <span>new</span> <span>Error</span><span>(</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>catchError</span> <span>(</span><span>)</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span><span>'Error!'</span><span>)</span>\n<span>}</span>\n\n<span>getPromise</span><span>(</span><span>)</span>\n  <span>.</span><span>then</span><span>(</span>logA<span>)</span> <span>// A</span>\n  <span>.</span><span>then</span><span>(</span>logB<span>)</span> <span>// B</span>\n  <span>.</span><span>then</span><span>(</span>logCAndThrow<span>)</span> <span>// C</span>\n  <span>.</span><span>catch</span><span>(</span>catchError<span>)</span> <span>// Error!</span></code></pre></div><p>Cool, but why is this so important? Remember back in the callback section we talked about one of the downfalls of callbacks being that they force you out of your natural, sequential way of thinking. When you chain promises together, it doesn’t force you out of that natural way of thinking because chained promises are sequential.&nbsp;<code>getPromise runs then logA runs then logB runs then...</code>.</p><p>Just so you can see one more example, here’s a common use case when you use the&nbsp;<code>fetch</code>&nbsp;API.&nbsp;<code>fetch</code>&nbsp;will return you a promise that will resolve with the HTTP response. To get the actual JSON, you’ll need to call&nbsp;<code>.json</code>. Because of chaining, we can think about this in a sequential manner.</p><div><pre><code><span>fetch</span><span>(</span><span>'/api/user.json'</span><span>)</span>\n  <span>.</span><span>then</span><span>(</span><span>(</span>response<span>)</span> <span>=&gt;</span> response<span>.</span><span>json</span><span>(</span><span>)</span><span>)</span>\n  <span>.</span><span>then</span><span>(</span><span>(</span>user<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>// user is now ready to go.</span>\n  <span>}</span><span>)</span></code></pre></div><p>Now that we know about chaining, let’s refactor our&nbsp;<code>getUser</code>/<code>getWeather</code>&nbsp;code from earlier to use it.</p><div><pre><code><span>function</span> <span>getUser</span><span>(</span>id<span>)</span> <span>{</span>\n  <span>return</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>,</span> reject<span>)</span> <span>=&gt;</span> <span>{</span>\n    $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n      url<span>:</span> <span><span>`https://api.github.com/users/</span><span><span>${</span>id<span>}</span></span><span>`</span></span><span>,</span>\n      success<span>:</span> resolve<span>,</span>\n      error<span>:</span> reject\n    <span>}</span><span>)</span>\n  <span>}</span><span>)</span>\n<span>}</span>\n\n<span>function</span> <span>getWeather</span><span>(</span>user<span>)</span> <span>{</span>\n  <span>return</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>,</span> reject<span>)</span> <span>=&gt;</span> <span>{</span>\n    $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n      url<span>:</span> <span>getLocationURL</span><span>(</span>user<span>.</span>location<span>.</span><span>split</span><span>(</span><span>','</span><span>)</span><span>)</span><span>,</span>\n      success<span>:</span> resolve<span>,</span>\n      error<span>:</span> reject<span>,</span>\n    <span>}</span><span>)</span>\n  <span>}</span><span>)</span>\n<span>}</span>\n\n<span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>getUser</span><span>(</span><span>\"tylermcginnis\"</span><span>)</span>\n    <span>.</span><span>then</span><span>(</span>getWeather<span>)</span>\n    <span>.</span><span>then</span><span>(</span><span>(</span>weather<span>)</span> <span>=&gt;</span> <span>{</span>\n      <span>// We need both the user and the weather here.</span>\n      <span>// Right now we just have the weather</span>\n      <span>updateUI</span><span>(</span><span>)</span> <span>// ????</span>\n    <span>}</span><span>)</span>\n    <span>.</span><span>catch</span><span>(</span>showError<span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>It&nbsp;<em>looks</em>&nbsp;much better, but now we’re running into an issue. Can you spot it? In the second&nbsp;<code>.then</code>&nbsp;we want to to call&nbsp;<code>updateUI</code>. The problem is we need to pass&nbsp;<code>updateUI</code>&nbsp;both the&nbsp;<code>user</code>&nbsp;and the&nbsp;<code>weather</code>. Currently how we have it set up, we’re only receiving the&nbsp;<code>weather</code>, not the&nbsp;<code>user</code>. Somehow we need to figure out a way to make it so the promise that&nbsp;<code>getWeather</code>&nbsp;returns is resolved with both the&nbsp;<code>user</code>&nbsp;and the&nbsp;<code>weather</code>.</p><p>Here’s the key.&nbsp;<code>resolve</code>&nbsp;is just a function. Any arguments you pass to it will be passed along to the function given to&nbsp;<code>.then</code>. What that means is that inside of&nbsp;<code>getWeather</code>, if we invoke&nbsp;<code>resolve</code>&nbsp;ourself, we can pass to it&nbsp;<code>weather</code>&nbsp;and&nbsp;<code>user</code>. Then, the second&nbsp;<code>.then</code>&nbsp;method in our chain will receive both&nbsp;<code>user</code>&nbsp;and&nbsp;<code>weather</code>as an argument.</p><div><pre><code><span>function</span> <span>getWeather</span><span>(</span>user<span>)</span> <span>{</span>\n  <span>return</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span>resolve<span>,</span> reject<span>)</span> <span>=&gt;</span> <span>{</span>\n    $<span>.</span><span>getJSON</span><span>(</span><span>{</span>\n      url<span>:</span> <span>getLocationURL</span><span>(</span>user<span>.</span>location<span>.</span><span>split</span><span>(</span><span>','</span><span>)</span><span>)</span><span>,</span>\n<span>      <span>success</span><span>(</span>weather<span>)</span> <span>{</span>\n</span><span>        <span>resolve</span><span>(</span><span>{</span> user<span>,</span> weather<span>:</span> weather<span>.</span>query<span>.</span>results <span>}</span><span>)</span>\n</span><span>      <span>}</span><span>,</span>\n</span>      error<span>:</span> reject<span>,</span>\n    <span>}</span><span>)</span>\n  <span>}</span><span>)</span>\n<span>}</span>\n\n<span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>getUser</span><span>(</span><span>\"tylermcginnis\"</span><span>)</span>\n    <span>.</span><span>then</span><span>(</span>getWeather<span>)</span>\n<span>    <span>.</span><span>then</span><span>(</span><span>(</span>data<span>)</span> <span>=&gt;</span> <span>{</span>\n</span><span>      <span>// Now, data is an object with a</span>\n</span><span>      <span>// \"weather\" property and a \"user\" property.</span>\n</span><span>\n</span><span>      <span>updateUI</span><span>(</span>data<span>)</span>\n</span><span>    <span>}</span><span>)</span>\n</span>    <span>.</span><span>catch</span><span>(</span>showError<span>)</span>\n<span>}</span><span>)</span></code></pre></div><blockquote><p>You can play around with the&nbsp;<a href=\"https://codesandbox.io/s/9lkl75vqxw\">final code here</a></p></blockquote><p>It’s in our click handler where you really see the power of promises shine compared to callbacks.</p><div><pre><code><span>// Callbacks 🚫</span>\n<span>getUser</span><span>(</span><span>\"tylermcginnis\"</span><span>,</span> <span>(</span>user<span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>getWeather</span><span>(</span>user<span>,</span> <span>(</span>weather<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>updateUI</span><span>(</span><span>{</span>\n      user<span>,</span>\n      weather<span>:</span> weather<span>.</span>query<span>.</span>results\n    <span>}</span><span>)</span>\n  <span>}</span><span>,</span> showError<span>)</span>\n<span>}</span><span>,</span> showError<span>)</span>\n\n\n<span>// Promises ✅</span>\n<span>getUser</span><span>(</span><span>\"tylermcginnis\"</span><span>)</span>\n  <span>.</span><span>then</span><span>(</span>getWeather<span>)</span>\n  <span>.</span><span>then</span><span>(</span><span>(</span>data<span>)</span> <span>=&gt;</span> <span>updateUI</span><span>(</span>data<span>)</span><span>)</span>\n  <span>.</span><span>catch</span><span>(</span>showError<span>)</span><span>;</span></code></pre></div><p>Following that logic feels natural because it’s how we’re used to thinking, sequentially.&nbsp;<code>getUser then getWeather then update the UI with the data</code>.</p><hr><p>Now it’s clear that promises drastically increase the readability of our asynchronous code, but is there a way we can make it even better? Assume that you were on the TC39 committee and you had all the power to add new features to the JavaScript language. What steps, if any, would you take to improve this code?</p><div><pre><code><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>getUser</span><span>(</span><span>\"tylermcginnis\"</span><span>)</span>\n    <span>.</span><span>then</span><span>(</span>getWeather<span>)</span>\n    <span>.</span><span>then</span><span>(</span><span>(</span>data<span>)</span> <span>=&gt;</span> <span>updateUI</span><span>(</span>data<span>)</span><span>)</span>\n    <span>.</span><span>catch</span><span>(</span>showError<span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>As we’ve discussed, the code reads pretty nicely. Just as our brains work, it’s in a sequential order. One issue that we did run into was that we needed to thread the data (<code>users</code>) from the first async request all the way through to the last&nbsp;<code>.then</code>. This wasn’t a big deal, but it made us change up our&nbsp;<code>getWeather</code>&nbsp;function to also pass along&nbsp;<code>users</code>. What if we just wrote our asynchronous code the same way which we write our synchronous code? If we did, that problem would go away entirely and it would still read sequentially. Here’s an idea.</p><div><pre><code><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>const</span> user <span>=</span> <span>getUser</span><span>(</span><span>'tylermcginnis'</span><span>)</span>\n  <span>const</span> weather <span>=</span> <span>getWeather</span><span>(</span>user<span>)</span>\n\n  <span>updateUI</span><span>(</span><span>{</span>\n    user<span>,</span>\n    weather<span>,</span>\n  <span>}</span><span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>Well, that would be nice. Our asynchronous code looks exactly like our synchronous code. There’s no extra steps our brain needs to take because we’re already very familiar with this way of thinking. Sadly, this obviously won’t work. As you know, if we were to run the code above,&nbsp;<code>user</code>&nbsp;and&nbsp;<code>weather</code>&nbsp;would both just be promises since that’s what&nbsp;<code>getUser</code>&nbsp;and&nbsp;<code>getWeather</code>&nbsp;return. But remember, we’re on TC39. We have all the power to add any feature to the language we want. As is, this code would be really tricky to make work. We’d have to somehow teach the JavaScript engine to know the difference between asynchronous function invocations and regular, synchronous function invocations on the fly. Let’s add a few keywords to our code to make it easier on the engine.</p><p>First, let’s add a keyword to the main function itself. This could clue the engine to the fact that inside of this function, we’re going to have some asynchronous function invocations. Let’s use&nbsp;<code>async</code>&nbsp;for this.</p><div><pre><code><span><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>async</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n</span>  <span>const</span> user <span>=</span> <span>getUser</span><span>(</span><span>'tylermcginnis'</span><span>)</span>\n  <span>const</span> weather <span>=</span> <span>getWeather</span><span>(</span>user<span>)</span>\n\n  <span>updateUI</span><span>(</span><span>{</span>\n    user<span>,</span>\n    weather<span>,</span>\n  <span>}</span><span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>Cool. That seems reasonable. Next let’s add another keyword to let the engine know exactly when a function being invoked is asynchronous and is going to return a promise. Let’s use&nbsp;<code>await</code>. As in, “Hey engine. This function is asynchronous and returns a promise. Instead of continuing on like you typically do, go ahead and ‘await’ the eventual value of the promise and return it before continuing”. With both of our new&nbsp;<code>async</code>&nbsp;and&nbsp;<code>await</code>&nbsp;keywords in play, our new code will look like this.</p><div><pre><code><span><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>async</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n</span><span>  <span>const</span> user <span>=</span> <span>await</span> <span>getUser</span><span>(</span><span>'tylermcginnis'</span><span>)</span>\n</span><span>  <span>const</span> weather <span>=</span> <span>await</span> <span>getWeather</span><span>(</span>user<span>.</span>location<span>)</span>\n</span>\n  <span>updateUI</span><span>(</span><span>{</span>\n    user<span>,</span>\n    weather<span>,</span>\n  <span>}</span><span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>Pretty slick. We’ve invented a reasonable way to have our asynchronous code look and behave as if it were synchronous. Now the next step is to actually convince someone on TC39 that this is a good idea. Lucky for us, as you probably guessed by now, we don’t need to do any convincing because this feature is already part of JavaScript and it’s called&nbsp;<code>Async/Await</code>.</p><p>Don’t believe me?&nbsp;<a href=\"https://codesandbox.io/s/00w10o19xn\">Here’s our live code now</a>&nbsp;that we’ve added Async/Await to it. Feel free to play around with it.</p><hr><h4>async functions return a promise</h4><p>Now that you’ve seen the benefit of Async/Await, let’s discuss some smaller details that are important to know. First, anytime you add&nbsp;<code>async</code>&nbsp;to a function, that function is going to implicitly return a promise.</p><div><pre><code><span>async</span> <span>function</span> <span>getPromise</span><span>(</span><span>)</span><span>{</span><span>}</span>\n\n<span>const</span> promise <span>=</span> <span>getPromise</span><span>(</span><span>)</span></code></pre></div><p>Even though&nbsp;<code>getPromise</code>&nbsp;is literally empty, it’ll still return a promise since it was an&nbsp;<code>async</code>&nbsp;function.</p><p>If the&nbsp;<code>async</code>&nbsp;function returns a value, that value will also get wrapped in a promise. That means you’ll have to use&nbsp;<code>.then</code>&nbsp;to access it.</p><div><pre><code><span>async</span> <span>function</span> <span>add</span> <span>(</span>x<span>,</span> y<span>)</span> <span>{</span>\n  <span>return</span> x <span>+</span> y\n<span>}</span>\n\n<span>add</span><span>(</span><span>2</span><span>,</span><span>3</span><span>)</span><span>.</span><span>then</span><span>(</span><span>(</span>result<span>)</span> <span>=&gt;</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span>result<span>)</span> <span>// 5</span>\n<span>}</span><span>)</span></code></pre></div><hr><h4>await without async is bad</h4><p>If you try to use the&nbsp;<code>await</code>&nbsp;keyword inside of a function that isn’t&nbsp;<code>async</code>, you’ll get an error.</p><div><pre><code><span><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n</span>  <span>const</span> user <span>=</span> <span>await</span> <span>getUser</span><span>(</span><span>'tylermcginnis'</span><span>)</span> <span>// SyntaxError: await is a reserved word</span>\n  <span>const</span> weather <span>=</span> <span>await</span> <span>getWeather</span><span>(</span>user<span>.</span>location<span>)</span> <span>// SyntaxError: await is a reserved word</span>\n\n  <span>updateUI</span><span>(</span><span>{</span>\n    user<span>,</span>\n    weather<span>,</span>\n  <span>}</span><span>)</span>\n<span>}</span><span>)</span></code></pre></div><p>Here’s how I think about it. When you add&nbsp;<code>async</code>&nbsp;to a function it does two things. It makes it so the function itself returns (or wraps what gets returned in) a promise and makes it so you can use&nbsp;<code>await</code>&nbsp;inside of it.</p><hr><h4>Error Handling</h4><p>You may have noticed we cheated a little bit. In our original code we had a way to catch any errors using&nbsp;<code>.catch</code>. When we switched to Async/Await, we removed that code. With Async/Await, the most common approach is to wrap your code in a&nbsp;<code>try/catch</code>&nbsp;block to be able to catch the error.</p><div><pre><code><span>$</span><span>(</span><span>\"#btn\"</span><span>)</span><span>.</span><span>on</span><span>(</span><span>\"click\"</span><span>,</span> <span>async</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>try</span> <span>{</span>\n    <span>const</span> user <span>=</span> <span>await</span> <span>getUser</span><span>(</span><span>'tylermcginnis'</span><span>)</span>\n    <span>const</span> weather <span>=</span> <span>await</span> <span>getWeather</span><span>(</span>user<span>.</span>location<span>)</span>\n\n    <span>updateUI</span><span>(</span><span>{</span>\n      user<span>,</span>\n      weather<span>,</span>\n    <span>}</span><span>)</span>\n  <span>}</span> <span>catch</span> <span>(</span><span>e</span><span>)</span> <span>{</span>\n    <span>showError</span><span>(</span>e<span>)</span>\n  <span>}</span>\n<span>}</span><span>)</span></code></pre></div></div>","filePath":"pages/JavaScript/.md","_id":"Di6ovpjLxvP2jkur","dateUpdated":1542039558552,"favorite":false}
{"date":"2019-01-30T16:06:49.222Z","title":"CodeTidbits30: JavaScript tips and Tricks","sourceUrl":"https://www.samanthaming.com/tidbits","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"," Tips & Tricks"],"author":"Samantha Ming","excerpt":"","dateCreated":1548863758198,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Wed Jan 30 2019 21:36:49 GMT+0530 (India Standard Time)'\ntitle: 'CodeTidbits30: JavaScript tips and Tricks'\ntags: ['JavaScript','Tips & Tricks']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://www.samanthaming.com/tidbits'\ntype: 'Post'\n---\n    ","htmlCode":"<section><div><div><p>For the entire month of December, I posted DAILY code tidbits! 30 days straight of the very best JavaScript, HTML, and CSS snippets.</p><p>I posted this series on my&nbsp;<a href=\"https://www.instagram.com/samanthaming/\" data-href=\"https://www.instagram.com/samanthaming/\" rel=\"noopener nofollow\" target=\"_blank\">Instagram</a>&nbsp;and&nbsp;<a href=\"https://twitter.com/samantha_ming\" data-href=\"https://twitter.com/samantha_ming\" rel=\"noopener nofollow\" target=\"_blank\">Twitter</a>. Don’t worry if you missed it! Here’s the summary of all 30 Code Tidbits. Make sure you scroll to the end where I also included code notes. Enjoy! 🎁</p></div></div></section><section><div><hr></div><div><div data-paragraph-count=\"3\"><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*3AwNpThOICtdoKB_BApqlg.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*3AwNpThOICtdoKB_BApqlg.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*3AwNpThOICtdoKB_BApqlg.png\" src=\"https://cdn-images-1.medium.com/max/400/1*3AwNpThOICtdoKB_BApqlg.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*o7fh-jIVui5oeWj3mfiasw.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*o7fh-jIVui5oeWj3mfiasw.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*o7fh-jIVui5oeWj3mfiasw.png\" src=\"https://cdn-images-1.medium.com/max/400/1*o7fh-jIVui5oeWj3mfiasw.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*vxF4GA_JLoWlK3mrn6m3Cw.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*vxF4GA_JLoWlK3mrn6m3Cw.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*vxF4GA_JLoWlK3mrn6m3Cw.png\" src=\"https://cdn-images-1.medium.com/max/400/1*vxF4GA_JLoWlK3mrn6m3Cw.png\"></div></div></figure></div><div data-paragraph-count=\"3\"><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*kiQk81Xb-IK5z8hdvmQoMQ.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*kiQk81Xb-IK5z8hdvmQoMQ.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*kiQk81Xb-IK5z8hdvmQoMQ.png\" src=\"https://cdn-images-1.medium.com/max/400/1*kiQk81Xb-IK5z8hdvmQoMQ.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*gYyEYSZ_xtj6fBHHqC_yAQ.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*gYyEYSZ_xtj6fBHHqC_yAQ.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*gYyEYSZ_xtj6fBHHqC_yAQ.png\" src=\"https://cdn-images-1.medium.com/max/400/1*gYyEYSZ_xtj6fBHHqC_yAQ.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*sd_rBjFbrg4lgF--2tCq8g.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*sd_rBjFbrg4lgF--2tCq8g.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*sd_rBjFbrg4lgF--2tCq8g.png\" src=\"https://cdn-images-1.medium.com/max/400/1*sd_rBjFbrg4lgF--2tCq8g.png\"></div></div></figure></div><div data-paragraph-count=\"3\"><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*Hvul3LzK6BiSWlNcdEgOBw.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*Hvul3LzK6BiSWlNcdEgOBw.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*Hvul3LzK6BiSWlNcdEgOBw.png\" src=\"https://cdn-images-1.medium.com/max/400/1*Hvul3LzK6BiSWlNcdEgOBw.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*FQq-qi1RKmMfc8zw_LBULQ.png\" data-width=\"750\" data-height=\"750\" data-action=\"zoom\" data-action-value=\"1*FQq-qi1RKmMfc8zw_LBULQ.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*FQq-qi1RKmMfc8zw_LBULQ.png\" src=\"https://cdn-images-1.medium.com/max/400/1*FQq-qi1RKmMfc8zw_LBULQ.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*_h8H23SsWHUo0BK-tnvJ6Q.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*_h8H23SsWHUo0BK-tnvJ6Q.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*_h8H23SsWHUo0BK-tnvJ6Q.png\" src=\"https://cdn-images-1.medium.com/max/400/1*_h8H23SsWHUo0BK-tnvJ6Q.png\"></div></div></figure></div><div data-paragraph-count=\"3\"><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*Yo3u7muTpqy6w0DNX1LY3Q.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*Yo3u7muTpqy6w0DNX1LY3Q.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*Yo3u7muTpqy6w0DNX1LY3Q.png\" src=\"https://cdn-images-1.medium.com/max/400/1*Yo3u7muTpqy6w0DNX1LY3Q.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*7BYW5F5YxsVx1y9o8BPpzg.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*7BYW5F5YxsVx1y9o8BPpzg.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*7BYW5F5YxsVx1y9o8BPpzg.png\" src=\"https://cdn-images-1.medium.com/max/400/1*7BYW5F5YxsVx1y9o8BPpzg.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*VqsmtRQ0EvBdg8ax_3gXrw.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*VqsmtRQ0EvBdg8ax_3gXrw.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*VqsmtRQ0EvBdg8ax_3gXrw.png\" src=\"https://cdn-images-1.medium.com/max/400/1*VqsmtRQ0EvBdg8ax_3gXrw.png\"></div></div></figure></div><div data-paragraph-count=\"3\"><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*hUGyPR6XqWI99ifxrzBfWQ.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*hUGyPR6XqWI99ifxrzBfWQ.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*hUGyPR6XqWI99ifxrzBfWQ.png\" src=\"https://cdn-images-1.medium.com/max/400/1*hUGyPR6XqWI99ifxrzBfWQ.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*Ujlz1U2_Oro6hvNUvG20CQ.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*Ujlz1U2_Oro6hvNUvG20CQ.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*Ujlz1U2_Oro6hvNUvG20CQ.png\" src=\"https://cdn-images-1.medium.com/max/400/1*Ujlz1U2_Oro6hvNUvG20CQ.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*GuCtAjIkpvXBohkyjqrVTg.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*GuCtAjIkpvXBohkyjqrVTg.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*GuCtAjIkpvXBohkyjqrVTg.png\" src=\"https://cdn-images-1.medium.com/max/400/1*GuCtAjIkpvXBohkyjqrVTg.png\"></div></div></figure></div><div data-paragraph-count=\"3\"><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*J2J_cehaNKrFov3xrW3xzg.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*J2J_cehaNKrFov3xrW3xzg.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*J2J_cehaNKrFov3xrW3xzg.png\" src=\"https://cdn-images-1.medium.com/max/400/1*J2J_cehaNKrFov3xrW3xzg.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*GUP2vbtohmv8N9hVsoNNcA.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*GUP2vbtohmv8N9hVsoNNcA.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*GUP2vbtohmv8N9hVsoNNcA.png\" src=\"https://cdn-images-1.medium.com/max/400/1*GUP2vbtohmv8N9hVsoNNcA.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*QdCRU5FZev5PYiDcVemGxA.png\" data-width=\"686\" data-height=\"686\" data-action=\"zoom\" data-action-value=\"1*QdCRU5FZev5PYiDcVemGxA.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*QdCRU5FZev5PYiDcVemGxA.png\" src=\"https://cdn-images-1.medium.com/max/400/1*QdCRU5FZev5PYiDcVemGxA.png\"></div></div></figure></div><div data-paragraph-count=\"3\"><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*0c7IUZAWEaZOyqpP9V66rg.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*0c7IUZAWEaZOyqpP9V66rg.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*0c7IUZAWEaZOyqpP9V66rg.png\" src=\"https://cdn-images-1.medium.com/max/400/1*0c7IUZAWEaZOyqpP9V66rg.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*oZac6W14m8zjWxR1i89fjA.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*oZac6W14m8zjWxR1i89fjA.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*oZac6W14m8zjWxR1i89fjA.png\" src=\"https://cdn-images-1.medium.com/max/400/1*oZac6W14m8zjWxR1i89fjA.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*2T01ZSYDAVC02e2gS43kOA.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*2T01ZSYDAVC02e2gS43kOA.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*2T01ZSYDAVC02e2gS43kOA.png\" src=\"https://cdn-images-1.medium.com/max/400/1*2T01ZSYDAVC02e2gS43kOA.png\"></div></div></figure></div><div data-paragraph-count=\"3\"><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*QX8kvCRW-1_-iU3sAx5O9g.png\" data-width=\"553\" data-height=\"553\" data-action=\"zoom\" data-action-value=\"1*QX8kvCRW-1_-iU3sAx5O9g.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*QX8kvCRW-1_-iU3sAx5O9g.png\" src=\"https://cdn-images-1.medium.com/max/400/1*QX8kvCRW-1_-iU3sAx5O9g.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*bUlcwJwOl8olh2it8YhWYA.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*bUlcwJwOl8olh2it8YhWYA.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*bUlcwJwOl8olh2it8YhWYA.png\" src=\"https://cdn-images-1.medium.com/max/400/1*bUlcwJwOl8olh2it8YhWYA.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*Ie-2Kq7HYodEUOO94p6fNQ.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*Ie-2Kq7HYodEUOO94p6fNQ.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*Ie-2Kq7HYodEUOO94p6fNQ.png\" src=\"https://cdn-images-1.medium.com/max/400/1*Ie-2Kq7HYodEUOO94p6fNQ.png\"></div></div></figure></div><div data-paragraph-count=\"3\"><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*Z6VL5lPef6NajMGkBHkoEw.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*Z6VL5lPef6NajMGkBHkoEw.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*Z6VL5lPef6NajMGkBHkoEw.png\" src=\"https://cdn-images-1.medium.com/max/400/1*Z6VL5lPef6NajMGkBHkoEw.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*Yskr0x43_9ipnIQZrVodgQ.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*Yskr0x43_9ipnIQZrVodgQ.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*Yskr0x43_9ipnIQZrVodgQ.png\" src=\"https://cdn-images-1.medium.com/max/400/1*Yskr0x43_9ipnIQZrVodgQ.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*TkfByGLpkgNPehAn33EfxA.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*TkfByGLpkgNPehAn33EfxA.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*TkfByGLpkgNPehAn33EfxA.png\" src=\"https://cdn-images-1.medium.com/max/400/1*TkfByGLpkgNPehAn33EfxA.png\"></div></div></figure></div><div data-paragraph-count=\"3\"><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*pobl870aIvgoVAQp_4LtSQ.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*pobl870aIvgoVAQp_4LtSQ.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*pobl870aIvgoVAQp_4LtSQ.png\" src=\"https://cdn-images-1.medium.com/max/400/1*pobl870aIvgoVAQp_4LtSQ.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*tWAq_IEAvVw0IyW4cAdw6g.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*tWAq_IEAvVw0IyW4cAdw6g.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*tWAq_IEAvVw0IyW4cAdw6g.png\" src=\"https://cdn-images-1.medium.com/max/400/1*tWAq_IEAvVw0IyW4cAdw6g.png\"></div></div></figure><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*EM6iRQcMc3-5cd-Q60ZB7w.png\" data-width=\"1058\" data-height=\"1058\" data-action=\"zoom\" data-action-value=\"1*EM6iRQcMc3-5cd-Q60ZB7w.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"75\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/400/1*EM6iRQcMc3-5cd-Q60ZB7w.png\" src=\"https://cdn-images-1.medium.com/max/400/1*EM6iRQcMc3-5cd-Q60ZB7w.png\"></div></div></figure></div></div></section>","filePath":"pages/JavaScript/.md","_id":"EJozm4TXoZEVT6h6"}
{"date":{"$$date":1553096101059},"title":"How To Make Changes to the DOM","sourceUrl":"https://www.digitalocean.com/community/tutorials/how-to-make-changes-to-the-dom","path":"JavaScript/JavaScript/JavaScript/JavaScript/JavaScript/","category":"JavaScript","tags":["JavaScript"," DOM"],"author":"Tania Rascia","excerpt":"","dateCreated":1553095360312,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Wed Mar 20 2019 20:54:19 GMT+0530 (India Standard Time)'\ntitle: 'How To Make Changes to the DOM'\ntags: ['JavaScript','DOM']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://www.digitalocean.com/community/tutorials/how-to-make-changes-to-the-dom'\ntype: 'Post'\n---\n    ","htmlCode":"<h3>Introduction</h3><p>In the previous two installments of the&nbsp;<a href=\"https://www.digitalocean.com/community/tutorial_series/understanding-the-dom-document-object-model\">Understanding the DOM</a>&nbsp;series, we learned&nbsp;<a href=\"https://www.digitalocean.com/community/tutorials/how-to-access-elements-in-the-dom\">How To Access Elements in the DOM</a>&nbsp;and&nbsp;<a href=\"https://www.digitalocean.com/community/tutorials/how-to-traverse-the-dom\">How To Traverse the DOM</a>. Using this knowledge, a developer can use classes, tags, ids, and selectors to find any node in the DOM, and use parent, child, and sibling properties to find relative nodes.</p><p>The next step to becoming more fully proficient with the DOM is to learn how to add, change, replace, and remove nodes. A to-do list application is one practical example of a JavaScript program in which you would need to be able to create, modify, and remove elements in the DOM.</p><p>In this tutorial, we will go over how to create new nodes and insert them into the DOM, replace existing nodes, and remove nodes.</p><div data-unique=\"creating-new-nodes\"></div><h2>Creating New Nodes</h2><p>In a static website, elements are added to the page by directly writing HTML in an&nbsp;<code>.html</code>&nbsp;file. In a dynamic web app, elements and text are often added with JavaScript. The&nbsp;<code>createElement()</code>&nbsp;and&nbsp;<code>createTextNode()</code>&nbsp;methods are used to create new nodes in the DOM.</p><table><thead><tr><th>Property/Method</th><th>Description</th></tr></thead><tbody><tr><td><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement\"><code>createElement()</code></a></td><td>Create a new element node</td></tr><tr><td><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/createTextNode\"><code>createTextNode()</code></a></td><td>Create a new text node</td></tr><tr><td><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent\"><code>node.textContent</code></a></td><td>Get or set the text content of an element node</td></tr><tr><td><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML\"><code>node.innerHTML</code></a></td><td>Get or set the HTML content of an element</td></tr></tbody></table><p>To begin, let's create an&nbsp;<code>index.html</code>&nbsp;file and save it in a new project directory.</p><div title=\"index.html\">index.html</div><pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n\n  &lt;head&gt;\n    &lt;title&gt;Learning the DOM&lt;/title&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n    &lt;h1&gt;Document Object Model&lt;/h1&gt;\n  &lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre><p>Right click anywhere on the page and select \"Inspect\" to open up Developer Tools, then navigate to the&nbsp;<span><a href=\"https://www.digitalocean.com/community/tutorials/how-to-use-the-javascript-developer-console\">Console</a></span>.</p><p>We will use&nbsp;<code>createElement()</code>&nbsp;on the&nbsp;<code>document</code>&nbsp;object to create a new&nbsp;<code>p</code>&nbsp;element.</p><pre><code>const paragraph = document.createElement('p');\n</code></pre><p>We've created a new&nbsp;<code>p</code>&nbsp;element, which we can test out in the&nbsp;<em>Console</em>.</p><pre><code>console.log(paragraph)\n</code></pre><pre><code>Output&lt;p&gt;&lt;/p&gt;\n</code></pre><p>The&nbsp;<code>paragraph</code>&nbsp;variable outputs an empty&nbsp;<code>p</code>&nbsp;element, which is not very useful without any text. In order to add text to the element, we'll set the&nbsp;<code>textContent</code>&nbsp;property.</p><pre><code>paragraph.textContent = \"I'm a brand new paragraph.\";\nconsole.log(paragraph)\n</code></pre><pre><code>Output&lt;p&gt;I'm a brand new paragraph.&lt;/p&gt;\n</code></pre><p>A combination of&nbsp;<code>createElement()</code>&nbsp;and&nbsp;<code>textContent</code>&nbsp;creates a complete element node.</p><p>An alternate method of setting the content of the element is with the&nbsp;<code>innerHTML</code>&nbsp;property, which allows you to add HTML as well as text to an element.</p><pre><code>paragraph.innerHTML = \"I'm a paragraph with &lt;strong&gt;bold&lt;/strong&gt; text.\";\n</code></pre><p><span><span>Note:</span><br>While this will work and is a common method of adding content to an element, there is a possible&nbsp;<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML#Security_considerations\">cross-site scripting (XSS)</a>&nbsp;risk associated with using the&nbsp;<code>innerHTML</code>&nbsp;method, as inline JavaScript can be added to an element. Therefore, it is recommended to use&nbsp;<code>textContent</code>&nbsp;instead, which will strip out HTML tags.<br></span></p><p>It is also possible to create a text node with the&nbsp;<code>createTextNode()</code>&nbsp;method.</p><pre><code>const text = document.createTextNode(\"I'm a new text node.\");\nconsole.log(text)\n</code></pre><pre><code>Output\"I'm a new text node.\"\n</code></pre><p>With these methods, we've created new elements and text nodes, but they are not visible on the front end of a website until they've been inserted into the document.</p><div data-unique=\"inserting-nodes-into-the-dom\"></div><h2>Inserting Nodes into the DOM</h2><p>In order to see the new text nodes and elements we create on the front end, we will need to insert them into the&nbsp;<code>document</code>. The methods&nbsp;<code>appendChild()</code>&nbsp;and&nbsp;<code>insertBefore()</code>&nbsp;are used to add items to the beginning, middle, or end of a parent element, and&nbsp;<code>replaceChild()</code>&nbsp;is used to replace an old node with a new node.</p><table><thead><tr><th>Property/Method</th><th>Description</th></tr></thead><tbody><tr><td><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild\"><code>node.appendChild()</code></a></td><td>Add a node as the last child of a parent element</td></tr><tr><td><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore\"><code>node.insertBefore()</code></a></td><td>Insert a node into the parent element before a specified sibling node</td></tr><tr><td><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Node/replaceChild\"><code>node.replaceChild()</code></a></td><td>Replace an existing node with a new node</td></tr></tbody></table><p>To practice these methods, let's create a to-do list in HTML:</p><div title=\"todo.html\">todo.html</div><pre><code>&lt;ul&gt;\n  &lt;li&gt;Buy groceries&lt;/li&gt;\n  &lt;li&gt;Feed the cat&lt;/li&gt;\n  &lt;li&gt;Do laundry&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre><p>When you load your page in the browser, it will look like this:</p><p><img src=\"https://assets.digitalocean.com/articles/eng_javascript/dom/to-do-1.png\" alt=\"DOM Screenshot 1\"></p><p>In order to add a new item to the end of the to-do list, we have to create the element and add text to it first, as we did in the \"Creating New Nodes\" section above.</p><pre><code>// To-do list ul element\nconst todoList = document.querySelector('ul');\n\n// Create new to-do\nconst newTodo = document.createElement('li');\nnewTodo.textContent = 'Do homework';\n</code></pre><p>Now that we have a complete element for our new to-do, we can add it to the end of the list with&nbsp;<code>appendChild()</code>.</p><pre><code>// Add new todo to the end of the list\ntodoList.appendChild(newTodo);\n</code></pre><p>You can see the new&nbsp;<code>li</code>&nbsp;element has been appended to the end of the&nbsp;<code>ul</code>.</p><div title=\"todo.html\">todo.html</div><pre><code>&lt;ul&gt;\n  &lt;li&gt;Buy groceries&lt;/li&gt;\n  &lt;li&gt;Feed the cat&lt;/li&gt;\n  &lt;li&gt;Do laundry&lt;/li&gt;\n  &lt;li&gt;Do homework&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre><p><img src=\"https://assets.digitalocean.com/articles/eng_javascript/dom/to-do-2.png\" alt=\"DOM Screenshot 2\"></p><p>Maybe we have a higher priority task to do, and we want to add it to the beginning of the list. We'll have to create another element, as&nbsp;<code>createElement()</code>&nbsp;only creates one element and cannot be reused.</p><pre><code>// Create new to-do\nconst anotherTodo = document.createElement('li');\nanotherTodo.textContent = 'Pay bills';\n</code></pre><p>We can add it to the beginning of the list using&nbsp;<code>insertBefore()</code>. This method takes two arguments — the first is the new child node to be added, and the second is the sibling node that will immediately follow the new node. In other words, you're inserting the new node before the next sibling node. This will look similar to the following pseudocode:</p><pre><code>parentNode.insertBefore(newNode, nextSibling);\n</code></pre><p>For our to-do list example, we'll add the new&nbsp;<code>anotherTodo</code>&nbsp;element before the first element child of the list, which is currently the&nbsp;<code>Buy groceries</code>&nbsp;list item.</p><pre><code>// Add new to-do to the beginning of the list\ntodoList.insertBefore(anotherTodo, todoList.firstElementChild);\n</code></pre><div title=\"todo.html\">todo.html</div><pre><code>&lt;ul&gt;\n  &lt;li&gt;Pay bills&lt;/li&gt;\n  &lt;li&gt;Buy groceries&lt;/li&gt;\n  &lt;li&gt;Feed the cat&lt;/li&gt;\n  &lt;li&gt;Do laundry&lt;/li&gt;\n  &lt;li&gt;Do homework&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre><p><img src=\"https://assets.digitalocean.com/articles/eng_javascript/dom/to-do-3.png\" alt=\"DOM Screenshot 3\"></p><p>The new node has successfully been added at the beginning of the list. Now we know how to add a node to a parent element. The next thing we may want to do is replace an existing node with a new node.</p><p>We'll modify an existing to-do to demonstrate how to replace a node. The first step of creating a new element remains the same.</p><pre><code>const modifiedTodo = document.createElement('li');\nmodifiedTodo.textContent = 'Feed the dog';\n</code></pre><p>Like&nbsp;<code>insertBefore()</code>,&nbsp;<code>replaceChild()</code>&nbsp;takes two arguments — the new node, and the node to be replaced, as shown in the pseudocode below.</p><pre><code>parentNode.replaceChild(newNode, oldNode);\n</code></pre><p>We will replace the third element child of the list with the modified to-do.</p><pre><code>// Replace existing to-do with modified to-do\ntodoList.replaceChild(modifiedTodo, todoList.children[2]);\n</code></pre><div title=\"todo.html\">todo.html</div><pre><code>&lt;ul&gt;\n  &lt;li&gt;Pay bills&lt;/li&gt;\n  &lt;li&gt;Buy groceries&lt;/li&gt;\n  &lt;li&gt;Feed the dog&lt;/li&gt;\n  &lt;li&gt;Do laundry&lt;/li&gt;\n  &lt;li&gt;Do homework&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre><p><img src=\"https://assets.digitalocean.com/articles/eng_javascript/dom/to-do-4.png\" alt=\"DOM Screenshot 4\"></p><p>With a combination of&nbsp;<code>appendChild()</code>,&nbsp;<code>insertBefore()</code>, and&nbsp;<code>replaceChild()</code>, you can insert nodes and elements anywhere in the DOM.</p><div data-unique=\"removing-nodes-from-the-dom\"></div><h2>Removing Nodes from the DOM</h2><p>Now we know how to create elements, add them to the DOM, and modify existing elements. The final step is to learn to remove existing nodes from the DOM. Child nodes can be removed from a parent with&nbsp;<code>removeChild()</code>, and a node itself can be removed with&nbsp;<code>remove()</code>.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Node/removeChild\"><code>node.removeChild()</code></a></td><td>Remove child node</td></tr><tr><td><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/ChildNode/remove\"><code>node.remove()</code></a></td><td>Remove node</td></tr></tbody></table><p>Using the to-do example above, we'll want to delete items after they've been completed. If you completed your homework, you can remove the&nbsp;<code>Do homework</code>&nbsp;item, which happens to be the last child of the list, with&nbsp;<code>removeChild()</code>.</p><pre><code>todoList.removeChild(todoList.lastElementChild);\n</code></pre><div title=\"todo.html\">todo.html</div><pre><code>&lt;ul&gt;\n  &lt;li&gt;Pay bills&lt;/li&gt;\n  &lt;li&gt;Buy groceries&lt;/li&gt;\n  &lt;li&gt;Feed the dog&lt;/li&gt;\n  &lt;li&gt;Do laundry&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre><p><img src=\"https://assets.digitalocean.com/articles/eng_javascript/dom/to-do-5.png\" alt=\"DOM Screenshot 5\"></p><p>Another method could be to remove the node itself, using the&nbsp;<code>remove()</code>&nbsp;method directly on the node.</p><pre><code>// Remove second element child from todoList\ntodoList.children[1].remove();\n</code></pre><div title=\"todo.html\">todo.html</div><pre><code>&lt;ul&gt;\n  &lt;li&gt;Pay bills&lt;/li&gt;\n  &lt;li&gt;Feed the dog&lt;/li&gt;\n  &lt;li&gt;Do laundry&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre><p><img src=\"https://assets.digitalocean.com/articles/eng_javascript/dom/to-do-6.png\" alt=\"DOM Screenshot 6\"></p><p>Between&nbsp;<code>removeChild()</code>&nbsp;and&nbsp;<code>remove()</code>, you can remove any node from the DOM. Another method you may see for removing child elements from the DOM is setting the&nbsp;<code>innerHTML</code>&nbsp;property of a parent element to an empty string (<code>\"\"</code>). This is not the preferred method because it is less explicit, but you might see it in existing code.</p><div data-unique=\"conclusion\"></div><h2>Conclusion</h2><p>In this tutorial, we learned how to use JavaScript to create new nodes and elements and insert them into the DOM, and replace and remove existing nodes and elements.</p><p>At this point in the&nbsp;<a href=\"https://www.digitalocean.com/community/tutorial_series/understanding-the-dom-document-object-model\">Understanding the DOM series</a>&nbsp;you know how to access any element in the DOM, walk through any node in the DOM, and modify the DOM itself. You can now feel confident in creating basic front-end web apps with JavaScript.</p>","filePath":"pages/JavaScript/.md","_id":"FIikk20As5xgug0P","dateUpdated":1553096101059}
{"date":{"$$date":1553094974792},"title":"RxJS: Hot And Cold Observables","sourceUrl":"https://alligator.io/rxjs/hot-cold-observables/","path":"RxJs/RxJs/","category":"RxJs","tags":["RxJs"," Observable"],"author":"alligator.io","excerpt":"","dateCreated":1551456011628,"coverImage":"","type":"Post","frontmatter":"---\npath: 'RxJs/'\ndate: 'Fri Mar 01 2019 21:31:22 GMT+0530 (India Standard Time)'\ntitle: 'RxJS: Hot And Cold Observables'\ntags: ['RxJs','Observable']\ncategory: 'RxJs'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://alligator.io/rxjs/hot-cold-observables/'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Observables are known as either&nbsp;<span>hot</span>&nbsp;or&nbsp;<span>cold</span>, depending on the nature of the data producer. Here we’ll go over the differences, why it matters, and how to properly manage both types of observables.</p><h2><a href=\"https://alligator.io/rxjs/hot-cold-observables/#cold-observables\" aria-label=\"Anchor\" data-anchorjs-icon=\"\"></a>Cold Observables</h2><p>Cold observables&nbsp;are observables where the data producer is created by the observable itself. For example, observables created using the&nbsp;<span>of</span>,&nbsp;<span>from</span>,&nbsp;<span>range</span>,&nbsp;<span>interval</span>&nbsp;and&nbsp;<span>timer</span>&nbsp;operators will be cold. The data is created from within the observable itself, and there truly is not data being produced until the observable is subscribed to.</p><p>Here’s an example of a very simple cold observable created using the&nbsp;<span>from</span>operator:</p><pre><code>const obs$ = Rx.Observable\n  .from(['🍕', '🍪', '🍔', '🌭', '🍟'])\n  .map(val =&gt; {\n    return `Miam ${val}!`;\n  });</code></pre><p>When a cold observable has multiple subscribers, the whole data stream is re-emitted for each subscriber. Each subscriber becomes independent and gets its own stream of data:</p><pre><code>const sub1 = obs$.subscribe(val =&gt; {\n  console.log('From sub1:', val);\n}, null, () =&gt; {\n  console.log('done ----------------');\n});\n\nconst sub2 = obs$.subscribe(val =&gt; {\n  console.log('From sub2:', val);\n}, null, () =&gt; {\n  console.log('done ----------------');\n});</code></pre><p>Here’s the outputted result:</p><pre><code>From sub1: Miam 🍕!\nFrom sub1: Miam 🍪!\nFrom sub1: Miam 🍔!\nFrom sub1: Miam 🌭!\nFrom sub1: Miam 🍟!\ndone ----------------\nFrom sub2: Miam 🍕!\nFrom sub2: Miam 🍪!\nFrom sub2: Miam 🍔!\nFrom sub2: Miam 🌭!\nFrom sub2: Miam 🍟!\ndone ----------------\n</code></pre><h3>Making a cold observable hot using the&nbsp;<span>share</span>&nbsp;operator</h3><p>Sometimes it’ll make sense to make a cold observable behave as a hot observable and have the same stream shared between multiple subscribers. This is especially true if you happen to have a cold observable that fetches data from an API. You’ll want to limit the amount of network requests and share the stream will all subscribers.</p><p>Here for example, we poll the Hacker News API every 4 seconds for the latest news IDs. The data source, which is the interval, is created by the observable, so the observable itself is cold:</p><pre><code>const endpoint = 'https://hacker-news.firebaseio.com/v0/newstories.json?print=pretty';\n\nconst obs$ = Rx.Observable\n  .interval(4000)\n  .switchMap(() =&gt; {\n    return Rx.Observable.ajax({ url: endpoint, responseType: 'json', method: 'GET' });\n  })\n  .pluck('response')\n  .map(res =&gt; res.filter((_, index) =&gt; index &lt; 6));</code></pre><p>If we add multiple subscribers to this observables, network requests will be made by each subscriber:</p><pre><code>const sub1 = obs$.subscribe(val =&gt; {\n  console.log('Sub1:', val);\n});\n\nsetTimeout(() =&gt; {\n  const sub2 = obs$.subscribe(val =&gt; {\n    console.log('Sub2:', val);\n  });\n}, 10000);</code></pre><p>All we have to do to fix this is add the&nbsp;<span>share</span>&nbsp;operator at the end of our observable pipeline, and this will effectively turn our observable into a hot observable:</p><pre><code>const obs$ = Rx.Observable\n  .interval(4000)\n  .switchMap(() =&gt; {\n    return Rx.Observable.ajax({ url: endpoint, responseType: 'json', method: 'GET' });\n  })\n  .pluck('response')\n  .map(res =&gt; res.filter((_, index) =&gt; index &lt; 6))\n  .share();</code></pre><p>With this, multiple subscribers will share the same stream.</p><p>The&nbsp;<span>share</span>&nbsp;operator is known as a multicast operator.&nbsp;Share&nbsp;also manages the underlining subscriptions and disconnects when all the subscribers stop listening. It then restart the stream is a new subscriber subscribes agin. Other multicast operators include the&nbsp;<span>publish</span>,&nbsp;<span>publishReplay</span>and&nbsp;<span>publishLast</span>&nbsp;operators.</p><hr><p>Note that in the above example, we create the 2nd subscriber after a delay of 10 seconds. Values that have already been emitted once won’t be repeated for subscribers that arrive late to the party. For example, if we only take the first 4 values:</p><pre><code>const obs$ = Rx.Observable\n  .interval(4000)\n  .switchMap(() =&gt; {\n    return Rx.Observable.ajax({ url: endpoint, responseType: 'json', method: 'GET' });\n  })\n  .pluck('response')\n  .map(res =&gt; res.filter((_, index) =&gt; index &lt; 6))\n  .take(4)\n  .share();</code></pre><p>You’ll notice that the 2nd subscriber,&nbsp;<span>sub2</span>, only logs out 2 times because it misses the first emitted values.</p><h2><a href=\"https://alligator.io/rxjs/hot-cold-observables/#hot-observables\" aria-label=\"Anchor\" data-anchorjs-icon=\"\"></a>Hot Observables</h2><p>Hot observables, on other hand, have their data producer outside the observable itself. These observables are closing over external data producers. For example, observables created with the&nbsp;<span>fromEvent</span>&nbsp;operator for either user events (clicks, mouse moves,…) or WebSocket events are hot observables. The data is being produced regardless of if there’s a subscriber or not. If there’s no subscriber when the data is being produced, the data is simply lost.</p><p>Here’s a simple hot observable of mouse clicks:</p><pre><code>const obs$ = Rx.Observable.fromEvent(document, 'click')\n  .map(event =&gt; ({ clientX: event.clientX, clientY: event.clientY }));</code></pre><p>Now let’s create two subscribers for it:</p><pre><code>const sub1 = obs$.subscribe(val =&gt; {\n  console.log('Sub1:', val);\n});\n\nsetTimeout(() =&gt; {\n  console.log('Start sub2');\n  const sub2 = obs$.subscribe(val =&gt; {\n    console.log('Sub2:', val);\n  });\n}, 4000);</code></pre><p>Here both subscribers share the same stream, but the second subscription misses out on the values emitted before 4 seconds.</p><h3>Making a hot observable cold</h3><p>To transform a hot observable into a cold one, the observable has to become the data producer. In the following example, we create an observable factory that returns a new observable for each subscription. This way, each subscriber will get its own independent stream:</p><pre><code>const obsFactory = () =&gt; Rx.Observable.fromEvent(document, 'click')\n  .map(event =&gt; ({ clientX: event.clientX, clientY: event.clientY }));\n\n\nconst sub1 = obsFactory().subscribe(val =&gt; {\n  console.log('Sub1:', val);\n});\n\nsetTimeout(() =&gt; {\n  console.log('Start sub2');\n  const sub2 = obsFactory().subscribe(val =&gt; {\n    console.log('Sub2:', val);\n  });\n}, 4000);</code></pre><h2><a href=\"https://alligator.io/rxjs/hot-cold-observables/#warm-observables\" aria-label=\"Anchor\" data-anchorjs-icon=\"\"></a>Warm Observables?</h2><p>As Ben Lesh mentioned in&nbsp;<a href=\"https://medium.com/@benlesh/hot-vs-cold-observables-f8094ed53339\">this excellent post</a>, there is perhaps a third category of observables, warm observables, where data starts being emitted only after the 1st subscription, but where the data is still shared between multiple observables.</p>","filePath":"pages/RxJs/.md","_id":"FvsBGTASlbb2MEha","dateUpdated":1553094974792}
{"date":"2018-11-27T11:28:03.984Z","title":"Angular — Testing Guide (v4+)","sourceUrl":"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0","path":"Angular/","category":"Angular","tags":["Angular"," TDD"," Unit Testing"],"author":"Gerard Sans","excerpt":"Nine easy-to-follow examples using TestBed, fixtures, async and fakeAsync/tick.","dateCreated":1543317745251,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Angular/'\ndate: 'Tue Nov 27 2018 16:58:03 GMT+0530 (India Standard Time)'\ntitle: 'Angular — Testing Guide (v4+)'\ntags: ['Angular','TDD','Unit Testing']\ncategory: 'Angular'\ncategoryColor: '#F3C610'\nexcerpt: 'Nine easy-to-follow examples using TestBed, fixtures, async and fakeAsync/tick.'\ncoverImage: ''\nsourceUrl: 'https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0'\ntype: 'Post'\n---\n    ","htmlCode":"<p>In this post, we want to cover the most&nbsp;<span>common unit tests</span>&nbsp;to use for&nbsp;<span>Angular Applications</span>, like: Components, Services, Http and Pipes; but also some less known areas like: Directives, the Router or Observables. We will provide examples designed so you can use them as a quick reference. Don’t miss out the&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#8ea4\" data-href=\"#8ea4\"><span>Testing Checklist</span></a>&nbsp;to help you while creating your own tests.</p><p>Testing has been improved quite a lot from RC to final and even more after moving to NgModule. The Angular Core Team has worked hard to reduce boilerplate and be able to use not only Jasmine but other tests frameworks like Mocha.</p><p>There are few new APIs you should know about to get the best out of your tests. We will cover:</p><ul><li><span>Brief introduction to Jasmine</span>:&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#b343\" data-href=\"#b343\">suites</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#b343\" data-href=\"#b343\">specs</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#b343\" data-href=\"#b343\">expectations</a>&nbsp;and&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#b343\" data-href=\"#b343\">matchers</a>.</li><li><span>Testing in Angular</span>:&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#e122\" data-href=\"#e122\">setup</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#4625\" data-href=\"#4625\">dependency injection</a>&nbsp;and&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#8ea4\" data-href=\"#8ea4\">testing checklist</a>.</li><li><span>Testing Utilities</span>:&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#4625\" data-href=\"#4625\">TestBed</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#4625\" data-href=\"#4625\">inject</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#8d61\" data-href=\"#8d61\">fixtures</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#4625\" data-href=\"#4625\">async</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#6134\" data-href=\"#6134\">fakeAsync/tick</a>&nbsp;and jasmine.done.</li><li><span>Testing Examples</span>:&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#8d61\" data-href=\"#8d61\">Components</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#d889\" data-href=\"#d889\">Services</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#b1fc\" data-href=\"#b1fc\">Http</a>&nbsp;and&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#f7c7\" data-href=\"#f7c7\">MockBackend</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#6134\" data-href=\"#6134\">Directives</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#2626\" data-href=\"#2626\">Pipes</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#97c2\" data-href=\"#97c2\">Routes</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#9fa4\" data-href=\"#9fa4\">Observables</a>&nbsp;and&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-testing-guide-a485b6cb1ef0#3882\" data-href=\"#3882\">EventEmitter</a>.</li></ul><p>To test, all&nbsp;<span>26 specs</span>&nbsp;or change the code, you can use this&nbsp;<a href=\"https://plnkr.co/edit/jm6T17qPbzM8abmRMckw?p=preview\" data-href=\"https://plnkr.co/edit/jm6T17qPbzM8abmRMckw?p=preview\" rel=\"noopener nofollow\" target=\"_blank\">Plunker</a>.</p><div><a href=\"http://slides.com/gerardsans/ng-stockholm-testing-recipes\" data-href=\"http://slides.com/gerardsans/ng-stockholm-testing-recipes\" title=\"http://slides.com/gerardsans/ng-stockholm-testing-recipes\" rel=\"nofollow\"><span>Angular testing recipes and best practices (v2+) by Gerard Sans</span><br><span>In this talk, we will cover the most common testing scenarios to use while developing rock solid Angular Applications…</span>slides.com</a><a href=\"http://slides.com/gerardsans/ng-stockholm-testing-recipes\" data-media-id=\"449decf372a0a7085eff1409c37bf581\" data-thumbnail-img-id=\"0*eOZH5p6l5LJEZifP.\"></a></div><p>Find the latest Angular content following my feed at&nbsp;<a href=\"https://twitter.com/intent/user?screen_name=gerardsans\" data-href=\"https://twitter.com/intent/user?screen_name=gerardsans\" rel=\"noopener nofollow\" target=\"_blank\">@gerardsans</a>.</p><blockquote>We used&nbsp;<a href=\"http://jasmine.github.io/\" data-href=\"http://jasmine.github.io/\" rel=\"nofollow noopener noopener nofollow noopener\" target=\"_blank\">Jasmine</a>&nbsp;but since Angular final you can also use other testing frameworks like&nbsp;<a href=\"https://mochajs.org/\" data-href=\"https://mochajs.org/\" rel=\"noopener nofollow\" target=\"_blank\">Mocha</a>.</blockquote><h3>Introduction to&nbsp;Jasmine</h3><p>Jasmine is an open source testing framework from&nbsp;<a href=\"http://pivotal.io/labs\" data-href=\"http://pivotal.io/labs\" rel=\"nofollow noopener\" target=\"_blank\">Pivotal Labs</a>&nbsp;that uses behaviour-driven notation resulting in a fluent and improved testing experience.</p><h4>Main concepts</h4><ul><li>Suites — <span><em>describe(string, function)</em></span><em>&nbsp;</em>functions, take a title and a function containing one or more specs.</li><li>Specs — <span><em>it(string, function)</em></span>&nbsp;functions, take a title and a function containing one or more expectations.</li><li>Expectations — are assertions that evaluate to&nbsp;<em>true</em>&nbsp;or&nbsp;<em>false</em>. Basic syntax reads&nbsp;<span><em>expect(actual).toBe(expected)</em></span></li><li>Matchers — are predefined helpers for common assertions. Eg:&nbsp;<span><em>toBe(expected)</em></span>,&nbsp;<span><em>toEqual(expected)</em></span>. Find a complete list&nbsp;<a href=\"https://github.com/JamieMason/Jasmine-Matchers\" data-href=\"https://github.com/JamieMason/Jasmine-Matchers\" rel=\"nofollow noopener\" target=\"_blank\">here</a>.</li></ul><blockquote>Note that&nbsp;<span>.toEqual()</span>&nbsp;does a deep comparison while&nbsp;<span>.toBe()</span>&nbsp;is just a reference equality.</blockquote><h4>Setup and&nbsp;teardown</h4><p>Jasmine offers four handlers to add our setup and teardown code:&nbsp;<span><em>beforeEach</em></span>,&nbsp;<span><em>afterEach</em></span>&nbsp;executed for each spec and&nbsp;<span><em>beforeAll</em></span>,&nbsp;<span><em>afterAll</em></span>executed once per suite.</p><blockquote>use beforeEach and afterEach to do changes before and after each spec</blockquote><p>A good practice to avoid code duplication on our specs is to refactor repetitive code into the setup.</p><h3>Testing in&nbsp;Angular</h3><h4>Testing Setup</h4><p>There are few options to setup your environment. You can use Jasmine’s&nbsp;<em>SpecRunner.html</em>&nbsp;from the&nbsp;<a href=\"https://github.com/pivotal/jasmine/releases\" data-href=\"https://github.com/pivotal/jasmine/releases\" rel=\"nofollow noopener\" target=\"_blank\">standalone distribution</a>&nbsp;to start or create your own. You can also integrate it with a test runner like&nbsp;<a href=\"https://karma-runner.github.io/\" data-href=\"https://karma-runner.github.io\" rel=\"nofollow noopener\" target=\"_blank\">Karma</a>. We are not going to cover all combinations as we are more interested in the actual tests.</p><blockquote>This setup is just for reference and will only work with Plunker.</blockquote><pre><code>&lt;!-- Jasmine dependencies --&gt;<br>&lt;link href=\"https://cdnjs.cloudflare.com/ajax/libs/jasmine/2.4.1/jasmine.css\" /&gt;<br>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jasmine/2.4.1/jasmine.js\"&gt;&lt;/script&gt;<br>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jasmine/2.4.1/jasmine-html.js\"&gt;&lt;/script&gt;<br>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jasmine/2.4.1/boot.js\"&gt;&lt;/script&gt;<br><br>&lt;!-- Angular dependencies --&gt;<br>&lt;script src=\"https://unpkg.com/zone.js/dist/zone.js\"&gt;&lt;/script&gt;<br>&lt;script src=\"https://unpkg.com/zone.js/dist/long-stack-trace-zone.js\"&gt;&lt;/script&gt;<br>&lt;script src=\"https://unpkg.com/reflect-metadata@0.1.3/Reflect.js\"&gt;&lt;/script&gt;<br>&lt;script src=\"https://unpkg.com/systemjs@0.19.31/dist/system.js\"&gt;&lt;/script&gt;<br><br>&lt;!-- Angular testing dependencies --&gt;<br>&lt;script src=\"https://unpkg.com/zone.js/dist/proxy.js?main=browser\"&gt;&lt;/script&gt;<br>&lt;script src=\"https://unpkg.com/zone.js/dist/sync-test.js?main=browser\"&gt;&lt;/script&gt;<br>&lt;script src=\"https://unpkg.com/zone.js/dist/jasmine-patch.js?main=browser\"&gt;&lt;/script&gt;<br>&lt;script src=\"https://unpkg.com/zone.js@0.6.25/dist/async-test.js\"&gt;&lt;/script&gt;<br>&lt;script src=\"https://unpkg.com/zone.js/dist/fake-async-test.js?main=browser\"&gt;&lt;/script&gt;<br><br>&lt;script src=\"config.js\"&gt;&lt;/script&gt;<br>&lt;script&gt;<br>  //load all dependencies at the same time<br>  Promise.all([<br>    //required to test on browser<br>    System.import('src/setup.spec'),<br>    //specs<br>    System.import('src/languagesService.spec'),<br>    ...<br>  ]).then(function(modules) {<br>    //manually trigger Jasmine test-runner<br>    window.onload();<br>  }).catch(console.error.bind(console));<br>&lt;/script&gt;</code></pre><p>We load Jasmine dependencies followed by Angular ones. We are using a&nbsp;<span>System.js</span>&nbsp;and&nbsp;<span>TypeScript</span>&nbsp;setup. We use&nbsp;<em>Promise.all()</em>&nbsp;to load our specs in one go and, once all specs are available, we trigger Jasmine test-runner manually by calling&nbsp;<span>onload</span>.</p><h4>Dependency Injection (DI)</h4><p><span>TestBed</span>, similarly to @NgModule helps us to set up the dependencies for our tests. We call&nbsp;<span>TestBed.configureTestingModule</span>&nbsp;passing our configuration. This information will then be used to resolve any dependencies. We can see an example below:</p><pre>@NgModule({<br>  declarations: [ <span>ComponentToTest</span> ] <br>  providers: [ <span>MyService</span> ]<br>}) <br>class AppModule { }</pre><pre>TestBed.configureTestingModule({<br>  declarations: [ <span>ComponentToTest</span> ],<br>  providers: [ <span>MyService</span> ]  <br>});</pre><pre><code>//get instance from TestBed (root injector)<br>let service = TestBed.get(</code><span>MyService</span><code>);</code></pre><p><span>inject</span>, allows us to get dependencies at the TestBed level.</p><pre>it('should return ...', <span>inject</span>([MyService], service =&gt; { <br>  service.foo();<br>}));</pre><p><span>Component injector</span>, allows us to get a dependency at the Component level.</p><pre>@Component({ <br>  providers: [ <span>MyService</span> ] <br>}) <br>class <span>ComponentToTest</span> { }</pre><pre><code>let fixture = TestBed.createComponent(</code><span>ComponentToTest</span><code>);<br>let service = fixture.debugElement.injector.get(</code><span>MyService</span><code>);</code></pre><p>For dependencies defined at the Component level we need to use the Component injector as shown above. TestBed.get or inject won’t work.</p><p>Let’s see how we would use&nbsp;<span>TestBed</span>&nbsp;with the&nbsp;<em>LanguagesService</em>&nbsp;Component&nbsp;:</p><pre><code>describe('Service: LanguagesService', () =&gt; {<br>  beforeEach(() =&gt; TestBed.configureTestingModule({<br>    providers: [ LanguagesService ]<br>  }));<br>  <br>  it('should return available languages', inject([LanguagesService], service =&gt; {<br>    expect(service.get()).toContain('en');<br>  }));<br>})</code></pre><p>First we load the dependencies required for our tests with&nbsp;<span>TestBed.configureTestingModule</span>. Then on our spec we use&nbsp;<a href=\"https://angular.io/docs/ts/latest/api/testing/inject-function.html\" data-href=\"https://angular.io/docs/ts/latest/api/testing/inject-function.html\" rel=\"nofollow noopener\" target=\"_blank\"><em>inject</em></a>&nbsp;to automatically instantiate each dependency.</p><p>We can now refactor the&nbsp;<em>inject</em>&nbsp;so we don’t repeat it for each spec.</p><pre><code>describe('Service: LanguagesService', () =&gt; {<br>  let service;<br><br>  beforeEach(() =&gt; TestBed.configureTestingModule({<br>    providers: [ LanguagesService ]<br>  }));<br><br>  beforeEach(inject([LanguagesService], s =&gt; {<br>    service = s;<br>  }));<br><br>  it('should return available languages', () =&gt; {<br>    expect(service.get()).toContain('en');<br>  });<br>});</code></pre><p>Let’s see two examples of instantiating a Component. The first example, is synchronous and creates a fixture containing an instance of&nbsp;<span>MyTestComponent</span>.</p><pre><code>// synchronous<br>  beforeEach(() =&gt; {<br>    fixture = TestBed.createComponent(<span>MyTestComponent</span>);<br>  });</code></pre><p>Second example, is asynchronous<span>,</span>&nbsp;as is using external templates and css, requiring XHR calls.</p><pre><code>// asynchronous <br>  beforeEach(<span>async</span>(() =&gt; {<br>    TestBed.configureTestingModule({<br>      declarations: [ <span>MyTestComponent</span> ],<br>    }).<span>compileComponents</span>(); // compile external templates and css<br>  }));</code></pre><p>We can use&nbsp;<a href=\"https://angular.io/docs/ts/latest/api/core/testing/index/async-function.html\" data-href=\"https://angular.io/docs/ts/latest/api/core/testing/index/async-function.html\" rel=\"nofollow noopener\" target=\"_blank\"><em>async</em></a><em>&nbsp;</em>when dependencies involve asynchronous handling. This will internally create a zone and deal with any asynchronous processing.</p><blockquote>Depending on your build setup your templates and css may be all inlined so you can safely use the synchronous approach</blockquote><h4>Testing Checklist</h4><ul><li><span>Which kind of test</span>?&nbsp;<a href=\"https://angular.io/docs/ts/latest/guide/testing.html#!#isolated-unit-tests\" data-href=\"https://angular.io/docs/ts/latest/guide/testing.html#!#isolated-unit-tests\" rel=\"nofollow noopener\" target=\"_blank\">Isolated</a>,&nbsp;<a href=\"https://angular.io/docs/ts/latest/guide/testing.html#!#shallow-component-test\" data-href=\"https://angular.io/docs/ts/latest/guide/testing.html#!#shallow-component-test\" rel=\"nofollow noopener\" target=\"_blank\">shallow</a>&nbsp;or&nbsp;<a href=\"https://vsavkin.com/three-ways-to-test-angular-2-components-dcea8e90bd8d\" data-href=\"https://vsavkin.com/three-ways-to-test-angular-2-components-dcea8e90bd8d\" rel=\"nofollow noopener\" target=\"_blank\">integration Test</a>.</li><li><span>Can I use Mocks, Stubs or Spies?&nbsp;</span>Dependencies should be covered by their own tests. Using them can boost your tests without losing efficacy.</li><li><span>Sync or Async</span>? Does your test makes asynchronous calls? Uses XHR, Promises, Observables, etc. Is the Component using TemplateUrl or styleUrls or inline? Make sure you are using the corresponding APIs.</li></ul><p>Let’s see how we can test the different building blocks of our application. We are going to skip all required&nbsp;<span><em>imports</em></span>&nbsp;for brevity. We added notes when necessary. They can be found&nbsp;<a href=\"https://plnkr.co/edit/jm6T17qPbzM8abmRMckw?p=preview\" data-href=\"https://plnkr.co/edit/jm6T17qPbzM8abmRMckw?p=preview\" rel=\"nofollow noopener\" target=\"_blank\">here</a>.</p><h3>Testing Examples</h3><h4>Testing a Component</h4><p>Let’s take a simple component that renders a&nbsp;<em>greeting&nbsp;</em>message using an&nbsp;<a href=\"https://angular.io/docs/ts/latest/api/core/Input-var.html\" data-href=\"https://angular.io/docs/ts/latest/api/core/Input-var.html\" rel=\"nofollow noopener\" target=\"_blank\">@<em>Input()</em></a>&nbsp;property.</p><pre><code>// Usage:    &lt;greeter name=\"Joe\"&gt;&lt;/greeter&gt; <br>// Renders:  &lt;h1&gt;Hello Joe!&lt;/h1&gt;<br>@Component({<br>  selector: 'greeter',<br>  template: `&lt;h1&gt;Hello {{name}}!&lt;/h1&gt;`<br>})<br>export class Greeter { <br>  @Input() name;<br>}</code></pre><p>To test this component we will use a common setup using&nbsp;<em>TestBed</em>.</p><blockquote>use TestBed to load the corresponding dependencies so they are available during your&nbsp;tests</blockquote><p>A common practice is to use&nbsp;<em>beforeEach&nbsp;</em>to refactor our tests. By doing it, we avoid having to repeat some code like&nbsp;<em>inject&nbsp;</em>for each test<em>.&nbsp;</em>This will also simplify our specs.</p><pre><code>describe('Component: Greeter', () =&gt; {<br>  let fixture, greeter, element, de;<br>  <br>  //setup<br>  beforeEach(() =&gt; {<br>    TestBed.configureTestingModule({<br>      declarations: [ Greeter ]<br>    });<br><br>    fixture = TestBed.createComponent(Greeter);<br>    greeter = fixture.componentInstance;  // to access properties and methods<br>    element = fixture.nativeElement;      // to access DOM element<br>    de = fixture.debugElement;            // test helper<br>  });<br>  <br>  //specs<br>  it('should render `Hello World!`', async(() =&gt; {<br>    greeter.name = 'World';<br>    //trigger change detection<br>    fixture.detectChanges();<br>    fixture.whenStable().then(() =&gt; { <br>      expect(element.querySelector('h1').innerText).toBe('Hello World!');<br>      expect(de.query(By.css('h1')).nativeElement.innerText).toBe('Hello World!');<br>    });<br>  }));<br>}) </code></pre><p>We used&nbsp;<em>TestBed.createComponent</em>&nbsp;to create an instance of our&nbsp;<em>Greeter</em>component. The component instance will be accessible within a&nbsp;<a href=\"https://github.com/angular/angular/blob/a7e9bc97f6a19a2b47b962bd021cb91346a44baa/modules/angular2/src/testing/test_component_builder.ts#L31\" data-href=\"https://github.com/angular/angular/blob/a7e9bc97f6a19a2b47b962bd021cb91346a44baa/modules/angular2/src/testing/test_component_builder.ts#L31\" rel=\"nofollow noopener\" target=\"_blank\">fixture</a>. This is its main API:</p><pre>abstract class <a href=\"https://github.com/angular/angular/blob/a7e9bc97f6a19a2b47b962bd021cb91346a44baa/modules/angular2/src/testing/test_component_builder.ts#L31\" data-href=\"https://github.com/angular/angular/blob/a7e9bc97f6a19a2b47b962bd021cb91346a44baa/modules/angular2/src/testing/test_component_builder.ts#L31\" rel=\"nofollow noopener\" target=\"_blank\">ComponentFixture</a> {<br>  debugElement;       // test helper <br>  componentInstance;  // to access properties and methods<br>  nativeElement;      // to access DOM element<br>  detectChanges();    // trigger component change detection<br>}</pre><p>We used the&nbsp;<em>name</em>&nbsp;property to set up a value, trigger change detection with&nbsp;<span>detectChanges</span>&nbsp;and check the expected result when all asynchronous calls have ended using&nbsp;<span>whenStable</span>. In order to access the rendered text we used two different APIs filtering by a CSS selector (lines 22–23).</p><blockquote>Other queries for debugElement are: query(By.all()) query(By.directive(MyDirective))</blockquote><h4>Testing a&nbsp;Service</h4><p><em>LanguagesService</em>&nbsp;has only one method that returns an array of available languages for the application.</p><pre><code>//a simple service<br>export class LanguagesService {<br>  get() {<br>    return ['en', 'es', 'fr'];<br>  }<br>}</code></pre><p>Similar to our previous example we instantiate the service using&nbsp;<em>beforeEach.&nbsp;</em>As we said, this is<em>&nbsp;</em>a good practice even if we only have one spec. On this occasion, we are checking each individual language and the total count.</p><pre><code>describe('Service: LanguagesService', () =&gt; {<br>  let service;<br><br>  beforeEach(() =&gt; TestBed.configureTestingModule({<br>    providers: [ LanguagesService ]<br>  }));<br><br>  beforeEach(inject([LanguagesService], s =&gt; {<br>    service = s;<br>  }));<br><br>  it('should return available languages', () =&gt; {<br>    let languages = service.get();<br>    expect(languages).toContain('en');<br>    expect(languages).toContain('es');<br>    expect(languages).toContain('fr');<br>    expect(languages.length).toEqual(3);<br>  });<br>});</code></pre><h4>Testing using&nbsp;Http</h4><p>We usually don’t want to make HTTP calls during our tests but we are going to show it as a reference. We have replaced our initial service,&nbsp;<em>LanguageService&nbsp;</em>for&nbsp;<em>LanguageServiceHttp.</em></p><pre><code>export class LanguagesServiceHttp {<br>  constructor(private http:Http) { }<br>  <br>  get(){<br>    return this.http.get('api/languages.json')<br>      .map(response =&gt; response.json());<br>  }<br>}</code></pre><p>In this case it uses&nbsp;<em>http.get()</em>&nbsp;to read a JSON file. We then used&nbsp;<a href=\"https://github.com/ReactiveX/RxJS/blob/master/src/operator/map.ts\" data-href=\"https://github.com/ReactiveX/RxJS/blob/master/src/operator/map.ts\" rel=\"nofollow noopener\" target=\"_blank\"><em>Observable.map()</em></a><em>&nbsp;</em>to transform the response into the final result using&nbsp;<em>json().</em></p><p>Our test looks very similar to the previous one. The main difference is the use of an asynchronous test as we did with the component due to the subscribe.</p><pre><code>describe('Service: LanguagesServiceHttp', () =&gt; {<br>  let service;<br>  <br>  //setup<br>  beforeEach(() =&gt; TestBed.configureTestingModule({<br>    imports: [ HttpModule ],<br>    providers: [ LanguagesServiceHttp ]<br>  }));<br>  <br>  beforeEach(inject([LanguagesServiceHttp], s =&gt; {<br>    service = s;<br>  }));<br>  <br>  //specs<br>  it('should return available languages', async(() =&gt; {<br>    service.get().subscribe(x =&gt; { <br>      expect(x).toContain('en');<br>      expect(x).toContain('es');<br>      expect(x).toContain('fr');<br>      expect(x.length).toEqual(3);<br>    });<br>  }));<br>}) </code></pre><blockquote>Note you can’t use&nbsp;<span>fakeAsync</span>&nbsp;if there are XHR calls involved. This is by&nbsp;<a href=\"https://github.com/angular/angular/issues/8280\" data-href=\"https://github.com/angular/angular/issues/8280\" rel=\"nofollow noopener\" target=\"_blank\">design</a>.</blockquote><p><em>http.get()</em>&nbsp;returns an Observable that we can subscribe to. We will cover Observables in more detail later on.</p><h4>Testing using MockBackend</h4><p>A more sensible approach is replacing HTTP calls with a&nbsp;<em>MockBackend</em>. In order to do this, we can use&nbsp;<em>provide&nbsp;</em>(line 10)<em>.&nbsp;</em>This<em>&nbsp;</em>will allow us to mock our responses and avoid hitting the real backend, therefore, boosting our tests.</p><pre><code>describe('MockBackend: LanguagesServiceHttp', () =&gt; {<br>  let mockbackend, service;<br><br>  //setup<br>  beforeEach(() =&gt; {<br>    TestBed.configureTestingModule({<br>      imports: [ HttpModule ],<br>      providers: [<br>        LanguagesServiceHttp,<br>        { provide: XHRBackend, useClass: MockBackend }<br>      ]<br>    })<br>  });<br>    <br>  beforeEach(inject([LanguagesServiceHttp, XHRBackend], (_service, _mockbackend) =&gt; {<br>    service = _service;<br>    mockbackend = _mockbackend;<br>  }));<br><br>  //specs<br>  it('should return mocked response (sync)', () =&gt; {<br>    let response = [\"ru\", \"es\"];<br>    mockbackend.connections.subscribe(connection =&gt; {<br>      connection.mockRespond(new Response(new ResponseOptions({<br>        body: JSON.stringify(response)<br>      }));<br>    });<br>    service.get().subscribe(languages =&gt; {<br>      expect(languages).toContain('ru');<br>      expect(languages).toContain('es');<br>      expect(languages.length).toBe(2);<br>    });<br>  });  <br>})</code></pre><p>On our test we build our mocked response (lines 23–25) so when we finally make the call to our service it gets the expected results.</p><blockquote><span data-creator-ids=\"9530b046d2ac\">Note: we don’t need async as MockBackend behaves synchronously. Thanks to<a href=\"https://medium.com/u/32a0d1331713\" data-href=\"https://medium.com/u/32a0d1331713\" data-anchor-type=\"2\" data-user-id=\"32a0d1331713\" data-action-value=\"32a0d1331713\" data-action=\"show-user-card\" data-action-type=\"hover\" target=\"_blank\">Pascal Precht ʕ•̫͡•ʔ</a>&nbsp;for pointing it out.</span></blockquote><h4>Testing a Directive</h4><p>Directives in Angular are a specific type of component with usually no accompanying view. We will use an&nbsp;<a href=\"https://angular.io/docs/ts/latest/guide/attribute-directives.html\" data-href=\"https://angular.io/docs/ts/latest/guide/attribute-directives.html\" rel=\"nofollow noopener nofollow noopener\" target=\"_blank\">attribute directive</a>,&nbsp;<em>logClicks,</em>&nbsp;that logs how many clicks we do on the&nbsp;<span><em>host element</em></span>&nbsp;so you can grasp the idea.</p><pre><code>// Example: &lt;div log-clicks&gt;&lt;/div&gt;<br>@Directive({<br>  selector: \"[log-clicks]\"<br>})<br>export class logClicks {<br>  counter = 0;<br>  @Output() changes = new EventEmitter();<br>  <br>  @HostListener('click', ['$event.target'])<br>  clicked(target) { <br>    console.log(`Click on [${target}]: ${++this.counter}`);<br>    //we use emit as next is marked as deprecated<br>    this.changes.emit(this.counter);<br>  }<br>}</code></pre><p>In order to test this directive, we decided to create a&nbsp;<em>Container</em>&nbsp;component. We will set it up so it will act as our host reproducing the events emitted by our directive.</p><pre><code>@Component({ <br>  selector: 'container',<br>  template: `&lt;div log-clicks (changes)=\"changed($event)\"&gt;&lt;/div&gt;`,<br>  directives: [logClicks]<br>})<br>export class Container {  <br>  @Output() changes = new EventEmitter();<br>  <br>  changed(value){<br>    this.changes.emit(value);<br>  }<br>}<br><br>describe('Directive: logClicks', () =&gt; {<br>  let fixture;<br>  let container;<br>  let element;  <br><br>  //setup<br>  beforeEach(() =&gt; {<br>    TestBed.configureTestingModule({<br>      declarations: [ Container, logClicks ]<br>    });<br><br>    fixture = TestBed.createComponent(Container);<br>    container = fixture.componentInstance; // to access properties and methods<br>    element = fixture.nativeElement;       // to access DOM element<br>  });<br>  <br>  //specs<br>  it('should increment counter', fakeAsync(() =&gt; {<br>    let div = element.querySelector('div');<br>    //set up subscriber<br>    container.changes.subscribe(x =&gt; { <br>      expect(x).toBe(1);<br>    });<br>    //trigger click on container<br>    div.click();<br>    //execute all pending asynchronous calls<br>    tick();<br>  }));<br>}) </code></pre><p>We used&nbsp;<em>beforeEach</em>&nbsp;to separate the logic for creating the component from the tests. This part can now be used for all specs.</p><p>To trigger the&nbsp;<span>click</span>&nbsp;on the container we used the DOM API (recommended). We could also use&nbsp;<em>fixture.debugElement.triggerEventHandler(‘click’).</em></p><p>In this test, we used&nbsp;<span>fakeAsync</span>&nbsp;and&nbsp;<span>tick</span>. Using&nbsp;<span>fakeAsync</span>&nbsp;all asynchronous processing will be paused until we call&nbsp;<span>tick</span>. This gives us greater control and avoids having to resort to nested blocks of Promises or Observables.</p><blockquote>Using fakeAsync/tick we get greater control of the asynchronous code although it can’t be used with&nbsp;XHR.</blockquote><h4>Testing a&nbsp;Pipe</h4><p>Pipes are functions that can transform input data into a user-readable format. We will write a custom capitalise pipe,&nbsp;<em>capitalise,&nbsp;</em>using the standard&nbsp;<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/toUpperCase\" data-href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/toUpperCase\" rel=\"nofollow noopener\" target=\"_blank\"><em>String.toUpperCase</em></a><em>()</em>. This is only for simplicity as angular has its own&nbsp;<a href=\"https://angular.io/docs/ts/latest/api/common/UpperCasePipe-class.html\" data-href=\"https://angular.io/docs/ts/latest/api/common/UpperCasePipe-class.html\" rel=\"nofollow noopener\" target=\"_blank\"><em>UpperCasePipe</em></a><em>&nbsp;</em>implementation.</p><pre><code>import {Pipe, PipeTransform} from '@angular/core';<br>@Pipe({<br>  name: 'capitalise'<br>})<br>export class CapitalisePipe implements PipeTransform {<br>  transform(value: string): string {<br>    if (typeof value !== 'string') {<br>      throw new Error('Requires a String as input');<br>    }<br>    return value.toUpperCase();<br>  }<br>}</code></pre><p>Pipes are just plain classes that can be injected so we can set up our specs very easily using&nbsp;<em>inject</em>.</p><pre><code>describe('Pipe: CapitalisePipe', () =&gt; {<br>  let pipe;<br>  <br>  //setup<br>  beforeEach(() =&gt; TestBed.configureTestingModule({<br>    providers: [ CapitalisePipe ]<br>  }));<br>  <br>  beforeEach(inject([CapitalisePipe], p =&gt; {<br>    pipe = p;<br>  }));<br>  <br>  //specs<br>  it('should work with empty string', () =&gt; {<br>    expect(pipe.transform('')).toEqual('');<br>  });<br>  <br>  it('should capitalise', () =&gt; {<br>    expect(pipe.transform('wow')).toEqual('WOW');<br>  });<br>  <br>  it('should throw with invalid values', () =&gt; {<br>    //must use arrow function for expect to capture exception<br>    expect(()=&gt;pipe.transform(undefined)).toThrow();<br>    expect(()=&gt;pipe.transform()).toThrow();<br>    expect(()=&gt;pipe.transform()).toThrowError('Requires a String as input');<br>  });<br>}) </code></pre><p>In order to test our pipe we checked the common cases: it should work with empty string, it should capitalise and finally that it throws when not used with a string.</p><blockquote>Note: We used an arrow function to capture exceptions within&nbsp;<span>expect</span></blockquote><h4>Testing Routes</h4><p>Routes are sometimes left out but it is usually seen as a good practice for double-entry bookkeeping. In our example, we will use a simple route configuration with only a few routes and an otherwise route pointing to home.</p><pre><code>@Component({<br>  selector: 'my-app',<br>  template: `&lt;router-outlet&gt;&lt;/router-outlet&gt;`<br>})<br>class TestComponent { }<br><br>@Component({<br>  selector: 'home',<br>  template: `&lt;h1&gt;Home&lt;/h1&gt;`<br>})<br>export class Home { }<br><br>export const routes: Routes = [<br>  { path: '', redirectTo: 'home', pathMatch: 'full' },<br>  { path: 'home', component: Home },<br>  { path: '**', redirectTo: 'home' }<br>];<br><br>@NgModule({<br>  imports: [<br>    BrowserModule, RouterModule.forRoot(routes),<br>  ],<br>  declarations: [TestComponent, Home],<br>  bootstrap: [TestComponent],<br>  exports: [TestComponent] <br>})<br>export class AppModule {}</code></pre><p>First route definition catches the initial route if none was provided redirecting to home (line 14). The second instantiates the&nbsp;<span>Home</span>&nbsp;Component (line 15); last one captures all remaining routes and redirects them also to home (line 16). Our tests will use these routes to check our expectations out.</p><pre><code>describe('Router tests', () =&gt; {<br>  //setup<br>  beforeEach(() =&gt; {<br>    TestBed.configureTestingModule({<br>      imports: [<br>        RouterTestingModule.withRoutes(routes),<br>        AppModule<br>      ]<br>    });<br>  });<br>  <br>  //specs<br>  it('can navigate to home (async)', async(() =&gt; {<br>    let fixture = TestBed.createComponent(TestComponent);<br>    TestBed.get(Router)<br>      .navigate(['/home'])<br>        .then(() =&gt; {<br>          expect(location.pathname.endsWith('/home')).toBe(true);<br>        }).catch(e =&gt; console.log(e));<br>  }));<br>  <br>  it('can navigate to home (fakeAsync/tick)', fakeAsync(() =&gt; {<br>    let fixture = TestBed.createComponent(TestComponent);<br>    TestBed.get(Router).navigate(['/home']);<br>    fixture.detectChanges();<br>    //execute all pending asynchronous calls<br>    tick();    <br>    expect(location.pathname.endsWith('/home')).toBe(true);<br>  }));<br>  <br>  it('can navigate to home (done)', done =&gt; {<br>    let fixture = TestBed.createComponent(TestComponent);<br>    TestBed.get(Router)<br>      .navigate(['/home'])<br>        .then(() =&gt; {<br>          expect(location.pathname.endsWith('/home')).toBe(true);<br>          done();<br>        }).catch(e =&gt; console.log(e));<br>  });<br>});</code></pre><p>We imported&nbsp;<span>RouterTestingModule.withRoutes(routes)</span>&nbsp;to initialise the&nbsp;<span>Router</span>&nbsp;instance with the routes for our tests (line 6). In the code above we tested, we can navigate to home using&nbsp;<span>async</span>,&nbsp;<span>asyncFake/tick</span>&nbsp;and&nbsp;<span>done</span>. Notice how we can write a nicer test using&nbsp;<span>asyncFake</span>&nbsp;as we don’t have to nest the promise handling.</p><blockquote><span data-creator-ids=\"anon\">fakeAsync/tick are great for complex asynchronous tests not involving XHR</span></blockquote><h4>Testing Observables</h4><p>Observables are great to handle asynchronous tasks. They are used in few places in Angular like&nbsp;<em>Http</em>, Form controls, validations or behind&nbsp;<em>EventEmitter</em>. We will use the&nbsp;<em>Observable</em>&nbsp;below to show how we can test their behaviour.</p><pre><code>describe('Observable: basic observable', () =&gt; {<br>  var basic$;<br>  <br>  //setup<br>  beforeEach(() =&gt; {<br>    basic$ = new Observable(observer =&gt; {<br>      //pushing values<br>      observer.next(1);<br>      observer.next(2);<br>      observer.next(3);<br>      //complete stream<br>      observer.complete(); <br>    });<br>  })<br>  <br>  //specs<br>  it('should create the expected sequence (async)', async(() =&gt; {<br>    let expected = [1,2,3], <br>      index = 0;<br>    basic$<br>      .subscribe({<br>        next: x =&gt; expect(x).toEqual(expected[index++]),<br>        error: e =&gt; console.log(e)<br>      });<br>  }));<br>});</code></pre><p>We created an&nbsp;<em>Observable</em>&nbsp;that emits 1, 2, 3 and completes. In order to test it, we set up the next, error and complete callbacks on subscribe. As next callback will be called few times we have to set our expectations dynamically.</p><h4>Testing EventEmitters</h4><p><span>EventEmitters</span>&nbsp;are used in Angular to communicate events between Components. We created a counter component,&nbsp;<span>Counter</span>,<em>&nbsp;</em>that allows us to increment or decrement an initial value of zero. Each time that we do that the new value will be pushed using an&nbsp;<em>EventEmitter</em>&nbsp;exposed as&nbsp;<em>changes</em>.</p><pre><code>@Component({<br>  selector: 'counter',<br>  template: `<br>    &lt;div&gt;<br>      &lt;h1&gt;{{counter}}&lt;/h1&gt;<br>      &lt;button (click)=\"change(1)\"&gt;+1&lt;/button&gt;<br>      &lt;button (click)=\"change(-1)\"&gt;-1&lt;/button&gt;<br>    &lt;/div&gt;`<br>})<br>export class Counter {<br>  @Output() changes = new EventEmitter();<br>  <br>  constructor(){<br>    this.counter = 0;<br>  }<br>  <br>  change(increment) {<br>    this.counter += increment;<br>    //we use emit as next is marked as deprecated<br>    this.changes.emit(this.counter);<br>  }<br>}</code></pre><p>The setup will be very similar to Observables.</p><pre><code>describe('EventEmitter: Counter', () =&gt; {<br>  let counter;<br>  <br>  //setup<br>  beforeEach(() =&gt; TestBed.configureTestingModule({<br>    providers: [ Counter ]<br>  }));<br>  <br>  beforeEach(inject([Counter], c =&gt; {<br>    counter = c;<br>  }))<br>  <br>  //specs<br>  it('should increment +1 (async)', async(() =&gt; {<br>    counter.changes.subscribe(x =&gt; { <br>      expect(x).toBe(1);<br>    });<br>    counter.change(1);<br>  }));<br><br>  it('should decrement -1 (async)', async(() =&gt; {<br>    counter.changes.subscribe(x =&gt; { <br>      expect(x).toBe(-1);<br>    });<br>    counter.change(-1);<br>  }));<br>}) </code></pre><p>In this case, we check that we can&nbsp;<span>increment</span>&nbsp;or&nbsp;<span>decrement</span>&nbsp;using subscribe on the&nbsp;<em>EventEmitter</em>&nbsp;as it exposes an&nbsp;<em>Observable</em>. We trigger the different values by calling the change method and check our expectations within the next callback.</p><p>You have all tests included in this post and more on the demo&nbsp;<a href=\"https://plnkr.co/edit/jm6T17qPbzM8abmRMckw?p=preview\" data-href=\"https://plnkr.co/edit/jm6T17qPbzM8abmRMckw?p=preview\" rel=\"nofollow noopener\" target=\"_blank\">Plunker</a>.</p><p>That’s all I’ve got! Thanks for reading! Have any questions? Ping me at&nbsp;<a href=\"https://twitter.com/intent/user?screen_name=gerardsans\" data-href=\"https://twitter.com/intent/user?screen_name=gerardsans\" rel=\"nofollow noopener\" target=\"_blank\">@gerardsans</a></p><h4>Want more?</h4><p>If you need more examples please feel free to contact me at&nbsp;<em>gerard_dot_sans_at_gmail_dot_com</em>&nbsp;or head to&nbsp;<a href=\"https://github.com/angular/angular/tree/e748adda2e7a1f6e302628d0d76b5c3d1e3fc196/modules/angular2/test\" data-href=\"https://github.com/angular/angular/tree/e748adda2e7a1f6e302628d0d76b5c3d1e3fc196/modules/angular2/test\" rel=\"nofollow noopener\" target=\"_blank\">Angular Unit Tests</a>&nbsp;in GitHub!</p>","filePath":"pages/Angular/.md","_id":"GEyqEWY0ewI8NKVI"}
{"date":"2018-11-15T15:37:06.533Z","title":"Angular: Unit Testing Tips and Tricks","sourceUrl":"https://www.dev6.com/Angular-Unit-Testing-Tips-n-Tricks","path":"Angular/","category":"Angular","tags":["Angular"," Unit Testing"," TDD"],"author":"Tyler Padley","excerpt":"","dateCreated":1542296077827,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Angular/'\ndate: 'Thu Nov 15 2018 21:07:06 GMT+0530 (India Standard Time)'\ntitle: 'Angular: Unit Testing Tips and Tricks'\ntags: ['Angular','Unit Testing','TDD']\ncategory: 'Angular'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://www.dev6.com/Angular-Unit-Testing-Tips-n-Tricks'\ntype: 'Post'\n---\n    ","htmlCode":"<p>One of the better upgrades in the Angular 2 framework is its capacity for unit testing. From the reactive forms module to the new TestBed, it’s easier than ever to write quick, meaningful tests and run them in any project.</p><p>&nbsp;</p><p>While there are many introductory articles around unit testing and the official Angular documentation does a good job illustrating the concepts, the goal of this article is to highlight some of the lesser known, but still handy features in Angular 2’s testing framework.</p><p>&nbsp;</p><p>This article assumes you have some basic knowledge of Angular 2’s unit testing capabilities, including TestBed, Karma and Jasmine.</p><p>&nbsp;</p><h2>Testing in Isolation</h2><p>One of the more difficult things to do when testing is to ensure you are testing in isolation. Eliminating external dependencies will give you more stable, repeatable test results. Angular 2 provides a few techniques for handling this.</p><p>&nbsp;</p><p>The handiest shortcut I’ve seen when writing unit tests is Angular’s CUSTOM_ELEMENTS_SCHEMA constant. When added to a TestBed’s schemas collection, this schema will allow the compilation of your test environment without having to provide declarations for all of the elements contained within the template. Here is an example usage:</p><p>&nbsp;</p><p><code>&nbsp;TestBed.<em>configureTestingModule</em>({<br>&nbsp;&nbsp;&nbsp; imports: [RouterTestingModule],<br>&nbsp;&nbsp;&nbsp; schemas: [CUSTOM_ELEMENTS_SCHEMA],<br>&nbsp;&nbsp;&nbsp; declarations: [TestComponent],<br>});</code></p><p>&nbsp;</p><p>What this will do, is safely ignore any custom elements in TestComponent’s template, crucial for ensuring you’re testing the component in isolation. However, there are a few gotchas with this schema, as it only allows named tags and attributes with the hyphen (-) in their name, restricting users to industry-standard naming conventions.</p><p>&nbsp;</p><p>This should suffice for most use cases, but sometimes you may need to provide specific data, or eliminate the template altogether. TestBed has a handy feature that will allow you to override most aspects of the component through&nbsp;<em>overrideComponent</em>.</p><p>&nbsp;</p><p>This feature will allow you to add, remove or set any property that is configured via the component’s decorator, including the template. Here is an example below:</p><p>&nbsp;</p><p><code>fixture = TestBed.<em>overrideComponent</em>(OverriddenComponent, {<br>&nbsp;&nbsp;&nbsp; set: {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; template: `&lt;h1&gt;Test&lt;/h1&gt;`<br>&nbsp;&nbsp;&nbsp; }<br>}).<em>createComponent</em>(OverriddenComponent);</code></p><p>&nbsp;</p><p>&nbsp;</p><p>Setting the component template to a simple string will remove the requirement of providing all necessary dependencies and allow you to test the underlying component code. You can also replace internal declarations to match anything new you want to test within the component.</p><h2>&nbsp;</h2><h2>Testing Inputs</h2><p>With reactive forms, it becomes relatively straightforward to test your inputs; setting values can be done on a form or control level, validity flags are set right away, and you can test the resulting submission all with built in methods.<br><br>However, one of the more underrated new features of the framework is the valueChanges observable. These can be subscribed to at a form or control level, and then allow you to leverage the power of the RXJS Observable framework to add things like debouncing, filters and formatters. Here’s an example below:</p><p>&nbsp;</p><p><code><strong>this</strong>.inputName.valueChanges<br>&nbsp;&nbsp;&nbsp; .debounceTime(250)<br>&nbsp;&nbsp;&nbsp; .takeWhile(() =&gt;&nbsp;<strong>this</strong>.active)<br>&nbsp;&nbsp;&nbsp; .subscribe(entry =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>//process values here</strong><br>&nbsp;&nbsp;&nbsp; });</code></p><p>&nbsp;</p><p>When testing this type of code, the values have to be entered into the form control itself. Fortunately, Angular’s ComponentFixture has a solution for this:</p><p>&nbsp;</p><p><code>Let fixture:ComponentFixture = TestBed.createComponent(TestComponent);</code></p><p><code>Let input = fixture.debugElement.query(By.<em>css</em>(\"input\"));<br>input.nativeElement.value = testValue;<br>dispatchEvent(input.nativeElement, \"input\");</code></p><p>&nbsp;</p><p>The debugElement allows you to run various element queries to access components within the template, and from there it’s just a matter of setting the value, then using the testing framework’s “<strong>dispatchEvent</strong>” method to send that data on through to the Observable. This can also apply to combo boxes, radio buttons and other form controls.</p><p>&nbsp;</p><p>This technique is also critical for testing directive instances as Angular’s testing framework allows you to query by directive:</p><p><code><strong>let&nbsp;</strong>inputElement: DebugElement = fixture.debugElement.query(By.<em>directive</em>(TestDirective));<br>directive = inputElement.injector.get(TestDirective);</code></p><p>&nbsp;</p><p>This technique will get you an element reference, however, accessing the element’s injector can get you access to the directive instance provided to that element.</p><h2>&nbsp;</h2><h2>Route Values</h2><p>Often you will find yourself writing code based on parameters provided by the route. While Angular’s RouterTestingModule is handy for testing routes and routing directives such as&nbsp;<em>resolves</em>&nbsp;and&nbsp;<em>guards</em>, if you’re just looking to capture route data, you can easily mock what you’re after using the RXJS framework and Subject stubs.</p><p>&nbsp;</p><p>Typically, you can replace the ActivatedRoute injection with the required mock object and then use standard observable techniques to emit data. Here’s an example below:</p><p>&nbsp;</p><p><code><strong>let&nbsp;</strong>mockRoute:&nbsp;<strong>any&nbsp;</strong>= { snapshot: {}};<br><br>mockRoute.parent = { params:&nbsp;<strong>new&nbsp;</strong>Subject&lt;<strong>any</strong>&gt;()};<br>mockRoute.params =&nbsp;<strong>new&nbsp;</strong>Subject&lt;<strong>any</strong>&gt;();<br>mockRoute.queryParams =&nbsp;<strong>new&nbsp;</strong>Subject&lt;<strong>any</strong>&gt;();</code></p><p><code>&nbsp;</code></p><p><code>TestBed.<em>configureTestingModule</em>({<br>&nbsp;&nbsp;&nbsp; imports: [RouterTestingModule.<em>withRoutes</em>([])],<br>&nbsp;&nbsp;&nbsp; providers: [{ provide: ActivatedRoute, useValue: mockRoute }],<br>&nbsp;&nbsp;&nbsp; declarations: [ TestComponent ]<br>})</code></p><p>&nbsp;</p><p>The above code will replace the ActivatedRoute injection with the mock, stubbing out the parent params (for route parameters from the parent), the route params, and the route query params. Sending test data through is simply a matter of triggering an Observable.next within your test case.</p><p>&nbsp;</p><p><code>mockRoute.parent.params.next({ paramName: 17 });<br>mockRoute.params.next({ paramName: \"test\"});</code></p><p>&nbsp;</p><p>This approach is much simpler than declaring acceptable routes (though you will want separate unit tests to ensure your routing use cases are valid).</p><p>&nbsp;</p><p>One final note, is that since these are observable event dispatches you will want to call&nbsp;<em>complete()</em>&nbsp;at the end of your test, and, if using jasmine, wrap your test cases in an&nbsp;<em>async()</em>&nbsp;call.</p><p>&nbsp;</p><p>These examples are just a brief summary of some simple solutions to common testing problems I’ve encountered thus far in testing with Angular 2. Feel free to leave comments with tips and suggestions of your own!</p>","filePath":"pages/Angular/.md","_id":"HL8wVQAcS7LFvgQw"}
{"date":"2019-04-03T15:04:31.152Z","title":"ES6, ES7, ES8 & Writing Modern JavaScript Pt2 – Template literals, Destructuring & Defaults","sourceUrl":"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt2","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"," ES6"],"author":"","excerpt":"","dateCreated":1554303808613,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Wed Apr 03 2019 20:34:31 GMT+0530 (India Standard Time)'\ntitle: 'ES6, ES7, ES8 & Writing Modern JavaScript Pt2 – Template literals, Destructuring & Defaults'\ntags: ['JavaScript','ES6']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt2'\ntype: 'Post'\n---\n    ","htmlCode":"<div><p>Table of Contents <span>[<a href=\"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt2/?ref=webdesignernews.com#\">hide</a>]</span></p><ul><li><a href=\"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt2/?ref=webdesignernews.com#template-literals\">Template literals</a></li><li><a href=\"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt2/?ref=webdesignernews.com#destructuring\">Destructuring</a></li><li><a href=\"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt2/?ref=webdesignernews.com#default-parameters-and-values\">Default parameters and values</a></li><li><a href=\"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt2/?ref=webdesignernews.com#epilogue-es6-es7-es8-writing-modern-javascript-pt2\">Epilogue: ES6, ES7, ES8 &amp; Writing Modern JavaScript Pt2</a></li></ul></div><p>ES6 added many great features to JavaScript. Among these features are\n template literals, destructuring and default parameters and values. \nThese are also the features you will learn about in this part. Improve \nyour knowledge of ES6 and learn how to write modern JavaScript. Become a\n better JavaScript programmer!<span></span><br>\n</p><p>ES6, ES7, ES8 &amp; Writing Modern JavaScript <a href=\"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt1/\">Part 1</a> (Scope, let, const, var).</p><p></p><h2><span>Template literals</span></h2><p>Before there was ES6 (ECMAScript 2015), it was possible for web \ndevelopers to create strings in only two ways. They could use either \nsingle or double quotes. This way of writing code what not very \neffective. This was especially true if the developer also wanted to \ninclude one or more variables inside the string.</p><p>In this case, he had to use string concatenation. This is not a \nproblem if the string you are working with is short, and the amount of \nvariables is low. However, what if you have a lot of text and the amount\n of variables you need to use is high? Then, it is a different story and\n the result can be a disaster. Messy and barely readable code.</p><p>Fortunately, this is no longer something you should worry about. One \nof the features introduced by ES6 were template literals. Template \nliterals are like strings on steroids. Some developers also call them a \nsyntactic sugar. Well, this can be said about many other features of \nES6, and later specifications, as well.</p><p>Template literals allow you to create strings and include pieces of \nyour code such as variables. These are called placeholders. This is \ncalled <a href=\"https://en.wikipedia.org/wiki/String_interpolation#JavaScript\">string interpolation</a>.\n Another thing template literals allow is creating multi-line strings. \nMeaning, you don’t need to use special encoded character for line break.\n When you want to add a line-break you just hit “Enter”.</p><p>The syntax of template literals is very simple. Instead of quotes, you wrap the text, or any content, with back-ticks (<code>``</code>).\n When you want to add some variable or just any expression into the \ncontent, you use dollar sign followed by curly braces. The expression \ngoes inside the curly braces (<code>${expression}</code>). For multi-line, just hit “Enter”.</p><p>One interesting thing. When you try the code below, or any code that \nuses back-ticks, notice what will you get. There will be no back-ticks \nin the console. The reason? JavaScript will compile the back-ticks into \ngood old quotes.</p><pre><code>///\n// Template literal example no.1: Basic text\n// Notice that there are no back-ticks in the output.\nconsole.log(`Some random text`)\n\n// Outputs:\n// 'Some random text'\n\n// Template literal example no.2: Multi-line text\n// Notice that there are again no back-ticks in the output.\nconsole.log(`This text\nshould be printed\non multiple lines.`)\n\n// Outputs:\n// `This text\n// should be printed\n// on multiple lines.`\n\n// Using quotes:\nconsole.log('This text\\n' + ' should be printed\\n' + ' on multiple lines.')\n\n// Outputs:\n// 'This tex'\n//  should be printed\n//  on multiple lines.\"\n\n///\n// Template literal example no.3: Using placeholders (such as variables)\nconst username = 'johndoe'\nconst age = 32\n\nconsole.log(`The name of the user is ${username} and his age is ${age}.`)\n// Outputs:\n// 'The name of the user is johndoe and his age is 32.'\n\n// Using quotes:\nconst username = 'johndoe'\nconst age = 32\n\nconsole.log('The name of the user is ' + username + ' and his age is ' + age + '.')\n// Outputs:\n// 'The name of the user is johndoe and his age is 32.'\n\n///\n// Template literal example no.4: Other expressions\nconst x = 3\nconst y = 11\n\nconsole.log(`X plus Y is ${x + y &gt; 20 ? 'bigger' : 'smaller'} than 20.`)\n// Outputs:\n// 'X plus Y is smaller than 20.'\n\n// Using quotes:\nconst x = 3\nconst y = 11\n\nconsole.log('X plus Y is ' + (x + y &gt; 20 ? 'bigger' : 'smaller') + ' than 20.')\n// Outputs:\n// 'X plus Y is smaller than 20.'\n</code></pre><p><em>A note on syntactic sugar: I mentioned that some developers like \nto call template literals, and other features of ES6 and later \nJavaScript specifications, a syntactic sugar. This is actually not so \nfar from the truth. Under the hood, JavaScript is passing the content of\n back-ticks into a function and concatenating its parts into one string.\n In other words, JavaScript does what you saw on the examples with \nquotes.</em></p><h2><span>Destructuring</span></h2><p>The destructuring is also called destructuring assignment. This is a \nJavaScript feature that makes it easier for you to create a number of \ndifferent variables from values stored inside arrays or properties \nstored inside objects. All this with a single line. Meaning, you no \nlonger have to declare all variables one by one.</p><p>Well, I should be more precise. “Easier” is not the correct word. A \nbetter word to use, in this context, is “possible” because you couldn’t \ndo this before ES6. There was nothing similar to destructuring in older \nspecifications of JavaScript.</p><p>As you know, there are two ways to declare variables, with (code \nexample no.2) or without an initial value (code example no.1). The only <a href=\"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt1/\">exception</a> is <code>const</code>,\n which must be always declared with value. These two ways work also when\n you want to use destructuring. When you want to declare variables or \nassign values to them using destructuring wrap the variables with square\n brackets (<code>[]</code>) in case of an array.</p><p>When you want to destructuring with an object use curly braces (<code>{}</code>)\n (code example no.3). Also, remember to use correct name for your \nvariables when you work with objects. Variable names must match the name\n of properties inside the object. Otherwise, the variable will be \ndeclared as <code>undefined</code> (code example no.4).</p><p>Fortunately, ES6 provides a way to bypass this. You can use \ndestructuring to extract values from objects and declare variables with \ndifferent names than the names of those properties. The way to do this \nis by changing the left side of the assignment. You will again use \nvariable names that match the name of properties.</p><p>Then, these names will be followed by colons (<code>:</code>) and the\n new names. It will look like you are creating a new object (code \nexample no.5). Another good use case for destructuring is when you want \nto quickly swap values of variables. Before ES6, you would have to use a\n temporary variable. With destructuring you can do this with a single \nline of code (code example no.6).</p><p>One great thing about destructuring is that it supports default \nvalues. This is another very useful feature in ES6. This means that you \ncan provide a default value for a variable. This can be useful when you \nwant to declare more variables than there is items in an array or \nproperties in an object (code example no.7).</p><p>If there is a corresponding item or property, it will be assigned to \nthe variable. Otherwise, variable will use the default value. What if \nyou declare more variables than there is items in the array or \nproperties in the object and forget default values? JavaScript will \ninitialize the variable will set its value to <code>undefined</code> (code example no.8).</p><p>What if the opposite is true? Let’s say that you want to declare two \nvariables. However, there are four items in the array. What’s more, you \nwant to use only the first and third item. This is not a problem. \nDestructuring allows you to skip or ignore the array item, or object \nproperty. You use empty space instead of variable (<code>[a, , b]</code>) (code example no.9).</p><pre><code>///\n// Destructuring example no.1: No initial values and array\nlet x\nlet y\nlet z\n\n// Assign values to x, y, z\n[x, y, z] = ['one', true, 13]\n\nconsole.log(x)\n// Outputs: 'one'\nconsole.log(y)\n// Outputs: true\nconsole.log(z)\n// Outputs: 13\n\n///\n// Destructuring example no.2: With initial values and array\nlet [x, y, z] = ['one', true, 13]\n\nconsole.log(x)\n// Outputs: 'one'\nconsole.log(y)\n// Outputs: true\nconsole.log(z)\n// Outputs: 13\n\n// the same as\nlet array = ['one', true, 13]\n\nlet [x, y, z] = array\n\nconsole.log(x)\n// Outputs: 'one'\nconsole.log(y)\n// Outputs: true\nconsole.log(z)\n// Outputs: 13\n\n///\n// Destructuring example no.3: Objects\nlet {name, surname, age} = {name: 'John', surname: 'Doe', age: 35}\n\nconsole.log(name)\n// Outputs: 'John'\nconsole.log(surname)\n// Outputs: 'Doe'\nconsole.log(age)\n// Outputs: 35\n\n///\n// Destructuring example no.4: Objects the wrong way\nlet {a, b, c} = {name: 'John', surname: 'Doe', age: 35}\n\nconsole.log(a)\n// Outputs: undefined\nconsole.log(b)\n// Outputs: undefined\nconsole.log(c)\n// Outputs: undefined\n\n///\n// Destructuring example no.5: Objects and changing variable names\n// Notice the left side of the assignment.\n// Here is where you change the variable names: name to a, surname to b, age to c\nlet {name: a, surname: b, age: c} = {name: 'John', surname: 'Doe', age: 35}\n\nconsole.log(a)\n// Outputs: 'John'\nconsole.log(b)\n// Outputs: 'Doe'\nconsole.log(c)\n// Outputs: 35\n\n///\n// Destructuring example no.6: Swapping variable values\nlet y = 'Jack';\nlet z = 35;\n\n[y, z] = [z, y]\nconsole.log(y)\n// Outputs: 35\nconsole.log(z)\n// Outputs: 'Jack'\n\n///\n// Destructuring example no.7: Default values\n// The 'foo', 'bar' and 'bazz' are default values for a, b and c.\nlet [a = 'foo', b = 'bar', c = 'bazz'] = [13, 14]\n\nconsole.log(a)\n// Outputs: 13 - first item in the array\nconsole.log(b)\n// Outputs: 14 - second item in the array\nconsole.log(c)\n// Outputs: 'baz' - default value because array has only 2 items\n\n///\n// Destructuring example no.8: More variables and no defaults\nlet [a, b, c, d] = [true, 'world', 'falsy']\n\nconsole.log(a)\n// Outputs: true\nconsole.log(b)\n// Outputs: 'world'\nconsole.log(c)\n// Outputs: 'falsy'\nconsole.log(d)\n// Outputs: undefined\n\n///\n// Destructuring example no.9: Ignoring item\n// Notice the empty space between 'j' and 'k'\nlet [j, , k] = ['first', 'second', 'third']\n\nconsole.log(j)\n// Outputs: 'first'\nconsole.log(k)\n// Outputs: 'third'\n</code></pre><p>There is one important thing about destructuring you need to know. \nThe order of variables and values matters. There is no way to specify \nwhat value should be assigned to what variable when you use \ndestructuring. JavaScript solves this puzzle by simply assigning the \nfirst value (item, or property) to the first variable, second to the \nsecond and so on.</p><p>This means one thing. When you want to change the order in which \nvalues are assigned you must change the order in which you declare \nvariables. For example, let’s say you want to declare variable <code>x</code> with the second value and variable <code>y</code> with the first. Then, you must declare the variable <code>y</code> as first and variable <code>x</code> as second.</p><h2><span>Default parameters and values</span></h2><p>In ES6, and later versions of JavaScript, you can declare parameters \nwith default values. Then, if there is no value, or the value is <code>undefined</code>,\n JavaScript will automatically use the default value you provided. You \nalready saw default values in action, with variables, in the previous \nsection about destructuring (code example no.7).</p><p>However, default values goes beyond variables. You can use them also \nwith parameters when you work with functions, or methods. This can be \nvery useful because it can help you avoid unnecessary errors. Imagine \nyou have a function that requires one parameter. What will happen if you\n forget to pass it when you call the function?</p><p>It will fail, unless you declared a variable with some fallback \ninside that function. This is how you would solve this potential issue \nin the old days. Now, with ES6, you can skip that fallback variable and \nuse default parameter instead. Then, if you forget to call the function \nwith required argument it not fail. It will use the default value.</p><p>When you want to use default parameters, you use the same syntax as \nyou saw in the example with destructuring (code example no.7 and code \nexample no.1 below). You specify the name of the parameter and follow it\n by equal sign (<code>=</code>) followed by the default value – <code>function foo(parameter = 'default value')</code> (code example no.2).</p><pre><code>///\n// Default parameters and values example no.1: Variable and destructuring\n// The 'foo' and 'bar' are default values for a and b.\nlet [a = 'foo', b = 'bar'] = ['Tom']\n\nconsole.log(a)\n// Outputs: 'Tom' - first item in the array\nconsole.log(b)\n// Outputs: 'Bar' - default value because array has only 1 item\n\n///\n// Default parameters and values example no.2: Functions\n// Set the default value of name parameter to 'Anonymous'\nfunction greet(name = 'Anonymous') {\n  console.log(`Hello ${name}. How are you doing?`)\n}\n\n// Calling with argument\ngreet('Anthony')\n// Outputs: 'Hello Anthony. How are you doing?'\n\n// Calling without argument\ngreet()\n// Outputs: 'Hello Anonymous. How are you doing?'\n\n// The old way\nfunction greet(name) {\n  // Ensure there is always something to be used as a name\n  var fallback = (typeof name === 'undefined') ? 'Anonymous' : name\n\n  console.log('Hello ' + fallback + '. How are you doing?')\n}\n\n// Calling with argument\ngreet('Anthony')\n// Outputs: Hello Anthony. How are you doing?\n\n// Calling without argument\ngreet()\n// Outputs: Hello Anonymous. How are you doing?\n</code></pre><h2><span>Epilogue: ES6, ES7, ES8 &amp; Writing Modern JavaScript Pt2</span></h2><p>Congratulations! You’ve just finished the second part of ES6, ES7, \nES8 &amp; Writing Modern JavaScript series. This means that you now know\n everything you need about template literals, destructuring and default \nparameters and values. These ES6 features will no longer puzzle you. \nFrom now, you will use them in your projects with absolute confidence.<br>\nWhat’s next?</p><p>In the next part, you will learn about features such as spread and \nrest operators, object literals, new loops and much more. This will help\n you get one step closer to mastering ES6, ES7, ES8 and writing modern \nJavaScript. Until then, walk through what you’ve learned today and \ninvest some of your time in practice. Remember, the best way to learn \nanything is by doing. So, now go and write some code!</p><p>\n\n\n\n           \n            \n         \n\n        \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n</p><p>Do you have any questions, recommendations, thoughts, advice or tip \nyou would like to share with other readers of this blog, and me? Please \nshare it in a comment. You can also send me a <a href=\"https://alexdevero.com/contact.html\" rel=\"noopener\">mail</a>. I would love to hear from you.</p>","filePath":"pages/JavaScript/.md","_id":"HjYcrkZTXcIvqV3a"}
{"title":"Understanding, creating and subscribing to observables in Angular 22","sourceUrl":"","path":"RxJs/RxJs/RxJs/JavaScript/","category":"RxJs","tags":["RxJs"," Observables"],"excerpt":"","date":{"$$date":1540568407188},"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: ''\ntitle: 'Understanding, creating and subscribing to observables in Angular 22'\ntags: ['JavaScript','ES6']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: ''\ntype: 'Post'\n---\n    ","htmlCode":"<div id=\"wrapper-container\"><div><div><div><h3 name=\"fbad\">Observables</h3><blockquote name=\"a21a\">Observables are lazy collections of multiple values over&nbsp;time.</blockquote><p name=\"d926\">yeah, right…well, actually it’s pretty easy:</p><ol><li name=\"931c\"><span>Observables are lazy</span><br>You could think of lazy observables as newsletters. For each subscriber a new newsletter is created. They are then only send to those people, and not to anyone else.</li><li name=\"77a7\"><span>Observables can have multiple values over time</span><br>Now if you keep that subscription to the newsletter open, you will get a new one every once and a while. The sender decides when you get it but all you have to do is just wait until it comes straight into your inbox.</li></ol><p name=\"a3c9\">If you come from the world of promises this is a key difference as promises always return only one value. Another thing is that observables are cancelable. If you don’t want your newsletter anymore, you unsubscribe. With promises this is different, you can’t cancel a promise. If the promise is handed to you, the process that will produce that promise’s resolution is already underway, and you generally don’t have access to prevent that promise’s resolution from executing.</p><h3 name=\"2edf\">Push vs&nbsp;pull</h3><p name=\"b4bb\">A key thing to understand when using observables is that observables push. Push and pull are two different ways that describe how a&nbsp;<em>data producer&nbsp;</em>communicates with the&nbsp;<em>data consumer</em>.</p><p name=\"b14a\"><span>Pull<br></span>When pulling, the data consumer decides when it get’s data from the data producer. The producer is unaware of when data will be delivered to the consumer.</p><p name=\"376f\">Every javascript function uses the pull. The function is a Producer of data, and the code that calls the function is consuming it by “pulling” out a&nbsp;<em>single</em>&nbsp;return value from its call.</p><p name=\"601c\"><span>Push<br></span>When pushing, it works the other way around. The data producer (the creator of the newsletter) decides when the consumer (the subscriber to the newsletter) gets the data.</p><p name=\"60bf\">Promises are the most common way of push in JavaScript today. A promise (the producer) delivers a resolved value to registered callbacks (the consumers), but unlike functions, it is the promise which is in charge of determining precisely when that value is “pushed” to the callbacks.</p><p name=\"6da8\">Observables are a new way of pushing data in JavaScript. An observable is a Producer of multiple values, “pushing” them to subscribers.</p><h3 name=\"a493\">Observables in&nbsp;Angular</h3><p name=\"c447\">If you start using Angular you will probably encounter observables when setting up your HTTP requests. So let’s start there.</p><pre style=\"font-family: monospace, monospace; font-size: 20px; margin: 0px; color: rgba(0, 0, 0, 0.84); background-color: rgb(255, 255, 255);\"><code>import { Observable } from \"rxjs/Rx\"<br>import { Injectable } from \"@angular/core\"<br>import { Http, Response } from \"@angular/http\"<br><br>@Injectable()<br>export class HttpClient {<br><br>    constructor(<br>        public http: Http<br>    ) {}<br><br>    public fetchUsers() {<br>        return this.http.get(\"/api/users\").map((res: Response) =&gt; res.json())<br>    }<br>}</code></pre><p name=\"30d8\">We have now created a simple HttpClient with a fetchUsers method that returns an observable. We probably like to display the users in some sort of list, so let’s do something with this method. Since this method returns an observable we have to subscribe to it. In Angular we can subscribe to an observable in two ways:</p><p name=\"3e9a\"><span>Manner 1:</span><br>We subscribe to an observable in our template using the async pipe. The benefit of this is that Angular deals with your subscription during the lifecycle of a component. Angular will automatically subscribe and unsubscribe for you. Don’t forget to import the “CommonModule” into your module, as the async pipe will be exposed from that.</p><pre style=\"font-family: monospace, monospace; font-size: 20px; margin: 0px; color: rgba(0, 0, 0, 0.84); background-color: rgb(255, 255, 255);\"><code>import { Component } from \"@angular/core\"<br>import { Observable } from \"rxjs/Rx\"<br><br>// client<br>import { HttpClient } from \"../services/client\"<br><br>// interface<br>import { IUser } from \"../services/interfaces\"<br><br>@Component({<br>    selector: \"user-list\",<br>    templateUrl:  \"./template.html\",<br>})<br>export class UserList {<br><br>    public users$: Observable&lt;IUser[]&gt;<br><br>    constructor(<br>        public client: HttpClient,<br>    ) {}<br><br>    // do a call to fetch the users on init of component<br>    // the fetchUsers method returns an observable<br>    // which we assign to the users$ property of our class<br>    public ngOnInit() {<br>        this.users$ = this.client.fetchUsers()<br>    }<br>}</code></pre><pre style=\"font-family: monospace, monospace; font-size: 20px; margin: 0px; color: rgba(0, 0, 0, 0.84); background-color: rgb(255, 255, 255);\"><code>&lt;!-- We use the async pipe to automatically subscribe/unsubscribe to our observable --&gt;<br>&lt;ul class=\"user__list\" *ngIf=\"(users$ | async).length\"&gt;<br>    &lt;li class=\"user\" *ngFor=\"let user of users$ | async\"&gt;<br>        {{ user.name }} - {{ user.birth_date }}<br>    &lt;/li&gt;<br>&lt;/ul&gt;</code></pre><p name=\"ebfd\"><span name=\"anon_be25f95e5afc\" data-creator-ids=\"anon\">Please note the dollar sign. Using the dollar sign in the name of a variable that is an observable, is considered best practice. This way it’s easy to identify if your variable is an observable or not.</span></p><p name=\"732e\"><span>Manner 2:</span><br>We subscribe to the observable ourselves using the actual&nbsp;<code>subscribe()</code>method. This can be handy if you would first like to do something with the data before displaying it. The downside is that you have to manage the subscription yourself.</p><pre style=\"font-family: monospace, monospace; font-size: 20px; margin: 0px; color: rgba(0, 0, 0, 0.84); background-color: rgb(255, 255, 255);\"><code>import { Component } from \"@angular/core\"<br><br>// client<br>import { HttpClient } from \"../services/client\"<br><br>// interface<br>import { IUser } from \"../services/interfaces\"<br><br>@Component({<br>    selector: \"user-list\",<br>    templateUrl:  \"./template.html\",<br>})<br>export class UserList {<br><br>    public users: IUser[]<br><br>    constructor(<br>        public client: HttpClient,<br>    ) {}<br><br>    // do a call to fetch the users on init of component<br>    // we manually subscribe to this method and take the users<br>    // in our callback<br>    public ngOnInit() {<br>        this.client.fetchUsers().subscribe((users: IUser[]) =&gt; {<br><br>            // do stuff with our data here.<br>            // ....<br><br>            // asign data to our class property in the end<br>            // so it will be available to our template<br>            this.users = users<br>        })<br>    }<br>}</code></pre><pre style=\"font-family: monospace, monospace; font-size: 20px; margin: 0px; color: rgba(0, 0, 0, 0.84); background-color: rgb(255, 255, 255);\"><code>&lt;ul class=\"user__list\" *ngIf=\"users.length\"&gt;<br>    &lt;li class=\"user\" *ngFor=\"let user of users\"&gt;<br>        {{ user.name }} - {{ user.birth_date }}<br>    &lt;/li&gt;<br>&lt;/ul&gt;</code></pre><p name=\"9176\">As you can see the template logic is quite similar, the component logic can actually become much different en more complex if you go for manner 2. In general i would recommend to choose manner 1. As this is the most easy and you don’t have to manually manage your subscriptions. Keeping your subscriptions open while not using them is a memory leak and therefore not good.</p><h3 name=\"8a40\">Creating an observable yourself</h3><p name=\"c5ed\">Now that you know how to deal with common observables that are given to you by Angular, it’s good to know how you create an observable yourself. The simplest version looks like this:</p><pre style=\"font-family: monospace, monospace; font-size: 20px; margin: 0px; color: rgba(0, 0, 0, 0.84); background-color: rgb(255, 255, 255);\"><code>import { Observable } from \"rxjs/Observable\"<br><br>// create observable<br>const simpleObservable = new Observable((observer) =&gt; {<br>    <br>    // observable execution<br>    observer.next(\"bla bla bla\")<br>    observer.complete()<br>})<br><br>// subscribe to the observable<br>simpleObservable.subscribe()<br><br>// dispose the observable<br>simpleObservable.unsubscribe()</code></pre><p name=\"e9af\">As you can see in the example observables are&nbsp;<span>created</span>&nbsp;by using the&nbsp;<code>new Observable()</code>&nbsp;call, then&nbsp;<span>subscribed</span>&nbsp;to by an observer,&nbsp;<span>executed</span>&nbsp;by calling the&nbsp;<code>next()</code>&nbsp;and&nbsp;<span>disposed</span>&nbsp;by calling&nbsp;<code>unsubscribe()</code>.</p><p name=\"f4c6\"><span>Creating observables<br></span>Creating observables is easy, just call the&nbsp;<code>new Observable()</code>&nbsp;and pass along one argument which represents the observer. Therefore i usually call it “observer” as well.</p><p name=\"1c2e\"><span>Subscribing to observables<br></span>Remember, observables are lazy. If you don’t subscribe nothing is going to happen. It’s good to know that when you subscribe to an observer, each call of&nbsp;<code>subscribe()</code>&nbsp;will trigger it’s own independent execution for that given observer. Subscribe calls are not shared among multiple subscribers to the same observable.</p><p name=\"2f40\"><span>Executing observables<br></span>The code inside an observables represents the execution of the observables. On the parameter that was given when creating the observable there are three functions available to send data to the subscribers of the observable:</p><ul><li name=\"3b29\">“next”: sends any value such as Numbers, Arrays or objects to it’s subscribers.</li><li name=\"987d\">“error”: sends a Javascript error or exception</li><li name=\"156d\">“complete”: does not send any value.</li></ul><p name=\"149c\">Calls of the next are the most common as they actually deliver the data to it’s subscribers. During observable execution there can be an infinite calls to the&nbsp;<code>observer.next()</code>, however when&nbsp;<code>observer.error()</code>&nbsp;or&nbsp;<code>observer.complete()</code>is called, the execution stops and no more data will be delivered to the subscribers.</p><p name=\"7c99\"><span>Disposing observables<br></span>Because observable execution can run for an infinite amount of time, we need a way to stop it from executing. Since each execution is run for every subscriber it’s important to not keep subscriptions open for subscribers that don’t need data anymore, as that would mean a waste of memory and computing power.</p><p name=\"14fe\">When you subscribe to an observable, you get back a subscription, which represents the ongoing execution. Just call&nbsp;<code>unsubscribe()</code>to cancel the execution.</p><h3 name=\"8c9a\">Conclusion</h3><p name=\"58af\">This post should give you a better understanding of how observables actually work. To get even more out of observables the next step is to understand the power of Rxjs and all the helper functions they provide. Rxjs alone could cover multiple posts which i will write about later. If you want to get one step further. Checkout my post about rxjs subjects:&nbsp;<a href=\"https://hackernoon.com/understanding-rxjs-subjects-339428a1815b\" data-href=\"https://hackernoon.com/understanding-rxjs-subjects-339428a1815b\" rel=\"nofollow noopener\" target=\"_blank\">https://hackernoon.com/understanding-rxjs-subjects-339428a1815b</a></p></div></div></div></div>","filePath":"pages/JavaScript/.md","_id":"HsNsWxIc3kK2GXlA"}
{"date":"2019-03-01T15:37:00.303Z","title":"Javascript ES6 — You don’t really need to learn Generators","sourceUrl":"https://hackernoon.com/javascript-es6-you-dont-really-need-to-learn-generators-96aa2e9114fa","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"," ES6"," Generators"],"author":"Ben Garrison","excerpt":"","dateCreated":1551454230452,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Fri Mar 01 2019 21:07:00 GMT+0530 (India Standard Time)'\ntitle: 'Javascript ES6 — You don’t really need to learn Generators'\ntags: ['JavaScript','ES6','Generators']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://hackernoon.com/javascript-es6-you-dont-really-need-to-learn-generators-96aa2e9114fa'\ntype: 'Post'\n---\n    ","htmlCode":"<section><div><div><p><span>As</span>the async/await syntax continues to grow in popularity, so does curiosity about their inner workings. It’s easy enough to piece together through a&nbsp;<a href=\"https://www.google.com/search?ei=ZE1FW87YKsnzzgLG-anIBw&amp;q=how+does+async+await+work&amp;oq=how+does+async+await+work&amp;gs_l=psy-ab.3..35i39k1j0i67k1j0i20i263k1j0j0i30k1j0i8i30k1.4146.6328.0.6467.2.2.0.0.0.0.78.145.2.2.0....0...1.1.64.psy-ab..0.2.145...0i13k1j0i22i30k1.0.86ChreR7zqA\" data-href=\"https://www.google.com/search?ei=ZE1FW87YKsnzzgLG-anIBw&amp;q=how+does+async+await+work&amp;oq=how+does+async+await+work&amp;gs_l=psy-ab.3..35i39k1j0i67k1j0i20i263k1j0j0i30k1j0i8i30k1.4146.6328.0.6467.2.2.0.0.0.0.78.145.2.2.0....0...1.1.64.psy-ab..0.2.145...0i13k1j0i22i30k1.0.86ChreR7zqA\" rel=\"noopener\" target=\"_blank\">google search</a>&nbsp;that the underpinnings of async/await is a combination of Promises(ok, sure I know Promises) and Generators(huh?).</p><p>The purpose of this article is as follows:</p><ul><li>explore basic Generator functionality</li><li>talk about how Generators + Promises = async/await</li><li>make the argument that you don’t need to worry about learning Generators</li><li>this article assumes&nbsp;<em>some</em>&nbsp;basic knowledge of Promises</li></ul><h4>Iterators and Generators — but mostly Generators</h4><p>Starting with ES6, there have been several new functions added to the language that aim to make dealing with asynchronous data streams and collections of objects easier.&nbsp;<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators\" data-href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators\" rel=\"noopener\" target=\"_blank\">Iterators and Generators</a>&nbsp;fall in this category.</p><p><span>Iterators</span>&nbsp;are powerful in that they provide a means to access items in a collection one at a time, while keeping track of the current index.</p><figure><div><div></div><div data-image-id=\"1*Yn2YYgxp1MbWUd52uj_uZw.png\" data-width=\"1434\" data-height=\"844\" data-action=\"zoom\" data-action-value=\"1*Yn2YYgxp1MbWUd52uj_uZw.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"43\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*Yn2YYgxp1MbWUd52uj_uZw.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*Yn2YYgxp1MbWUd52uj_uZw.png\"></div></div><figcaption><a href=\"https://gist.github.com/btg5679/91048cc658db67594b6fe2bca4c70ef1\" data-href=\"https://gist.github.com/btg5679/91048cc658db67594b6fe2bca4c70ef1\" rel=\"nofollow noopener\" target=\"_blank\">https://gist.github.com/btg5679/91048cc658db67594b6fe2bca4c70ef1</a></figcaption></figure><p>Above we pass in a simple array with 2 values and we iterate over the values by calling it.next(). Note the full commented responses.</p><p>Now for&nbsp;<span>Generators.&nbsp;</span>Generators are functions that serve as a factory for&nbsp;<span>Iterators</span>. Let’s look at a basic example, then we will discuss the 2 basic parts of a Generator, the&nbsp;<span>Generator Function</span>&nbsp;and the&nbsp;<span>Generator Iterator</span>.</p><figure><div><div></div><div data-image-id=\"1*cNY-WphoE1C9apgIau7TOQ.png\" data-width=\"1476\" data-height=\"504\" data-action=\"zoom\" data-action-value=\"1*cNY-WphoE1C9apgIau7TOQ.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"25\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*cNY-WphoE1C9apgIau7TOQ.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*cNY-WphoE1C9apgIau7TOQ.png\"></div></div><figcaption><a href=\"https://gist.github.com/btg5679/d830f0067e5ae1610459131d38ce636e\" data-href=\"https://gist.github.com/btg5679/d830f0067e5ae1610459131d38ce636e\" rel=\"nofollow noopener\" target=\"_blank\">https://gist.github.com/btg5679/d830f0067e5ae1610459131d38ce636e</a></figcaption></figure><p>Note the syntax, the&nbsp;<em>asterisk</em>&nbsp;indicates that the function is a generator and the&nbsp;<em>yield</em>&nbsp;keyword which pauses function execution( 😮) and returns(yields) a value.</p><p>Earlier I mentioned the 2 parts of a Generator:</p><ul><li><span>Generator Function</span> — defined with an asterisk&nbsp;<a href=\"http://2ality.com/2014/08/formatting-generator-asterisk.html\" data-href=\"http://2ality.com/2014/08/formatting-generator-asterisk.html\" rel=\"noopener\" target=\"_blank\"><em>near</em></a>&nbsp;the function name or keyword</li><li><span>Generator Iterator</span> — created when you invoke the Generator Function</li></ul><p>So here we see the Generator Factory at work, Generating Iterators.</p><p>At this point, things begin to get more interesting. Communication with Generators can happen in both directions, Generators can&nbsp;<em>yield&nbsp;</em>values to Iterators, but Iterators can also send values to Generators in the&nbsp;<code>iterator.next('someValue')</code>&nbsp;method.</p><figure><div><div></div><div data-image-id=\"1*wG_gcBuaa5f7jHmKrRHXzg.png\" data-width=\"1490\" data-height=\"1222\" data-is-featured=\"true\" data-action=\"zoom\" data-action-value=\"1*wG_gcBuaa5f7jHmKrRHXzg.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"61\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*wG_gcBuaa5f7jHmKrRHXzg.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*wG_gcBuaa5f7jHmKrRHXzg.png\"></div></div><figcaption><a href=\"https://gist.github.com/btg5679/ffe53b3522abeb49ac11ea9844890899\" data-href=\"https://gist.github.com/btg5679/ffe53b3522abeb49ac11ea9844890899\" rel=\"nofollow noopener\" target=\"_blank\">https://gist.github.com/btg5679/ffe53b3522abeb49ac11ea9844890899</a></figcaption></figure><h4>Generators +&nbsp;Promises</h4><p>Now we can talk for a moment about how Generators and Promises form the foundation for the async/await expression. Imagine for a moment that instead of yielding values the Generator yielded Promise functions. You could then wrap the generator in a function that could wait for the Promise to resolve and return the Promise value to the Generator in the&nbsp;.next() method as we just demonstrated. There is a popular library called&nbsp;<a href=\"https://github.com/tj/co\" data-href=\"https://github.com/tj/co\" rel=\"noopener\" target=\"_blank\">coroutines</a>&nbsp;that does just that. Really simply, something like this:</p><figure><div><div></div><div data-image-id=\"1*f5IRfuW189N8Ebrl-2xhsw.png\" data-width=\"816\" data-height=\"236\" data-action=\"zoom\" data-action-value=\"1*f5IRfuW189N8Ebrl-2xhsw.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"21\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*f5IRfuW189N8Ebrl-2xhsw.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*f5IRfuW189N8Ebrl-2xhsw.png\"></div></div></figure><h4>Do I need&nbsp;it?</h4><p><span data-creator-ids=\"anon\">My opinion of Generators is that you need them in order for async/await to work, but you don’t need to learn to incorporate them directly into your code.</span>Generators introduce to JS the ability to pause function execution and return to it when(if) we see fit. Up until now we expected functions to run to their completion upon execution. This is a revelation, but one that async/await neatly wraps up for us.</p><p>Some of the counter arguments are that bundled code devolves async/await into generators so, being familiar with Generators may help you in the debug process. I view that differently though that trying to find ways to incorporate Generators into your code directly.</p></div></div></section><section><div><hr></div><div><div><p>That’s all for this round. We covered Iterator and Generator basics, how Generators + Promises got us to async/await and why you should not try and force Generators into your JS repertoire.</p><p>What are your thoughts on Generators? Is there a use case that I am not thinking of? Let me know your thoughts and questions and give me a follow on&nbsp;<a href=\"http://twitter.com/_bengarrison\" data-href=\"http://twitter.com/_bengarrison\" rel=\"noopener\" target=\"_blank\">twitter</a>. Keep after it.</p></div></div></section>","filePath":"pages/JavaScript/.md","_id":"IM5OlgI3SfqaPLxm"}
{"date":"2018-12-26T16:01:53.082Z","title":"Asynchronous Javascript using Async - Await","sourceUrl":"https://scotch.io/tutorials/asynchronous-javascript-using-async-await","path":"ES6/","category":"ES6","tags":["ES6"," Async - Await"],"author":"Joy Warugu","excerpt":"","dateCreated":1545840023930,"coverImage":"","type":"Post","frontmatter":"---\npath: 'ES6/'\ndate: 'Wed Dec 26 2018 21:31:53 GMT+0530 (India Standard Time)'\ntitle: 'Asynchronous Javascript using Async - Await'\ntags: ['ES6','Async - Await']\ncategory: 'ES6'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://scotch.io/tutorials/asynchronous-javascript-using-async-await'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Async/await is a relatively new way to write asynchronous code in Javascript. Before we used&nbsp;<a href=\"http://javascriptissexy.com/understand-javascript-callback-functions-and-use-them/\">callbacks</a>&nbsp;and&nbsp;<a href=\"https://scotch.io/tutorials/javascript-promises-for-dummies\">promises</a>. Async/await actually builds on top of promises. If you have not used promises before, this is a good point to go brush up on them, find link to a useful article&nbsp;<a href=\"http://techinpink.com/2017/02/24/introduction-to-javascript-promises/\">here</a>.</p><p><span>Why&nbsp;<code>async/await</code>?</span>&nbsp;Well, simply put, async/await allows us to write asynchronous code in a synchronous manner.</p><h2><a href=\"https://scotch.io/tutorials/asynchronous-javascript-using-async-await#toc-async-functions\">Async functions</a></h2><div><h3>Table of Contents</h3><ul><li><a href=\"https://scotch.io/tutorials/asynchronous-javascript-using-async-await#toc-async-functions\">Async functions</a></li><li><a href=\"https://scotch.io/tutorials/asynchronous-javascript-using-async-await#toc-await\">Await</a></li><li><a href=\"https://scotch.io/tutorials/asynchronous-javascript-using-async-await#toc-error-handling\">Error handling</a></li><li><a href=\"https://scotch.io/tutorials/asynchronous-javascript-using-async-await#toc-fun-facts\">Fun facts</a></li><li><a href=\"https://scotch.io/tutorials/asynchronous-javascript-using-async-await#toc-conclusion\">Conclusion</a></li></ul></div><p>To create an async function all we need to do is add the&nbsp;<code>async</code>&nbsp;keyword before the function definition, like this:</p><img data-src=\"https://track.mailerlite.com/webforms/o/1112154/c7r3j6?vaa4d608450783acdc64d5338ff94f6d5\" width=\"1\" height=\"1\" border=\"0\" src=\"https://track.mailerlite.com/webforms/o/1112154/c7r3j6?vaa4d608450783acdc64d5338ff94f6d5\" data-was-processed=\"true\"><pre data-title=\"js\"><code><span>async</span> <span>function</span> <span>asyncFunc</span><span>(</span><span>)</span> <span>{</span>\n  <span>return</span> <span>\"Hey!\"</span><span>;</span>\n<span>}</span></code></pre><p>The one thing you need to know about async functions is that;&nbsp;<span>they always returns a promise</span>.</p><p>In the case where we explicitly return something that is not a promise, like above, the return value is automatically wrapped into a resolved promise with the resolved value being the non-promise. For the code above,&nbsp;<code>asyncFunc().then(result =&gt; console.log(result))</code>&nbsp;will return the string&nbsp;<code>Hey!</code>.</p><h2><a href=\"https://scotch.io/tutorials/asynchronous-javascript-using-async-await#toc-await\">Await</a></h2><p>The&nbsp;<code>await</code>&nbsp;keyword&nbsp;<span>can only be used within an&nbsp;<code>async</code>&nbsp;block</span>, otherwise it'll throw a syntax error. This means you cannot use&nbsp;<code>await</code>&nbsp;in the top level of our code, basically, don't use it by itself.</p><p><span>When do we use it?</span>&nbsp;If we have an asynchronous function inside of an async block. So let's say we need to fetch some data from our server and then use that data within our async block. We will use&nbsp;<code>await</code>&nbsp;to pause the function execution and resume after the data comes in. For example;</p><div><div></div></div><pre data-title=\"js\"><code><span>async</span> <span>function</span> <span>asyncFunc</span><span>(</span><span>)</span> <span>{</span>\n  <span>// fetch data from a url endpoint</span>\n  <span>const</span> data <span>=</span> <span>await</span> axios<span>.</span><span>get</span><span>(</span><span>\"/some_url_endpoint\"</span><span>)</span><span>;</span>\n  <span>return</span> data<span>;</span>\n<span>}</span></code></pre><p><span>Why use await?</span>&nbsp;Instead of using await we could have just used a promise right?</p><pre data-title=\"js\"><code><span>async</span> <span>function</span> <span>asyncFunc</span><span>(</span><span>)</span> <span>{</span>\n  <span>let</span> data<span>;</span>\n  <span>// fetch data from a url endpoint</span>\n  axios<span>.</span><span>get</span><span>(</span><span>\"/some_url_endpoint\"</span><span>)</span>\n    <span>.</span><span>then</span><span>(</span><span>(</span>result<span>)</span> <span>=&gt;</span> <span>{</span>\n      data <span>=</span> result\n    <span>}</span><span>)</span><span>;</span>\n  <span>return</span> data<span>;</span>\n<span>}</span></code></pre><p>Await is simply a more elegant way to write a promise&nbsp;<span>within an async function</span>. It improves readability immensely and hence the reason we use it.</p><p>Let's assume we have a couple of asynchronous functions within our&nbsp;<code>async</code>&nbsp;block. Instead of chaining promises we could do this, which is much cleaner:</p><pre data-title=\"js\"><code><span>async</span> <span>function</span> <span>asyncFunc</span><span>(</span><span>)</span> <span>{</span>\n  <span>// fetch data from a url endpoint</span>\n  <span>const</span> response <span>=</span> <span>await</span> axios<span>.</span><span>get</span><span>(</span><span>\"/some_url_endpoint\"</span><span>)</span><span>;</span>\n  <span>const</span> data <span>=</span> <span>await</span> response<span>.</span><span>json</span><span>(</span><span>)</span><span>;</span>\n\n  <span>return</span> data<span>;</span>\n<span>}</span></code></pre><h2><a href=\"https://scotch.io/tutorials/asynchronous-javascript-using-async-await#toc-error-handling\">Error handling</a></h2><p><span>How do we handle errors?</span>&nbsp;We have a few options, let's explore them:</p><h3>Try..catch</h3><p>This is the most common way to handle errors when using&nbsp;<code>async-await</code>, good old&nbsp;<code>try-catch</code>. All you need to do is encapsulate your code in a&nbsp;<code>try</code>&nbsp;block and handle any errors that occur in a&nbsp;<code>catch</code>.</p><pre data-title=\"js\"><code><span>async</span> <span>function</span> <span>asyncFunc</span><span>(</span><span>)</span> <span>{</span>\n  <span>try</span> <span>{</span>\n    <span>// fetch data from a url endpoint</span>\n    <span>const</span> data <span>=</span> <span>await</span> axios<span>.</span><span>get</span><span>(</span><span>\"/some_url_endpoint\"</span><span>)</span><span>;</span>\n    <span>return</span> data<span>;</span>\n  <span>}</span> <span>catch</span><span>(</span>error<span>)</span> <span>{</span>\n    console<span>.</span><span>log</span><span>(</span><span>\"error\"</span><span>,</span> error<span>)</span><span>;</span>\n    <span>// appropriately handle the error</span>\n  <span>}</span>\n<span>}</span></code></pre><p>If an error occurs when fetching data from our endpoint, execution is transferred to the&nbsp;<code>catch</code>&nbsp;block and we can handle whatever error is thrown. If we have multiple&nbsp;<code>await</code>lines the catch block catches the errors that occur in all the lines.</p><pre data-title=\"js\"><code><span>async</span> <span>function</span> <span>asyncFunc</span><span>(</span><span>)</span> <span>{</span>\n  <span>try</span> <span>{</span>\n    <span>// fetch data from a url endpoint</span>\n    <span>const</span> response <span>=</span> <span>await</span> axios<span>.</span><span>get</span><span>(</span><span>\"/some_url_endpoint\"</span><span>)</span><span>;</span>\n    <span>const</span> data <span>=</span> <span>await</span> response<span>.</span><span>json</span><span>(</span><span>)</span><span>;</span>\n\n    <span>return</span> data<span>;</span>\n  <span>}</span> <span>catch</span> <span>(</span><span>error</span><span>)</span> <span>{</span>\n    <span>alert</span><span>(</span>error<span>)</span><span>;</span> <span>// catches both errors</span>\n  <span>}</span>\n<span>}</span></code></pre><h3>If not try..catch</h3><p>We can alternatively append&nbsp;<code>.catch()</code>&nbsp;on the promise generated by the&nbsp;<code>async</code>function. Let's recap: Remember that the&nbsp;<code>async</code>&nbsp;function returns a promise. If an error occurs then it returns a rejected promise.So on the function call we could do this:</p><pre data-title=\"js\"><code><span>asyncFunc</span><span>(</span><span>)</span><span>.</span><span>catch</span><span>(</span><span>(</span>error<span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>// handle error appropriately</span>\n<span>}</span><span>)</span><span>;</span></code></pre><h2><a href=\"https://scotch.io/tutorials/asynchronous-javascript-using-async-await#toc-fun-facts\">Fun facts</a></h2><h3>Async on class methods</h3><p>Class methods can be&nbsp;<code>async</code>.</p><pre data-title=\"js\"><code><span>class</span> <span>Example</span><span>{</span>\n  <span>async</span> <span>asyncMethod</span><span>(</span><span>)</span> <span>{</span>\n    <span>const</span> data <span>=</span> <span>await</span> axios<span>.</span><span>get</span><span>(</span><span>\"/some_url_endpoint\"</span><span>)</span><span>;</span>\n    <span>return</span> data\n  <span>}</span>\n<span>}</span></code></pre><p>To call the method we'd do:</p><pre data-title=\"js\"><code>  <span>const</span> exampleClass <span>=</span> <span>new</span> <span>Example</span><span>(</span><span>)</span><span>;</span>\n  exampleClass<span>.</span><span>asyncMethod</span><span>(</span><span>)</span><span>.</span><span>then</span><span>(</span><span>//do whatever you want with the result)</span></code></pre><h3>Await is thenable</h3><p>We can append a&nbsp;<code>.then()</code>&nbsp;on an await.</p><pre data-title=\"js\"><code><span>async</span> <span>function</span> <span>asyncFunc</span><span>(</span><span>)</span> <span>{</span>\n  <span>// fetch data from a url endpoint</span>\n  <span>const</span> data <span>=</span> <span>await</span> axios<span>.</span><span>get</span><span>(</span><span>\"/some_url_endpoint\"</span><span>)</span>\n    <span>.</span><span>then</span><span>(</span><span>(</span>result<span>)</span> <span>=&gt;</span> <span>return</span> result<span>.</span>names<span>)</span>\n\n  <span>return</span> data<span>;</span>\n<span>}</span></code></pre><h3>Await &lt;&gt; Promise.all</h3><p>If we have multiple promises we could use&nbsp;<code>Promise.all</code>&nbsp;with&nbsp;<code>await</code>.</p><pre data-title=\"js\"><code><span>async</span> <span>function</span> <span>asyncFunc</span><span>(</span><span>)</span> <span>{</span>\n  <span>const</span> response <span>=</span> <span>await</span> Promise<span>.</span><span>all</span><span>(</span><span>[</span>\n    axios<span>.</span><span>get</span><span>(</span><span>\"/some_url_endpoint\"</span><span>)</span><span>,</span>\n    axios<span>.</span><span>get</span><span>(</span><span>\"/some_url_endpoint\"</span><span>)</span>\n  <span>]</span><span>)</span><span>;</span>\n  <span>...</span>\n<span>}</span></code></pre><h2><a href=\"https://scotch.io/tutorials/asynchronous-javascript-using-async-await#toc-conclusion\">Conclusion</a></h2><p>In summary,&nbsp;<code>async/await</code>&nbsp;is a cleaner syntax to write asynchronous Javascript code. It enhances readability and flow of your code.</p><p>Things to keep in mind while using&nbsp;<code>async/await</code>:</p><div><div></div></div><ul><li>Async functions return a promise.</li><li>Await can only be used inside an async block.</li><li>Await waits until the function(\"promise\") resolves or rejects.</li></ul><p>Its quite easy to learn and use. Enjoy experimenting!!</p>","filePath":"pages/ES6/.md","_id":"IS82iwOwbW0qCpkW"}
{"date":"2018-12-26T15:37:48.378Z","title":"Better Reusable React Components with the Overrides Pattern","sourceUrl":"https://medium.com/@dschnr/better-reusable-react-components-with-the-overrides-pattern-9eca2339f646","path":"React/","category":"React","tags":["React"," Pattern"],"author":"David Schnurr","excerpt":"","dateCreated":1545838438740,"coverImage":"","type":"Post","frontmatter":"---\npath: 'React/'\ndate: 'Wed Dec 26 2018 21:07:48 GMT+0530 (India Standard Time)'\ntitle: 'Better Reusable React Components with the Overrides Pattern'\ntags: ['React','Pattern']\ncategory: 'React'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://medium.com/@dschnr/better-reusable-react-components-with-the-overrides-pattern-9eca2339f646'\ntype: 'Post'\n---\n    ","htmlCode":"<p>If you’ve been watching the React ecosystem the past few years, you’ve surely encountered one of the numerous&nbsp;<a href=\"https://hackernoon.com/23-best-react-ui-component-libraries-and-frameworks-250a81b2ac42\" data-href=\"https://hackernoon.com/23-best-react-ui-component-libraries-and-frameworks-250a81b2ac42\" rel=\"nofollow noopener\" target=\"_blank\">open source reusable component libraries</a>that developers reach for when building apps. These libraries save us from the tedium of rebuilding the same modals, menus, and form controls over and over for each app we work on.</p><p>Those who have used one of these libraries before have probably also run into a case where a component doesn’t quite fit your needs. Maybe the design doesn’t match the mockups your designer provided, and the component doesn’t expose an API for changing these styles. Or maybe you want the behavior of a checkbox but want something that looks completely different.</p><p>This is a common sentiment we see at Uber, and leads to wasted effort as teams are often forced to rebuild components from scratch. So when we recently set out to revamp our beloved (but aging) component library, we surveyed dozens of engineers to better understand what roadblocks they run into when reusing existing components. The themes were clear:</p><ul><li><span>Styles:</span>&nbsp;Developers need to be able to restyle components and their internals. This something that is trivial with global CSS, but has become more difficult in the world of CSS-in-JS where styles are encapsulated within a component and elements have arbitrary classes.</li><li><span>Props:</span>&nbsp;Sometimes you just need to change the props passed to internal components. For instance adding an&nbsp;<code>aria-label</code>&nbsp;to an element, or passing a&nbsp;<code>className</code>&nbsp;that acts as a target in your integration tests.</li><li><span>Render:</span>&nbsp;In many cases, people just wanted to be able to completely override the rendering or behavior of certain internals — for example, adding “quick select” options like “Last 30 days” to a datepicker.</li></ul><p>We’re certainly not the first to try to tackle these problems. The&nbsp;<a href=\"https://reactjs.org/docs/render-props.html\" data-href=\"https://reactjs.org/docs/render-props.html\" rel=\"nofollow noopener\" target=\"_blank\">render props</a>pattern that has been popularized in the React community is one strategy for allowing more control over how a component renders. Paypal’s&nbsp;<a href=\"https://github.com/paypal/downshift\" data-href=\"https://github.com/paypal/downshift\" rel=\"nofollow noopener\" target=\"_blank\">downshift</a>&nbsp;is a great example of just how far you can take render props.</p><p>But while render props are a great tool for many situations, they can be a bit heavy handed if you just want to override a style or change a prop on some internal element. Similarly, component authors sometimes offer props like&nbsp;<em>getFooStyle</em>&nbsp;or&nbsp;<em>getFooProps</em>&nbsp;to customize some internal element, but these are rarely offered in a consistent fashion for all internal elements.</p><p>We wanted to come up with a unified API across our components that provides full rendering flexibility, but also has shortcuts for the all-too-frequent occasion that you just need to override some internal style or prop.</p><p>The solution we came up with is called the “Overrides” pattern. It’s still very much evolving, but we’ve been impressed with the products developers are building with it so far. We wanted to share it with the broader community in hopes that it either inspires other component library authors or at least raises awareness about the current shortcomings in component reusability. Read on to see how it works.</p><h4>Overrides Public&nbsp;API</h4><p>The code snippet below demonstrates what the overrides pattern might look like when customizing a reusable Autocomplete component:</p><pre><code>// App.js<br>render() {<br>  &lt;Autocomplete<br>    options={this.props.products} <br>    overrides={{<br>      Root: {<br>        props: {'aria-label': 'Select an option'},<br>        style: ({$isOpen}) =&gt; ({borderColor: $isOpen ? 'blue' : 'grey'}),<br>      },<br>      Option: {<br>        component: CustomOption<br>      }<br>    }}<br>  /&gt;<br>}<br><br>// CustomOption.js<br>export default function CustomOption({onClick, $option}) {<br>  return (<br>    &lt;div onClick={onClick}&gt;<br>      &lt;h4&gt;{$option.name}&lt;/h4&gt;<br>      &lt;small&gt;{$option.price}&lt;/small&gt;<br>    &lt;/div&gt;<br>  );<br>}</code></pre><p>There’s a lot going on here, so let’s walk through some of the key changes:</p><ul><li>Every internal element is given an identifier that developers can target. Here we’re using&nbsp;<em>Root</em>&nbsp;and&nbsp;<em>Option</em>. You can almost think of these like class names (but without the downsides of CSS cascade and global namespace).</li><li>For each internal element, you can override the&nbsp;<span>props</span>, the&nbsp;<span>style</span>, and the&nbsp;<span>component</span>.</li><li>Overriding props is pretty straightforward, the object you specify will be spread in with the default props, taking precedence over them. In this case you can see we’re using it to add an&nbsp;<code>aria-label</code>&nbsp;to the root element.</li><li>When overriding&nbsp;<span>style</span>, you can pass either a style object, or a function that receives some props related to the current internal state of the component, allowing you to dynamically change styles based on component state like&nbsp;<code>isError</code>&nbsp;or&nbsp;<code>isSelected</code>. The style object you return from this function is deep merged with the default element styles.</li><li>When overriding&nbsp;<span>component,&nbsp;</span>you can pass in a stateless functional component or React component class where you supply your own render logic and optionally add other handlers or behavior. This is essentially dependency injection, and unlocks some powerful possibilities.</li></ul><p>Offering all of this functionality through a single unified&nbsp;<code>overrides</code>&nbsp;prop gives developers a consistent place to customize anything they need to.</p><h3>Overrides in&nbsp;Action</h3><p>To give you an idea of how our teams are using this, here’s an example from the Uber Freight team:</p><figure><div><div></div><div data-image-id=\"1*55UAhe5dcXTPpLGyhK_6gw.png\" data-width=\"1400\" data-height=\"442\" data-action=\"zoom\" data-action-value=\"1*55UAhe5dcXTPpLGyhK_6gw.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"22\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/800/1*55UAhe5dcXTPpLGyhK_6gw.png\" src=\"https://cdn-images-1.medium.com/max/800/1*55UAhe5dcXTPpLGyhK_6gw.png\"></div></div><figcaption>Overriding a RadioGroup component for Uber&nbsp;Freight</figcaption></figure><p>They wanted to create a form element that shared the same API, keyboard controls, and events as a radio group but with a different visual appearance. They were able to add a sequence of style overrides on top of our existing&nbsp;<code>RadioGroup</code>&nbsp;component, instead of having to wastefully build, test, and maintain their own custom implementation.</p><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*tF4wC2YeIdK06cnPlS9Nww.gif\" data-width=\"1050\" data-height=\"636\" data-action=\"zoom\" data-action-value=\"1*tF4wC2YeIdK06cnPlS9Nww.gif\" data-scroll=\"native\"><canvas width=\"75\" height=\"45\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/600/1*tF4wC2YeIdK06cnPlS9Nww.gif\" src=\"https://cdn-images-1.medium.com/max/600/1*tF4wC2YeIdK06cnPlS9Nww.gif\"></div></div><figcaption>Adding tag “Edit” behavior using a component override</figcaption></figure><p>Another example that we used when prototyping this pattern, was adding “Edit” behavior to tags in a multi-select component. In this case we created a component override for&nbsp;<code>Tag</code>&nbsp;which rendered the existing content but also injected an edit icon.</p><p>This illustrates one of the benefits of allowing full components to be injected when compared to render props–you can create new state, lifecycle methods, or even react hooks if you needed to. Our&nbsp;<code>EditableTag</code>&nbsp;component was able to display a modal when clicked, and then fire off the necessary redux actions to update the tag name.</p><h3>Overrides Internal Implementation</h3><p>Here’s how overrides might be implemented internally for our Autocomplete component:</p><pre><code>// Autocomplete.js<br>import React from 'react';<br>import * as defaultComponents from './styled-elements';<br><br>class Autocomplete extends React.Component {<br><br>  // Setup &amp; handlers omitted to keep this example short<br>  <br>  getSharedStyleProps() {<br>    const {isOpen, isError} = this.state;<br>    return {<br>      $isOpen: isOpen<br>      $isError: isError<br>    };<br>  }<br><br>  render() {<br>    const {isOpen, query, value} = this.state;<br>    const {options, overrides} = this.props;<br><br>    const {<br>      Root: {component: Root, props: rootProps},<br>      Input: {component: Input, props: inputProps},<br>      List: {component: List, props: listProps},<br>      Option: {component: Option, props: optionProps},<br>    } = getComponents(defaultComponents, overrides);<br><br>    const sharedProps = this.getSharedStyleProps();<br><br>    return (<br>      &lt;Root {...sharedProps} {...rootProps}&gt;<br>        &lt;Input <br>          type=\"text\"<br>          value={query} <br>          onChange={this.onInputChange}<br>          {...sharedProps}<br>          {...inputProps}<br>        /&gt;<br>        {isOpen &amp;&amp; (<br>          &lt;List {...sharedProps} {...listProps}&gt;<br>            {options.map(option =&gt; {<br>              &lt;Option<br>                onClick={this.onOptionClick.bind(this, option)}<br>                $option={option}<br>                {...sharedProps}<br>                {...optionProps}<br>              &gt;<br>                {option.label}<br>              &lt;/Option&gt;<br>            })}<br>          &lt;/List&gt;<br>        )}<br>      &lt;/Root&gt;<br>    );<br>  }<br>}</code></pre><p>Notice that the render method contains no DOM primitives like&nbsp;<code>&lt;div&gt;</code>. Instead we import the set of default sub-components from an adjacent file. In this file we use a CSS-in-JS library to create components that encapsulate all the default styles. If a component implementation was passed in through&nbsp;<code>overrides</code>, it takes precedence over these defaults.</p><p><code>getComponents</code>&nbsp;is just a simple helper function that we use to unpack the overrides and merge them in with the set of default styled components. There are numerous ways to implement this, but here’s the shortest example:</p><pre><code>function getComponents(defaultComponents, overrides) {<br>  return Object.keys(defaultComponents).reduce((acc, name) =&gt; {<br>    const override = overrides[name] || {};<br>    acc[name] = {<br>      component: override.component || defaultComponents[name],<br>      props: {$style: override.style, ...override.props},<br>    };<br>    return acc;<br>  }, {});<br>}</code></pre><p>This function assigns style overrides to a&nbsp;<code>$style</code>&nbsp;prop and merges it in with any other override props–this is because our CSS-in-JS implementation looks for a&nbsp;<code>$style</code>&nbsp;prop and deep merges it with the default styles.</p><p>Each sub-component also receives&nbsp;<code>sharedProps</code>, which is a set of props related to component state that can be used to dynamically change styles or rendering–for example, changing border-color to red when there’s an error. We prefix these props with&nbsp;<code>$</code>&nbsp;as a naming convention to clarify that these are special props which should not be passed down as an attribute to the underlying DOM element.</p><h4>Trade-offs &amp;&nbsp;Gotchas</h4><p>As with most software design patterns, there are a few trade-offs to consider when using overrides.</p><p><span>Rigidity</span></p><p>Because each internal element is given an identifier and exposed as a target for overrides, changing the DOM structure could lead to breaking changes more frequently than normal. This goes for CSS changes as well — changing an element from&nbsp;<code>display: flex</code>&nbsp;to&nbsp;<code>display: block</code>&nbsp;could theoretically be a breaking change if a consumer was overriding a child element and assumed it was inside of a flexbox. Concerns that would normally be neatly encapsulated inside your component may actually have downstream impacts.</p><p>All this means is you’ll likely want to be a bit more careful changing your component DOM structure or styles, and don’t be afraid to do a major version bump when in doubt.</p><p><span>Documentation</span></p><p>Now that your internal elements are part of your public API, you’ll probably want to write documentation that describes each element and what props it receives. Including a simple diagram of the DOM structure where elements are labeled with their identifier&nbsp;.</p><p>Statically typing the overrides object for each component using Typescript or Flow is also a great step forward here, as it will make it clear to developers what props each component will receive and whether the overrides you’re passing in are compatible.</p><p><span>Composition</span></p><p>Imagine you’re building a reusable&nbsp;<code>Pagination</code>&nbsp;component which uses a&nbsp;<code>Button</code>&nbsp;internally, how do we expose the&nbsp;<code>Button</code>&nbsp;overrides via&nbsp;<code>Pagination</code>? And what if there are multiple buttons (First, Prev, Next, Last, etc) that the consumer may want to style differently? We have&nbsp;<a href=\"https://github.com/uber-web/baseui/issues/375\" data-href=\"https://github.com/uber-web/baseui/issues/375\" rel=\"nofollow noopener\" target=\"_blank\">some ideas</a>&nbsp;on how to approach this problem, but there’s no silver bullet and it will likely require some experimentation before the right solution emerges.</p><p><span>Complexity</span></p><p>Supporting overrides for your components adds complexity and forces you to think more critically about how consumers will override your internals. If you’re just building a component that will be reused a couple times within your own app, this added complexity is likely not worth it. But if you’re building a reusable component library that will be used by hundreds of engineers, sacrificing simplicity for the benefit of your consumers makes a lot of sense. For us it was an easy decision, and we’ve been consistently impressed with the clever use cases engineers are coming up with.</p><h4>Moving Forward</h4><p>Right now the overrides pattern is just that–a pattern. There’s no library or package that you can install, but if you want to see how we’re using this pattern in our own component library, you can&nbsp;<a href=\"https://github.com/uber-web/baseui\" data-href=\"https://github.com/uber-web/baseui\" rel=\"nofollow noopener\" target=\"_blank\">browse the project on Github</a>.</p><p>Hopefully you find this pattern useful, or at the very least have some new ideas on how to make your React components more reusable!</p>","filePath":"pages/React/.md","_id":"IbrvSLWtx2Gm0OXw"}
{"date":{"$$date":1541515569593},"title":"An Annotated webpack 4 Config for Frontend Web Development","sourceUrl":"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development","path":"JavaScript/JavaScript/","category":"JavaScript","tags":["Webpack"],"author":"Andrew Welch","excerpt":"","dateCreated":1541513749547,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Tue Nov 06 2018 19:51:44 GMT+0530 (India Standard Time)'\ntitle: 'An Annotated webpack 4 Config for Frontend Web Development'\ntags: ['Webpack']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development'\ntype: 'Post'\n---\n    ","htmlCode":"<div><div><p>Build­ing a&nbsp;mod­ern web­site has become cus­tom appli­ca­tion devel­op­ment. Web­sites are expect­ed to do more than just be mar­ket­ing sites as they&nbsp;take on the func­tion­al­i­ty of tra­di­tion­al&nbsp;apps.</p><p>Any time a&nbsp;process becomes com­pli­cat­ed, we break it down into man­age­able com­po­nents, and auto­mate the build process with tool­ing. This is the case in whether we are man­u­fac­tur­ing cars, draft­ing legal doc­u­ments, or build­ing websites.&nbsp;</p></div></div><div><div><blockquote>Use the right tool for the job</blockquote></div></div><div><div><p>Tools like&nbsp;<a href=\"http://webpack.js.org/\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack</a>&nbsp;have been at the fore­front of mod­ern web devel­op­ment for pre­cise­ly that rea­son: they help us build com­plex things.</p><p>web­pack&nbsp;<span>4</span>&nbsp;boasts some&nbsp;<a href=\"http://medium.com/webpack/webpack-4-released-today-6cdb994702d4\" target=\"_blank\" rel=\"noreferrer noopener\">amaz­ing improve­ments</a>, the most appeal­ing to me was how much faster it’d become at build­ing. So I&nbsp;decid­ed to adopt&nbsp;it.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x432_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x324_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg.webp 576w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x432_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x324_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg.webp 576w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEEBv%2FEACMQAAEDAgUFAAAAAAAAAAAAAAEAAwQCBRMyNHKxISIjMXH%2FxAAXAQEBAQEAAAAAAAAAAAAAAAAAAgED%2F8QAGxEAAQUBAQAAAAAAAAAAAAAAAAIDETEyAWH%2F2gAMAwEAAhEDEQA%2FANZfXZLUPwU9pzEe%2Fi4PTHhaIkdkcfcjnFBwhkqq6FaxkLssm6N7YeFbmekpsIWiY2DhG8cCrP%2FZ\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x432_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x324_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg 576w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEEBv%2FEACMQAAEDAgUFAAAAAAAAAAAAAAEAAwQCBRMyNHKxISIjMXH%2FxAAXAQEBAQEAAAAAAAAAAAAAAAAAAgED%2F8QAGxEAAQUBAQAAAAAAAAAAAAAAAAIDETEyAWH%2F2gAMAwEAAhEDEQA%2FANZfXZLUPwU9pzEe%2Fi4PTHhaIkdkcfcjnFBwhkqq6FaxkLssm6N7YeFbmekpsIWiY2DhG8cCrP%2FZ\" alt=\"Buckle Up I Want To Try Something\" height=\"auto\" width=\"900\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x432_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x324_crop_center-center_100_line/buckle-up-i-want-to-try-something.jpg 576w\"></picture></div></div></figure></div></section></div></div><div><div><p>Buck­le up, because this is a&nbsp;long arti­cle filled with tons of information.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#adopting-webpack\"><i></i><span>LINK</span></a></span>ADOPTING WEBPACK</h3><p>A bit over a&nbsp;year ago, I&nbsp;pub­lished the arti­cle&nbsp;<a href=\"https://nystudio107.com/blog/a-gulp-workflow-for-frontend-development-automation\">A&nbsp;Gulp Work­flow for Fron­tend Devel­op­ment Automa­tion</a>&nbsp;that showed how to use Gulp to accom­plish the same thing. How­ev­er in the inter­ven­ing time, I’ve been doing more and more with fron­tend frame­works like&nbsp;<a href=\"http://vuejs.org/\" target=\"_blank\" rel=\"noreferrer noopener\">Vue­JS</a>&nbsp;and&nbsp;<a href=\"http://graphql.org/\" target=\"_blank\" rel=\"noreferrer noopener\">GraphQL</a>, as dis­cussed in the&nbsp;<a href=\"https://nystudio107.com/blog/using-vuejs-graphql-to-make-practical-magic\">Using Vue­JS + GraphQL to make Prac­ti­cal Mag­ic</a>&nbsp;article.</p><p>I have found that web­pack makes it eas­i­er for me to build the types of web­sites and appli­ca­tions that I’m mak­ing these days, and it also allows me to use the most mod­ern tool­chain around.</p><p>There are oth­er choices:</p><ul><li><strong><a href=\"http://laravel.com/docs/5.7/mix\" target=\"_blank\" rel=\"noreferrer noopener\">Lar­avel Mix</a></strong>&nbsp;is a&nbsp;lay­er on top of web­pack. It’s appeal­ing in its sim­plic­i­ty: you can get up and run­ning quick­ly, and it’ll do what you want&nbsp;<span>90</span>% of the time. But that remain­ing&nbsp;<span>10</span>% means a&nbsp;drop down into web­pack any­way. And it still doesn’t sup­port web­pack&nbsp;<span>4</span>.</li><li><strong><a href=\"http://cli.vuejs.org/\" target=\"_blank\" rel=\"noreferrer noopener\">vue-cli</a></strong>&nbsp;is very appeal­ing if you’re build­ing noth­ing but Vue­JS fron­tends. It again is a&nbsp;lay­er on top of web­pack that works great most of the time, and does some amaz­ing things for you. But again, you need to drop down into web­pack when your needs diverge from what it pro­vides. And I’m not always using Vue­JS exclusively.</li><li><strong><a href=\"http://neutrinojs.org/\" target=\"_blank\" rel=\"noreferrer noopener\">Neu­tri­no</a></strong>&nbsp;is an inter­est­ing lay­er on web­pack that we explored in the&nbsp;<a href=\"http://devmode.fm/episodes/neutrino-how-i-learned-to-stop-worrying-and-love-webpack\" target=\"_blank\" rel=\"noreferrer noopener\">Neu­tri­no: How I&nbsp;Learned to Stop Wor­ry­ing and Love Web­pack</a>&nbsp;pod­cast. The premise is amaz­ing, build­ing a&nbsp;web­pack con­fig by snap­ping togeth­er pre­fab Lego brick com­po­nents. But learn­ing how it worked seemed almost as much work as learn­ing web­pack itself.</li></ul><p>I won’t fault you if you choose any of the above tools (or even some­thing else), but note that there’s a&nbsp;com­mon theme to all of them:&nbsp;they lay­er on top of webpack.</p></div></div><div><div><blockquote>Understanding how the layers in your development system work pays dividends in the end</blockquote></div></div><div><div><p>Ulti­mate­ly, you just need to decide where in the pyra­mid of fron­tend tech­nolo­gies you want to&nbsp;stand.<br></p><p>At some point, I&nbsp;think it makes sense to under­stand how an impor­tant tool like web­pack works. A&nbsp;while ago, I’d&nbsp;<a href=\"http://twitter.com/nystudio107/status/941488105600765952\" target=\"_blank\" rel=\"noreferrer noopener\">com­plained to Sean Larkin</a>&nbsp;(one of the web­pack core team mem­bers) that web­pack was like a&nbsp;<span></span>​<span>“</span>black box”. His reply was pithy, but quite poignant:</p></div></div><div><div><blockquote>It’s only black if you haven’t opened it</blockquote></div></div><div><div><p>He’s right. Time to open the&nbsp;box.</p><p>This arti­cle will not teach you all there is to know about web­pack or even how to install it. There are plen­ty of resources avail­able for that — pick the for­mat that you learn best&nbsp;from:</p><ul><li><strong><a href=\"https://medium.com/@rajaraodv/webpack-the-confusing-parts-58712f8fcad9\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack — the Con­fus­ing Parts</a></strong> — for a&nbsp;con­cise overview of how web­pack&nbsp;works</li><li><strong><a href=\"http://webpack.js.org/concepts/\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack doc­u­men­ta­tion</a></strong> — if you learn best by reading</li><li><strong><a href=\"http://frontendmasters.com/courses/webpack-fundamentals/\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack fun­da­men­tals</a></strong> — if you learn best by watching</li><li><strong><a href=\"http://www.valentinog.com/blog/from-gulp-to-webpack-4-tutorial/\" target=\"_blank\" rel=\"noreferrer noopener\">How to switch from Gulp to web­pack</a></strong> — if that’s where you’re com­ing&nbsp;from</li></ul><p>…and there are many, many more. Instead, this arti­cle will anno­tate a&nbsp;full work­ing exam­ple of a&nbsp;fair­ly sophis­ti­cat­ed web­pack&nbsp;<span>4</span>&nbsp;set­up. You may use all of it; you may use bits and pieces of it. But hope­ful­ly you’ll learn a&nbsp;thing or two from&nbsp;it.</p><p>While on my con­tin­u­ing jour­ney learn­ing web­pack, I&nbsp;found many tuto­r­i­al videos, a&nbsp;bunch of write-ups show­ing how to install it and a&nbsp;basic con­fig,&nbsp;but not a&nbsp;whole lot of real-world pro­duc­tion exam­ples of web­pack con­figs. So here we&nbsp;are.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#what-we-get-out-of-the-box\"><i></i><span>LINK</span></a></span>WHAT WE GET OUT OF THE BOX</h3><p>As I&nbsp;set about learn­ing web­pack by open­ing up the box, I&nbsp;had a&nbsp;list of tech­nolo­gies that I&nbsp;relied upon that I&nbsp;want­ed to be part of the build process. I&nbsp;also took the time to look around to see what else was out there that I&nbsp;could adopt in the process.</p><p>As dis­cussed in the&nbsp;<a href=\"https://nystudio107.com/blog/a-pretty-website-isnt-enough\">A&nbsp;Pret­ty Web­site Isn’t Enough arti­cle</a>, web­site per­for­mance has always been a&nbsp;key con­cern of mine, so it should be no sur­prise that there’s a&nbsp;focus on that in this web­pack con­fig as&nbsp;well.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-black-box.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-black-box.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-black-box.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-black-box.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-black-box.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-black-box.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-black-box.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-black-box.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-black-box.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-black-box.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMFBv%2FEACQQAAECBQIHAAAAAAAAAAAAAAIBAwAEBQYREnEjMTQ1UXKx%2F8QAFAEBAAAAAAAAAAAAAAAAAAAAAP%2FEABQRAQAAAAAAAAAAAAAAAAAAAAD%2F2gAMAwEAAhEDEQA%2FAH3Mdckpx15CeKTUsgoEuBTwuOUAWzW6vPVFpnJuS2eIRDq0pvAbSZ6Z31WAnWz2drdfsB%2F%2F2Q%3D%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-black-box.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-black-box.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-black-box.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-black-box.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-black-box.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEASABIAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMFBv%2FEACQQAAECBQIHAAAAAAAAAAAAAAIBAwAEBQYREnEjMTQ1UXKx%2F8QAFAEBAAAAAAAAAAAAAAAAAAAAAP%2FEABQRAQAAAAAAAAAAAAAAAAAAAAD%2F2gAMAwEAAhEDEQA%2FAH3Mdckpx15CeKTUsgoEuBTwuOUAWzW6vPVFpnJuS2eIRDq0pvAbSZ6Z31WAnWz2drdfsB%2F%2F2Q%3D%3D\" alt=\"Webpack Black Box\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-black-box.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-black-box.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-black-box.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-black-box.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-black-box.jpg 368w\"></picture></div></div></figure></div></section></div></div><div><div><p>So here is my very opin­ion­at­ed list of things that I&nbsp;want­ed web­pack to do for me, and tech­nolo­gies I&nbsp;want­ed to incor­po­rate in my build process:</p><ul><li><strong><a href=\"http://webpack.js.org/guides/production/\" target=\"_blank\" rel=\"noreferrer noopener\">Devel­op­ment / Pro­duc­tion</a></strong> — in local devel­op­ment, I&nbsp;want fast builds via the in-mem­o­ry&nbsp;<a href=\"http://webpack.js.org/configuration/dev-server/\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack-dev-serv­er</a>, and for pro­duc­tion builds (often done in a&nbsp;Dock­er con­tain­er via&nbsp;<a href=\"http://buddy.works/\" target=\"_blank\" rel=\"noreferrer noopener\">buddy.works</a>), I&nbsp;want the every pos­si­ble opti­miza­tion. Thus we have sep­a­rate&nbsp;<kbd>dev</kbd>&nbsp;and&nbsp;<kbd>prod</kbd>&nbsp;con­figs&nbsp;<span>&amp;</span>&nbsp;builds.</li><li><strong><a href=\"http://webpack.js.org/concepts/hot-module-replacement/\" target=\"_blank\" rel=\"noreferrer noopener\">Hot Mod­ule Replace­ment</a></strong> — as I&nbsp;make changes to my JavaScript,&nbsp;<span>CSS</span>, or tem­plates, I&nbsp;want the web­page to seam­less­ly refresh. This speeds devel­op­ment tremen­dous­ly: just&nbsp;say no to the Reload button.</li><li><strong><a href=\"http://webpack.js.org/guides/code-splitting/#dynamic-imports\" target=\"_blank\" rel=\"noreferrer noopener\">Dynam­ic Code Split­ting</a></strong> — I&nbsp;don’t want to man­u­al­ly have to define JavaScript chunks in a&nbsp;con­fig file, I&nbsp;want web­pack to sort it out for&nbsp;me.</li><li><strong><a href=\"http://webpack.js.org/guides/lazy-loading/\" target=\"_blank\" rel=\"noreferrer noopener\">Lazy Load­ing</a></strong> — aka async dynam­ic mod­ule load­ing. Load only the code/​resources need­ed, when they are need­ed, with­out ren­der blocking.</li><li><strong><a href=\"http://philipwalton.com/articles/deploying-es2015-code-in-production-today/\">Mod­ern&nbsp;<span>&amp;</span>&nbsp;Lega­cy&nbsp;<span>JS</span>&nbsp;Bun­dles</a></strong> — I&nbsp;want­ed to deploy mod­ern&nbsp;<span>ES<span>2015</span></span>+ JavaScript mod­ules to the&nbsp;<a href=\"https://caniuse.com/#search=javascript%20modules\" target=\"_blank\" rel=\"noreferrer noopener\"><span>75</span>%+ of world­wide browsers</a>&nbsp;that sup­port it, while grace­ful­ly pro­vid­ing a&nbsp;fall­back lega­cy bun­dle for lega­cy browsers (with all of the tran­spiled code and polyfills).</li><li><strong><a href=\"http://webpack.js.org/guides/caching/\" target=\"_blank\" rel=\"noreferrer noopener\">Cache Bust­ing via manifest.json</a>&nbsp;</strong>- this allows us to set a&nbsp;long expiry data for our sta­t­ic assets, while also ensur­ing that they are auto­mat­i­cal­ly cache bust­ed if they change.</li><li><strong><a href=\"http://developers.google.com/speed/docs/insights/OptimizeCSSDelivery\" target=\"_blank\" rel=\"noreferrer noopener\">Crit­i­cal&nbsp;<span>CSS</span></a></strong> — as per the&nbsp;<a href=\"https://nystudio107.com/blog/implementing-critical-css\">Imple­ment­ing Crit­i­cal&nbsp;<span>CSS</span>&nbsp;on your web­site arti­cle</a>, this is some­thing that&nbsp;makes ini­tial page loads sig­nif­i­cant­ly faster.</li><li><strong><a href=\"http://developers.google.com/web/tools/workbox/\" target=\"_blank\" rel=\"noreferrer noopener\">Work­box Ser­vice Work­er</a></strong> — we can lever­age Google’s Work­box project to gen­er­ate a&nbsp;<a href=\"http://developers.google.com/web/fundamentals/primers/service-workers/\" target=\"_blank\" rel=\"noreferrer noopener\">Ser­vice Work­er</a>&nbsp;for us that will know about all of our project’s assets.&nbsp;<span>PWA</span>, here we&nbsp;come!</li><li><strong><a href=\"http://postcss.org/\" target=\"_blank\" rel=\"noreferrer noopener\">PostC­SS</a></strong> — I&nbsp;think of it as the&nbsp;<span></span>​<span>“</span>Babel of&nbsp;<span>CSS</span>”, things like&nbsp;<span>SASS</span>&nbsp;and&nbsp;<span>SCSS</span>&nbsp;are built on it, and it lets you use upcom­ing&nbsp;<span>CSS</span>&nbsp;fea­tures&nbsp;now.</li><li><strong><a href=\"http://images.guide/\" target=\"_blank\" rel=\"noreferrer noopener\">Image Opti­miza­tion</a></strong> — Images are by far the largest thing on most web­pages, so it makes sense to opti­mize them via auto­mat­ed tools like&nbsp;<kbd>mozjpeg</kbd>,&nbsp;<kbd>optipng</kbd>,&nbsp;<kbd>svgo</kbd>, etc.</li><li><strong><a href=\"http://developers.google.com/speed/webp/\" target=\"_blank\" rel=\"noreferrer noopener\">Auto­mat­ic .webp Cre­ation</a></strong> — Chrome, Edge, and Fire­fox all are sup­port­ing&nbsp;<kbd>.webp</kbd>, a&nbsp;for­mat that is more effi­cient than&nbsp;<span>JPEG</span>.</li><li><strong><a href=\"http://vuejs.org/\" target=\"_blank\" rel=\"noreferrer noopener\">Vue­JS</a></strong> — Vue­JS is my fron­tend frame­work of choice. I&nbsp;want to be able to use sin­gle file&nbsp;<kbd>.vue</kbd>&nbsp;com­po­nents as a&nbsp;seam­less part of my devel­op­ment process.</li><li><strong><a href=\"http://tailwindcss.com/docs/what-is-tailwind/\" target=\"_blank\" rel=\"noreferrer noopener\">Tail­wind&nbsp;<span>CSS</span></a></strong> — Tail­wind is a&nbsp;util­i­ty-first&nbsp;<span>CSS</span>&nbsp;that I&nbsp;use for rapid­ly pro­to­typ­ing in local dev, and then run through&nbsp;<a href=\"http://github.com/FullHuman/purgecss\" target=\"_blank\" rel=\"noreferrer noopener\">PurgeC­SS</a>&nbsp;for pro­duc­tion, to reduce the size dramatically.</li></ul><p>Phew, quite an ambi­tious&nbsp;list!</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/ambitious-feature-list-webpack.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEBLAEsAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAABwMG%2F8QAIxAAAgIAAwkAAAAAAAAAAAAAAQIAAwYRIQQSMTQ1YXFywf%2FEABYBAQEBAAAAAAAAAAAAAAAAAAQFBv%2FEAB4RAAMAAQQDAAAAAAAAAAAAAAABAgQDESEyM0Nx%2F9oADAMBAAIRAxEAPwCgrsaoF7LddczwgVkRuMehRlMRh02gK77wJzUdouLVrgNcOHyI79JXzM%2F6l9KK8wdYq5%2Bv0%2Byvh9A2X3R%2F%2F9k%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEBLAEsAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAABwMG%2F8QAIxAAAgIAAwkAAAAAAAAAAAAAAQIAAwYRIQQSMTQ1YXFywf%2FEABYBAQEBAAAAAAAAAAAAAAAAAAQFBv%2FEAB4RAAMAAQQDAAAAAAAAAAAAAAABAgQDESEyM0Nx%2F9oADAMBAAIRAxEAPwCgrsaoF7LddczwgVkRuMehRlMRh02gK77wJzUdouLVrgNcOHyI79JXzM%2F6l9KK8wdYq5%2Bv0%2Byvh9A2X3R%2F%2F9k%3D\" alt=\"Ambitious Feature List Webpack\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/ambitious-feature-list-webpack.jpg 368w\"></picture><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQEBLAEsAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAABwMG%2F8QAIxAAAgIAAwkAAAAAAAAAAAAAAQIAAwYRIQQSMTQ1YXFywf%2FEABYBAQEBAAAAAAAAAAAAAAAAAAQFBv%2FEAB4RAAMAAQQDAAAAAAAAAAAAAAABAgQDESEyM0Nx%2F9oADAMBAAIRAxEAPwCgrsaoF7LddczwgVkRuMehRlMRh02gK77wJzUdouLVrgNcOHyI79JXzM%2F6l9KK8wdYq5%2Bv0%2Byvh9A2X3R%2F%2F9k%3D\"></div></div></figure></div></section></div></div><div><div><p>There’s more too, like the auto­mat­ic ugli­fi­ca­tion of JavaScript, mini­fi­ca­tion of&nbsp;<span>CSS</span>, and oth­er stan­dard things we’d expect from a&nbsp;fron­tend build system.</p><p>I also want it to work with a&nbsp;devel­op­ment team that may use dis­parate tools for their local dev envi­ron­ment, and to have the con­fig be easy to main­tain and reuse from project to project.</p></div></div><div><div><blockquote>The importance of maintainability and reusability can’t be understated</blockquote></div></div><div><div><p>Your stack of fron­tend frameworks/​technologies&nbsp;may look dif­fer­ent from mine, but the prin­ci­ples applied will be the same. So read on, regard­less of what you&nbsp;use!</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#project-tree-organization\"><i></i><span>LINK</span></a></span>PROJECT TREE &amp; ORGANIZATION</h3><p>To give you an overview of what the set­up looks like, here’s a&nbsp;bare bones project tree:</p></div></div><div><div><section><div><pre><code>├── example.env\n├── package.json\n├── postcss.config.js\n├── src\n│   ├── css\n│   │   ├── app.pcss\n│   │   ├── components\n│   │   │   ├── global.pcss\n│   │   │   ├── typography.pcss\n│   │   │   └── webfonts.pcss\n│   │   ├── pages\n│   │   │   └── homepage.pcss\n│   │   └── vendor.pcss\n│   ├── fonts\n│   ├── img\n│   │   └── favicon-src.png\n│   ├── js\n│   │   ├── app.js\n│   │   └── workbox-catch-handler.js\n│   └── vue\n│       └── Confetti.vue\n├── tailwind.config.js\n├── templates\n├── webpack.common.js\n├── webpack.dev.js\n├── webpack.prod.js\n├── webpack.settings.js\n└── yarn.lock</code></pre><aside><h5><i></i>&nbsp;Bare bones project tree</h5></aside></div></section></div></div><div><div><p>For the com­plete source code for every­thing pre­sent­ed here, check out the&nbsp;<strong><a href=\"http://github.com/nystudio107/annotated-webpack-4-config\" target=\"_blank\" rel=\"noreferrer noopener\">anno­tat­ed-web­pack-<span>4</span>-con­fig</a></strong>&nbsp;github repo.</p></div></div><div><div><p>So in terms of the core con­fig files,&nbsp;we have:</p><ul><li><kbd><strong>.env</strong></kbd> — envi­ron­men­tal-spe­cif­ic set­tings for the&nbsp;<kbd>webpack-dev-server</kbd>; this is&nbsp;<em>nev­er</em>&nbsp;checked into&nbsp;git</li><li><kbd><strong>webpack.settings.js</strong></kbd> — a&nbsp;JSON-ish set­tings file, the only file we need to edit from project to project</li><li><kbd><strong>webpack.common.js</strong></kbd> — com­mon set­tings for both types of builds</li><li><kbd><strong>webpack.dev.js</strong></kbd> — set­tings for local devel­op­ment builds</li><li><kbd><strong>webpack.prod.js</strong></kbd> — set­tings for pro­duc­tion builds</li></ul><p>Here’s a&nbsp;dia­gram of how it all fits together:</p></div></div><div><div><section><div><figure><div><div><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x1315_crop_center-center_100_line/webpack-config-text-solid-sm.png.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x1018_crop_center-center_100_line/webpack-config-text-solid-sm.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x763_crop_center-center_100_line/webpack-config-text-solid-sm.png.webp 576w\" type=\"image/webp\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAVABADASIAAhEBAxEB%2F8QAGAABAAMBAAAAAAAAAAAAAAAAAAMEBQb%2FxAAlEAABAwMDAwUAAAAAAAAAAAABAgMEAAUREyFREhWBMTNBQ9H%2FxAAWAQEBAQAAAAAAAAAAAAAAAAACAwT%2FxAAeEQABAwQDAAAAAAAAAAAAAAABAAIREhMhQQMxQv%2FaAAwDAQACEQMRAD8A7C7SmYrbeuoJ6lYGQdz4paZTMptzQUFdKsHAOx81i3efEu6mo6FutrSvYlvPrtzS0T4lpU9HUt1xal7kN8bc0bIqr2jd86U7bI7t0acbAX8Mj9qq6T3BY04%2FuH6RzSlV5sRC3sY0nIHS%2F9k%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x1315_crop_center-center_100_line/webpack-config-text-solid-sm.png 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x1018_crop_center-center_100_line/webpack-config-text-solid-sm.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x763_crop_center-center_100_line/webpack-config-text-solid-sm.png 576w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAVABADASIAAhEBAxEB%2F8QAGAABAAMBAAAAAAAAAAAAAAAAAAMEBQb%2FxAAlEAABAwMDAwUAAAAAAAAAAAABAgMEAAUREyFREhWBMTNBQ9H%2FxAAWAQEBAQAAAAAAAAAAAAAAAAACAwT%2FxAAeEQABAwQDAAAAAAAAAAAAAAABAAIREhMhQQMxQv%2FaAAwDAQACEQMRAD8A7C7SmYrbeuoJ6lYGQdz4paZTMptzQUFdKsHAOx81i3efEu6mo6FutrSvYlvPrtzS0T4lpU9HUt1xal7kN8bc0bIqr2jd86U7bI7t0acbAX8Mj9qq6T3BY04%2FuH6RzSlV5sRC3sY0nIHS%2F9k%3D\" alt=\"Webpack Config Text Solid Sm\" height=\"auto\" width=\"744\"></picture></div></div></figure></div></section></div></div><div><div><p>The goal is that you need to edit only what is in the gold col­ored round­ed-rec­tan­gles (<kbd>.env</kbd><span>&amp;</span>&nbsp;<kbd>webpack.settings.js</kbd>) from project to project.</p><p>Sep­a­rat­ing things out in this way makes work­ing with the con­fig files quite a&nbsp;bit eas­i­er. Even if you do end up chang­ing the var­i­ous web­pack con­fig files from what I’ve pre­sent­ed here, keep­ing with this method­ol­o­gy will help you main­tain them long-term.</p><p>Don’t wor­ry, we’ll get into each file in detail later.<br></p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#annotated-package-json\"><i></i><span>LINK</span></a></span>ANNOTATED PACKAGE.JSON</h3><p>Let’s start by break­ing down our&nbsp;<kbd>package.json</kbd>&nbsp;:</p></div></div><div><div><section><div><pre><code><span>{</span>\n    <span>\"name\"</span><span>:</span> <span>\"example-project\"</span><span>,</span>\n    <span>\"version\"</span><span>:</span> <span>\"1.0.0\"</span><span>,</span>\n    <span>\"description\"</span><span>:</span> <span>\"Example Project brand website\"</span><span>,</span>\n    <span>\"keywords\"</span><span>:</span> <span>[</span>\n        <span>\"Example\"</span><span>,</span>\n        <span>\"Keywords\"</span>\n    <span>]</span><span>,</span>\n    <span>\"homepage\"</span><span>:</span> <span>\"https://github.com/example-developer/example-project\"</span><span>,</span>\n    <span>\"bugs\"</span><span>:</span> <span>{</span>\n        <span>\"email\"</span><span>:</span> <span>\"someone@example-developer.com\"</span><span>,</span>\n        <span>\"url\"</span><span>:</span> <span>\"https://github.com/example-developer/example-project/issues\"</span>\n    <span>}</span><span>,</span>\n    <span>\"license\"</span><span>:</span> <span>\"SEE LICENSE IN LICENSE.md\"</span><span>,</span>\n    <span>\"author\"</span><span>:</span> <span>{</span>\n        <span>\"name\"</span><span>:</span> <span>\"Example Developer\"</span><span>,</span>\n        <span>\"email\"</span><span>:</span> <span>\"someone@example-developer.com\"</span><span>,</span>\n        <span>\"url\"</span><span>:</span> <span>\"https://example-developer.com\"</span>\n    <span>}</span><span>,</span>\n    <span>\"browser\"</span><span>:</span> <span>\"/web/index.php\"</span><span>,</span>\n    <span>\"repository\"</span><span>:</span> <span>{</span>\n        <span>\"type\"</span><span>:</span> <span>\"git\"</span><span>,</span>\n        <span>\"url\"</span><span>:</span> <span>\"git+https://github.com/example-developer/example-project.git\"</span>\n    <span>}</span><span>,</span>\n    <span>\"private\"</span><span>:</span> <span>true</span><span>,</span></code></pre><aside><h5><i></i>&nbsp;package.json meta information</h5></aside></div></section></div></div><div><div><p>Noth­ing par­tic­u­lar­ly inter­est­ing here, just meta infor­ma­tion for our web­site as out­lined in the&nbsp;<a href=\"http://docs.npmjs.com/files/package.json\" target=\"_blank\" rel=\"noreferrer noopener\">package.json spec­i­fi­ca­tion</a>.</p></div></div><div><div><section><div><pre><code><span>\"scripts\"</span><span>:</span> <span>{</span>\n        <span>\"dev\"</span><span>:</span> <span>\"webpack-dev-server --config webpack.dev.js\"</span><span>,</span>\n        <span>\"build\"</span><span>:</span> <span>\"webpack --config webpack.prod.js --progress --hide-modules\"</span>\n    <span>}</span><span>,</span></code></pre><aside><h5><i></i>&nbsp;package.json scripts</h5></aside></div></section></div></div><div><div><p>These are the scripts that rep­re­sent the two major build steps we have for our project:</p><ul><li><strong>dev</strong> — used when­ev­er we’re work­ing on the project, it spins up the&nbsp;<kbd>webpack-dev-server</kbd>&nbsp;to allow for Hot Mod­ule Replace­ment (<span>HMR</span>), in mem­o­ry com­pi­la­tion, and oth­er niceties.</li><li><strong>build</strong> — used when we do a&nbsp;pro­duc­tion deploy­ment,&nbsp;it does all of the fan­cy and time con­sum­ing things like Crit­i­cal&nbsp;<span>CSS</span>, ugli­fi­ca­tion of JavaScript, etc. that need to be done for pro­duc­tion deployment.</li></ul><p>To run them, we just use the&nbsp;<span>CLI</span>&nbsp;<em>inside of our devel­op­ment envi­ron­ment</em>&nbsp;to do&nbsp;<kbd>yarn dev</kbd>&nbsp;or&nbsp;<kbd>yarn build</kbd>&nbsp;if we’re using&nbsp;<a href=\"http://yarnpkg.com/\" target=\"_blank\" rel=\"noreferrer noopener\">yarn</a>, and&nbsp;<kbd>npm run dev</kbd>&nbsp;or&nbsp;<kbd>npm run build</kbd>&nbsp;if we’re using&nbsp;<a href=\"http://www.npmjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">npm</a>.&nbsp;These are the only two com­mands you’ll need to&nbsp;use.</p><p>Notice that via the&nbsp;<kbd>--config</kbd>&nbsp;flag, we’re also pass­ing in&nbsp;<a href=\"http://webpack.js.org/guides/production/\" target=\"_blank\" rel=\"noreferrer noopener\">sep­a­rate con­fig files</a>. This lets us break down our web­pack con­fig into sep­a­rate log­i­cal files, because we’re going to be doing things very dif­fer­ent­ly for devel­op­ment builds com­pared to pro­duc­tion builds.</p></div></div><div><div><p>Next up we have our&nbsp;<strong>browser­slist</strong>:<br></p></div></div><div><div><section><div><pre><code><span>\"browserslist\"</span><span>:</span> <span>{</span>\n        <span>\"production\"</span><span>:</span> <span>[</span>\n            <span>\"&gt; 1%\"</span><span>,</span>\n            <span>\"last 2 versions\"</span><span>,</span>\n            <span>\"Firefox ESR\"</span>\n        <span>]</span><span>,</span>\n        <span>\"legacyBrowsers\"</span><span>:</span> <span>[</span>\n            <span>\"&gt; 1%\"</span><span>,</span>\n            <span>\"last 2 versions\"</span><span>,</span>\n            <span>\"Firefox ESR\"</span>\n        <span>]</span><span>,</span>\n        <span>\"modernBrowsers\"</span><span>:</span> <span>[</span>\n            <span>\"last 2 Chrome versions\"</span><span>,</span>\n            <span>\"not Chrome &lt; 60\"</span><span>,</span>\n            <span>\"last 2 Safari versions\"</span><span>,</span>\n            <span>\"not Safari &lt; 10.1\"</span><span>,</span>\n            <span>\"last 2 iOS versions\"</span><span>,</span>\n            <span>\"not iOS &lt; 10.3\"</span><span>,</span>\n            <span>\"last 2 Firefox versions\"</span><span>,</span>\n            <span>\"not Firefox &lt; 54\"</span><span>,</span>\n            <span>\"last 2 Edge versions\"</span><span>,</span>\n            <span>\"not Edge &lt; 15\"</span>\n        <span>]</span>\n    <span>}</span><span>,</span></code></pre><aside><h5><i></i>&nbsp;package.json browserslist</h5></aside></div></section></div></div><div><div><p>This is a&nbsp;<a href=\"http://github.com/browserslist/browserslist\" target=\"_blank\" rel=\"noreferrer noopener\">browser­slist</a>&nbsp;that tar­gets spe­cif­ic browsers based on human-read­able con­figs. The&nbsp;<a href=\"http://github.com/postcss/autoprefixer\" target=\"_blank\" rel=\"noreferrer noopener\">PostC­SS auto­pre­fix­er</a>&nbsp;defaults to using our&nbsp;<kbd>production</kbd>&nbsp;set­tings. We pass in the&nbsp;<kbd>legacyBrowsers</kbd>&nbsp;and&nbsp;<kbd>modernBrowsers</kbd>&nbsp;to Babel to han­dle build­ing both lega­cy and mod­ern JavaScript bun­dles. More on that&nbsp;later!</p><p>Next up we have our&nbsp;<strong>devDe­pen­den­cies</strong>, which are all of the npm pack­ages required for our build system:<br></p></div></div><div><div><section><div><pre><code><span>\"devDependencies\"</span><span>:</span> <span>{</span>\n        <span>\"@babel/core\"</span><span>:</span> <span>\"^7.1.0\"</span><span>,</span>\n        <span>\"@babel/plugin-syntax-dynamic-import\"</span><span>:</span> <span>\"^7.0.0\"</span><span>,</span>\n        <span>\"@babel/plugin-transform-runtime\"</span><span>:</span> <span>\"^7.1.0\"</span><span>,</span>\n        <span>\"@babel/preset-env\"</span><span>:</span> <span>\"^7.1.0\"</span><span>,</span>\n        <span>\"@babel/register\"</span><span>:</span> <span>\"^7.0.0\"</span><span>,</span>\n        <span>\"@babel/runtime\"</span><span>:</span> <span>\"^7.0.0\"</span><span>,</span>\n        <span>\"autoprefixer\"</span><span>:</span> <span>\"^9.1.5\"</span><span>,</span>\n        <span>\"babel-loader\"</span><span>:</span> <span>\"^8.0.2\"</span><span>,</span>\n        <span>\"clean-webpack-plugin\"</span><span>:</span> <span>\"^0.1.19\"</span><span>,</span>\n        <span>\"copy-webpack-plugin\"</span><span>:</span> <span>\"^4.5.2\"</span><span>,</span>\n        <span>\"create-symlink-webpack-plugin\"</span><span>:</span> <span>\"^1.0.0\"</span><span>,</span>\n        <span>\"critical\"</span><span>:</span> <span>\"^1.3.4\"</span><span>,</span>\n        <span>\"critical-css-webpack-plugin\"</span><span>:</span> <span>\"^0.2.0\"</span><span>,</span>\n        <span>\"css-loader\"</span><span>:</span> <span>\"^1.0.0\"</span><span>,</span>\n        <span>\"cssnano\"</span><span>:</span> <span>\"^4.1.0\"</span><span>,</span>\n        <span>\"dotenv\"</span><span>:</span> <span>\"^6.1.0\"</span><span>,</span>\n        <span>\"file-loader\"</span><span>:</span> <span>\"^2.0.0\"</span><span>,</span>\n        <span>\"git-rev-sync\"</span><span>:</span> <span>\"^1.12.0\"</span><span>,</span>\n        <span>\"glob-all\"</span><span>:</span> <span>\"^3.1.0\"</span><span>,</span>\n        <span>\"html-webpack-plugin\"</span><span>:</span> <span>\"^3.2.0\"</span><span>,</span>\n        <span>\"ignore-loader\"</span><span>:</span> <span>\"^0.1.2\"</span><span>,</span>\n        <span>\"imagemin\"</span><span>:</span> <span>\"^6.0.0\"</span><span>,</span>\n        <span>\"imagemin-gifsicle\"</span><span>:</span> <span>\"^5.2.0\"</span><span>,</span>\n        <span>\"imagemin-mozjpeg\"</span><span>:</span> <span>\"^7.0.0\"</span><span>,</span>\n        <span>\"imagemin-optipng\"</span><span>:</span> <span>\"^5.2.1\"</span><span>,</span>\n        <span>\"imagemin-svgo\"</span><span>:</span> <span>\"^7.0.0\"</span><span>,</span>\n        <span>\"imagemin-webp\"</span><span>:</span> <span>\"^4.1.0\"</span><span>,</span>\n        <span>\"imagemin-webp-webpack-plugin\"</span><span>:</span> <span>\"^1.0.2\"</span><span>,</span>\n        <span>\"img-loader\"</span><span>:</span> <span>\"^3.0.1\"</span><span>,</span>\n        <span>\"mini-css-extract-plugin\"</span><span>:</span> <span>\"^0.4.3\"</span><span>,</span>\n        <span>\"moment\"</span><span>:</span> <span>\"^2.22.2\"</span><span>,</span>\n        <span>\"optimize-css-assets-webpack-plugin\"</span><span>:</span> <span>\"^5.0.1\"</span><span>,</span>\n        <span>\"postcss\"</span><span>:</span> <span>\"^7.0.2\"</span><span>,</span>\n        <span>\"postcss-extend\"</span><span>:</span> <span>\"^1.0.5\"</span><span>,</span>\n        <span>\"postcss-hexrgba\"</span><span>:</span> <span>\"^1.0.1\"</span><span>,</span>\n        <span>\"postcss-import\"</span><span>:</span> <span>\"^12.0.0\"</span><span>,</span>\n        <span>\"postcss-loader\"</span><span>:</span> <span>\"^3.0.0\"</span><span>,</span>\n        <span>\"postcss-nested\"</span><span>:</span> <span>\"^4.1.0\"</span><span>,</span>\n        <span>\"postcss-nested-ancestors\"</span><span>:</span> <span>\"^2.0.0\"</span><span>,</span>\n        <span>\"postcss-simple-vars\"</span><span>:</span> <span>\"^5.0.1\"</span><span>,</span>\n        <span>\"purgecss-webpack-plugin\"</span><span>:</span> <span>\"^1.3.0\"</span><span>,</span>\n        <span>\"purgecss-whitelister\"</span><span>:</span> <span>\"^2.2.0\"</span><span>,</span>\n        <span>\"resolve-url-loader\"</span><span>:</span> <span>\"^3.0.0\"</span><span>,</span>\n        <span>\"sane\"</span><span>:</span> <span>\"^4.0.1\"</span><span>,</span>\n        <span>\"save-remote-file-webpack-plugin\"</span><span>:</span> <span>\"^1.0.0\"</span><span>,</span>\n        <span>\"style-loader\"</span><span>:</span> <span>\"^0.23.0\"</span><span>,</span>\n        <span>\"symlink-webpack-plugin\"</span><span>:</span> <span>\"^0.0.4\"</span><span>,</span>\n        <span>\"terser-webpack-plugin\"</span><span>:</span> <span>\"^1.1.0\"</span><span>,</span>\n        <span>\"vue-loader\"</span><span>:</span> <span>\"^15.4.2\"</span><span>,</span>\n        <span>\"vue-style-loader\"</span><span>:</span> <span>\"^4.1.2\"</span><span>,</span>\n        <span>\"vue-template-compiler\"</span><span>:</span> <span>\"^2.5.17\"</span><span>,</span>\n        <span>\"webapp-webpack-plugin\"</span><span>:</span> <span>\"https://github.com/brunocodutra/webapp-webpack-plugin.git\"</span><span>,</span>\n        <span>\"webpack\"</span><span>:</span> <span>\"^4.19.1\"</span><span>,</span>\n        <span>\"webpack-bundle-analyzer\"</span><span>:</span> <span>\"^3.0.2\"</span><span>,</span>\n        <span>\"webpack-cli\"</span><span>:</span> <span>\"^3.1.1\"</span><span>,</span>\n        <span>\"webpack-dashboard\"</span><span>:</span> <span>\"^2.0.0\"</span><span>,</span>\n        <span>\"webpack-dev-server\"</span><span>:</span> <span>\"^3.1.9\"</span><span>,</span>\n        <span>\"webpack-manifest-plugin\"</span><span>:</span> <span>\"^2.0.4\"</span><span>,</span>\n        <span>\"webpack-merge\"</span><span>:</span> <span>\"^4.1.4\"</span><span>,</span>\n        <span>\"webpack-notifier\"</span><span>:</span> <span>\"^1.6.0\"</span><span>,</span>\n        <span>\"workbox-webpack-plugin\"</span><span>:</span> <span>\"^3.6.2\"</span>\n    <span>}</span><span>,</span></code></pre><aside><h5><i></i>&nbsp;package.json devDependencies</h5></aside></div></section></div></div><div><div><p>Yep, that’s quite a&nbsp;bit of pack­ages. But our build process&nbsp;<em>does</em>&nbsp;quite a&nbsp;bit.</p><p>And final­ly, we use the&nbsp;<strong>depen­den­cies</strong>&nbsp;for the pack­ages we use on the fron­tend of our website:</p></div></div><div><div><section><div><pre><code><span>\"dependencies\"</span><span>:</span> <span>{</span>\n        <span>\"@babel/polyfill\"</span><span>:</span> <span>\"^7.0.0\"</span><span>,</span>\n        <span>\"axios\"</span><span>:</span> <span>\"^0.18.0\"</span><span>,</span>\n        <span>\"tailwindcss\"</span><span>:</span> <span>\"^0.6.6\"</span><span>,</span>\n        <span>\"vue\"</span><span>:</span> <span>\"^2.5.17\"</span><span>,</span>\n        <span>\"vue-confetti\"</span><span>:</span> <span>\"^0.4.2\"</span>\n    <span>}</span>\n<span>}</span></code></pre><aside><h5><i></i>&nbsp;package.json dependencies</h5></aside></div></section></div></div><div><div><p>Obvi­ous­ly for an actu­al website/​app, there would be more pack­ages in&nbsp;<strong>depen­den­cies</strong>; but we’re focus­ing on the build process.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#annotated-webpack-settings-js\"><i></i><span>LINK</span></a></span>ANNOTATED WEBPACK.SETTINGS.JS</h3><p>I’m also using a&nbsp;sim­i­lar approach I&nbsp;dis­cussed in the&nbsp;<a href=\"https://nystudio107.com/blog/a-better-package-json-for-the-frontend\">A&nbsp;Bet­ter package.json for the Fron­tend arti­cle</a>, which is to&nbsp;cor­don off the con­fig that changes from project to project into a&nbsp;sep­a­rate&nbsp;<kbd>webpack.settings.js</kbd>, and keep the web­pack con­fig itself the&nbsp;same.</p></div></div><div><div><blockquote>The key concept is that the only file we need to edit from project to project is the webpack.settings.js</blockquote></div></div><div><div><p>Since most projects have a&nbsp;very sim­i­lar set of things that need to be done, we can cre­ate a&nbsp;web­pack con­fig that works for a&nbsp;wide vari­ety of projects. We just need to change the data it oper­ates&nbsp;on.</p><p>Thus the sep­a­ra­tion of con­cerns between what is in our&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;file (the data that changes from project to project) and what is in our web­pack con­fig (how that data is manip­u­lat­ed to pro­duce an end result).</p></div></div><div><div><section><div><pre><code><span>// webpack.settings.js - webpack settings config</span>\n\n<span>// node modules</span>\n<span>require</span><span>(</span><span>'dotenv'</span><span>)</span><span>.</span><span>config</span><span>(</span><span>)</span><span>;</span>\n\n<span>// Webpack settings exports</span>\n<span>// noinspection WebpackConfigHighlighting</span>\nmodule<span>.</span>exports <span>=</span> <span>{</span>\n    name<span>:</span> <span>\"Example Project\"</span><span>,</span>\n    copyright<span>:</span> <span>\"Example Company, Inc.\"</span><span>,</span>\n    paths<span>:</span> <span>{</span>\n        src<span>:</span> <span>{</span>\n            base<span>:</span> <span>\"./src/\"</span><span>,</span>\n            css<span>:</span> <span>\"./src/css/\"</span><span>,</span>\n            js<span>:</span> <span>\"./src/js/\"</span>\n        <span>}</span><span>,</span>\n        dist<span>:</span> <span>{</span>\n            base<span>:</span> <span>\"./web/dist/\"</span><span>,</span>\n            clean<span>:</span> <span>[</span>\n                <span>\"./img\"</span><span>,</span>\n                <span>\"./criticalcss\"</span><span>,</span>\n                <span>\"./css\"</span><span>,</span>\n                <span>\"./js\"</span>\n            <span>]</span>\n        <span>}</span><span>,</span>\n        templates<span>:</span> <span>\"./templates/\"</span>\n    <span>}</span><span>,</span>\n    urls<span>:</span> <span>{</span>\n        live<span>:</span> <span>\"https://example.com/\"</span><span>,</span>\n        local<span>:</span> <span>\"http://example.test/\"</span><span>,</span>\n        critical<span>:</span> <span>\"http://example.test/\"</span><span>,</span>\n        publicPath<span>:</span> <span>\"/dist/\"</span>\n    <span>}</span><span>,</span>\n    vars<span>:</span> <span>{</span>\n        cssName<span>:</span> <span>\"styles\"</span>\n    <span>}</span><span>,</span>\n    entries<span>:</span> <span>{</span>\n        <span>\"app\"</span><span>:</span> <span>\"app.js\"</span>\n    <span>}</span><span>,</span>\n    copyWebpackConfig<span>:</span> <span>[</span>\n        <span>{</span>\n            <span>from</span><span>:</span> <span>\"./src/js/workbox-catch-handler.js\"</span><span>,</span>\n            to<span>:</span> <span>\"js/[name].[ext]\"</span>\n        <span>}</span>\n    <span>]</span><span>,</span>\n    criticalCssConfig<span>:</span> <span>{</span>\n        base<span>:</span> <span>\"./web/dist/criticalcss/\"</span><span>,</span>\n        suffix<span>:</span> <span>\"_critical.min.css\"</span><span>,</span>\n        criticalHeight<span>:</span> <span>1200</span><span>,</span>\n        criticalWidth<span>:</span> <span>1200</span><span>,</span>\n        ampPrefix<span>:</span> <span>\"amp_\"</span><span>,</span>\n        ampCriticalHeight<span>:</span> <span>19200</span><span>,</span>\n        ampCriticalWidth<span>:</span> <span>600</span><span>,</span>\n        pages<span>:</span> <span>[</span>\n            <span>{</span>\n                url<span>:</span> <span>\"\"</span><span>,</span>\n                template<span>:</span> <span>\"index\"</span>\n            <span>}</span>\n        <span>]</span>\n    <span>}</span><span>,</span>\n    devServerConfig<span>:</span> <span>{</span>\n        <span>public</span><span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_PUBLIC <span>||</span> <span>\"http://localhost:8080\"</span><span>,</span>\n        host<span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_HOST <span>||</span> <span>\"localhost\"</span><span>,</span>\n        poll<span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_POLL <span>||</span> <span>false</span><span>,</span>\n        port<span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_PORT <span>||</span> <span>8080</span><span>,</span>\n        https<span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_HTTPS <span>||</span> <span>false</span><span>,</span>\n    <span>}</span><span>,</span>\n    manifestConfig<span>:</span> <span>{</span>\n        basePath<span>:</span> <span>\"\"</span>\n    <span>}</span><span>,</span>\n    purgeCssConfig<span>:</span> <span>{</span>\n        paths<span>:</span> <span>[</span>\n            <span>\"./templates/**/*.{twig,html}\"</span><span>,</span>\n            <span>\"./src/vue/**/*.{vue,html}\"</span>\n        <span>]</span><span>,</span>\n        whitelist<span>:</span> <span>[</span>\n            <span>\"./src/css/components/**/*.{css,pcss}\"</span>\n        <span>]</span><span>,</span>\n        whitelistPatterns<span>:</span> <span>[</span><span>]</span><span>,</span>\n        extensions<span>:</span> <span>[</span>\n            <span>\"html\"</span><span>,</span>\n            <span>\"js\"</span><span>,</span>\n            <span>\"twig\"</span><span>,</span>\n            <span>\"vue\"</span>\n        <span>]</span>\n    <span>}</span><span>,</span>\n    saveRemoteFileConfig<span>:</span> <span>[</span>\n        <span>{</span>\n            url<span>:</span> <span>\"https://www.google-analytics.com/analytics.js\"</span><span>,</span>\n            filepath<span>:</span> <span>\"js/analytics.js\"</span>\n        <span>}</span>\n    <span>]</span><span>,</span>\n    createSymlinkConfig<span>:</span> <span>[</span>\n        <span>{</span>\n            origin<span>:</span> <span>\"img/favicons/favicon.ico\"</span><span>,</span>\n            symlink<span>:</span> <span>\"../favicon.ico\"</span>\n        <span>}</span>\n    <span>]</span><span>,</span>\n    webappConfig<span>:</span> <span>{</span>\n        logo<span>:</span> <span>\"./src/img/favicon-src.png\"</span><span>,</span>\n        prefix<span>:</span> <span>\"img/favicons/\"</span>\n    <span>}</span><span>,</span>\n    workboxConfig<span>:</span> <span>{</span>\n        swDest<span>:</span> <span>\"../sw.js\"</span><span>,</span>\n        precacheManifestFilename<span>:</span> <span>\"js/precache-manifest.[manifestHash].js\"</span><span>,</span>\n        importScripts<span>:</span> <span>[</span>\n            <span>\"/dist/workbox-catch-handler.js\"</span>\n        <span>]</span><span>,</span>\n        exclude<span>:</span> <span>[</span>\n            <span>/\\.(png|jpe?g|gif|svg|webp)$/i</span><span>,</span>\n            <span>/\\.map$/</span><span>,</span>\n            <span>/^manifest.*\\\\.js(?:on)?$/</span><span>,</span>\n        <span>]</span><span>,</span>\n        globDirectory<span>:</span> <span>\"./web/\"</span><span>,</span>\n        globPatterns<span>:</span> <span>[</span>\n            <span>\"offline.html\"</span><span>,</span>\n            <span>\"offline.svg\"</span>\n        <span>]</span><span>,</span>\n        offlineGoogleAnalytics<span>:</span> <span>true</span><span>,</span>\n        runtimeCaching<span>:</span> <span>[</span>\n            <span>{</span>\n                urlPattern<span>:</span> <span>/\\.(?:png|jpg|jpeg|svg|webp)$/</span><span>,</span>\n                handler<span>:</span> <span>\"cacheFirst\"</span><span>,</span>\n                options<span>:</span> <span>{</span>\n                    cacheName<span>:</span> <span>\"images\"</span><span>,</span>\n                    expiration<span>:</span> <span>{</span>\n                        maxEntries<span>:</span> <span>20</span>\n                    <span>}</span>\n                <span>}</span>\n            <span>}</span>\n        <span>]</span>\n    <span>}</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.settings.js</h5></aside></div></section></div></div><div><div><p>We’ll cov­er what all of these things are down in the web­pack con­fig sec­tions. The impor­tant thing to note here is that we’ve tak­en things that change from project to project, and bro­ken them out of our web­pack con­fig, and into a&nbsp;sep­a­rate&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;file.</p><p>This means we can just define what’s dif­fer­ent in each project in our&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;file, and not have to be wran­gling with the web­pack con­fig itself.</p><p>Even though the&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;file is just JavaScript, I&nbsp;tried to keep it as JSON-ish as pos­si­ble, so we’re just chang­ing sim­ple set­tings in it. I&nbsp;didn’t use&nbsp;<span>JSON</span>&nbsp;as a&nbsp;file for­mat for flex­i­bil­i­ty, and also to allow for com­ments to be&nbsp;added.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#common-conventions-for-webpack-configs\"><i></i><span>LINK</span></a></span>COMMON CONVENTIONS FOR WEBPACK CONFIGS</h3><p>I’ve adopt­ed a&nbsp;few con­ven­tions for all of the web­pack con­fig files (<kbd>webpack.common.js</kbd>,&nbsp;<kbd>webpack.dev.js</kbd>,&nbsp;<span>&amp;</span>&nbsp;<kbd>webpack.prod.js</kbd>) to make things more consistent.</p><p>Each con­fig file has two inter­nal configs:</p><ul><li><strong>lega­cy­Con­fig</strong> — the con­fig that applies to the lega­cy&nbsp;<span>ES<span>5</span></span>&nbsp;build</li><li><strong>mod­ern­Con­fig</strong> — the con­fig that applies to the mod­ern&nbsp;<span>ES<span>2015</span></span>+ build</li></ul><p>We do it this way because we have sep­a­rate con­fig­u­ra­tions to cre­ate the&nbsp;lega­cy and mod­ern builds. This keeps them log­i­cal­ly sep­a­rate. The&nbsp;<kbd>webpack.common.js</kbd>&nbsp;also has a&nbsp;<strong>baseC­on­fig</strong>; this is pure­ly organizational.</p><p>Think of it like Object Ori­ent­ed Pro­gram­ming, where the var­i­ous con­figs inher­it from each oth­er, with the&nbsp;<strong>baseC­on­fig</strong>&nbsp;being the root object.<br></p><p>Anoth­er con­ven­tion that I’ve adopt­ed to keep the con­fig­u­ra­tion clean and read­able is to have&nbsp;<kbd>configure()</kbd>&nbsp;func­tions for the var­i­ous web­pack plu­g­ins and oth­er pieces of web­pack that need con­fig­ur­ing, rather than putting it all inline.</p><p>I did this because some data com­ing from the&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;needs to be trans­formed before it can be used by web­pack, and because of the dual legacy/​modern builds, we need to return a&nbsp;dif­fer­ent con­fig depend­ing on the type of&nbsp;build.</p><p>It also makes the con­fig files a&nbsp;bit more read­able as&nbsp;well.</p><p>As a&nbsp;gen­er­al web­pack con­cept, under­stand that&nbsp;web­pack itself knows only how to load&nbsp;JavaScript and&nbsp;<span>JSON</span>. To load any­thing else, we need to to use a&nbsp;<a href=\"http://webpack.js.org/concepts/#loaders\" target=\"_blank\" rel=\"noreferrer noopener\">loader</a>. We’ll be using a&nbsp;num­ber of dif­fer­ent load­ers in our web­pack config.<br></p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#annotated-webpack-common-js\"><i></i><span>LINK</span></a></span>ANNOTATED WEBPACK.COMMON.JS</h3><p>Now let’s have a&nbsp;look at our&nbsp;<kbd>webpack.common.js</kbd>&nbsp;con­fig file that has all of the set­tings that are shared by both the&nbsp;<kbd>dev</kbd>&nbsp;and&nbsp;<kbd>prod</kbd>&nbsp;build&nbsp;types.</p></div></div><div><div><section><div><pre><code><span>// webpack.common.js - common webpack config</span>\n<span>const</span> LEGACY_CONFIG <span>=</span> <span>'legacy'</span><span>;</span>\n<span>const</span> MODERN_CONFIG <span>=</span> <span>'modern'</span><span>;</span>\n\n<span>// node modules</span>\n<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>'path'</span><span>)</span><span>;</span>\n<span>const</span> merge <span>=</span> <span>require</span><span>(</span><span>'webpack-merge'</span><span>)</span><span>;</span>\n\n<span>// webpack plugins</span>\n<span>const</span> CopyWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>'copy-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> ManifestPlugin <span>=</span> <span>require</span><span>(</span><span>'webpack-manifest-plugin'</span><span>)</span><span>;</span>\n<span>const</span> VueLoaderPlugin <span>=</span> <span>require</span><span>(</span><span>'vue-loader/lib/plugin'</span><span>)</span><span>;</span>\n<span>const</span> WebpackNotifierPlugin <span>=</span> <span>require</span><span>(</span><span>'webpack-notifier'</span><span>)</span><span>;</span>\n\n<span>// config files</span>\n<span>const</span> pkg <span>=</span> <span>require</span><span>(</span><span>'./package.json'</span><span>)</span><span>;</span>\n<span>const</span> settings <span>=</span> <span>require</span><span>(</span><span>'./webpack.settings.js'</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js preamble</h5></aside></div></section></div></div><div><div><p>In the pre­am­ble we pull in the Node pack­ages we need, and the web­pack plu­g­ins we use. We then import our&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;as&nbsp;<kbd>settings</kbd>&nbsp;so we can access the set­tings there, and also&nbsp;import our&nbsp;<kbd>package.json</kbd>&nbsp;as&nbsp;<kbd>pkg</kbd>&nbsp;to access a&nbsp;few set­tings there as&nbsp;well.</p></div></div><div><div><p><strong><span>CON­FIG­U­RA­TION</span>&nbsp;<span>FUNCTIONS</span></strong></p><p>Here’s what the&nbsp;<kbd>configureBabelLoader()</kbd>&nbsp;looks like:</p></div></div><div><div><section><div><pre><code><span>// Configure Babel loader</span>\n<span>const</span> <span>configureBabelLoader</span> <span>=</span> <span>(</span>browserList<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        test<span>:</span> <span>/\\.js$/</span><span>,</span>\n        exclude<span>:</span> <span>/node_modules/</span><span>,</span>\n        use<span>:</span> <span>{</span>\n            loader<span>:</span> <span>'babel-loader'</span><span>,</span>\n            options<span>:</span> <span>{</span>\n                presets<span>:</span> <span>[</span>\n                    <span>[</span>\n                        <span>'@babel/preset-env'</span><span>,</span> <span>{</span>\n                        modules<span>:</span> <span>false</span><span>,</span>\n                        useBuiltIns<span>:</span> <span>'entry'</span><span>,</span>\n                        targets<span>:</span> <span>{</span>\n                            browsers<span>:</span> browserList<span>,</span>\n                        <span>}</span><span>,</span>\n                    <span>}</span>\n                    <span>]</span><span>,</span>\n                <span>]</span><span>,</span>\n                plugins<span>:</span> <span>[</span>\n                    <span>'@babel/plugin-syntax-dynamic-import'</span><span>,</span>\n                    <span>[</span>\n                        <span>\"@babel/plugin-transform-runtime\"</span><span>,</span> <span>{</span>\n                        <span>\"regenerator\"</span><span>:</span> <span>true</span>\n                    <span>}</span>\n                    <span>]</span>\n                <span>]</span><span>,</span>\n            <span>}</span><span>,</span>\n        <span>}</span><span>,</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js configureBabelLoader</h5></aside></div></section></div></div><div><div><p>The&nbsp;<kbd>configureBabelLoader()</kbd>&nbsp;func­tion con­fig­ures the&nbsp;<kbd>babel-loader</kbd>&nbsp;to han­dle the load­ing of all files that end in&nbsp;<kbd>.js</kbd>. It uses&nbsp;<a href=\"http://babeljs.io/docs/en/babel-preset-env\" target=\"_blank\" rel=\"noreferrer noopener\">@babel/preset-env</a>&nbsp;instead of&nbsp;a&nbsp;<kbd>.babelrc</kbd>&nbsp;file so we can keep every­thing com­part­men­tal­ized in our web­pack config.</p><p>Babel can com­pile mod­ern&nbsp;<span>ES<span>2015</span></span>+ JavaScript (and many oth­er lan­guages like Type­Script or Cof­fee­Script)&nbsp;down to JavaScript that tar­gets a&nbsp;spe­cif­ic set of browsers or stan­dards. We pass in the&nbsp;<kbd>browserList</kbd>&nbsp;as a&nbsp;para­me­ter so that we can build&nbsp;<a href=\"http://philipwalton.com/articles/deploying-es2015-code-in-production-today/\" target=\"_blank\" rel=\"noreferrer noopener\">both mod­ern&nbsp;<span>ES<span>2015</span></span>+&nbsp;mod­ules and lega­cy&nbsp;<span>ES<span>5</span></span>&nbsp;JavaScript</a>&nbsp;with poly­fills for lega­cy browsers.</p><p>In our&nbsp;<span>HTML</span>, we just do some­thing like&nbsp;this:</p></div></div><div><div><section><div><pre><code><span>&lt;!-- Browsers with ES module support load this file. --&gt;</span>\n<span><span><span>&lt;</span>script</span> <span>type</span><span><span>=</span><span>\"</span>module<span>\"</span></span> <span>src</span><span><span>=</span><span>\"</span>main.js<span>\"</span></span><span>&gt;</span></span><span></span><span><span><span>&lt;/</span>script</span><span>&gt;</span></span>\n\n<span>&lt;!-- Older browsers load this file (and module-supporting --&gt;</span>\n<span>&lt;!-- browsers know *not* to load this file). --&gt;</span>\n<span><span><span>&lt;</span>script</span> <span>nomodule</span> <span>src</span><span><span>=</span><span>\"</span>main-legacy.js<span>\"</span></span><span>&gt;</span></span><span></span><span><span><span>&lt;/</span>script</span><span>&gt;</span></span></code></pre><aside><h5><i></i>&nbsp;Modern/legacy JavaScript loading</h5></aside></div></section></div></div><div><div><p>No poly­fills, no fuss. Old browsers ignore the&nbsp;<kbd>type=\"module\"</kbd>&nbsp;script, and get the&nbsp;<kbd>main-legacy.js</kbd>. Mod­ern browsers load the&nbsp;<kbd>main.js</kbd>, and ignore the&nbsp;<kbd>nomodule</kbd>. It’s bril­liant; I&nbsp;wish I&nbsp;came up with the idea! Lest you think it’s fringe,&nbsp;<a href=\"http://medium.com/the-vue-point/vue-cli-3-0-is-here-c42bebe28fbb\" target=\"_blank\" rel=\"noreferrer noopener\">vue-cli has adopt­ed this strat­e­gy</a>&nbsp;in ver­sion&nbsp;<span>3</span>.</p><p>The&nbsp;<a href=\"http://babeljs.io/docs/en/babel-plugin-syntax-dynamic-import\" target=\"_blank\" rel=\"noreferrer noopener\">@babel/plugin-syntax-dynamic-import</a>&nbsp;plu­g­in is what allows us to do dynam­ic imports even before the&nbsp;<a href=\"http://github.com/tc39/proposal-dynamic-import\" target=\"_blank\" rel=\"noreferrer noopener\">ECMAScript dynam­ic import pro­pos­al</a>&nbsp;is imple­ment­ed by web browsers. This lets us load our JavaScript mod­ules&nbsp;<a href=\"http://webpack.js.org/guides/code-splitting/#dynamic-imports\" target=\"_blank\" rel=\"noreferrer noopener\">asyn­chro­nous­ly, and dynam­i­cal­ly</a>&nbsp;as needed.</p><p>So what does this mean? It means we can do some­thing like&nbsp;this:</p></div></div><div><div><section><div><pre><code><span>// App main</span>\n<span>const</span> main <span>=</span> <span>async</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>// Async load the vue module</span>\n    <span>const</span> Vue <span>=</span> <span>await</span> <span>import</span><span>(</span><span>/* webpackChunkName: \"vue\" */</span> <span>'vue'</span><span>)</span><span>;</span>\n    <span>// Create our vue instance</span>\n    <span>const</span> vm <span>=</span> <span>new</span> <span>Vue<span>.</span>default</span><span>(</span><span>{</span>\n        el<span>:</span> <span>\"#app\"</span><span>,</span>\n        components<span>:</span> <span>{</span>\n            <span>'confetti'</span><span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>import</span><span>(</span><span>/* webpackChunkName: \"confetti\" */</span> <span>'../vue/Confetti.vue'</span><span>)</span><span>,</span>\n        <span>}</span><span>,</span>\n    <span>}</span><span>)</span><span>;</span>\n<span>}</span><span>;</span>\n<span>// Execute async function</span>\n<span>main</span><span>(</span><span>)</span><span>.</span><span>then</span><span>(</span> <span>(</span>value<span>)</span> <span>=&gt;</span> <span>{</span>\n<span>}</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;dynamic import() example</h5></aside></div></section></div></div><div><div><p>This does two pri­ma­ry things:</p><ol><li>Via the&nbsp;<kbd>/* webpackChunkName: \"vue\" */</kbd>&nbsp;com­ment, we’ve told web­pack what we want this dynam­i­cal­ly code split chunk to be&nbsp;named</li><li>Since we’re using&nbsp;<kbd>import()</kbd>&nbsp;in an&nbsp;<kbd>async</kbd>&nbsp;func­tion (“<kbd>main</kbd>”), that func­tion&nbsp;<kbd>await</kbd>s&nbsp;the result of our dynam­i­cal­ly loaded JavaScript import&nbsp;while the rest of our code con­tin­ues on its mer­ry&nbsp;way</li></ol><p>We’ve effec­tive­ly told web­pack how we want our chunks split up through code, rather than via con­fig. And through the mag­ic of&nbsp;<kbd>@babel/plugin-syntax-dynamic-import</kbd>, this JavaScript chunk&nbsp;can be loaded asyn­chro­nous­ly, on demand as needed.</p><p>Notice we did the same thing with our&nbsp;<kbd>.vue</kbd>&nbsp;sin­gle file com­po­nents, too.&nbsp;Nice.</p><p>Instead of using&nbsp;<kbd>await</kbd>, we could also just exe­cute our code after the&nbsp;<kbd>import()</kbd>&nbsp;<a href=\"http://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\" target=\"_blank\" rel=\"noreferrer noopener\">Promise</a>&nbsp;has returned:</p></div></div><div><div><section><div><pre><code><span>// Async load the vue module</span>\n<span>import</span><span>(</span><span>/* webpackChunkName: \"vue\" */</span> <span>'vue'</span><span>)</span><span>.</span><span>then</span><span>(</span>Vue <span>=&gt;</span> <span>{</span>\n    <span>// Vue has loaded, do something with it</span>\n    <span>// Create our vue instance</span>\n    <span>const</span> vm <span>=</span> <span>new</span> <span>Vue<span>.</span>default</span><span>(</span><span>{</span>\n        el<span>:</span> <span>\"#app\"</span><span>,</span>\n        components<span>:</span> <span>{</span>\n            <span>'confetti'</span><span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>import</span><span>(</span><span>/* webpackChunkName: \"confetti\" */</span> <span>'../vue/Confetti.vue'</span><span>)</span><span>,</span>\n        <span>}</span><span>,</span>\n    <span>}</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;dynamic import() promise example</h5></aside></div></section></div></div><div><div><p>Here instead of using&nbsp;<kbd>await</kbd>&nbsp;with&nbsp;<a href=\"http://webpack.js.org/api/module-methods/#import-\" target=\"_blank\" rel=\"noreferrer noopener\">import()</a>&nbsp;we’re using the Promise, so then we know the dynam­ic import has hap­pened and can hap­pi­ly use&nbsp;<kbd>Vue</kbd>.</p><p>If you’re pay­ing atten­tion, you can see that we’ve effec­tive­ly solved JavaScript depen­den­cies via Promis­es.&nbsp;Nice!</p><p>We can even do fun things like load cer­tain JavaScript chunks only after the user has clicked on some­thing, scrolled to a&nbsp;cer­tain posi­tion, or sat­is­fied some oth­er con­di­tion. Check out the&nbsp;<a href=\"http://webpack.js.org/api/module-methods/#import-\" target=\"_blank\" rel=\"noreferrer noopener\">Mod­ule Meth­ods import()</a>&nbsp;for&nbsp;more.</p><p>If you’re inter­est­ed in learn­ing more about Babel, check out the&nbsp;<a href=\"http://www.thebasement.be/working-with-babel-7-and-webpack/\" target=\"_blank\" rel=\"noreferrer noopener\">Work­ing with Babel&nbsp;<span>7</span>&nbsp;and Web­pack</a>&nbsp;article.</p><p>Next up we have&nbsp;<kbd>configureEntries()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Entries</span>\n<span>const</span> <span>configureEntries</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>let</span> entries <span>=</span> <span>{</span><span>}</span><span>;</span>\n    <span>for</span> <span>(</span><span>const</span> <span>[</span>key<span>,</span> value<span>]</span> <span>of</span> Object<span>.</span><span>entries</span><span>(</span>settings<span>.</span>entries<span>)</span><span>)</span> <span>{</span>\n        entries<span>[</span>key<span>]</span> <span>=</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> settings<span>.</span>paths<span>.</span>src<span>.</span>js <span>+</span> value<span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>return</span> entries<span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js configureEntries()</h5></aside></div></section></div></div><div><div><p>Here we pull in the web­pack&nbsp;<a href=\"http://webpack.js.org/concepts/entry-points/\" target=\"_blank\" rel=\"noreferrer noopener\">Entry Points</a>&nbsp;from our&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;via&nbsp;<kbd>settings.entries</kbd>.&nbsp;For a&nbsp;<a href=\"https://medium.com/@pshrmn/demystifying-single-page-applications-3068d0555d46\" target=\"_blank\" rel=\"noreferrer noopener\">Sin­gle Page App</a>(<span>SPA</span>) you’ll have just one entry point. For a&nbsp;more tra­di­tion­al web­site, you may have sev­er­al entry points (per­haps one per page template).</p><p>Either way, because we’ve defined our entry points in our&nbsp;<kbd>webpack.settings.js</kbd>, it’s easy to con­fig­ure them there. An entry point is real­ly just a&nbsp;<kbd>&lt;script src=\"app.js\"&gt;&lt;/script&gt;</kbd>&nbsp;tag that you’ll include in your&nbsp;<span>HTML</span>&nbsp;to boot­strap the JavaScript.</p><p>Since we’re using dynam­i­cal­ly import­ed mod­ules, we typ­i­cal­ly would have only one&nbsp;<kbd>&lt;script&gt;&lt;/script&gt;</kbd>&nbsp;tag on a&nbsp;page; the rest of our JavaScript gets loaded dynam­i­cal­ly as needed.</p><p>Next we have the&nbsp;<kbd>configureFontLoader()</kbd>&nbsp;function:<br></p></div></div><div><div><section><div><pre><code><span>// Configure Font loader</span>\n<span>const</span> <span>configureFontLoader</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        test<span>:</span> <span>/\\.(ttf|eot|woff2?)$/i</span><span>,</span>\n        use<span>:</span> <span>[</span>\n            <span>{</span>\n                loader<span>:</span> <span>'file-loader'</span><span>,</span>\n                options<span>:</span> <span>{</span>\n                    name<span>:</span> <span>'fonts/[name].[ext]'</span>\n                <span>}</span>\n            <span>}</span>\n        <span>]</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js configureFontLoader()</h5></aside></div></section></div></div><div><div><p>Font load­ing is the same for both&nbsp;<kbd>dev</kbd>&nbsp;and&nbsp;<kbd>prod</kbd>&nbsp;builds, so we include it here. For any local fonts that we’re using, we can tell web­pack to load them in our JavaScript:</p></div></div><div><div><section><div><pre><code><span>import</span> comicsans <span>from</span> <span>'../fonts/ComicSans.woff2'</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;importing fonts</h5></aside></div></section></div></div><div><div><p>Next we have the&nbsp;<kbd>configureManifest()</kbd>&nbsp;function:<br></p></div></div><div><div><section><div><pre><code><span>// Configure Manifest</span>\n<span>const</span> <span>configureManifest</span> <span>=</span> <span>(</span>fileName<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        fileName<span>:</span> fileName<span>,</span>\n        basePath<span>:</span> settings<span>.</span>manifestConfig<span>.</span>basePath<span>,</span>\n        map<span>:</span> <span>(</span>file<span>)</span> <span>=&gt;</span> <span>{</span>\n            file<span>.</span>name <span>=</span> file<span>.</span>name<span>.</span><span>replace</span><span>(</span><span>/(\\.[a-f0-9]{32})(\\..*)$/</span><span>,</span> <span>'$2'</span><span>)</span><span>;</span>\n            <span>return</span> file<span>;</span>\n        <span>}</span><span>,</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js configureManifest()</h5></aside></div></section></div></div><div><div><p>This con­fig­ures the&nbsp;<a href=\"http://github.com/danethurber/webpack-manifest-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack-man­i­fest-plu­g­in</a>&nbsp;for file­name-based cache bust­ing. In a&nbsp;nut­shell, web­pack knows about all of the JavaScript,&nbsp;<span>CSS</span>, and oth­er resources we need, so it can gen­er­ate a&nbsp;man­i­fest that points to the con­tent-hashed name of the resource, e.g.:</p></div></div><div><div><section><div><pre><code><span>{</span>\n  <span>\"vendors~confetti~vue.js\"</span><span>:</span> <span>\"/dist/js/vendors~confetti~vue.03b9213ce186db5518ea.js\"</span><span>,</span>\n  <span>\"vendors~confetti~vue.js.map\"</span><span>:</span> <span>\"/dist/js/vendors~confetti~vue.03b9213ce186db5518ea.js.map\"</span><span>,</span>\n  <span>\"app.js\"</span><span>:</span> <span>\"/dist/js/app.30334b5124fa6e221464.js\"</span><span>,</span>\n  <span>\"app.js.map\"</span><span>:</span> <span>\"/dist/js/app.30334b5124fa6e221464.js.map\"</span><span>,</span>\n  <span>\"confetti.js\"</span><span>:</span> <span>\"/dist/js/confetti.1152197f8c58a1b40b34.js\"</span><span>,</span>\n  <span>\"confetti.js.map\"</span><span>:</span> <span>\"/dist/js/confetti.1152197f8c58a1b40b34.js.map\"</span><span>,</span>\n  <span>\"js/precache-manifest.js\"</span><span>:</span> <span>\"/dist/js/precache-manifest.f774c437974257fc8026ca1bc693655c.js\"</span><span>,</span>\n  <span>\"../sw.js\"</span><span>:</span> <span>\"/dist/../sw.js\"</span>\n<span>}</span></code></pre><aside><h5><i></i>&nbsp;webpack-manifest-plugin manifest.json</h5></aside></div></section></div></div><div><div><p>We pass in a&nbsp;file­name because we cre­ate both a&nbsp;mod­ern&nbsp;<kbd>manifest.json</kbd>&nbsp;and a&nbsp;lega­cy&nbsp;<kbd>manifest-legacy.json</kbd>&nbsp;that have the entry points for our mod­ern&nbsp;<span>ES<span>2015</span></span>+ mod­ules and lega­cy&nbsp;<span>ES<span>5</span></span>&nbsp;mod­ules, respec­tive­ly. The keys in both of the man­i­fests are iden­ti­cal for resources that are built for both mod­ern and lega­cy builds.</p><p>Next up we have a&nbsp;pret­ty stan­dard look­ing&nbsp;<kbd>configureVueLoader()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Vue loader</span>\n<span>const</span> <span>configureVueLoader</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        test<span>:</span> <span>/\\.vue$/</span><span>,</span>\n        loader<span>:</span> <span>'vue-loader'</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js configureVueLoader()</h5></aside></div></section></div></div><div><div><p>This just lets us load&nbsp;<a href=\"http://vuejs.org/v2/guide/single-file-components.html\" target=\"_blank\" rel=\"noreferrer noopener\">Vue Sin­gle File Com­po­nents</a>&nbsp;eas­i­ly. web­pack takes care of extract­ing the appro­pri­ate&nbsp;<span>HTML</span>,&nbsp;<span>CSS</span>, and JavaScript for&nbsp;you.</p></div></div><div><div><p><strong><span>BASE</span>&nbsp;<span>CON­FIG</span></strong></p><p>The&nbsp;<kbd>baseConfig</kbd>&nbsp;gets merged with both the&nbsp;<kbd>modernConfig</kbd>&nbsp;and&nbsp;<kbd>legacyConfig</kbd>:</p></div></div><div><div><section><div><pre><code><span>// The base webpack config</span>\n<span>const</span> baseConfig <span>=</span> <span>{</span>\n    name<span>:</span> pkg<span>.</span>name<span>,</span>\n    entry<span>:</span> <span>configureEntries</span><span>(</span><span>)</span><span>,</span>\n    output<span>:</span> <span>{</span>\n        path<span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> settings<span>.</span>paths<span>.</span>dist<span>.</span>base<span>)</span><span>,</span>\n        publicPath<span>:</span> settings<span>.</span>urls<span>.</span>publicPath\n    <span>}</span><span>,</span>\n    resolve<span>:</span> <span>{</span>\n        alias<span>:</span> <span>{</span>\n            <span>'vue$'</span><span>:</span> <span>'vue/dist/vue.esm.js'</span>\n        <span>}</span>\n    <span>}</span><span>,</span>\n    module<span>:</span> <span>{</span>\n        rules<span>:</span> <span>[</span>\n            <span>configureVueLoader</span><span>(</span><span>)</span><span>,</span>\n        <span>]</span><span>,</span>\n    <span>}</span><span>,</span>\n    plugins<span>:</span> <span>[</span>\n        <span>new</span> <span>WebpackNotifierPlugin</span><span>(</span><span>{</span>title<span>:</span> <span>'Webpack'</span><span>,</span> excludeWarnings<span>:</span> <span>true</span><span>,</span> alwaysNotify<span>:</span> <span>true</span><span>}</span><span>)</span><span>,</span>\n        <span>new</span> <span>VueLoaderPlugin</span><span>(</span><span>)</span><span>,</span>\n    <span>]</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js baseConfig</h5></aside></div></section></div></div><div><div><p>Every­thing here is pret­ty stan­dard web­pack fare, but note that we alias&nbsp;<kbd>vue$</kbd>&nbsp;to&nbsp;<kbd>vue/dist/vue.esm.js</kbd>&nbsp;so that we can get the&nbsp;<span>ES<span>2015</span></span>&nbsp;mod­ule ver­sion of&nbsp;Vue.</p><p>We use the&nbsp;<a href=\"http://www.npmjs.com/package/webpack-notifier\" target=\"_blank\" rel=\"noreferrer noopener\">Web­pac­kNo­ti­fier­Plu­g­in</a>&nbsp;to let us know the sta­tus of our builds in a&nbsp;friend­ly&nbsp;way.</p></div></div><div><div><p><strong><span>LEGA­CY</span>&nbsp;<span>CONFIG</span></strong></p><p>The&nbsp;<kbd>legacyConfig</kbd>&nbsp;is for build­ing&nbsp;<span>ES<span>5</span></span>&nbsp;lega­cy JavaScript with the appro­pri­ate polyfills:</p></div></div><div><div><section><div><pre><code><span>// Legacy webpack config</span>\n<span>const</span> legacyConfig <span>=</span> <span>{</span>\n    module<span>:</span> <span>{</span>\n        rules<span>:</span> <span>[</span>\n            <span>configureBabelLoader</span><span>(</span>Object<span>.</span><span>values</span><span>(</span>pkg<span>.</span>browserslist<span>.</span>legacyBrowsers<span>)</span><span>)</span><span>,</span>\n        <span>]</span><span>,</span>\n    <span>}</span><span>,</span>\n    plugins<span>:</span> <span>[</span>\n        <span>new</span> <span>CopyWebpackPlugin</span><span>(</span>\n            settings<span>.</span>copyWebpackConfig\n        <span>)</span><span>,</span>\n        <span>new</span> <span>ManifestPlugin</span><span>(</span>\n            <span>configureManifest</span><span>(</span><span>'manifest-legacy.json'</span><span>)</span>\n        <span>)</span><span>,</span>\n    <span>]</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js legacyConfig</h5></aside></div></section></div></div><div><div><p>Note that we pass in&nbsp;<kbd>pkg.browserslist.legacyBrowsers</kbd>&nbsp;to&nbsp;<kbd>configureBabelLoader()</kbd>, and&nbsp;we pass in<kbd>'manifest-legacy.json'</kbd>&nbsp;to&nbsp;<kbd>configureManifest()</kbd>.</p><p>We also include the&nbsp;<a href=\"http://github.com/webpack-contrib/copy-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Copy­Web­pack­Plu­g­in</a>&nbsp;in this build, so that we only copy the files defined in&nbsp;<kbd>settings.copyWebpackConfig</kbd>&nbsp;once.</p></div></div><div><div><p><strong><span>MOD­ERN</span>&nbsp;<span>CONFIG</span></strong></p><p>The&nbsp;<kbd>modernConfig</kbd>&nbsp;is for build­ing mod­ern&nbsp;<span>ES<span>2015</span></span>&nbsp;JavaScript mod­ules with­out the&nbsp;cruft:<br></p></div></div><div><div><section><div><pre><code><span>// Modern webpack config</span>\n<span>const</span> modernConfig <span>=</span> <span>{</span>\n    module<span>:</span> <span>{</span>\n        rules<span>:</span> <span>[</span>\n            <span>configureBabelLoader</span><span>(</span>Object<span>.</span><span>values</span><span>(</span>pkg<span>.</span>browserslist<span>.</span>modernBrowsers<span>)</span><span>)</span><span>,</span>\n        <span>]</span><span>,</span>\n    <span>}</span><span>,</span>\n    plugins<span>:</span> <span>[</span>\n        <span>new</span> <span>ManifestPlugin</span><span>(</span>\n            <span>configureManifest</span><span>(</span><span>'manifest.json'</span><span>)</span>\n        <span>)</span><span>,</span>\n    <span>]</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js modernConfig</h5></aside></div></section></div></div><div><div><p>Note that we pass in&nbsp;<kbd>pkg.browserslist.modernBrowsers</kbd>&nbsp;to&nbsp;<kbd>configureBabelLoader()</kbd>, and&nbsp;we pass in<kbd>'manifest.json'</kbd>&nbsp;to&nbsp;<kbd>configureManifest()</kbd>.</p></div></div><div><div><p><strong><span>MODULE</span>.<span>EXPORTS</span></strong></p><p>Final­ly, the&nbsp;<kbd>module.exports</kbd>&nbsp;uses the&nbsp;<a href=\"http://www.npmjs.com/package/webpack-merge\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack-merge</a>&nbsp;pack­age to merge the con­figs togeth­er, and returns an object that is used by the&nbsp;<kbd>webpack.dev.js</kbd>&nbsp;and&nbsp;<kbd>webpack.prod.js</kbd>.</p></div></div><div><div><section><div><pre><code><span>// Common module exports</span>\n<span>// noinspection WebpackConfigHighlighting</span>\nmodule<span>.</span>exports <span>=</span> <span>{</span>\n    <span>'legacyConfig'</span><span>:</span> <span>merge</span><span>(</span>\n        legacyConfig<span>,</span>\n        baseConfig<span>,</span>\n    <span>)</span><span>,</span>\n    <span>'modernConfig'</span><span>:</span> <span>merge</span><span>(</span>\n        modernConfig<span>,</span>\n        baseConfig<span>,</span>\n    <span>)</span><span>,</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.common.js module.exports</h5></aside></div></section></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#annotated-webpack-dev-js\"><i></i><span>LINK</span></a></span>ANNOTATED WEBPACK.DEV.JS</h3><p>Now let’s have a&nbsp;look at our&nbsp;<kbd>webpack.dev.js</kbd>&nbsp;con­fig file that has all of the set­tings that are used for devel­op­men­tal builds while we’re work­ing on the project. It gets merged with the set­tings in&nbsp;<kbd>webpack.common.js</kbd>&nbsp;to form a&nbsp;com­plete web­pack configuration.</p></div></div><div><div><section><div><pre><code><span>// webpack.dev.js - developmental builds</span>\n<span>const</span> LEGACY_CONFIG <span>=</span> <span>'legacy'</span><span>;</span>\n<span>const</span> MODERN_CONFIG <span>=</span> <span>'modern'</span><span>;</span>\n\n<span>// node modules</span>\n<span>const</span> merge <span>=</span> <span>require</span><span>(</span><span>'webpack-merge'</span><span>)</span><span>;</span>\n<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>'path'</span><span>)</span><span>;</span>\n<span>const</span> sane <span>=</span> <span>require</span><span>(</span><span>'sane'</span><span>)</span><span>;</span>\n<span>const</span> webpack <span>=</span> <span>require</span><span>(</span><span>'webpack'</span><span>)</span><span>;</span>\n\n<span>// webpack plugins</span>\n<span>const</span> Dashboard <span>=</span> <span>require</span><span>(</span><span>'webpack-dashboard'</span><span>)</span><span>;</span>\n<span>const</span> DashboardPlugin <span>=</span> <span>require</span><span>(</span><span>'webpack-dashboard/plugin'</span><span>)</span><span>;</span>\n<span>const</span> dashboard <span>=</span> <span>new</span> <span>Dashboard</span><span>(</span><span>)</span><span>;</span>\n\n<span>// config files</span>\n<span>const</span> common <span>=</span> <span>require</span><span>(</span><span>'./webpack.common.js'</span><span>)</span><span>;</span>\n<span>const</span> pkg <span>=</span> <span>require</span><span>(</span><span>'./package.json'</span><span>)</span><span>;</span>\n<span>const</span> settings <span>=</span> <span>require</span><span>(</span><span>'./webpack.settings.js'</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.dev.js preamble</h5></aside></div></section></div></div><div><div><p>In the pre­am­ble we again pull in the Node pack­ages we need, and the web­pack plu­g­ins we use. We then import our&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;as&nbsp;<kbd>settings</kbd>&nbsp;so we can access the set­tings there, and also&nbsp;import our&nbsp;<kbd>package.json</kbd>&nbsp;as&nbsp;<kbd>pkg</kbd>&nbsp;to access a&nbsp;few set­tings there as&nbsp;well.<br></p><p>We also import our&nbsp;<kbd>webpack.common.js</kbd>&nbsp;com­mon web­pack con­fig that we’ll merge our dev set­tings&nbsp;with.</p></div></div><div><div><p><strong><span>CON­FIG­U­RA­TION</span>&nbsp;<span>FUNCTIONS</span></strong></p><p>Here’s what the&nbsp;<kbd>configureDevServer()</kbd>&nbsp;looks like:</p></div></div><div><div><section><div><pre><code><span>// Configure the webpack-dev-server</span>\n<span>const</span> <span>configureDevServer</span> <span>=</span> <span>(</span>buildType<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        <span>public</span><span>:</span> settings<span>.</span>devServerConfig<span>.</span><span>public</span><span>(</span><span>)</span><span>,</span>\n        contentBase<span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> settings<span>.</span>paths<span>.</span>templates<span>)</span><span>,</span>\n        host<span>:</span> settings<span>.</span>devServerConfig<span>.</span><span>host</span><span>(</span><span>)</span><span>,</span>\n        port<span>:</span> settings<span>.</span>devServerConfig<span>.</span><span>port</span><span>(</span><span>)</span><span>,</span>\n        https<span>:</span> <span>!</span><span>!</span><span>parseInt</span><span>(</span>settings<span>.</span>devServerConfig<span>.</span><span>https</span><span>(</span><span>)</span><span>)</span><span>,</span>\n        quiet<span>:</span> <span>true</span><span>,</span>\n        hot<span>:</span> <span>true</span><span>,</span>\n        hotOnly<span>:</span> <span>true</span><span>,</span>\n        overlay<span>:</span> <span>true</span><span>,</span>\n        stats<span>:</span> <span>'errors-only'</span><span>,</span>\n        watchOptions<span>:</span> <span>{</span>\n            poll<span>:</span> <span>!</span><span>!</span><span>parseInt</span><span>(</span>settings<span>.</span>devServerConfig<span>.</span><span>poll</span><span>(</span><span>)</span><span>)</span><span>,</span>\n        <span>}</span><span>,</span>\n        headers<span>:</span> <span>{</span>\n            <span>'Access-Control-Allow-Origin'</span><span>:</span> <span>'*'</span>\n        <span>}</span><span>,</span>\n        <span>// Use sane to monitor all of the templates files and sub-directories</span>\n        before<span>:</span> <span>(</span>app<span>,</span> server<span>)</span> <span>=&gt;</span> <span>{</span>\n            <span>const</span> watcher <span>=</span> <span>sane</span><span>(</span>path<span>.</span><span>join</span><span>(</span>__dirname<span>,</span> settings<span>.</span>paths<span>.</span>templates<span>)</span><span>,</span> <span>{</span>\n                glob<span>:</span> <span>[</span><span>'**/*'</span><span>]</span><span>,</span>\n                poll<span>:</span> <span>!</span><span>!</span><span>parseInt</span><span>(</span>settings<span>.</span>devServerConfig<span>.</span><span>poll</span><span>(</span><span>)</span><span>)</span><span>,</span>\n            <span>}</span><span>)</span><span>;</span>\n            watcher<span>.</span><span>on</span><span>(</span><span>'change'</span><span>,</span> <span>function</span><span>(</span>filePath<span>,</span> root<span>,</span> stat<span>)</span> <span>{</span>\n                console<span>.</span><span>log</span><span>(</span><span>'  File modified:'</span><span>,</span> filePath<span>)</span><span>;</span>\n                server<span>.</span><span>sockWrite</span><span>(</span>server<span>.</span>sockets<span>,</span> <span>\"content-changed\"</span><span>)</span><span>;</span>\n            <span>}</span><span>)</span><span>;</span>\n        <span>}</span><span>,</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.dev.js configureDevServer()</h5></aside></div></section></div></div><div><div><p>When we do a&nbsp;pro­duc­tion build, web­pack bun­dles up all of our var­i­ous assets and saves them to the file sys­tem. By con­trast, when we’re work­ing on a&nbsp;project in local dev, we use a&nbsp;devel­op­ment build via&nbsp;<a href=\"http://github.com/webpack/webpack-dev-server\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack-dev-serv­er</a>&nbsp;that:</p><ul><li>Spins up a&nbsp;local&nbsp;<a href=\"http://expressjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Express</a>&nbsp;web serv­er that serves our assets</li><li>Builds our assets in mem­o­ry rather than to the file sys­tem, for&nbsp;speed</li><li>Will rebuild assets like JavaScript,&nbsp;<span>CSS</span>, Vue com­po­nents, etc. as we change them and inject them into the web­page via&nbsp;<a href=\"http://webpack.js.org/concepts/hot-module-replacement/\" target=\"_blank\" rel=\"noreferrer noopener\">Hot Mod­ule Replace­ment (<span>HMR</span>)</a>&nbsp;with­out a&nbsp;page reload</li><li>Will reload the page when we make changes to our templates</li></ul><p>This is akin to a&nbsp;much more sophis­ti­cat­ed vari­ant of&nbsp;<a href=\"http://browsersync.io/\" target=\"_blank\" rel=\"noreferrer noopener\">Browser­sync</a>, and great­ly speeds development.</p><p>The only slight­ly unusu­al thing here is we use&nbsp;<a href=\"http://www.npmjs.com/package/sane\" target=\"_blank\" rel=\"noreferrer noopener\">Sane</a>&nbsp;to mon­i­tor files that aren’t run through web­pack (in this case, our tem­plates), to do a&nbsp;full page reload when­ev­er one of them is changed.</p><p>Note that con­fig for the&nbsp;<kbd>webpack-dev-server</kbd>&nbsp;again comes from our&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;file. The defaults are prob­a­bly okay for many peo­ple, but&nbsp;I&nbsp;use&nbsp;<a href=\"http://laravel.com/docs/5.7/homestead\" target=\"_blank\" rel=\"noreferrer noopener\">Lar­avel Home­stead</a>&nbsp;for local dev, as dis­cussed in the&nbsp;<a href=\"https://nystudio107.com/blog/local-development-with-vagrant-homestead\">Local Devel­op­ment with Vagrant / Home­stead</a>&nbsp;arti­cle. This means I&nbsp;run all devel­op­ment tool­ing inside of my Home­stead&nbsp;<span>VM</span>.</p><p>So instead of hard-cod­ing the local devel­op­ment envi­ron­ment in my&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;file&nbsp;(since it can vary from per­son to per­son work­ing on a&nbsp;team), the&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;can read from from an option­al&nbsp;<kbd>.env</kbd>&nbsp;file for your own par­tic­u­lar&nbsp;<kbd>devServer</kbd>&nbsp;config:</p></div></div><div><div><section><div><pre><code><span># webpack example settings for Homestead/Vagrant</span>\n<span>DEVSERVER_PUBLIC</span><span>=</span><span>\"http://192.168.10.10:8080\"</span>\n<span>DEVSERVER_HOST</span><span>=</span><span>\"0.0.0.0\"</span>\n<span>DEVSERVER_POLL</span><span>=</span><span>1</span>\n<span>DEVSERVER_PORT</span><span>=</span><span>8080</span>\n<span>DEVSERVER_HTTPS</span><span>=</span><span>0</span></code></pre><aside><h5><i></i>&nbsp;.env file DEVSERVER settings</h5></aside></div></section></div></div><div><div><p>You may use some­thing dif­fer­ent, so change the set­tings as appro­pri­ate in your&nbsp;<kbd>.env</kbd>&nbsp;file as need­ed. The idea behind&nbsp;<a href=\"http://www.npmjs.com/package/dotenv\" target=\"_blank\" rel=\"noreferrer noopener\">dotenv</a>&nbsp;is that we put any­thing spe­cif­ic to an envi­ron­ment in the&nbsp;<kbd>.env</kbd>&nbsp;file, and we&nbsp;<strong>do not</strong>&nbsp;check it in to our git repo.&nbsp;If the&nbsp;<kbd>.env</kbd>&nbsp;file isn’t present, that’s fine, it just uses default values:</p></div></div><div><div><section><div><pre><code>devServerConfig<span>:</span> <span>{</span>\n    <span>public</span><span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_PUBLIC <span>||</span> <span>\"http://localhost:8080\"</span><span>,</span>\n    host<span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_HOST <span>||</span> <span>\"localhost\"</span><span>,</span>\n    poll<span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_POLL <span>||</span> <span>false</span><span>,</span>\n    port<span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_PORT <span>||</span> <span>8080</span><span>,</span>\n    https<span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> process<span>.</span>env<span>.</span>DEVSERVER_HTTPS <span>||</span> <span>false</span><span>,</span>\n<span>}</span><span>,</span></code></pre><aside><h5><i></i>&nbsp;webpack.settings.js devServerConfig defaults</h5></aside></div></section></div></div><div><div><p>Next up is the&nbsp;<kbd>configureImageLoader()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Image loader</span>\n<span>const</span> <span>configureImageLoader</span> <span>=</span> <span>(</span>buildType<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> LEGACY_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            test<span>:</span> <span>/\\.(png|jpe?g|gif|svg|webp)$/i</span><span>,</span>\n            use<span>:</span> <span>[</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'file-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        name<span>:</span> <span>'img/[name].[hash].[ext]'</span>\n                    <span>}</span>\n                <span>}</span>\n            <span>]</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> MODERN_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            test<span>:</span> <span>/\\.(png|jpe?g|gif|svg|webp)$/i</span><span>,</span>\n            use<span>:</span> <span>[</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'file-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        name<span>:</span> <span>'img/[name].[hash].[ext]'</span>\n                    <span>}</span>\n                <span>}</span>\n            <span>]</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.dev.js configureImageLoader()</h5></aside></div></section></div></div><div><div><p>We pass in the&nbsp;<kbd>buildType</kbd>&nbsp;so that we can return dif­fer­ent results depend­ing on whether it is a&nbsp;lega­cy or mod­ern build. In this case, we return the same con­fig, but it’s very con­ceiv­able that might change.<br></p><p>It’s impor­tant to note that this is only for images that are includ­ed in our web­pack build; many oth­er images will be com­ing from else­where (a&nbsp;<span>CMS</span>&nbsp;sys­tem, an asset man­age­ment sys­tem,&nbsp;etc.).</p><p>To let web­pack know about an image, you import it into your JavaScript:</p></div></div><div><div><section><div><pre><code><span>import</span> Icon <span>from</span> <span>'./icon.png'</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;Importing images</h5></aside></div></section></div></div><div><div><p>Check out the&nbsp;<a href=\"http://webpack.js.org/guides/asset-management/#loading-images\" target=\"_blank\" rel=\"noreferrer noopener\">Load­ing Images</a>&nbsp;sec­tion of the web­pack docs&nbsp;for more details on&nbsp;this.</p><p>Next up is our&nbsp;<kbd>configurePostcssLoader()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure the Postcss loader</span>\n<span>const</span> <span>configurePostcssLoader</span> <span>=</span> <span>(</span>buildType<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>// Don't generate CSS for the legacy config in development</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> LEGACY_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            test<span>:</span> <span>/\\.(pcss|css)$/</span><span>,</span>\n            loader<span>:</span> <span>'ignore-loader'</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> MODERN_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            test<span>:</span> <span>/\\.(pcss|css)$/</span><span>,</span>\n            use<span>:</span> <span>[</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'style-loader'</span><span>,</span>\n                <span>}</span><span>,</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'vue-style-loader'</span><span>,</span>\n                <span>}</span><span>,</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'css-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        importLoaders<span>:</span> <span>2</span><span>,</span>\n                        sourceMap<span>:</span> <span>true</span>\n                    <span>}</span>\n                <span>}</span><span>,</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'resolve-url-loader'</span>\n                <span>}</span><span>,</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'postcss-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        sourceMap<span>:</span> <span>true</span>\n                    <span>}</span>\n                <span>}</span>\n            <span>]</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n<span>}</span><span>;</span></code></pre></div></section></div></div><div><div><p>We use&nbsp;<a href=\"http://postcss.org/\" target=\"_blank\" rel=\"noreferrer noopener\">PostC­SS</a>&nbsp;to process all of our&nbsp;<span>CSS</span>, includ­ing&nbsp;<a href=\"http://tailwindcss.com/docs/what-is-tailwind/\" target=\"_blank\" rel=\"noreferrer noopener\">Tail­wind&nbsp;<span>CSS</span></a>. I&nbsp;think of it as the Babel of&nbsp;<span>CSS</span>, in that it com­piles all sorts of advanced&nbsp;<span>CSS</span>&nbsp;func­tion­al­i­ty down to plain old&nbsp;<span>CSS</span>&nbsp;that your browsers can understand.</p><p>It’s impor­tant to note that for web­pack load­ers, they are processed in reverse order that they are listed:</p><ul><li><strong><a href=\"http://github.com/postcss/postcss-loader\" target=\"_blank\" rel=\"noreferrer noopener\">postc­ss-loader</a></strong> — Loads and process­es files as PostCSS</li><li><strong><a href=\"http://www.npmjs.com/package/resolve-url-loader\" target=\"_blank\" rel=\"noreferrer noopener\">resolve-url-loader</a></strong> — Rewrites any&nbsp;<kbd>url()</kbd>s in our&nbsp;<span>CSS</span>&nbsp;to pub­lic path relative</li><li><strong><a href=\"http://github.com/webpack-contrib/css-loader\" target=\"_blank\" rel=\"noreferrer noopener\">css-loader</a></strong> — Resolves all of our&nbsp;<span>CSS</span>&nbsp;<kbd>@import</kbd>&nbsp;and&nbsp;<kbd>url()</kbd>s</li><li><strong><a href=\"http://github.com/vuejs/vue-style-loader\" target=\"_blank\" rel=\"noreferrer noopener\">vue-style-loader</a></strong> — Injects all of our&nbsp;<span>CSS</span>&nbsp;from&nbsp;<kbd>.vue</kbd>&nbsp;Sin­gle File Com­po­nents linline</li><li><strong><a href=\"http://github.com/webpack-contrib/style-loader\" target=\"_blank\" rel=\"noreferrer noopener\">style-loader</a></strong> — Injects all of our&nbsp;<span>CSS</span>&nbsp;into the doc­u­ment inline in&nbsp;<kbd>&lt;style&gt;&lt;/style&gt;</kbd>&nbsp;tags</li></ul><p>Remem­ber, since this is what we do in local devel­op­ment, we don’t need to do any­thing fan­cy in terms of extract­ing all of our&nbsp;<span>CSS</span>&nbsp;out into a&nbsp;min­i­mized file. Instead, we just let the&nbsp;<kbd>style-loader</kbd>&nbsp;inline it all in our document.</p><p>The&nbsp;<kbd>webpack-dev-server</kbd>&nbsp;will use Hot Mod­ule Replace­ment (<span>HMR</span>) for our&nbsp;<span>CSS</span>, so any time we change any­thing, it rebuilds our&nbsp;<span>CSS</span>&nbsp;and re-injects it auto­mat­i­cal­ly. It’s some­what magical.</p><p>We tell web­pack about our&nbsp;<span>CSS</span>&nbsp;by includ­ing&nbsp;it:</p></div></div><div><div><section><div><pre><code><span>import</span> styles <span>from</span> <span>'../css/app.pcss'</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;importing styles</h5></aside></div></section></div></div><div><div><p>This is dis­cussed in detail in the&nbsp;<a href=\"http://webpack.js.org/guides/asset-management/#loading-css\" target=\"_blank\" rel=\"noreferrer noopener\">Load­ing&nbsp;<span>CSS</span></a>&nbsp;sec­tion of the web­pack&nbsp;docs.</p><p>We do this from our&nbsp;<kbd>App.js</kbd>&nbsp;entry point; think of this as the PostC­SS entry point. The&nbsp;<kbd>app.pcss</kbd>&nbsp;file&nbsp;<kbd>@import</kbd>s all of the&nbsp;<span>CSS</span>&nbsp;that our project uses; this will be cov­ered in detail lat­er&nbsp;on.&nbsp;</p></div></div><div><div><p><strong><span>MODULE</span>.<span>EXPORTS</span></strong></p><p>Final­ly, the&nbsp;<kbd>module.exports</kbd>&nbsp;uses the&nbsp;<a href=\"http://www.npmjs.com/package/webpack-merge\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack-merge</a>&nbsp;pack­age to merge the&nbsp;<kbd>common.legacyConfig</kbd>&nbsp;from the&nbsp;<kbd>webpack.common.js</kbd>&nbsp;with our dev lega­cy con­fig, and the&nbsp;<kbd>common.modernConfig</kbd>&nbsp;with our dev mod­ern config:</p></div></div><div><div><section><div><pre><code><span>// Development module exports</span>\nmodule<span>.</span>exports <span>=</span> <span>[</span>\n    <span>merge</span><span>(</span>\n        common<span>.</span>legacyConfig<span>,</span>\n        <span>{</span>\n            output<span>:</span> <span>{</span>\n                filename<span>:</span> path<span>.</span><span>join</span><span>(</span><span>'./js'</span><span>,</span> <span>'[name]-legacy.[hash].js'</span><span>)</span><span>,</span>\n                publicPath<span>:</span> settings<span>.</span>devServerConfig<span>.</span><span>public</span><span>(</span><span>)</span> <span>+</span> <span>'/'</span><span>,</span>\n            <span>}</span><span>,</span>\n            mode<span>:</span> <span>'development'</span><span>,</span>\n            devtool<span>:</span> <span>'inline-source-map'</span><span>,</span>\n            devServer<span>:</span> <span>configureDevServer</span><span>(</span>LEGACY_CONFIG<span>)</span><span>,</span>\n            module<span>:</span> <span>{</span>\n                rules<span>:</span> <span>[</span>\n                    <span>configurePostcssLoader</span><span>(</span>LEGACY_CONFIG<span>)</span><span>,</span>\n                    <span>configureImageLoader</span><span>(</span>LEGACY_CONFIG<span>)</span><span>,</span>\n                <span>]</span><span>,</span>\n            <span>}</span><span>,</span>\n            plugins<span>:</span> <span>[</span>\n                <span>new</span> <span>webpack<span>.</span>HotModuleReplacementPlugin</span><span>(</span><span>)</span><span>,</span>\n            <span>]</span><span>,</span>\n        <span>}</span>\n    <span>)</span><span>,</span>\n    <span>merge</span><span>(</span>\n        common<span>.</span>modernConfig<span>,</span>\n        <span>{</span>\n            output<span>:</span> <span>{</span>\n                filename<span>:</span> path<span>.</span><span>join</span><span>(</span><span>'./js'</span><span>,</span> <span>'[name].[hash].js'</span><span>)</span><span>,</span>\n                publicPath<span>:</span> settings<span>.</span>devServerConfig<span>.</span><span>public</span><span>(</span><span>)</span> <span>+</span> <span>'/'</span><span>,</span>\n            <span>}</span><span>,</span>\n            mode<span>:</span> <span>'development'</span><span>,</span>\n            devtool<span>:</span> <span>'inline-source-map'</span><span>,</span>\n            devServer<span>:</span> <span>configureDevServer</span><span>(</span>MODERN_CONFIG<span>)</span><span>,</span>\n            module<span>:</span> <span>{</span>\n                rules<span>:</span> <span>[</span>\n                    <span>configurePostcssLoader</span><span>(</span>MODERN_CONFIG<span>)</span><span>,</span>\n                    <span>configureImageLoader</span><span>(</span>MODERN_CONFIG<span>)</span><span>,</span>\n                <span>]</span><span>,</span>\n            <span>}</span><span>,</span>\n            plugins<span>:</span> <span>[</span>\n                <span>new</span> <span>webpack<span>.</span>HotModuleReplacementPlugin</span><span>(</span><span>)</span><span>,</span>\n                <span>new</span> <span>DashboardPlugin</span><span>(</span>dashboard<span>.</span>setData<span>)</span><span>,</span>\n            <span>]</span><span>,</span>\n        <span>}</span>\n    <span>)</span><span>,</span>\n<span>]</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.dev.js module.exports</h5></aside></div></section></div></div><div><div><p>By return­ing an array in our&nbsp;<kbd>module.exports</kbd>, we’re telling web­pack that we have more than one com­pile that needs to be done: one for our lega­cy build, and anoth­er for our mod­ern&nbsp;build.</p><p>Note that for the lega­cy build, we out­put processed JavaScript as&nbsp;<kbd>[name]-legacy.[hash].js</kbd>, where­as the mod­ern build out­puts it as&nbsp;<kbd>[name].[hash].js</kbd>.</p><p>By set­ting the&nbsp;<kbd>mode</kbd>&nbsp;to&nbsp;<kbd>'development'</kbd>&nbsp;we’re telling web­pack that this is a&nbsp;<a href=\"http://webpack.js.org/concepts/mode/\" target=\"_blank\" rel=\"noreferrer noopener\">devel­op­ment build</a>.</p><p>By set­ting&nbsp;<kbd>devtool</kbd>&nbsp;to&nbsp;<kbd>'inline-source-map'</kbd>&nbsp;we’re ask­ing for our&nbsp;<kbd>.map</kbd>s for our&nbsp;<span>CSS</span>/​JavaScript to be&nbsp;<a href=\"http://webpack.js.org/configuration/devtool/\" target=\"_blank\" rel=\"noreferrer noopener\">inlined into the files them­selves</a>. This makes the files huge, but it’s con­ve­nient for debug­ging purposes.</p><p>The&nbsp;<a href=\"http://webpack.js.org/plugins/hot-module-replacement-plugin/\" target=\"_blank\" rel=\"noreferrer noopener\">webpack.HotModuleReplacementPlugin</a>&nbsp;enables sup­port for Hot Mod­ule Replace­ment (<span>HMR</span>) on the web­pack side of things.</p><p>The&nbsp;<a href=\"http://github.com/FormidableLabs/webpack-dashboard\" target=\"_blank\" rel=\"noreferrer noopener\">Dash­board­Plu­g­in</a>&nbsp;plu­g­in lets us feel like an astro­naut with a&nbsp;fan­cy web­pack build&nbsp;<span>HUD</span>:</p></div></div><div><div><section><div><figure><div><div><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x699_crop_center-center_100_line/webpack-dashboard-plugin.png.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x578_crop_center-center_100_line/webpack-dashboard-plugin.png.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x447_crop_center-center_100_line/webpack-dashboard-plugin.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x335_crop_center-center_100_line/webpack-dashboard-plugin.png.webp 576w\" type=\"image/webp\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAgEG%2F8QAGxAAAwACAwAAAAAAAAAAAAAAAAERAjFCYXH%2FxAAUAQEAAAAAAAAAAAAAAAAAAAAA%2F8QAFBEBAAAAAAAAAAAAAAAAAAAAAP%2FaAAwDAQACEQMRAD8Ay2Tt6C4tOlfL0IH%2F2Q%3D%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x699_crop_center-center_100_line/webpack-dashboard-plugin.png 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x578_crop_center-center_100_line/webpack-dashboard-plugin.png 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x447_crop_center-center_100_line/webpack-dashboard-plugin.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x335_crop_center-center_100_line/webpack-dashboard-plugin.png 576w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAgEG%2F8QAGxAAAwACAwAAAAAAAAAAAAAAAAERAjFCYXH%2FxAAUAQEAAAAAAAAAAAAAAAAAAAAA%2F8QAFBEBAAAAAAAAAAAAAAAAAAAAAP%2FaAAwDAQACEQMRAD8Ay2Tt6C4tOlfL0IH%2F2Q%3D%3D\" alt=\"Webpack Dashboard Plugin\" height=\"auto\" width=\"900\"></picture></div></div></figure><figcaption><p>web­pack DashboardPlugin</p></figcaption></div></section></div></div><div><div><p>I’ve found the Dash­board­Plu­g­in devel­op­ment&nbsp;<span>HUD</span>&nbsp;to be sig­nif­i­cant­ly more use­ful than the default web­pack progress scroll.</p><p>And that’s it, we now have a&nbsp;nice devel­op­ment build for our projects; check out the&nbsp;<a href=\"http://www.youtube.com/watch?v=9-n2Ah0aowo\" target=\"_blank\" rel=\"noreferrer noopener\">Hot Mod­ule Replace­ment video</a>&nbsp;for an exam­ple of this in action:<br></p></div></div><section><div><div><iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/9-n2Ah0aowo\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen=\"\"></iframe></div></div></section><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#annotated-webpack-prod-js\"><i></i><span>LINK</span></a></span>ANNOTATED WEBPACK.PROD.JS</h3><p>Now let’s have a&nbsp;look at our&nbsp;<kbd>webpack.prod.js</kbd>&nbsp;con­fig file that has all of the set­tings that are used for pro­duc­tion builds while we’re work­ing on the project. It gets merged with the set­tings in&nbsp;<kbd>webpack.common.js</kbd>&nbsp;to form a&nbsp;com­plete web­pack configuration.</p></div></div><div><div><section><div><pre><code><span>// webpack.prod.js - production builds</span>\n<span>const</span> LEGACY_CONFIG <span>=</span> <span>'legacy'</span><span>;</span>\n<span>const</span> MODERN_CONFIG <span>=</span> <span>'modern'</span><span>;</span>\n\n<span>// node modules</span>\n<span>const</span> git <span>=</span> <span>require</span><span>(</span><span>'git-rev-sync'</span><span>)</span><span>;</span>\n<span>const</span> glob <span>=</span> <span>require</span><span>(</span><span>'glob-all'</span><span>)</span><span>;</span>\n<span>const</span> merge <span>=</span> <span>require</span><span>(</span><span>'webpack-merge'</span><span>)</span><span>;</span>\n<span>const</span> moment <span>=</span> <span>require</span><span>(</span><span>'moment'</span><span>)</span><span>;</span>\n<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>'path'</span><span>)</span><span>;</span>\n<span>const</span> webpack <span>=</span> <span>require</span><span>(</span><span>'webpack'</span><span>)</span><span>;</span>\n\n<span>// webpack plugins</span>\n<span>const</span> BundleAnalyzerPlugin <span>=</span> <span>require</span><span>(</span><span>'webpack-bundle-analyzer'</span><span>)</span><span>.</span>BundleAnalyzerPlugin<span>;</span>\n<span>const</span> CleanWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>'clean-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> CreateSymlinkPlugin <span>=</span> <span>require</span><span>(</span><span>'create-symlink-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> CriticalCssPlugin <span>=</span> <span>require</span><span>(</span><span>'critical-css-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>'html-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> ImageminWebpWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>'imagemin-webp-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>'mini-css-extract-plugin'</span><span>)</span><span>;</span>\n<span>const</span> OptimizeCSSAssetsPlugin <span>=</span> <span>require</span><span>(</span><span>'optimize-css-assets-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> PurgecssPlugin <span>=</span> <span>require</span><span>(</span><span>'purgecss-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> SaveRemoteFilePlugin <span>=</span> <span>require</span><span>(</span><span>'save-remote-file-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> TerserPlugin <span>=</span> <span>require</span><span>(</span><span>'terser-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> WebappWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>'webapp-webpack-plugin'</span><span>)</span><span>;</span>\n<span>const</span> WhitelisterPlugin <span>=</span> <span>require</span><span>(</span><span>'purgecss-whitelister'</span><span>)</span><span>;</span>\n<span>const</span> WorkboxPlugin <span>=</span> <span>require</span><span>(</span><span>'workbox-webpack-plugin'</span><span>)</span><span>;</span>\n\n<span>// config files</span>\n<span>const</span> common <span>=</span> <span>require</span><span>(</span><span>'./webpack.common.js'</span><span>)</span><span>;</span>\n<span>const</span> pkg <span>=</span> <span>require</span><span>(</span><span>'./package.json'</span><span>)</span><span>;</span>\n<span>const</span> settings <span>=</span> <span>require</span><span>(</span><span>'./webpack.settings.js'</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js preamble</h5></aside></div></section></div></div><div><div><p>In the pre­am­ble we again&nbsp;pull in the Node pack­ages we need, and the web­pack plu­g­ins we use. We then import our&nbsp;<kbd>webpack.settings.js</kbd>&nbsp;as&nbsp;<kbd>settings</kbd>&nbsp;so we can access the set­tings there, and also&nbsp;import our&nbsp;<kbd>package.json</kbd>&nbsp;as&nbsp;<kbd>pkg</kbd>&nbsp;to access a&nbsp;few set­tings there as&nbsp;well.&nbsp;</p><p>We also import our&nbsp;<kbd>webpack.common.js</kbd>&nbsp;com­mon web­pack con­fig that we’ll merge our dev set­tings&nbsp;with.<br></p></div></div><div><div><p><strong><span>TAIL­WIND</span>&nbsp;<span>EXTRACTOR</span></strong></p><p>This class is a&nbsp;cus­tom&nbsp;<a href=\"http://www.purgecss.com/\" target=\"_blank\" rel=\"noreferrer noopener\">PurgeC­SS</a>&nbsp;extrac­tor for&nbsp;<a href=\"http://tailwindcss.com/docs/what-is-tailwind/\" target=\"_blank\" rel=\"noreferrer noopener\">Tail­wind&nbsp;<span>CSS</span></a>&nbsp;that allows spe­cial char­ac­ters in class&nbsp;names.</p></div></div><div><div><section><div><pre><code><span>// Custom PurgeCSS extractor for Tailwind that allows special characters in</span>\n<span>// class names.</span>\n<span>//</span>\n<span>// https://github.com/FullHuman/purgecss#extractor</span>\n<span>class</span> <span>TailwindExtractor</span> <span>{</span>\n    <span>static</span> <span>extract</span><span>(</span>content<span>)</span> <span>{</span>\n        <span>return</span> content<span>.</span><span>match</span><span>(</span><span>/[A-Za-z0-9-_:\\/]+/g</span><span>)</span> <span>||</span> <span>[</span><span>]</span><span>;</span>\n    <span>}</span>\n<span>}</span></code></pre><aside><h5><i></i>&nbsp;Custom PurgeCSS extractor for Tailwind CSS</h5></aside></div></section></div></div><div><div><p>This is tak­en from the&nbsp;<a href=\"http://tailwindcss.com/docs/controlling-file-size/#removing-unused-css-with-purgecss\" target=\"_blank\" rel=\"noreferrer noopener\">Remov­ing unused&nbsp;<span>CSS</span>&nbsp;with PurgeC­SS</a>&nbsp;sec­tion of the Tail­wind&nbsp;<span>CSS</span>&nbsp;docs. See below for details on how this extrac­tor works with PurgeC­SS to mag­i­cal­ly make your&nbsp;<span>CSS</span>&nbsp;svelte and&nbsp;tidy.</p></div></div><div><div><p><strong><span>CON­FIG­U­RA­TION</span>&nbsp;<span>FUNCTIONS</span></strong></p><p>Here’s what the&nbsp;<kbd>configureBanner()</kbd>&nbsp;looks like:</p></div></div><div><div><section><div><pre><code><span>// Configure file banner</span>\n<span>const</span> <span>configureBanner</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        banner<span>:</span> <span>[</span>\n            <span>'/*!'</span><span>,</span>\n            <span>' * @project        '</span> <span>+</span> settings<span>.</span>name<span>,</span>\n            <span>' * @name           '</span> <span>+</span> <span>'[filebase]'</span><span>,</span>\n            <span>' * @author         '</span> <span>+</span> pkg<span>.</span>author<span>.</span>name<span>,</span>\n            <span>' * @build          '</span> <span>+</span> <span>moment</span><span>(</span><span>)</span><span>.</span><span>format</span><span>(</span><span>'llll'</span><span>)</span> <span>+</span> <span>' ET'</span><span>,</span>\n            <span>' * @release        '</span> <span>+</span> git<span>.</span><span>long</span><span>(</span><span>)</span> <span>+</span> <span>' ['</span> <span>+</span> git<span>.</span><span>branch</span><span>(</span><span>)</span> <span>+</span> <span>']'</span><span>,</span>\n            <span>' * @copyright      Copyright (c) '</span> <span>+</span> <span>moment</span><span>(</span><span>)</span><span>.</span><span>format</span><span>(</span><span>'YYYY'</span><span>)</span> <span>+</span> <span>' '</span> <span>+</span> settings<span>.</span>copyright<span>,</span>\n            <span>' *'</span><span>,</span>\n            <span>' */'</span><span>,</span>\n            <span>''</span>\n        <span>]</span><span>.</span><span>join</span><span>(</span><span>'\\n'</span><span>)</span><span>,</span>\n        raw<span>:</span> <span>true</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureBanner()</h5></aside></div></section></div></div><div><div><p>This sim­ply adds a&nbsp;ban­ner with project name, file name, author, and git infor­ma­tion for each file we&nbsp;build.</p><p>Next up is the&nbsp;<kbd>configureBundleAnalyzer()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Bundle Analyzer</span>\n<span>const</span> <span>configureBundleAnalyzer</span> <span>=</span> <span>(</span>buildType<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> LEGACY_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            analyzerMode<span>:</span> <span>'static'</span><span>,</span>\n            reportFilename<span>:</span> <span>'report-legacy.html'</span><span>,</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> MODERN_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            analyzerMode<span>:</span> <span>'static'</span><span>,</span>\n            reportFilename<span>:</span> <span>'report-modern.html'</span><span>,</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureBundleAnalyzer()</h5></aside></div></section></div></div><div><div><p>This uses the&nbsp;<a href=\"http://www.npmjs.com/package/webpack-bundle-analyzer\" target=\"_blank\" rel=\"noreferrer noopener\">Web­pack­Bundle­An­a­lyz­er</a>&nbsp;plu­g­in to gen­er­ate a&nbsp;report for both our mod­ern and lega­cy bun­dle builds that results in a&nbsp;self-con­tained inter­ac­tive&nbsp;<span>HTML</span>&nbsp;page that allows you to explore what exact­ly is in the bun­dle that has been gen­er­at­ed by webpack.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-bundle-analyzer.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAABAUG%2F8QAHxAAAQQCAgMAAAAAAAAAAAAAAgABAxEEMRIyInGx%2F8QAFQEBAQAAAAAAAAAAAAAAAAAAAgP%2FxAAZEQADAQEBAAAAAAAAAAAAAAABAgMABCH%2F2gAMAwEAAhEDEQA%2FANEMUnKyGMhbbMW0LOwinPxGrG%2BLPpWZeqNB2H0%2F1T5KMvuNKMSBv%2F%2FZ\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-bundle-analyzer.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-bundle-analyzer.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-bundle-analyzer.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-bundle-analyzer.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-bundle-analyzer.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAABAUG%2F8QAHxAAAQQCAgMAAAAAAAAAAAAAAgABAxEEMRIyInGx%2F8QAFQEBAQAAAAAAAAAAAAAAAAAAAgP%2FxAAZEQADAQEBAAAAAAAAAAAAAAABAgMABCH%2F2gAMAwEAAhEDEQA%2FANEMUnKyGMhbbMW0LOwinPxGrG%2BLPpWZeqNB2H0%2F1T5KMvuNKMSBv%2F%2FZ\" alt=\"Webpack Bundle Analyzer\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-bundle-analyzer.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-bundle-analyzer.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-bundle-analyzer.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-bundle-analyzer.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-bundle-analyzer.jpg 368w\"></picture></div></div></figure><figcaption><p>Web­pack Bun­dle Ana­lyz­er output</p></figcaption></div></section></div></div><div><div><p>I’ve found it to be very use­ful to help me keep my bun­dle sizes down, and under­stand exact­ly what web­pack is build­ing, so I’ve made it part of my pro­duc­tion build process.</p><p>Next up is the&nbsp;<kbd>configureCriticalCss()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Critical CSS</span>\n<span>const</span> <span>configureCriticalCss</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>(</span>settings<span>.</span>criticalCssConfig<span>.</span>pages<span>.</span><span>map</span><span>(</span><span>(</span>row<span>)</span> <span>=&gt;</span> <span>{</span>\n            <span>const</span> criticalSrc <span>=</span> settings<span>.</span>urls<span>.</span>critical <span>+</span> row<span>.</span>url<span>;</span>\n            <span>const</span> criticalDest <span>=</span> settings<span>.</span>criticalCssConfig<span>.</span>base <span>+</span> row<span>.</span>template <span>+</span> settings<span>.</span>criticalCssConfig<span>.</span>suffix<span>;</span>\n            <span>let</span> criticalWidth <span>=</span> settings<span>.</span>criticalCssConfig<span>.</span>criticalWidth<span>;</span>\n            <span>let</span> criticalHeight <span>=</span> settings<span>.</span>criticalCssConfig<span>.</span>criticalHeight<span>;</span>\n            <span>// Handle Google AMP templates</span>\n            <span>if</span> <span>(</span>row<span>.</span>template<span>.</span><span>indexOf</span><span>(</span>settings<span>.</span>criticalCssConfig<span>.</span>ampPrefix<span>)</span> <span>!==</span> <span>-</span><span>1</span><span>)</span> <span>{</span>\n                criticalWidth <span>=</span> settings<span>.</span>criticalCssConfig<span>.</span>ampCriticalWidth<span>;</span>\n                criticalHeight <span>=</span> settings<span>.</span>criticalCssConfig<span>.</span>ampCriticalHeight<span>;</span>\n            <span>}</span>\n            console<span>.</span><span>log</span><span>(</span><span>\"source: \"</span> <span>+</span> criticalSrc <span>+</span> <span>\" dest: \"</span> <span>+</span> criticalDest<span>)</span><span>;</span>\n            <span>return</span> <span>new</span> <span>CriticalCssPlugin</span><span>(</span><span>{</span>\n                base<span>:</span> <span>'./'</span><span>,</span>\n                src<span>:</span> criticalSrc<span>,</span>\n                dest<span>:</span> criticalDest<span>,</span>\n                extract<span>:</span> <span>false</span><span>,</span>\n                inline<span>:</span> <span>false</span><span>,</span>\n                minify<span>:</span> <span>true</span><span>,</span>\n                width<span>:</span> criticalWidth<span>,</span>\n                height<span>:</span> criticalHeight<span>,</span>\n            <span>}</span><span>)</span>\n        <span>}</span><span>)</span>\n    <span>)</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureCriticalCss()</h5></aside></div></section></div></div><div><div><p>This uses the&nbsp;<a href=\"http://www.npmjs.com/package/critical-css-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Crit­i­calC­ss­Plu­g­in</a>&nbsp;to gen­er­ate Crit­i­calC­SS for our web­site by chunk­ing through the&nbsp;<kbd>settings.criticalCssConfig.pages</kbd>&nbsp;from our&nbsp;<kbd>webpack.settings.js</kbd>.</p><p>Note that if the page passed in has&nbsp;<kbd>settings.criticalCssConfig.ampPrefix</kbd>&nbsp;any­where in its name, it gen­er­ates Crit­i­calC­SS for the entire web­page (not just the above the fold con­tent) by pass­ing in a&nbsp;very large height.</p><p>I won’t go into too much detail on Crit­i­calC­SS here; check out the&nbsp;<a href=\"https://nystudio107.com/blog/implementing-critical-css\">Imple­ment­ing Crit­i­cal&nbsp;<span>CSS</span>&nbsp;on your web­site</a>&nbsp;arti­cle&nbsp;for more infor­ma­tion on CriticalCSS.</p><p>Next up is the&nbsp;<kbd>configureCleanWebpack()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Clean webpack</span>\n<span>const</span> <span>configureCleanWebpack</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        root<span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> settings<span>.</span>paths<span>.</span>dist<span>.</span>base<span>)</span><span>,</span>\n        verbose<span>:</span> <span>true</span><span>,</span>\n        dry<span>:</span> <span>false</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureCleanWebpack()</h5></aside></div></section></div></div><div><div><p>This just uses the&nbsp;<a href=\"http://github.com/johnagan/clean-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Clean­Web­pack­Plu­g­in</a>&nbsp;to delete the build direc­to­ry in&nbsp;<kbd>settings.paths.dist.base</kbd>&nbsp;from our&nbsp;<kbd>webpack.settings.js</kbd>.</p><p>Next up is&nbsp;<kbd>configureHtml()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Html webpack</span>\n<span>const</span> <span>configureHtml</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        templateContent<span>:</span> <span>''</span><span>,</span>\n        filename<span>:</span> <span>'webapp.html'</span><span>,</span>\n        inject<span>:</span> <span>false</span><span>,</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureHtml()</h5></aside></div></section></div></div><div><div><p>This uses the&nbsp;<a href=\"http://webpack.js.org/plugins/html-webpack-plugin/\" target=\"_blank\" rel=\"noreferrer noopener\">Html­Web­pack­Plu­g­in</a>&nbsp;in con­junc­tion with the&nbsp;<a href=\"http://github.com/brunocodutra/webapp-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Webap­p­Web­pack­Plu­g­in</a>&nbsp;(see below) to gen­er­ate the&nbsp;<span>HTML</span>&nbsp;for our fav­i­cons. Note that we pass in an emp­ty string in&nbsp;<kbd>templateContent</kbd>&nbsp;so that the out­put is just the raw out­put from the WebappWebpackPlugin.</p><p>Next up is the&nbsp;<kbd>configureImageLoader()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Image loader</span>\n<span>const</span> <span>configureImageLoader</span> <span>=</span> <span>(</span>buildType<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> LEGACY_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            test<span>:</span> <span>/\\.(png|jpe?g|gif|svg|webp)$/i</span><span>,</span>\n            use<span>:</span> <span>[</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'file-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        name<span>:</span> <span>'img/[name].[hash].[ext]'</span>\n                    <span>}</span>\n                <span>}</span>\n            <span>]</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> MODERN_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            test<span>:</span> <span>/\\.(png|jpe?g|gif|svg|webp)$/i</span><span>,</span>\n            use<span>:</span> <span>[</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'file-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        name<span>:</span> <span>'img/[name].[hash].[ext]'</span>\n                    <span>}</span>\n                <span>}</span><span>,</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'img-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        plugins<span>:</span> <span>[</span>\n                            <span>require</span><span>(</span><span>'imagemin-gifsicle'</span><span>)</span><span>(</span><span>{</span>\n                                interlaced<span>:</span> <span>true</span><span>,</span>\n                            <span>}</span><span>)</span><span>,</span>\n                            <span>require</span><span>(</span><span>'imagemin-mozjpeg'</span><span>)</span><span>(</span><span>{</span>\n                                progressive<span>:</span> <span>true</span><span>,</span>\n                                arithmetic<span>:</span> <span>false</span><span>,</span>\n                            <span>}</span><span>)</span><span>,</span>\n                            <span>require</span><span>(</span><span>'imagemin-optipng'</span><span>)</span><span>(</span><span>{</span>\n                                optimizationLevel<span>:</span> <span>5</span><span>,</span>\n                            <span>}</span><span>)</span><span>,</span>\n                            <span>require</span><span>(</span><span>'imagemin-svgo'</span><span>)</span><span>(</span><span>{</span>\n                                plugins<span>:</span> <span>[</span>\n                                    <span>{</span>convertPathData<span>:</span> <span>false</span><span>}</span><span>,</span>\n                                <span>]</span>\n                            <span>}</span><span>)</span><span>,</span>\n                        <span>]</span>\n                    <span>}</span>\n                <span>}</span>\n            <span>]</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureImageLoader()</h5></aside></div></section></div></div><div><div><p>We pass in the&nbsp;<kbd>buildType</kbd>&nbsp;so that we can return dif­fer­ent results depend­ing on whether it is a&nbsp;lega­cy or mod­ern build. In this case, we run images through a&nbsp;vari­ety of image opti­miza­tions via&nbsp;<a href=\"http://www.npmjs.com/package/img-loader\" target=\"_blank\" rel=\"noreferrer noopener\">img-loader</a>&nbsp;for the mod­ern&nbsp;build.</p><p>We only do this for the mod­ern build, because there’s no sense in spend­ing the time to opti­mize the images for both the mod­ern and the lega­cy builds (the images are the same for&nbsp;both).</p><p>It’s impor­tant to note that this is only for images that are includ­ed in our web­pack build; many oth­er images will be com­ing from else­where (a&nbsp;<span>CMS</span>&nbsp;sys­tem, an asset man­age­ment sys­tem,&nbsp;etc.).</p><p>To let web­pack know about an image, you import it into your JavaScript:</p></div></div><div><div><section><div><pre><code><span>import</span> Icon <span>from</span> <span>'./icon.png'</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;Importing images</h5></aside></div></section></div></div><div><div><p>Check out the&nbsp;<a href=\"http://webpack.js.org/guides/asset-management/#loading-images\" target=\"_blank\" rel=\"noreferrer noopener\">Load­ing Images</a>&nbsp;sec­tion of the web­pack docs&nbsp;for more details on&nbsp;this.</p><p>Next up is our&nbsp;<kbd>configureOptimization()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure optimization</span>\n<span>const</span> <span>configureOptimization</span> <span>=</span> <span>(</span>buildType<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> LEGACY_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            splitChunks<span>:</span> <span>{</span>\n                cacheGroups<span>:</span> <span>{</span>\n                    <span>default</span><span>:</span> <span>false</span><span>,</span>\n                    common<span>:</span> <span>false</span><span>,</span>\n                    styles<span>:</span> <span>{</span>\n                        name<span>:</span> settings<span>.</span>vars<span>.</span>cssName<span>,</span>\n                        test<span>:</span> <span>/\\.(pcss|css|vue)$/</span><span>,</span>\n                        chunks<span>:</span> <span>'all'</span><span>,</span>\n                        enforce<span>:</span> <span>true</span>\n                    <span>}</span>\n                <span>}</span>\n            <span>}</span><span>,</span>\n            minimizer<span>:</span> <span>[</span>\n                <span>new</span> <span>TerserPlugin</span><span>(</span>\n                    <span>configureTerser</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>OptimizeCSSAssetsPlugin</span><span>(</span><span>{</span>\n                    cssProcessorOptions<span>:</span> <span>{</span>\n                        map<span>:</span> <span>{</span>\n                            inline<span>:</span> <span>false</span><span>,</span>\n                            annotation<span>:</span> <span>true</span><span>,</span>\n                        <span>}</span><span>,</span>\n                        safe<span>:</span> <span>true</span><span>,</span>\n                        discardComments<span>:</span> <span>true</span>\n                    <span>}</span><span>,</span>\n                <span>}</span><span>)</span>\n            <span>]</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> MODERN_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            minimizer<span>:</span> <span>[</span>\n                <span>new</span> <span>TerserPlugin</span><span>(</span>\n                    <span>configureTerser</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n            <span>]</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureOptimization()</h5></aside></div></section></div></div><div><div><p>This is where we con­fig­ure the&nbsp;<a href=\"http://webpack.js.org/configuration/optimization/\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack pro­duc­tion opti­miza­tion</a>. For the lega­cy build only (there’s no sense in doing it twice), we use the&nbsp;<a href=\"http://github.com/webpack-contrib/mini-css-extract-plugin\">MiniC­s­sEx­tract­Plu­g­in</a>&nbsp;to extract all of the&nbsp;<span>CSS</span>&nbsp;used project-wide into a&nbsp;sin­gle file. If you’ve used web­pack before, you might have used the Extract­TextPlu­g­in to do this in the past; no&nbsp;more.</p><p>We then also use the&nbsp;<a href=\"http://github.com/NMFR/optimize-css-assets-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Opti­mizeC­SSAs­set­sPlu­g­in</a>&nbsp;to opti­mize the result­ing&nbsp;<span>CSS</span>&nbsp;by remov­ing dupli­cate rules, and min­i­miz­ing the&nbsp;<span>CSS</span>&nbsp;via&nbsp;<kbd>cssnano</kbd>.</p><p>Final­ly, we set the JavaScript min­i­miz­er to be the&nbsp;<a href=\"http://github.com/webpack-contrib/terser-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Terser­Plu­g­in</a>; this is because the&nbsp;<a href=\"http://github.com/webpack-contrib/uglifyjs-webpack-plugin/releases/tag/v2.0.0\" target=\"_blank\" rel=\"noreferrer noopener\">Ugli­fyJs­Plu­g­in no longer sup­ports</a>&nbsp;min­i­miz­ing&nbsp;<span>ES<span>2015</span></span>+ JavaScript. And since we’re gen­er­at­ing mod­ern&nbsp;<span>ES<span>2015</span></span>+ bun­dles, we need&nbsp;it.</p><p>Next up is the&nbsp;<kbd>configurePostcssLoader()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Postcss loader</span>\n<span>const</span> <span>configurePostcssLoader</span> <span>=</span> <span>(</span>buildType<span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> LEGACY_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            test<span>:</span> <span>/\\.(pcss|css)$/</span><span>,</span>\n            use<span>:</span> <span>[</span>\n                MiniCssExtractPlugin<span>.</span>loader<span>,</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'css-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        importLoaders<span>:</span> <span>2</span><span>,</span>\n                        sourceMap<span>:</span> <span>true</span>\n                    <span>}</span>\n                <span>}</span><span>,</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'resolve-url-loader'</span>\n                <span>}</span><span>,</span>\n                <span>{</span>\n                    loader<span>:</span> <span>'postcss-loader'</span><span>,</span>\n                    options<span>:</span> <span>{</span>\n                        sourceMap<span>:</span> <span>true</span>\n                    <span>}</span>\n                <span>}</span>\n            <span>]</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n    <span>// Don't generate CSS for the modern config in production</span>\n    <span>if</span> <span>(</span>buildType <span>===</span> MODERN_CONFIG<span>)</span> <span>{</span>\n        <span>return</span> <span>{</span>\n            test<span>:</span> <span>/\\.(pcss|css)$/</span><span>,</span>\n            loader<span>:</span> <span>'ignore-loader'</span>\n        <span>}</span><span>;</span>\n    <span>}</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configurePostcssLoader()</h5></aside></div></section></div></div><div><div><p>This looks very sim­i­lar to the dev ver­sion of&nbsp;<kbd>configurePostcssLoader()</kbd>, except that for our final loader,&nbsp;we use the&nbsp;<a href=\"http://github.com/webpack-contrib/mini-css-extract-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">MiniCssExtractPlugin.loader</a>&nbsp;to extract all of our&nbsp;<span>CSS</span>&nbsp;into a&nbsp;sin­gle&nbsp;file.</p><p>We do this only for the lega­cy build, since there’s no sense in doing it for each build (the&nbsp;<span>CSS</span>&nbsp;is the same). We use the&nbsp;<a href=\"http://www.npmjs.com/package/ignore-loader\" target=\"_blank\" rel=\"noreferrer noopener\">ignore-loader</a>&nbsp;for mod­ern builds, so a&nbsp;loader exists for our .css&nbsp;<span>&amp;</span>&nbsp;.pcss files, but it does nothing.</p><p>As men­tioned ear­li­er, we use&nbsp;<a href=\"http://postcss.org/\" target=\"_blank\" rel=\"noreferrer noopener\">PostC­SS</a>&nbsp;to process all of our&nbsp;<span>CSS</span>, includ­ing&nbsp;<a href=\"http://tailwindcss.com/docs/what-is-tailwind/\" target=\"_blank\" rel=\"noreferrer noopener\">Tail­wind&nbsp;<span>CSS</span></a>. I&nbsp;think of it as the Babel of&nbsp;<span>CSS</span>, in that it com­piles all sorts of advanced&nbsp;<span>CSS</span>&nbsp;func­tion­al­i­ty down to plain old&nbsp;<span>CSS</span>&nbsp;that your browsers can understand.</p><p>Again, it’s impor­tant to note that for web­pack load­ers, they are processed in reverse order that they are listed:</p><ul><li><strong><a href=\"http://github.com/postcss/postcss-loader\" target=\"_blank\" rel=\"noreferrer noopener\">postc­ss-loader</a></strong> — Loads and process­es files as PostCSS</li><li><strong><a href=\"http://www.npmjs.com/package/resolve-url-loader\" target=\"_blank\" rel=\"noreferrer noopener\">resolve-url-loader</a></strong> — Rewrites any&nbsp;<kbd>url()</kbd>s in our&nbsp;<span>CSS</span>&nbsp;to pub­lic path relative</li><li><strong><a href=\"http://github.com/webpack-contrib/css-loader\" target=\"_blank\" rel=\"noreferrer noopener\">css-loader</a></strong> — Resolves all of our&nbsp;<span>CSS</span>&nbsp;<kbd>@import</kbd>&nbsp;and&nbsp;<kbd>url()</kbd>s</li><li><strong><a href=\"http://github.com/webpack-contrib/mini-css-extract-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">MiniCssExtractPlugin.loader</a></strong> — Extracts all of our pro­duc­tion&nbsp;<span>CSS</span>&nbsp;to a&nbsp;sin­gle&nbsp;file</li></ul><p>Since this is a&nbsp;pro­duc­tion build, we pull out all of the&nbsp;<span>CSS</span>&nbsp;used every­where with the&nbsp;<kbd>MiniCssExtractPlugin.loader</kbd>, and save it to a&nbsp;sin­gle&nbsp;<kbd>.css</kbd>&nbsp;file. The&nbsp;<span>CSS</span>&nbsp;also gets min­i­mized, and opti­mized for production.</p><p>We tell web­pack about our&nbsp;<span>CSS</span>&nbsp;by includ­ing&nbsp;it:</p></div></div><div><div><section><div><pre><code><span>import</span> styles <span>from</span> <span>'../css/app.pcss'</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;importing styles</h5></aside></div></section></div></div><div><div><p>This is dis­cussed in detail in the&nbsp;<a href=\"http://webpack.js.org/guides/asset-management/#loading-css\" target=\"_blank\" rel=\"noreferrer noopener\">Load­ing&nbsp;<span>CSS</span></a>&nbsp;sec­tion of the web­pack&nbsp;docs.</p><p>We do this from our&nbsp;<kbd>App.js</kbd>&nbsp;entry point; think of this as the PostC­SS entry point. The&nbsp;<kbd>app.pcss</kbd>&nbsp;file&nbsp;<kbd>@import</kbd>s all of the&nbsp;<span>CSS</span>&nbsp;that our project uses; this will be cov­ered in detail lat­er&nbsp;on.</p><p>Next up is the&nbsp;<kbd>configurePurgeCss()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure PurgeCSS</span>\n<span>const</span> <span>configurePurgeCss</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>let</span> paths <span>=</span> <span>[</span><span>]</span><span>;</span>\n    <span>// Configure whitelist paths</span>\n    <span>for</span> <span>(</span><span>const</span> <span>[</span>key<span>,</span> value<span>]</span> <span>of</span> Object<span>.</span><span>entries</span><span>(</span>settings<span>.</span>purgeCssConfig<span>.</span>paths<span>)</span><span>)</span> <span>{</span>\n        paths<span>.</span><span>push</span><span>(</span>path<span>.</span><span>join</span><span>(</span>__dirname<span>,</span> value<span>)</span><span>)</span><span>;</span>\n    <span>}</span>\n\n    <span>return</span> <span>{</span>\n        paths<span>:</span> glob<span>.</span><span>sync</span><span>(</span>paths<span>)</span><span>,</span>\n        whitelist<span>:</span> <span>WhitelisterPlugin</span><span>(</span>settings<span>.</span>purgeCssConfig<span>.</span>whitelist<span>)</span><span>,</span>\n        whitelistPatterns<span>:</span> settings<span>.</span>purgeCssConfig<span>.</span>whitelistPatterns<span>,</span>\n        extractors<span>:</span> <span>[</span>\n            <span>{</span>\n                extractor<span>:</span> TailwindExtractor<span>,</span>\n                extensions<span>:</span> settings<span>.</span>purgeCssConfig<span>.</span>extensions\n            <span>}</span>\n        <span>]</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configurePurgeCss()</h5></aside></div></section></div></div><div><div><p><a href=\"http://tailwindcss.com/docs/what-is-tailwind/\" target=\"_blank\" rel=\"noreferrer noopener\">Tail­wind&nbsp;<span>CSS</span></a>&nbsp;is a&nbsp;fan­tas­tic util­i­ty-first&nbsp;<span>CSS</span>&nbsp;frame­work that allows for rapid pro­to­typ­ing because in local devel­op­ment, you rarely have to actu­al­ly write any&nbsp;<span>CSS</span>. Instead, you just use the pro­vid­ed util­i­ty&nbsp;<span>CSS</span>&nbsp;classes.</p><p>The down­side is that the result­ing&nbsp;<span>CSS</span>&nbsp;can be a&nbsp;lit­tle large. This is where&nbsp;<a href=\"http://www.purgecss.com/\" target=\"_blank\" rel=\"noreferrer noopener\">PurgeC­SS</a>&nbsp;comes in. It will parse through all of your&nbsp;<span>HTML</span>/​template/​Vue/​whatever files, and strip out any unused&nbsp;<span>CSS</span>.</p><p>The sav­ings can be dra­mat­ic; Tail­wind&nbsp;<span>CSS</span>&nbsp;and PurgeC­SS are a&nbsp;match made in heav­en. We talked about this in depth on the&nbsp;<a href=\"http://devmode.fm/episodes/tailwind-css-utility-first-css-with-adam-watham\" target=\"_blank\" rel=\"noreferrer noopener\">Tail­wind&nbsp;<span>CSS</span>&nbsp;util­i­ty-first&nbsp;<span>CSS</span>&nbsp;with Adam Wathan</a>&nbsp;podcast.</p><p>It iter­ates through all of the path globs in&nbsp;<kbd>settings.purgeCssConfig.paths</kbd>&nbsp;look­ing for&nbsp;<span>CSS</span>&nbsp;rules to keep; any&nbsp;<span>CSS</span>rules not found get stripped out of our result­ing&nbsp;<span>CSS</span>&nbsp;build.</p><p>We also use the&nbsp;<a href=\"http://www.npmjs.com/package/purgecss-whitelister\" target=\"_blank\" rel=\"noreferrer noopener\">Whitelis­ter­Plu­g­in</a>&nbsp;to make it easy to whitelist entire files or even globs when we know we don’t want cer­tain&nbsp;<span>CSS</span>&nbsp;stripped. The&nbsp;<span>CSS</span>&nbsp;rules in&nbsp;all of the files that match our&nbsp;<kbd>settings.purgeCssConfig.whitelist</kbd>&nbsp;are whitelist­ed, and nev­er stripped from the result­ing&nbsp;build.</p><p>Next up is&nbsp;<kbd>configureTerser()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure terser</span>\n<span>const</span> <span>configureTerser</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        cache<span>:</span> <span>true</span><span>,</span>\n        parallel<span>:</span> <span>true</span><span>,</span>\n        sourceMap<span>:</span> <span>true</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureTerser()</h5></aside></div></section></div></div><div><div><p>This just con­fig­ures some set­tings used by the&nbsp;<a href=\"http://github.com/webpack-contrib/terser-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Terser­Plu­g­in</a>&nbsp;that min­i­mizes both our lega­cy and mod­ern JavaScript code.</p><p>Next up is the&nbsp;<kbd>configureWebApp()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Webapp webpack</span>\n<span>const</span> <span>configureWebapp</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>{</span>\n        logo<span>:</span> settings<span>.</span>webappConfig<span>.</span>logo<span>,</span>\n        prefix<span>:</span> settings<span>.</span>webappConfig<span>.</span>prefix<span>,</span>\n        cache<span>:</span> <span>false</span><span>,</span>\n        inject<span>:</span> <span>'force'</span><span>,</span>\n        favicons<span>:</span> <span>{</span>\n            appName<span>:</span> pkg<span>.</span>name<span>,</span>\n            appDescription<span>:</span> pkg<span>.</span>description<span>,</span>\n            developerName<span>:</span> pkg<span>.</span>author<span>.</span>name<span>,</span>\n            developerURL<span>:</span> pkg<span>.</span>author<span>.</span>url<span>,</span>\n            path<span>:</span> settings<span>.</span>paths<span>.</span>dist<span>.</span>base<span>,</span>\n        <span>}</span>\n    <span>}</span><span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureWebApp()</h5></aside></div></section></div></div><div><div><p>This uses the&nbsp;<a href=\"http://www.npmjs.com/package/webapp-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Webap­p­Web­pack­Plu­g­in</a>&nbsp;to gen­er­ate all of our site fav­i­cons in a&nbsp;myr­i­ad of for­mats, as well as our webapp&nbsp;<kbd>manifest.json</kbd>&nbsp;and oth­er&nbsp;<span>PWA</span>&nbsp;niceties.</p><p>It works in con­junc­tion with the&nbsp;<a href=\"http://webpack.js.org/plugins/html-webpack-plugin/\" target=\"_blank\" rel=\"noreferrer noopener\">Html­Web­pack­Plu­g­in</a>&nbsp;to also out­put a&nbsp;<kbd>webapp.html</kbd>&nbsp;file that con­tains links to all of the gen­er­at­ed fav­i­cons and asso­ci­at­ed files, for inclu­sion in our&nbsp;<span>HTML</span>&nbsp;page’s&nbsp;<kbd>&lt;head&gt;&lt;/head&gt;</kbd>.</p><p>Next up is the&nbsp;<kbd>configureWorkbox()</kbd>:</p></div></div><div><div><section><div><pre><code><span>// Configure Workbox service worker</span>\n<span>const</span> <span>configureWorkbox</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>let</span> config <span>=</span> settings<span>.</span>workboxConfig<span>;</span>\n\n    <span>return</span> config<span>;</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js configureWorkbox()</h5></aside></div></section></div></div><div><div><p>We use Google’s&nbsp;<a href=\"http://developers.google.com/web/tools/workbox/modules/workbox-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Work­boxWeb­pack­Plu­g­in</a>&nbsp;to gen­er­ate a&nbsp;<a href=\"http://developers.google.com/web/fundamentals/primers/service-workers/\" target=\"_blank\" rel=\"noreferrer noopener\">Ser­vice Work­er</a>&nbsp;for our web­site. It’s beyond the scope of this arti­cle explain what a&nbsp;Ser­vice Work­er is, but you can check out the&nbsp;<a href=\"http://devmode.fm/episodes/going-offline-service-workers-with-jeremy-keith\" target=\"_blank\" rel=\"noreferrer noopener\">Going Offline: Ser­vice Work­ers with Jere­my Kei­th</a>&nbsp;pod­cast for a&nbsp;primer.</p><p>The con­fig­u­ra­tion all comes from the&nbsp;<kbd>settings.workboxConfig</kbd>&nbsp;object in our&nbsp;<kbd>webpack.settings.js</kbd>. In addi­tion to pre-caching all of the assets in our mod­ern build&nbsp;<kbd>manifest.json</kbd>, we also include a&nbsp;<kbd>workbox-catch-handler.js</kbd>&nbsp;to con­fig­ure it to use a&nbsp;<a href=\"http://developers.google.com/web/tools/workbox/guides/advanced-recipes#provide_a_fallback_response_to_a_route\" target=\"_blank\" rel=\"noreferrer noopener\">fall­back response catch-all route</a>.</p></div></div><div><div><section><div><pre><code><span>// fallback URLs</span>\n<span>const</span> FALLBACK_HTML_URL <span>=</span> <span>'/offline.html'</span><span>;</span>\n<span>const</span> FALLBACK_IMAGE_URL <span>=</span> <span>'/offline.svg'</span><span>;</span>\n\n<span>// This \"catch\" handler is triggered when any of the other routes fail to</span>\n<span>// generate a response.</span>\n<span>// https://developers.google.com/web/tools/workbox/guides/advanced-recipes#provide_a_fallback_response_to_a_route</span>\nworkbox<span>.</span>routing<span>.</span><span>setCatchHandler</span><span>(</span><span>(</span><span>{</span>event<span>,</span> request<span>,</span> url<span>}</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>// Use event, request, and url to figure out how to respond.</span>\n    <span>// One approach would be to use request.destination, see</span>\n    <span>// https://medium.com/dev-channel/service-worker-caching-strategies-based-on-request-types-57411dd7652c</span>\n    <span>switch</span> <span>(</span>request<span>.</span>destination<span>)</span> <span>{</span>\n        <span>case</span> <span>'document'</span><span>:</span>\n            <span>return</span> caches<span>.</span><span>match</span><span>(</span>FALLBACK_HTML_URL<span>)</span><span>;</span>\n            <span>break</span><span>;</span>\n\n        <span>case</span> <span>'image'</span><span>:</span>\n            <span>return</span> caches<span>.</span><span>match</span><span>(</span>FALLBACK_IMAGE_URL<span>)</span><span>;</span>\n            <span>break</span><span>;</span>\n\n        <span>default</span><span>:</span>\n            <span>// If we don't have a fallback, just return an error response.</span>\n            <span>return</span> Response<span>.</span><span>error</span><span>(</span><span>)</span><span>;</span>\n    <span>}</span>\n<span>}</span><span>)</span><span>;</span>\n\n<span>// Use a stale-while-revalidate strategy for all other requests.</span>\nworkbox<span>.</span>routing<span>.</span><span>setDefaultHandler</span><span>(</span>\n    workbox<span>.</span>strategies<span>.</span><span>staleWhileRevalidate</span><span>(</span><span>)</span>\n<span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;workbox-catch-handler.js</h5></aside></div></section></div></div><div><div><p><strong><span>MODULE</span>.<span>EXPORTS</span></strong></p><p>Final­ly, the&nbsp;<kbd>module.exports</kbd>&nbsp;uses the&nbsp;<a href=\"http://www.npmjs.com/package/webpack-merge\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack-merge</a>&nbsp;to merge the&nbsp;<kbd>common.legacyConfig</kbd>&nbsp;from the&nbsp;<kbd>webpack.common.js</kbd>&nbsp;with our pro­duc­tion lega­cy con­fig, and the&nbsp;<kbd>common.modernConfig</kbd>&nbsp;with our pro­duc­tion mod­ern config:</p></div></div><div><div><section><div><pre><code><span>// Production module exports</span>\nmodule<span>.</span>exports <span>=</span> <span>[</span>\n    <span>merge</span><span>(</span>\n        common<span>.</span>legacyConfig<span>,</span>\n        <span>{</span>\n            output<span>:</span> <span>{</span>\n                filename<span>:</span> path<span>.</span><span>join</span><span>(</span><span>'./js'</span><span>,</span> <span>'[name]-legacy.[chunkhash].js'</span><span>)</span><span>,</span>\n            <span>}</span><span>,</span>\n            mode<span>:</span> <span>'production'</span><span>,</span>\n            devtool<span>:</span> <span>'source-map'</span><span>,</span>\n            optimization<span>:</span> <span>configureOptimization</span><span>(</span>LEGACY_CONFIG<span>)</span><span>,</span>\n            module<span>:</span> <span>{</span>\n                rules<span>:</span> <span>[</span>\n                    <span>configurePostcssLoader</span><span>(</span>LEGACY_CONFIG<span>)</span><span>,</span>\n                    <span>configureImageLoader</span><span>(</span>LEGACY_CONFIG<span>)</span><span>,</span>\n                <span>]</span><span>,</span>\n            <span>}</span><span>,</span>\n            plugins<span>:</span> <span>[</span>\n                <span>new</span> <span>CleanWebpackPlugin</span><span>(</span>settings<span>.</span>paths<span>.</span>dist<span>.</span>clean<span>,</span>\n                    <span>configureCleanWebpack</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>\n                    path<span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> settings<span>.</span>paths<span>.</span>dist<span>.</span>base<span>)</span><span>,</span>\n                    filename<span>:</span> path<span>.</span><span>join</span><span>(</span><span>'./css'</span><span>,</span> <span>'[name].[chunkhash].css'</span><span>)</span><span>,</span>\n                <span>}</span><span>)</span><span>,</span>\n                <span>new</span> <span>PurgecssPlugin</span><span>(</span>\n                    <span>configurePurgeCss</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>webpack<span>.</span>BannerPlugin</span><span>(</span>\n                    <span>configureBanner</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span>\n                    <span>configureHtml</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>WebappWebpackPlugin</span><span>(</span>\n                    <span>configureWebapp</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>CreateSymlinkPlugin</span><span>(</span>\n                    settings<span>.</span>createSymlinkConfig<span>,</span>\n                    <span>true</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>SaveRemoteFilePlugin</span><span>(</span>\n                    settings<span>.</span>saveRemoteFileConfig\n                <span>)</span><span>,</span>\n                <span>new</span> <span>BundleAnalyzerPlugin</span><span>(</span>\n                    <span>configureBundleAnalyzer</span><span>(</span>LEGACY_CONFIG<span>)</span><span>,</span>\n                <span>)</span><span>,</span>\n            <span>]</span><span>.</span><span>concat</span><span>(</span>\n                <span>configureCriticalCss</span><span>(</span><span>)</span>\n            <span>)</span>\n        <span>}</span>\n    <span>)</span><span>,</span>\n    <span>merge</span><span>(</span>\n        common<span>.</span>modernConfig<span>,</span>\n        <span>{</span>\n            output<span>:</span> <span>{</span>\n                filename<span>:</span> path<span>.</span><span>join</span><span>(</span><span>'./js'</span><span>,</span> <span>'[name].[chunkhash].js'</span><span>)</span><span>,</span>\n            <span>}</span><span>,</span>\n            mode<span>:</span> <span>'production'</span><span>,</span>\n            devtool<span>:</span> <span>'source-map'</span><span>,</span>\n            optimization<span>:</span> <span>configureOptimization</span><span>(</span>MODERN_CONFIG<span>)</span><span>,</span>\n            module<span>:</span> <span>{</span>\n                rules<span>:</span> <span>[</span>\n                    <span>configurePostcssLoader</span><span>(</span>MODERN_CONFIG<span>)</span><span>,</span>\n                    <span>configureImageLoader</span><span>(</span>MODERN_CONFIG<span>)</span><span>,</span>\n                <span>]</span><span>,</span>\n            <span>}</span><span>,</span>\n            plugins<span>:</span> <span>[</span>\n                <span>new</span> <span>webpack<span>.</span>optimize<span>.</span>ModuleConcatenationPlugin</span><span>(</span><span>)</span><span>,</span>\n                <span>new</span> <span>webpack<span>.</span>BannerPlugin</span><span>(</span>\n                    <span>configureBanner</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>ImageminWebpWebpackPlugin</span><span>(</span><span>)</span><span>,</span>\n                <span>new</span> <span>WorkboxPlugin<span>.</span>GenerateSW</span><span>(</span>\n                    <span>configureWorkbox</span><span>(</span><span>)</span>\n                <span>)</span><span>,</span>\n                <span>new</span> <span>BundleAnalyzerPlugin</span><span>(</span>\n                    <span>configureBundleAnalyzer</span><span>(</span>MODERN_CONFIG<span>)</span><span>,</span>\n                <span>)</span><span>,</span>\n            <span>]</span>\n        <span>}</span>\n    <span>)</span><span>,</span>\n<span>]</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;webpack.prod.js module.exports</h5></aside></div></section></div></div><div><div><p>By return­ing an array in our&nbsp;<kbd>module.exports</kbd>, we’re telling web­pack that we have more than one com­pile that needs to be done: one for our lega­cy build, and anoth­er for our mod­ern&nbsp;build.</p><p>Note that for the lega­cy build, we out­put processed JavaScript as&nbsp;<kbd>[name]-legacy.[hash].js</kbd>, where­as the mod­ern build out­puts it as&nbsp;<kbd>[name].[hash].js</kbd>.</p><p>By set­ting the&nbsp;<kbd>mode</kbd>&nbsp;to&nbsp;<kbd>'production'</kbd>&nbsp;we’re telling web­pack that this is a&nbsp;<a href=\"http://webpack.js.org/concepts/mode/\" target=\"_blank\" rel=\"noreferrer noopener\">pro­duc­tion build</a>. This enables a&nbsp;num­ber of set­tings appro­pri­ate for a&nbsp;pro­duc­tion&nbsp;build.</p><p>By set­ting&nbsp;<kbd>devtool</kbd>&nbsp;to&nbsp;<kbd>'source-map'</kbd>&nbsp;we’re ask­ing for our&nbsp;<kbd>.map</kbd>s for our&nbsp;<span>CSS</span>/​JavaScript to be&nbsp;<a href=\"http://webpack.js.org/configuration/devtool/\" target=\"_blank\" rel=\"noreferrer noopener\">gen­er­at­ed as sep­a­rate .map files</a>. This makes it eas­i­er for us to debug live pro­duc­tion web­sites with­out adding the file size of our assets.</p><p>There are a&nbsp;cou­ple of web­pack plu­g­ins used here that we haven’t cov­ered already:</p><ul><li><strong><a href=\"http://www.npmjs.com/package/create-symlink-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Cre­ateSym­linkPlu­g­in</a></strong> — this is a&nbsp;plu­g­in I&nbsp;cre­at­ed to allow for sym­link cre­ation as part of the build process. I&nbsp;use it to sym­link the gen­er­at­ed&nbsp;<kbd>favicon.ico</kbd>&nbsp;to&nbsp;<kbd>/favicon.ico</kbd>&nbsp;because many web browsers look for in the web&nbsp;root.</li><li><strong><a href=\"http://www.npmjs.com/package/save-remote-file-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">SaveR­e­mote­File­Plu­g­in</a></strong> — this is a&nbsp;plu­g­in I&nbsp;cre­at­ed to down­load remote files and emit them as part of the web­pack build process. I&nbsp;use this for down­load­ing and serv­ing up Google’s&nbsp;<kbd>analytics.js</kbd>&nbsp;locally.</li><li><strong><a href=\"http://www.npmjs.com/package/imagemin-webp-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Imagem­inWebp­Web­pack­Plu­g­in</a></strong> — this plu­g­in cre­ates&nbsp;<kbd>.webp</kbd>&nbsp;vari­ants of all of the&nbsp;<span>JPEG</span>&nbsp;and&nbsp;<span>PNG</span>&nbsp;files that your project imports</li></ul><p>And that’s it, we now have a&nbsp;nice pro­duc­tion build for our projects with all of the bells&nbsp;<span>&amp;</span>&nbsp;whistles.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#tailwind-css-post-css-config\"><i></i><span>LINK</span></a></span>TAILWIND CSS &amp; POSTCSS CONFIG</h3><p>To make web­pack build Tail­wind&nbsp;<span>CSS</span>&nbsp;and the rest of our&nbsp;<span>CSS</span>&nbsp;prop­er­ly, we need to do a&nbsp;lit­tle set­up. Cred­it to my part­ner in crime, Jonathan Melville, for work­ing this aspect of the build out.&nbsp;First we need a&nbsp;<kbd>postcss.config.js</kbd>&nbsp;file:</p></div></div><div><div><section><div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>\n    plugins<span>:</span> <span>[</span>\n        <span>require</span><span>(</span><span>'postcss-import'</span><span>)</span><span>,</span>\n        <span>require</span><span>(</span><span>'postcss-extend'</span><span>)</span><span>,</span>\n        <span>require</span><span>(</span><span>'postcss-simple-vars'</span><span>)</span><span>,</span>\n        <span>require</span><span>(</span><span>'postcss-nested-ancestors'</span><span>)</span><span>,</span>\n        <span>require</span><span>(</span><span>'postcss-nested'</span><span>)</span><span>,</span>\n        <span>require</span><span>(</span><span>'postcss-hexrgba'</span><span>)</span><span>,</span>\n        <span>require</span><span>(</span><span>'autoprefixer'</span><span>)</span><span>,</span>\n        <span>require</span><span>(</span><span>'tailwindcss'</span><span>)</span><span>(</span><span>'./tailwind.config.js'</span><span>)</span>\n    <span>]</span>\n<span>}</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;postcss.config.js</h5></aside></div></section></div></div><div><div><p>This can be stored in the project root; PostC­SS will look for it auto­mat­i­cal­ly as part of the build process, and apply the PostC­SS plu­g­ins we’ve spec­i­fied. Note this is where we include the&nbsp;<kbd>tailwind.config.js</kbd>&nbsp;file to make it part of the build process.</p></div></div><div><div><p>Final­ly, our&nbsp;<span>CSS</span>&nbsp;entry point&nbsp;<kbd>app.pcss</kbd>&nbsp;looks some­thing like&nbsp;this:</p></div></div><div><div><section><div><pre><code><span>/**\n * app.css\n *\n * The entry point for the css.\n *\n */</span>\n\n<span>/**\n * This injects Tailwind's base styles, which is a combination of\n * Normalize.css and some additional base styles.\n *\n * You can see the styles here:\n * https://github.com/tailwindcss/tailwindcss/blob/master/css/preflight.css\n */</span>\n <span><span>@import</span> <span>\"tailwindcss/preflight\"</span><span>;</span></span>\n\n<span>/**\n * This injects any component classes registered by plugins.\n *\n */</span>\n<span><span>@import</span> <span>'tailwindcss/components'</span><span>;</span></span>\n\n<span>/**\n * Here we add custom component classes; stuff we want loaded\n * *before* the utilities so that the utilities can still\n * override them.\n *\n */</span>\n<span><span>@import</span> <span>'./components/global.pcss'</span><span>;</span></span>\n<span><span>@import</span> <span>'./components/typography.pcss'</span><span>;</span></span>\n<span><span>@import</span> <span>'./components/webfonts.pcss'</span><span>;</span></span>\n\n<span>/**\n * This injects all of Tailwind's utility classes, generated based on your\n * config file.\n *\n */</span>\n<span><span>@import</span> <span>'tailwindcss/utilities'</span><span>;</span></span>\n\n<span>/**\n * Include styles for individual pages\n *\n */</span>\n<span><span>@import</span> <span>'./pages/homepage.pcss'</span><span>;</span></span>\n\n<span>/**\n * Include vendor css.\n *\n */</span>\n <span><span>@import</span> <span>'vendor.pcss'</span><span>;</span></span></code></pre><aside><h5><i></i>&nbsp;app.pcss</h5></aside></div></section></div></div><div><div><p>Obvi­ous­ly, tai­lor it to include what­ev­er components/​pages that you use for your cus­tom&nbsp;<span>CSS</span>.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#post-build-project-tree\"><i></i><span>LINK</span></a></span>POST-BUILD PROJECT TREE</h3><p>Here’s what our project tree looks like post-build:</p></div></div><div><div><section><div><pre><code>├── example.env\n├── package.json\n├── postcss.config.js\n├── src\n│   ├── css\n│   │   ├── app.pcss\n│   │   ├── components\n│   │   │   ├── global.pcss\n│   │   │   ├── typography.pcss\n│   │   │   └── webfonts.pcss\n│   │   ├── pages\n│   │   │   └── homepage.pcss\n│   │   └── vendor.pcss\n│   ├── fonts\n│   ├── img\n│   │   └── favicon-src.png\n│   ├── js\n│   │   ├── app.js\n│   │   └── workbox-catch-handler.js\n│   └── vue\n│       └── Confetti.vue\n├── tailwind.config.js\n├── templates\n├── web\n│   ├── dist\n│   │   ├── criticalcss\n│   │   │   └── index_critical.min.css\n│   │   ├── css\n│   │   │   ├── styles.d833997e3e3f91af64e7.css\n│   │   │   └── styles.d833997e3e3f91af64e7.css.map\n│   │   ├── img\n│   │   │   └── favicons\n│   │   │       ├── android-chrome-144x144.png\n│   │   │       ├── android-chrome-192x192.png\n│   │   │       ├── android-chrome-256x256.png\n│   │   │       ├── android-chrome-36x36.png\n│   │   │       ├── android-chrome-384x384.png\n│   │   │       ├── android-chrome-48x48.png\n│   │   │       ├── android-chrome-512x512.png\n│   │   │       ├── android-chrome-72x72.png\n│   │   │       ├── android-chrome-96x96.png\n│   │   │       ├── apple-touch-icon-114x114.png\n│   │   │       ├── apple-touch-icon-120x120.png\n│   │   │       ├── apple-touch-icon-144x144.png\n│   │   │       ├── apple-touch-icon-152x152.png\n│   │   │       ├── apple-touch-icon-167x167.png\n│   │   │       ├── apple-touch-icon-180x180.png\n│   │   │       ├── apple-touch-icon-57x57.png\n│   │   │       ├── apple-touch-icon-60x60.png\n│   │   │       ├── apple-touch-icon-72x72.png\n│   │   │       ├── apple-touch-icon-76x76.png\n│   │   │       ├── apple-touch-icon.png\n│   │   │       ├── apple-touch-icon-precomposed.png\n│   │   │       ├── apple-touch-startup-image-1182x2208.png\n│   │   │       ├── apple-touch-startup-image-1242x2148.png\n│   │   │       ├── apple-touch-startup-image-1496x2048.png\n│   │   │       ├── apple-touch-startup-image-1536x2008.png\n│   │   │       ├── apple-touch-startup-image-320x460.png\n│   │   │       ├── apple-touch-startup-image-640x1096.png\n│   │   │       ├── apple-touch-startup-image-640x920.png\n│   │   │       ├── apple-touch-startup-image-748x1024.png\n│   │   │       ├── apple-touch-startup-image-750x1294.png\n│   │   │       ├── apple-touch-startup-image-768x1004.png\n│   │   │       ├── browserconfig.xml\n│   │   │       ├── coast-228x228.png\n│   │   │       ├── favicon-16x16.png\n│   │   │       ├── favicon-32x32.png\n│   │   │       ├── favicon.ico\n│   │   │       ├── firefox_app_128x128.png\n│   │   │       ├── firefox_app_512x512.png\n│   │   │       ├── firefox_app_60x60.png\n│   │   │       ├── manifest.json\n│   │   │       ├── manifest.webapp\n│   │   │       ├── mstile-144x144.png\n│   │   │       ├── mstile-150x150.png\n│   │   │       ├── mstile-310x150.png\n│   │   │       ├── mstile-310x310.png\n│   │   │       ├── mstile-70x70.png\n│   │   │       ├── yandex-browser-50x50.png\n│   │   │       └── yandex-browser-manifest.json\n│   │   ├── js\n│   │   │   ├── analytics.45eff9ff7d6c7c1e3c3d4184fdbbed90.js\n│   │   │   ├── app.30334b5124fa6e221464.js\n│   │   │   ├── app.30334b5124fa6e221464.js.map\n│   │   │   ├── app-legacy.560ef247e6649c0c24d0.js\n│   │   │   ├── app-legacy.560ef247e6649c0c24d0.js.map\n│   │   │   ├── confetti.1152197f8c58a1b40b34.js\n│   │   │   ├── confetti.1152197f8c58a1b40b34.js.map\n│   │   │   ├── confetti-legacy.8e9093b414ea8aed46e5.js\n│   │   │   ├── confetti-legacy.8e9093b414ea8aed46e5.js.map\n│   │   │   ├── precache-manifest.f774c437974257fc8026ca1bc693655c.js\n│   │   │   ├── styles-legacy.d833997e3e3f91af64e7.js\n│   │   │   ├── styles-legacy.d833997e3e3f91af64e7.js.map\n│   │   │   ├── vendors~confetti~vue.03b9213ce186db5518ea.js\n│   │   │   ├── vendors~confetti~vue.03b9213ce186db5518ea.js.map\n│   │   │   ├── vendors~confetti~vue-legacy.e31223849ab7fea17bb8.js\n│   │   │   ├── vendors~confetti~vue-legacy.e31223849ab7fea17bb8.js.map\n│   │   │   └── workbox-catch-handler.js\n│   │   ├── manifest.json\n│   │   ├── manifest-legacy.json\n│   │   ├── report-legacy.html\n│   │   ├── report-modern.html\n│   │   ├── webapp.html\n│   │   └── workbox-catch-handler.js\n│   ├── favicon.ico -<span>&gt;</span> dist/img/favicons/favicon.ico\n│   ├── index.php\n│   ├── offline.html\n│   ├── offline.svg\n│   └── sw.js\n├── webpack.common.js\n├── webpack.dev.js\n├── webpack.prod.js\n├── webpack.settings.js\n└── yarn.lock</code></pre><aside><h5><i></i>&nbsp;Post-Build Project Tree</h5></aside></div></section></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#injecting-script-css-tags-in-your-html\"><i></i><span>LINK</span></a></span>INJECTING SCRIPT &amp; CSS TAGS IN YOUR HTML</h3><p>With the web­pack con­fig shown here,&nbsp;<kbd>&lt;script&gt;</kbd>&nbsp;and&nbsp;<kbd>&lt;style&gt;</kbd>&nbsp;tags&nbsp;do not get inject­ed into your&nbsp;<span>HTML</span>&nbsp;as part of the pro­duc­tion build. The set­up uses&nbsp;<a href=\"http://craftcms.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Craft&nbsp;<span>CMS</span></a>, which has a&nbsp;tem­plat­ing sys­tem, and we inject the tags using the&nbsp;<a href=\"http://github.com/nystudio107/craft-twigpack\" target=\"_blank\" rel=\"noreferrer noopener\">Twig­pack plu­g­in</a>.</p><p>If you’re not using Craft&nbsp;<span>CMS</span>&nbsp;or a&nbsp;sys­tem that has a&nbsp;tem­plat­ing engine, and want these tags inject­ed into your&nbsp;<span>HTML</span>, you’ll want to use the&nbsp;<a href=\"http://github.com/jantimon/html-webpack-plugin\" target=\"_blank\" rel=\"noreferrer noopener\">Html­Web­pack­Plu­g­in</a>&nbsp;to do that for you. This plu­g­in is already includ­ed, you’d just need to add a&nbsp;lit­tle con­fig to tell it to inject the tags into your&nbsp;<span>HTML</span>.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#craft-cms-3-integration-with-the-twigpack-plugin\"><i></i><span>LINK</span></a></span>CRAFT CMS 3 INTEGRATION WITH THE TWIGPACK PLUGIN</h3><p>If you’re not using&nbsp;<a href=\"http://craftcms.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Craft&nbsp;<span>CMS</span>&nbsp;<span>3</span>,</a>&nbsp;you can safe­ly skip this sec­tion. It just pro­vides some use­ful inte­gra­tion information.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAAMG%2F8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAwQiMf%2FEABYBAQEBAAAAAAAAAAAAAAAAAAACA%2F%2FEABkRAAMAAwAAAAAAAAAAAAAAAAABAgMhIv%2FaAAwDAQACEQMRAD8A3ehnWomv2Z5XSnkqEm9jOztUDYOoxOnPQtJPRWaEiAf%2F2Q%3D%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAAMG%2F8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAwQiMf%2FEABYBAQEBAAAAAAAAAAAAAAAAAAACA%2F%2FEABkRAAMAAwAAAAAAAAAAAAAAAAABAgMhIv%2FaAAwDAQACEQMRAD8A3ehnWomv2Z5XSnkqEm9jOztUDYOoxOnPQtJPRWaEiAf%2F2Q%3D%3D\" alt=\"Twigpack Plugin Logo Lg\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/twigpack-plugin-logo-lg.jpg 368w\"></picture><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAAMG%2F8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAwQiMf%2FEABYBAQEBAAAAAAAAAAAAAAAAAAACA%2F%2FEABkRAAMAAwAAAAAAAAAAAAAAAAABAgMhIv%2FaAAwDAQACEQMRAD8A3ehnWomv2Z5XSnkqEm9jOztUDYOoxOnPQtJPRWaEiAf%2F2Q%3D%3D\"></div></div></figure></div></section></div></div><div><div><p>I wrote a&nbsp;free&nbsp;plu­g­in called&nbsp;<a href=\"http://github.com/nystudio107/craft-twigpack\" target=\"_blank\" rel=\"noreferrer noopener\">Twig­pack</a>&nbsp;that makes it easy to inte­grate our fan­cy web­pack build set­up with Craft&nbsp;<span>CMS</span>&nbsp;<span>3</span>.</p><p>It han­dles access­ing the&nbsp;<kbd>manifest.json</kbd>&nbsp;files to inject entry points into your Twig&nbsp;tem­plates, and it even han­dles pat­terns for doing the legacy/​modern mod­ule injec­tion, asyn­chro­nous&nbsp;<span>CSS</span>&nbsp;load­ing, and a&nbsp;whole lot&nbsp;more.</p><p>It’ll make work­ing with the web­pack&nbsp;<span>4</span>&nbsp;con­fig pre­sent­ed here very simple.</p><p>To include the&nbsp;<span>CSS</span>, I&nbsp;do:</p></div></div><div><div><section><div><pre><code><span><span>&lt;!--# if expr=\"$HTTP_COOKIE=/critical\\-css\\=1/\" --&gt;</span></span>\n    <span><span><span>{{</span></span> <span>craft</span><span>.</span><span>twigpack</span><span>.</span><span>includeCssModule</span><span>(</span><span><span>\"</span>styles.css<span>\"</span></span><span>,</span> <span>false</span><span>)</span> <span><span>}}</span></span></span>\n<span><span>&lt;!--# else --&gt;</span>\n    <span><span><span>&lt;</span>script</span><span>&gt;</span></span><span>\n        Cookie<span>.</span><span>set</span><span>(</span><span>\"critical-css\"</span><span>,</span> <span>'1'</span><span>,</span> <span>{</span> expires<span>:</span> <span>\"7D\"</span><span>,</span> secure<span>:</span> <span>true</span> <span>}</span><span>)</span><span>;</span>\n    </span><span><span><span>&lt;/</span>script</span><span>&gt;</span></span></span>\n    <span><span><span>{{</span></span> <span>craft</span><span>.</span><span>twigpack</span><span>.</span><span>includeCriticalCssTags</span><span>(</span><span>)</span> <span><span>}}</span></span></span>\n\n    <span><span><span>{{</span></span> <span>craft</span><span>.</span><span>twigpack</span><span>.</span><span>includeCssModule</span><span>(</span><span><span>\"</span>styles.css<span>\"</span></span><span>,</span> <span>true</span><span>)</span> <span><span>}}</span></span></span>\n    <span><span><span>{{</span></span> <span>craft</span><span>.</span><span>twigpack</span><span>.</span><span>includeCssRelPreloadPolyfill</span><span>(</span><span>)</span> <span><span>}}</span></span></span>\n<span><span>&lt;!--# endif --&gt;</span></span></code></pre><aside><h5><i></i>&nbsp;Including CSS with Twigpack</h5></aside></div></section></div></div><div><div><p>The&nbsp;<kbd>&lt;!--# --&gt;</kbd>&nbsp;<span>HTML</span>&nbsp;com­ments are&nbsp;<a href=\"http://nginx.org/en/docs/http/ngx_http_ssi_module.html\" target=\"_blank\" rel=\"noreferrer noopener\">Nginx Servi­er Side Includes</a>&nbsp;direc­tives. The pat­tern is that if the&nbsp;<kbd>critical-css</kbd>cook­ie is set, the user has already vis­it­ed our web­site in the last&nbsp;<span>7</span>&nbsp;days, so their brows­er should have the site&nbsp;<span>CSS</span>cached, and we just serve up the site&nbsp;<span>CSS</span>&nbsp;normally.</p><p>If the&nbsp;<kbd>critical-css</kbd>&nbsp;cook­ie is not set, we set the cook­ie via&nbsp;<a href=\"http://www.npmjs.com/package/tiny-cookie\" target=\"_blank\" rel=\"noreferrer noopener\">Tiny Cook­ie</a>,&nbsp;include our Crit­i­cal&nbsp;<span>CSS</span>, and load the site&nbsp;<span>CSS</span>&nbsp;asyn­chro­nous­ly. See the&nbsp;<a href=\"https://nystudio107.com/blog/implementing-critical-css\">Imple­ment­ing Crit­i­cal&nbsp;<span>CSS</span>&nbsp;on your web­site</a>&nbsp;arti­cle for details on Crit­i­cal&nbsp;<span>CSS</span>.</p><p>To serve up our JavaScript, we just&nbsp;do:</p></div></div><div><div><section><div><pre><code><span><span><span>{{</span></span> <span>craft</span><span>.</span><span>twigpack</span><span>.</span><span>includeSafariNomoduleFix</span><span>(</span><span>)</span> <span><span>}}</span></span></span>\n<span><span><span>{{</span></span> <span>craft</span><span>.</span><span>twigpack</span><span>.</span><span>includeJsModule</span><span>(</span><span><span>\"</span>app.js<span>\"</span></span><span>,</span> <span>true</span><span>)</span> <span><span>}}</span></span></span></code></pre><aside><h5><i></i>&nbsp;Including JavaScript with Twigpack</h5></aside></div></section></div></div><div><div><p>The sec­ond true para­me­ter tells it to load the JavaScript async as a&nbsp;mod­ule, so the result­ing&nbsp;<span>HTML</span>&nbsp;looks like&nbsp;this:</p></div></div><div><div><section><div><pre><code><span>&lt;</span>script<span>&gt;</span>\n<span>!</span><span>function</span><span>(</span><span>)</span><span>{</span><span>var</span> e<span>=</span>document<span>,</span>t<span>=</span>e<span>.</span><span>createElement</span><span>(</span><span>\"script\"</span><span>)</span><span>;</span><span>if</span><span>(</span><span>!</span><span>(</span><span>\"noModule\"</span><span>in</span> t<span>)</span><span>&amp;&amp;</span><span>\"onbeforeload\"</span><span>in</span> t<span>)</span><span>{</span><span>var</span> n<span>=</span><span>!</span><span>1</span><span>;</span>e<span>.</span><span>addEventListener</span><span>(</span><span>\"beforeload\"</span><span>,</span><span>function</span><span>(</span>e<span>)</span><span>{</span><span>if</span><span>(</span>e<span>.</span>target<span>===</span>t<span>)</span>n<span>=</span><span>!</span><span>0</span><span>;</span><span>else</span> <span>if</span><span>(</span><span>!</span>e<span>.</span>target<span>.</span><span>hasAttribute</span><span>(</span><span>\"nomodule\"</span><span>)</span><span>||</span><span>!</span>n<span>)</span><span>return</span><span>;</span>e<span>.</span><span>preventDefault</span><span>(</span><span>)</span><span>}</span><span>,</span><span>!</span><span>0</span><span>)</span><span>,</span>t<span>.</span>type<span>=</span><span>\"module\"</span><span>,</span>t<span>.</span>src<span>=</span><span>\".\"</span><span>,</span>e<span>.</span>head<span>.</span><span>appendChild</span><span>(</span>t<span>)</span><span>,</span>t<span>.</span><span>remove</span><span>(</span><span>)</span><span>}</span><span>}</span><span>(</span><span>)</span><span>;</span>\n<span>&lt;</span><span>/</span>script<span>&gt;</span>\n<span>&lt;</span>script type<span>=</span><span>\"module\"</span> src<span>=</span><span>\"http://example.test/dist/js/app.273e88e73566fecf20de.js\"</span><span>&gt;</span><span>&lt;</span><span>/</span>script<span>&gt;</span>\n<span>&lt;</span>script nomodule src<span>=</span><span>\"http://example.test/dist/js/app-legacy.95d36ead9190c0571578.js\"</span><span>&gt;</span><span>&lt;</span><span>/</span>script<span>&gt;</span></code></pre><aside><h5><i></i>&nbsp;HTML result of the JavaScript</h5></aside></div></section></div></div><div><div><p>See the&nbsp;<a href=\"http://github.com/nystudio107/craft-twigpack\" target=\"_blank\" rel=\"noreferrer noopener\">Twig­pack doc­u­men­ta­tion</a>&nbsp;for details</p><p>Here’s my full&nbsp;<kbd>config/twigpack.php file</kbd>&nbsp;that I&nbsp;use; note that it has local set­tings for run­ning inside of my Home­stead&nbsp;<span>VM</span>. Your set­tings may differ:</p></div></div><div><div><section><div><pre><code><span>return</span> <span>[</span>\n    <span>// Global settings</span>\n    <span>'*'</span> <span>=</span><span>&gt;</span> <span>[</span>\n        <span>// If `devMode` is on, use webpack-dev-server to all for HMR (hot module reloading)</span>\n        <span>'useDevServer'</span> <span>=</span><span>&gt;</span> <span>false</span><span>,</span>\n        <span>// The JavaScript entry from the manifest.json to inject on Twig error pages</span>\n        <span>'errorEntry'</span> <span>=</span><span>&gt;</span> <span>''</span><span>,</span>\n        <span>// Manifest file names</span>\n        <span>'manifest'</span> <span>=</span><span>&gt;</span> <span>[</span>\n            <span>'legacy'</span> <span>=</span><span>&gt;</span> <span>'manifest-legacy.json'</span><span>,</span>\n            <span>'modern'</span> <span>=</span><span>&gt;</span> <span>'manifest.json'</span><span>,</span>\n        <span>]</span><span>,</span>\n        <span>// Public server config</span>\n        <span>'server'</span> <span>=</span><span>&gt;</span> <span>[</span>\n            <span>'manifestPath'</span> <span>=</span><span>&gt;</span> <span>'/dist/'</span><span>,</span>\n            <span>'publicPath'</span> <span>=</span><span>&gt;</span> <span>'/'</span><span>,</span>\n        <span>]</span><span>,</span>\n        <span>// webpack-dev-server config</span>\n        <span>'devServer'</span> <span>=</span><span>&gt;</span> <span>[</span>\n            <span>'manifestPath'</span> <span>=</span><span>&gt;</span> <span>'http://localhost:8080/'</span><span>,</span>\n            <span>'publicPath'</span> <span>=</span><span>&gt;</span> <span>'http://localhost:8080/'</span><span>,</span>\n        <span>]</span><span>,</span>\n        <span>// Local files config</span>\n        <span>'localFiles'</span> <span>=</span><span>&gt;</span> <span>[</span>\n            <span>'basePath'</span> <span>=</span><span>&gt;</span> <span>'@webroot/'</span><span>,</span>\n            <span>'criticalPrefix'</span> <span>=</span><span>&gt;</span> <span>'dist/criticalcss/'</span><span>,</span>\n            <span>'criticalSuffix'</span> <span>=</span><span>&gt;</span> <span>'_critical.min.css'</span><span>,</span>\n        <span>]</span><span>,</span>\n    <span>]</span><span>,</span>\n    <span>// Live (production) environment</span>\n    <span>'live'</span> <span>=</span><span>&gt;</span> <span>[</span>\n    <span>]</span><span>,</span>\n    <span>// Staging (pre-production) environment</span>\n    <span>'staging'</span> <span>=</span><span>&gt;</span> <span>[</span>\n    <span>]</span><span>,</span>\n    <span>// Local (development) environment</span>\n    <span>'local'</span> <span>=</span><span>&gt;</span> <span>[</span>\n        <span>// If `devMode` is on, use webpack-dev-server to all for HMR (hot module reloading)</span>\n        <span>'useDevServer'</span> <span>=</span><span>&gt;</span> <span>true</span><span>,</span>\n        <span>// The JavaScript entry from the manifest.json to inject on Twig error pages</span>\n        <span>'errorEntry'</span> <span>=</span><span>&gt;</span> <span>'app.js'</span><span>,</span>\n        <span>// webpack-dev-server config</span>\n        <span>'devServer'</span> <span>=</span><span>&gt;</span> <span>[</span>\n            <span>'manifestPath'</span> <span>=</span><span>&gt;</span> <span>'http://localhost:8080/'</span><span>,</span>\n            <span>'publicPath'</span> <span>=</span><span>&gt;</span> <span>'http://192.168.10.10:8080/'</span><span>,</span>\n        <span>]</span><span>,</span>\n    <span>]</span><span>,</span>\n<span>]</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;config/twigpack.php Twigpack settings</h5></aside></div></section></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development#wrapping-up\"><i></i><span>LINK</span></a></span>WRAPPING UP!</h3><p>Well, that was quite a&nbsp;deep dive! When I&nbsp;first start­ed delv­ing into web­pack, I&nbsp;soon real­ized that it’s a&nbsp;tremen­dous­ly pow­er­ful tool, with very deep func­tion­al­i­ty. How deep you go depends on how far you want to&nbsp;dive.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-deep-dive.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-deep-dive.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-deep-dive.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-deep-dive.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-deep-dive.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-deep-dive.jpg.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-deep-dive.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-deep-dive.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-deep-dive.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-deep-dive.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAABQED%2F8QAHxAAAQQCAgMAAAAAAAAAAAAAAQACAwQFNBFyIUFh%2F8QAFAEBAAAAAAAAAAAAAAAAAAAABP%2FEABgRAAIDAAAAAAAAAAAAAAAAAAABEhNh%2F9oADAMBAAIRAxEAPwAnGZ21Naa2STz6AaDyssll7UU74hMXj6ETS24uwUubUnYpdzhoapTw%2F9k%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-deep-dive.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-deep-dive.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-deep-dive.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-deep-dive.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-deep-dive.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAABQED%2F8QAHxAAAQQCAgMAAAAAAAAAAAAAAQACAwQFNBFyIUFh%2F8QAFAEBAAAAAAAAAAAAAAAAAAAABP%2FEABgRAAIDAAAAAAAAAAAAAAAAAAABEhNh%2F9oADAMBAAIRAxEAPwAnGZ21Naa2STz6AaDyssll7UU74hMXj6ETS24uwUubUnYpdzhoapTw%2F9k%3D\" alt=\"Webpack Deep Dive\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x675_crop_center-center_82_line/webpack-deep-dive.jpg 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/webpack-deep-dive.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/webpack-deep-dive.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/webpack-deep-dive.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/webpack-deep-dive.jpg 368w\"></picture></div></div></figure></div></section></div></div><div><div><p>For the com­plete source code for every­thing pre­sent­ed here, check out the&nbsp;<strong><a href=\"http://github.com/nystudio107/annotated-webpack-4-config\" target=\"_blank\" rel=\"noreferrer noopener\">anno­tat­ed-web­pack-<span>4</span>-con­fig</a></strong>&nbsp;github repo.</p><p>Hope­ful­ly this was help­ful to you, enjoy your jour­ney, and go build some­thing awesome!</p></div></div><aside><div><div><h3>FURTHER READING</h3><ul><li><a href=\"https://nystudio107.com/blog/a-gulp-workflow-for-frontend-development-automation\">A Gulp Workflow for Frontend Development Automation</a></li><li><a href=\"https://nystudio107.com/blog/image-optimization-project-results\">Post-Mortem: Applied Image Optimization</a></li><li><a href=\"https://nystudio107.com/blog/handling-errors-gracefully-in-craft-cms\">Handling Errors Gracefully in Craft CMS</a></li></ul></div></div></aside>","filePath":"pages/JavaScript/.md","_id":"JCM4VXPmawG7iIaX","dateUpdated":1541515569593}
{"date":"2019-01-30T15:47:58.640Z","title":"Little known features of JavaScript","sourceUrl":"https://blog.usejournal.com/little-known-features-of-javascript-901665291387","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"],"author":"Viral Shah","excerpt":"JavaScript is often said to be the easiest language to start with and the hardest to master. I couldn’t agree more. This is because JavaScript is a really old & a really flexible language. It is full of mysterious syntaxes and obsolete features. I’ve been working with JavaScript for years now and to date, every now and then, I still stumble upon some hidden syntax or tricks that I never knew existed.","dateCreated":1548862202812,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Wed Jan 30 2019 21:17:58 GMT+0530 (India Standard Time)'\ntitle: 'Little known features of JavaScript'\ntags: ['JavaScript']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: 'JavaScript is often said to be the easiest language to start with and the hardest to master. I couldn’t agree more. This is because JavaScript is a really old & a really flexible language. It is full of mysterious syntaxes and obsolete features. I’ve been working with JavaScript for years now and to date, every now and then, I still stumble upon some hidden syntax or tricks that I never knew existed.'\ncoverImage: ''\nsourceUrl: 'https://blog.usejournal.com/little-known-features-of-javascript-901665291387'\ntype: 'Post'\n---\n    ","htmlCode":"<section><div><div><p>I’ve tried to list down some of the lesser known features of JavaScript. While some of these features are invalid in the&nbsp;<span>strict</span>&nbsp;mode, they are still perfectly valid JavaScript code. However please note, I do not suggest that you start using all of these features. While they are definitely cool, there is a good chance you might start getting angry looks from your teammates, if you start using them.</p><p>All the source code used is available&nbsp;<a href=\"https://gist.github.com/viral-sh/98813f83f4afe9dce5a74e176f88724f\" data-href=\"https://gist.github.com/viral-sh/98813f83f4afe9dce5a74e176f88724f\" rel=\"noopener\" target=\"_blank\">here</a>. Happy Coding!</p><blockquote>Note: I am not including things like&nbsp;<span>Hoisting, Closures, Proxies, Prototypal inheritance,</span>&nbsp;<span>async-await, generators,&nbsp;</span>etc. While these features may be less understood, they are still pretty well known.</blockquote></div></div></section><section><div><hr></div><div><div><h3>Void Operator</h3><p>JavaScript has a unary&nbsp;<span>void&nbsp;</span>operator. You might have seen it used as&nbsp;<code>void(0)</code>or&nbsp;<code>void 0</code>&nbsp;. It has a single purpose in life — Evaluate the expression to its right and return&nbsp;<span>undefined</span>. Using ‘0’ is just a convention. You don’t necessarily have to use ‘0’, it can be any valid expression like&nbsp;<code>void &lt;expression&gt;</code>&nbsp;and it still returns&nbsp;<span>undefined.</span></p><figure><div><div></div><div data-image-id=\"1*xUnDmADcNEWApDU44EU3hQ.png\" data-width=\"482\" data-height=\"169\" data-scroll=\"native\"><canvas width=\"75\" height=\"26\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*xUnDmADcNEWApDU44EU3hQ.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*xUnDmADcNEWApDU44EU3hQ.png\"></div></div><figcaption>void operator</figcaption></figure><blockquote>Why create a special keyword to return&nbsp;<span>undefined</span>&nbsp;instead of just returning&nbsp;<span>undefined</span>?<br>Sounds a bit redundant, doesn’t it&nbsp;?</blockquote><blockquote><span><span>🚩 Fun Fact</span></span></blockquote><blockquote>Well, turns out, before ES5 you could actually assign a new value to the original&nbsp;<span>undefined</span>&nbsp;like<code>undefined = \"abc\"</code>&nbsp;, in most browsers.<br>Hence, defining the&nbsp;<span>undefined</span>!<br>In those days, using&nbsp;<span>void</span>&nbsp;was a way to ensure, you are always returning the original&nbsp;<span>undefined.</span></blockquote><h3>Constructor Brackets are&nbsp;optional</h3><p>Yes, the parentheses we add after class name while invoking a constructor — completely optional! 😮&nbsp;<em>(Provided that you don’t need to pass any arguments to the Constructor)</em></p><p>Both the code styles below are considered to be valid JS syntax, and will give you exact same results!</p><figure><div><div></div><div data-image-id=\"1*AIRCkc6i3wmKZGymJbnMcw.png\" data-width=\"588\" data-height=\"229\" data-scroll=\"native\"><canvas width=\"75\" height=\"28\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*AIRCkc6i3wmKZGymJbnMcw.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*AIRCkc6i3wmKZGymJbnMcw.png\"></div></div><figcaption>Constructor brackets are&nbsp;optional</figcaption></figure><h3>IIFE Brackets can be&nbsp;skipped</h3><p>The syntax for&nbsp;<span>IIFE</span>&nbsp;<em>(Immediately Invoked Functional Expression)</em>&nbsp;was always a bit odd for me.<br>What’s up will all the brackets?</p><p>Well turns out those extra brackets are needed just to tell the JavaScript parser, that the upcoming code is a&nbsp;<span><em>Functional Expression</em></span>&nbsp;and not a&nbsp;<span><em>Function</em></span><em>.&nbsp;</em>Knowing this, one can imagine, there are many ways to skip those extra brackets &amp; still make a&nbsp;<span>valid IIFE</span>.</p><figure><div><div></div><div data-image-id=\"1*ssRSdg3vw9dbXHyJjL-3UQ.png\" data-width=\"600\" data-height=\"277\" data-scroll=\"native\"><canvas width=\"75\" height=\"33\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*ssRSdg3vw9dbXHyJjL-3UQ.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*ssRSdg3vw9dbXHyJjL-3UQ.png\"></div></div><figcaption>IIFE (without&nbsp;return)</figcaption></figure><p>The&nbsp;<span>void</span>&nbsp;operator tells parser that the code is&nbsp;<em>functional expression</em>. Hence, we can skip brackets around&nbsp;<em>function</em>&nbsp;definition. And guess what? We can use any&nbsp;<span>unary</span>&nbsp;operators&nbsp;<span><em>(void, +,&nbsp;!, -, etc.)</em></span>&nbsp;and this still works!</p><p>This is so cool!</p><p>However, if you are a keen observer, you may wonder,</p><p><em>Won’t the&nbsp;</em><span><em>unary</em></span><em>&nbsp;operator affect any result returned from the&nbsp;</em><span><em>IIFE</em></span><em>&nbsp;?</em></p><p>Well, it will affect the result. But the good news is, if you care about the result and say you are storing it in some variable, then you don’t need the extra brackets in the first place.</p><p>That’s true!</p><figure><div><div></div><div data-image-id=\"1*aA6MfDN3p38PV2rXMXPB5w.png\" data-width=\"589\" data-height=\"319\" data-scroll=\"native\"><canvas width=\"75\" height=\"40\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*aA6MfDN3p38PV2rXMXPB5w.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*aA6MfDN3p38PV2rXMXPB5w.png\"></div></div><figcaption>IIFE with&nbsp;return</figcaption></figure><p>We add those brackets just for better human readability.</p><p><em>For a deeper dive on IIFE checkout this&nbsp;</em><a href=\"https://medium.com/@vvkchandra/essential-javascript-mastering-immediately-invoked-function-expressions-67791338ddc6\" data-href=\"https://medium.com/@vvkchandra/essential-javascript-mastering-immediately-invoked-function-expressions-67791338ddc6\" target=\"_blank\"><em>cool article</em></a><em>&nbsp;by&nbsp;</em><a href=\"https://medium.com/@vvkchandra\" data-href=\"https://medium.com/@vvkchandra\" data-anchor-type=\"2\" data-user-id=\"c9d1feae2937\" data-action-value=\"c9d1feae2937\" data-action=\"show-user-card\" data-action-type=\"hover\" target=\"_blank\"><em>Chandra Gundamaraju</em></a></p><h3>With Statement</h3><p>Did you know, JavaScript has a&nbsp;<span>with&nbsp;</span>statement<span>&nbsp;</span>block?&nbsp;<span>with</span>&nbsp;is actually a keyword in JS. The syntax to write a&nbsp;<span>with</span>&nbsp;block is as follows</p><pre>with (object)<br>   statement </pre><pre>// for multiple statements add a block</pre><pre>with (object) {<br>   statement<br>   statement<br>   ...<br>}</pre><p><span>with</span>&nbsp;adds all the properties of the “<em>object</em>” passed, in the scope chain used for evaluating the statements.</p><figure><div><div></div><div data-image-id=\"1*HgvRk6frw2rhJFs4OwvhaA.png\" data-width=\"711\" data-height=\"269\" data-action=\"zoom\" data-action-value=\"1*HgvRk6frw2rhJFs4OwvhaA.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"27\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*HgvRk6frw2rhJFs4OwvhaA.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*HgvRk6frw2rhJFs4OwvhaA.png\"></div></div><figcaption>with block&nbsp;example</figcaption></figure><blockquote><span><span>🚩 Fun Fact</span></span></blockquote><blockquote><span>With</span>&nbsp;block sounds pretty cool, right? It’s even better than&nbsp;<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Object_destructuring\" data-href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Object_destructuring\" rel=\"noopener\" target=\"_blank\"><span>object destructuring</span></a><span>.<br></span>Well, not really.<span><br></span>The use of the&nbsp;<span>with</span>&nbsp;statement is generally discouraged, as it was deprecated. It is completely forbidden in strict mode. Turns out,&nbsp;<span>with</span>&nbsp;blocks adds some performance and security problems in the language. Bummer!</blockquote><h3><span>The Function constructor</span></h3><p>The&nbsp;<em>function</em>&nbsp;statement is not the only way to define a new function; you can define your function dynamically using&nbsp;<span>Function()</span>&nbsp;constructor along with the&nbsp;<span>new</span>&nbsp;operator.</p><figure><div><div></div><div data-image-id=\"1*q1yZNwt04aGew-ApvhZH0Q.png\" data-width=\"699\" data-height=\"102\" data-scroll=\"native\"><canvas width=\"75\" height=\"10\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*q1yZNwt04aGew-ApvhZH0Q.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*q1yZNwt04aGew-ApvhZH0Q.png\"></div></div><figcaption>Dynamic function with Function constructor</figcaption></figure><p>The last constructor param is the stringified code of the function and other parameters before that are the function arguments.</p><blockquote><span><span>🚩 Fun Fact</span></span></blockquote><blockquote><span>Function</span>&nbsp;constructor is the mother of all constructors in JavaScript. Even&nbsp;<span>Object’</span>s constructor is&nbsp;<span>Function&nbsp;</span>constructor. And&nbsp;<span>Function</span>’s own constructor is also&nbsp;<span>Function</span>&nbsp;itself. Hence, calling<code>object.constructor.constructor...</code>&nbsp;enough times will eventually return the&nbsp;<span>Function</span>&nbsp;constructor on any object in JavaScript.</blockquote><h3>Function Properties</h3><p>We all know Functions are first class objects in JavaScript. Hence, no one is stopping us from adding custom properties to a Function. It is perfectly valid JS thing to do. Yet, it is rarely used.</p><p>So when would we want to do this?</p><p>Well, there are a few good use cases for this. For example,</p><p><span>Configurable Functions</span></p><p>Let’s say we have a function called&nbsp;<em>greet</em>. We want our function to print a different greeting message based on different locales. This locale should also be configurable. We can maintain a global locale variable somewhere or we can implement the function using functional properties as shown below</p><figure><div><div></div><div data-image-id=\"1*HDgt3t2DGfXeFbblbTXkXw.png\" data-width=\"642\" data-height=\"372\" data-scroll=\"native\"><canvas width=\"75\" height=\"42\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*HDgt3t2DGfXeFbblbTXkXw.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*HDgt3t2DGfXeFbblbTXkXw.png\"></div></div><figcaption>greet function with locale&nbsp;property</figcaption></figure><p><span>Function with Static Variables</span></p><p>Another similar example. Let’s say, you want to implement a&nbsp;<em>Number Generator</em>&nbsp;that generates a sequence of ordered numbers. Normally, you’ll use&nbsp;<span>Class</span>&nbsp;or&nbsp;<span>IIFE</span>&nbsp;with a static counter variable to keep track of last value. This way we restrict access to the counter and also avoid polluting the global space with extra variables.</p><p>But what if we want the flexibility to read or even modify the counter &amp; yet not pollute the global space?</p><p>Well we could still create a Class, with a counter variable and some extra methods to read it; or we can be lazy and just use properties on a function.</p><figure><div><div></div><div data-image-id=\"1*kYy14RroTEJrn6eK8X1j9A.png\" data-width=\"659\" data-height=\"441\" data-scroll=\"native\"><canvas width=\"75\" height=\"50\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*kYy14RroTEJrn6eK8X1j9A.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*kYy14RroTEJrn6eK8X1j9A.png\"></div></div><figcaption>generateNumber function with counter&nbsp;property</figcaption></figure></div></div></section><section><div><hr></div><div><div><p><em>Phew!! This is a long list &amp; we are just about halfway there. If you wanna take a break, now will be a good time. If not, you are a brave warrior &amp; I salute you.</em></p><p><em>Let’s continue!</em></p></div></div></section><section><div><hr></div><div><div><h3>Arguments Properties</h3><p>I’m sure most of you are aware of&nbsp;<code>arguments</code>&nbsp;object inside a function. It’s an array like object available inside all the functions. It has the list of arguments passed to the function while it was invoked. But it also has some other interesting properties on it,</p><ul><li><span>arguments.callee</span>: Refers to the function currently invoked</li><li><span>arguments.callee.caller</span>: Refers to the function that has invoked the current function</li></ul><figure><div><div></div><div data-image-id=\"1*GolCj2Pgr2Hp-EumhLvPpw.png\" data-width=\"764\" data-height=\"294\" data-action=\"zoom\" data-action-value=\"1*GolCj2Pgr2Hp-EumhLvPpw.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"28\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*GolCj2Pgr2Hp-EumhLvPpw.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*GolCj2Pgr2Hp-EumhLvPpw.png\"></div></div><figcaption>callee &amp;&nbsp;caller</figcaption></figure><blockquote>Note: While the ES5 forbids the use of&nbsp;<code>callee</code>&nbsp;&amp;&nbsp;<code>caller</code>&nbsp;in&nbsp;<span>strict</span>&nbsp;mode, it is still commonly found in many compiled libraries. So, it is worth learning them.</blockquote><h3>Tagged Template&nbsp;Literals</h3><p>Unless you’ve been living under a rock, you would have heard about the&nbsp;<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals\" data-href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals\" rel=\"noopener\" target=\"_blank\"><em>Template literals</em></a>. Template literals are one of the many cool additions by ES6. However, do you know about&nbsp;<span><em>Tagged&nbsp;</em></span><em>Template literals</em>?</p><figure><div><div></div><div data-image-id=\"1*d13JMz4wRyf2MmOh6-9XkQ.png\" data-width=\"608\" data-height=\"131\" data-scroll=\"native\"><canvas width=\"75\" height=\"15\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*d13JMz4wRyf2MmOh6-9XkQ.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*d13JMz4wRyf2MmOh6-9XkQ.png\"></div></div><figcaption>Template literals</figcaption></figure><p><em>Tagged Template literals</em>&nbsp;allow you to have more control over parsing the template literals to a string, by adding a custom tag to the template literals. Tag is simply a parser function which gets array of all the strings and values interpreted by the string template. The tag function is expected to return the final string.</p><p>In following example, our custom tag — <em>highlight,&nbsp;</em>interprets the values for template literal and also wraps the interpreted values in the result string with a &lt;mark&gt; element, for highlighting.</p><figure><div><div></div><div data-image-id=\"1*JsMvFe7D8XajNYHwzlvpCw.png\" data-width=\"710\" data-height=\"444\" data-action=\"zoom\" data-action-value=\"1*JsMvFe7D8XajNYHwzlvpCw.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"46\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*JsMvFe7D8XajNYHwzlvpCw.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*JsMvFe7D8XajNYHwzlvpCw.png\"></div></div><figcaption>highlight tagged template&nbsp;literal</figcaption></figure><blockquote>Many libraries have found interesting use cases to leverage this feature. Following are some cool examples,</blockquote><blockquote>•<span>&nbsp;</span><a href=\"https://github.com/styled-components/styled-components\" data-href=\"https://github.com/styled-components/styled-components\" rel=\"noopener\" target=\"_blank\"><span>styled-components</span></a>&nbsp;for React<br>•<span><span>&nbsp;</span></span><a href=\"https://github.com/skolmer/es2015-i18n-tag\" data-href=\"https://github.com/skolmer/es2015-i18n-tag\" rel=\"noopener\" target=\"_blank\"><span>es2015-i18n-tag</span></a>&nbsp;for translation &amp; internationalization<br>•<span><span>&nbsp;</span></span><a href=\"https://github.com/chalk/chalk\" data-href=\"https://github.com/chalk/chalk\" rel=\"noopener\" target=\"_blank\"><span>chalk</span></a><span>&nbsp;</span>for colorful logs</blockquote><h3>Getters &amp;&nbsp;Setters</h3><p>For the most parts, JavaScript Objects are simple. Let’s say if we have a&nbsp;<code>user</code>object and we try to access&nbsp;<em>age</em>&nbsp;property on it using&nbsp;<code>user.age</code>&nbsp;we get the value of age property if its defined or we get&nbsp;<span>undefined</span>&nbsp;if it’s not. Simple.</p><p>But, it doesn’t have to be this simple. JavaScript Objects have the concept of&nbsp;<span>Getters</span>&nbsp;and&nbsp;<span>Setters</span>. Instead of directly returning the value on object we can write our custom&nbsp;<span>Getter</span>&nbsp;function to return whatever we want. Same thing about setting a value.</p><p>This allows us to have powerful concepts like&nbsp;<span><em>virtual fields, field validations, side-effects</em></span><em>&nbsp;</em>while getting or setting a field</p><figure><div><div></div><div data-image-id=\"1*2QkpXM8hkTIRtsUJPD5AEA.png\" data-width=\"644\" data-height=\"602\" data-scroll=\"native\"><canvas width=\"75\" height=\"70\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*2QkpXM8hkTIRtsUJPD5AEA.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*2QkpXM8hkTIRtsUJPD5AEA.png\"></div></div><figcaption>ES5 Getters &amp;&nbsp;Setters</figcaption></figure><p>Getters &amp; Setters are not new addition by ES5; they have always been there. ES5 simply adds a convenient syntax to an existing feature. To learn more about Getters &amp; Setters refer this&nbsp;<a href=\"https://www.hongkiat.com/blog/getters-setters-javascript/\" data-href=\"https://www.hongkiat.com/blog/getters-setters-javascript/\" rel=\"noopener\" target=\"_blank\">nice article</a></p><blockquote><a href=\"https://github.com/Marak/colors.js\" data-href=\"https://github.com/Marak/colors.js\" rel=\"noopener\" target=\"_blank\"><span><span>Colors</span></span></a><span>, a popular node.js library, is a cool example of leveraging&nbsp;</span><span><span>Getters.</span></span></blockquote><blockquote>The library&nbsp;<a href=\"https://github.com/Marak/colors.js/blob/master/lib/extendStringPrototype.js\" data-href=\"https://github.com/Marak/colors.js/blob/master/lib/extendStringPrototype.js\" rel=\"noopener\" target=\"_blank\">extends&nbsp;<span>String</span>&nbsp;class</a>&nbsp;and adds a bunch of Getter methods on it. This allows us to convert any string to its colored version for easy logging, by simply&nbsp;<a href=\"https://github.com/Marak/colors.js#usage\" data-href=\"https://github.com/Marak/colors.js#usage\" rel=\"noopener\" target=\"_blank\">accessing properties</a>&nbsp;on it.</blockquote><h3><span>Comma operator</span></h3><p>JavaScript has a comma operator. It allows us to write multiple expressions separated by comma in a single line and return the result of last expression</p><pre>// syntax<br>let result = expression1, expression2,... expressionN</pre><p>Here, all the expressions will get evaluated and the&nbsp;<em>result</em>&nbsp;variable will be assigned the value returned by&nbsp;<em>expressionN.</em></p><p>You might have already used&nbsp;<span>Comma</span>&nbsp;operator in a for loop</p><pre><span>for</span> (<span>var</span> a = 0<span>,</span> b = 10<span>;</span> a &lt;= 10; a++<span>,</span> b--)</pre><p>Sometimes it helps when writing multiple statements in a single line</p><pre><span>function</span> getNextValue() {<br>    <span>return</span> counter++<span>, </span>console.log(counter)<span>,</span> counter<br>}</pre><p>or writing short lamda functions</p><pre><span>const</span> getSquare = x =&gt; (console.log (x), x * x)</pre><h3><span>+ Plus&nbsp;Operator</span></h3><p>Ever wanted to quickly convert a string to a number?</p><p>Just prefix the string with&nbsp;<span>+&nbsp;</span>operator.<br>Plus operator also works for&nbsp;<em>negative, octal, hexadecimal, exponential</em>&nbsp;values. What’s more, it even converts a&nbsp;<em>Date</em>&nbsp;or&nbsp;<em>Moment.js</em>&nbsp;object to the timestamp!</p><figure><div><div></div><div data-image-id=\"1*9dbCIwXa7Kpj6xhbHHXl-g.png\" data-width=\"612\" data-height=\"294\" data-scroll=\"native\"><canvas width=\"75\" height=\"35\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*9dbCIwXa7Kpj6xhbHHXl-g.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*9dbCIwXa7Kpj6xhbHHXl-g.png\"></div></div><figcaption>Plus operator</figcaption></figure><h3><span>!! Bang Bang&nbsp;Operator</span></h3><p>Okay, technically its not a separate JavaScript operator. It’s just the JavaScript negation operator used twice.</p><p>But&nbsp;<span><em>Bang Bang</em></span>&nbsp;sounds so cool!&nbsp;<em>Bang Bang&nbsp;</em>or<em>&nbsp;Double Bang&nbsp;</em>is a neat trick to convert any expression to a&nbsp;<em>Boolean</em>&nbsp;value.</p><p>If the expression is a&nbsp;<em>truthy</em>&nbsp;value, it return&nbsp;<span>true</span>; otherwise it returns&nbsp;<span>false</span><em>.</em></p><figure><div><div></div><div data-image-id=\"1*2ZqHFHfJvdKQpO4UnwxBIg.png\" data-width=\"574\" data-height=\"295\" data-scroll=\"native\"><canvas width=\"75\" height=\"37\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*2ZqHFHfJvdKQpO4UnwxBIg.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*2ZqHFHfJvdKQpO4UnwxBIg.png\"></div></div><figcaption>Bang Bang&nbsp;operator</figcaption></figure><h3><span>~ Tilde&nbsp;Operator</span></h3><p>Let’s face it — Nobody cares about the Bitwise operators.<br>When are we ever gonna use it!</p><p>Well, there is an everyday use case for the&nbsp;<span>Tilde</span>&nbsp;or&nbsp;<span>Bitwise NOT&nbsp;</span>operator.</p><p>Turns out when used with a number, the&nbsp;<span>Tilde&nbsp;</span>operator effective does<br><code>~N =&gt; -(N+1)</code>&nbsp;. This expression evaluates to “0” only when&nbsp;<code>N == -1</code></p><p>We can leverage this by putting ~ in front of the<code>indexOf(...)</code>&nbsp;function to do a boolean check if an item exists in a String or an Array.</p><figure><div><div></div><div data-image-id=\"1*lcfle5Zpfl2wU_rRsfDi4Q.png\" data-width=\"639\" data-height=\"196\" data-scroll=\"native\"><canvas width=\"75\" height=\"22\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*lcfle5Zpfl2wU_rRsfDi4Q.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*lcfle5Zpfl2wU_rRsfDi4Q.png\"></div></div><figcaption>indexOf with Tilde&nbsp;operator</figcaption></figure><blockquote>Note: ES6 &amp; ES7 added a new&nbsp;<code>.includes()</code>&nbsp;method in String &amp; Array, respectively. Definitely, it’s a more cleaner way than tilde operator to check if an item exists in an Array or a String.</blockquote><h3>Labelled statements</h3><p>JavaScript has the concept of&nbsp;<code>label</code>&nbsp;statements. It allows us to name loops and blocks in JavaScript. We can then use these labels to refer back to the code later while using&nbsp;<code>break</code>&nbsp;or&nbsp;<code>continue</code>&nbsp;.</p><p>Labelled statements are particularly handy in nested loops. But we can also use them to simply organize code into blocks or create a breakable block</p><figure><div><div></div><div data-image-id=\"1*Fciyb5lUXJoqWxVWQoRHtw.png\" data-width=\"666\" data-height=\"520\" data-scroll=\"native\"><canvas width=\"75\" height=\"57\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*Fciyb5lUXJoqWxVWQoRHtw.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*Fciyb5lUXJoqWxVWQoRHtw.png\"></div></div><figcaption>labelled statements</figcaption></figure><blockquote>Note: Unlike some other languages, JavaScript doesn’t have&nbsp;<span>goto</span>&nbsp;construct. Hence, we can only use labels with&nbsp;<span>break</span>&nbsp;and&nbsp;<span>continue.</span></blockquote></div></div></section><section><div><hr></div><div><div><p><em>If you know any more of such JavaScript quirks or have found interesting use-cases to leverage these features, please share your experiences below. I would love to hear about it!</em></p><p><em>I ❤️ JavaScript &amp; enjoy writing articles about it. But they do take a lot of time &amp; effort. If you have enjoyed this article please share &amp; recommend it.</em></p><p><em>Happy Coding!</em></p></div></div></section>","filePath":"pages/JavaScript/.md","_id":"JOgFjLwTY7gpI2MD"}
{"date":"2019-04-03T15:10:01.425Z","title":"9 Quick JavaScript Tips to Improve Your Code Pt2","sourceUrl":"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"," Tips and Tricks"],"author":"","excerpt":"","dateCreated":1554304151086,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Wed Apr 03 2019 20:40:01 GMT+0530 (India Standard Time)'\ntitle: '9 Quick JavaScript Tips to Improve Your Code Pt2'\ntags: ['JavaScript','Tips and Tricks']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/'\ntype: 'Post'\n---\n    ","htmlCode":"<div><p>Table of Contents <span>[<a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#\">hide</a>]</span></p><ul><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#no6-start-using-let-and-const\">No.6: Start using let and const</a><ul><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#the-problems-with-var-and-scope\">The problem(s) with var and scope</a></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#another-problem-with-var-and-hoisting\">Another problem with var and hoisting</a></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#understanding-how-hoisting-works\">Understanding how hoisting works</a></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#introducing-es6-let-and-const\">Introducing ES6, let and const</a></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#when-to-use-let-const-or-var\">When to use let, const or var</a></li></ul></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#no7-use-style-guide\">No.7: Use style guide</a><ul><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#create-it-or-adopt-it\">Create it or adopt it</a></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#style-guides-experience-and-customization\">Style guides, experience and customization</a></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#should-you-stick-to-style-guide-or-not\">Should you stick to style guide or not</a></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#style-guides-and-teams\">Style guides and teams</a></li></ul></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#no8-put-scripts-into-external-files\">No.8: Put scripts into external files</a><ul><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#the-advantage-of-cdn\">The advantage of CDN</a></li></ul></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#no9-measure-performance-of-javascript-blocks\">No.9: Measure performance of JavaScript blocks</a><ul><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#two-methods-to-measure-performance\">Two methods to measure performance</a></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#another-way-to-measure-performance\">Another way to measure performance</a></li></ul></li><li><a href=\"https://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt2/#closing-thoughts-on-javascript-tips\">Closing thoughts on JavaScript tips</a></li></ul></div><p>Do you want to know some cool JavaScript tips, tricks and gems? Then,\n you are on the right place! In this second part of JavaScript tips, you\n will get what do you want. For example, you will learn about two gems \nfrom ES6. You will also learn why <i>var</i> keyword can be sometimes \ndangerous. Then, we will discuss style guides, their benefits and how to\n implement them. After that, we will talk a bit about JavaScript in \nexternal files and also about using CDNs. Lastly, you will learn about \ntwo ways to measure performance of you JavaScript code. Without further \nado, let’s begin.<span></span><br>\n</p><p>No.1-6 are in <a href=\"http://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/\" rel=\"noopener\">part 1</a>.</p><h2><span>No.6: Start using let and const</span></h2><p>Let’s start this second part of JavaScript tips with changing one of \nthe fundamental practices. Unless you started coding in JavaScript \nrecently, you have been probably using <i>var </i>keyword. This was, and\n probably is, the usual way you declared new variables in JavaScript. \nWith the introduction of ES6, it is maybe a good time to change this \npractice. ES6 introduced a lot of new things that expanded syntax of \nJavaScript. With this, ES6 also introduced some new practices.</p><h3><span>The problem(s) with <i>var</i> and scope</span></h3><p>Until now, we could declare new variables only with <i>var</i> keyword. Sure, you could omit the <i>var</i> keyword if you want. The only problem is that it would result on variable declared in <a href=\"https://msdn.microsoft.com/en-us/library/bzt2dkta(v=vs.94).aspx\" target=\"_blank\" rel=\"noopener\">global scope</a>. If you are declaring variable in global scope, then there is no difference. Declaring new variables using <i>var</i> keyword has a couple of downsides. I already mentioned the first problem with using <i>var</i>\n keyword. When you declare variable with var, it is either in function \nor global scope. It depends on whether you declare it inside or outside \nany function.</p><p>Example:</p><pre><code>// Variable defined in global scope\nvar exampleOne = ‘Donald’;\n\nfunction variableFactory() {\n  // Variable declared in local scope\n  // of the function\n  var exampleTwo = ‘Duck’;\n\n  console.log(‘Before the loop: ‘ + i); // ‘undefined’\n\n  for (var i = 0, j = 10; i&lt; j; i++) {\n    // do something\n  }\n\n  console.log(‘After the loop: ‘ + i); // 10\n}\n\nvariableFactory();\n\nconsole.log(exampleOne);// ‘Donald’\n\nconsole.log(exampleTwo); // ReferenceError: exampleTwo is not defined</code></pre><p>As you can see on the example above, variables declared with <i>var</i>\n keyword work quite well. Yet, there are some situations when this is no\n longer the truth. In these cases, variables you declared with <i>var</i>\n keyword will not work as you might want. Take a look at the example \nabove and try to find two lines showing a bit weird behavior. Okay, it \nis right before and right after the <i>for</i> loop. In both cases, the variable <i>i</i> exists outside the scope of the loop and it is visible.</p><h3><span>Another problem with <i>var</i> and hoisting</span></h3><p>The second problem with declaring variables using <i>var</i> keyword \nis something called hoisting. This basically means that you can declare \nnew variable after you use it. In other words, yes variable can be used \nbefore you even declared it. You could already see this behavior in \naction in the previous example. If you have no idea what am I talking \nabout, look for a clue at the line before the for loop. Okay, let’s take\n a look at this part of the previous code example.</p><p>Example:</p><pre><code>function variableFactory() {\n  console.log(‘Before the loop: ‘ + i); // ‘Undefined’ –this is where hoisting happens\n\n  for (var i = 0, j = 10; i&lt; j; i++) {\n    // do something\n  }\n}</code></pre><p>Example:</p><pre><code>// Let’s try to log non-existing variable\nconsole.log(testVariable); // ‘Undefined’\n\n// And then let’s create it\nvar testVariable = 'Surprise!';\n\nconsole.log(shadyVariable); // ‘Surprise!’</code></pre><p>If you try to log the variable <i>i</i> you will get a simple message\n – “undefined”. The problem is that you should get something like \n“ReferenceError: i is not defined”. That would mean that variable <i>i</i> does not exist. This is something we discussed in the <a href=\"http://blog.alexdevero.com/9-quick-javascript-tips-improve-code-pt1/\" target=\"_blank\" rel=\"noopener\">first part</a> of JavaScript tips. If some variable is <i>undefined</i>,\n it doesn’t necessarily mean it doesn’t exist. This has two meanings. \nFirst, you haven’t declared the variable yet. In other words, it doesn’t\n exist. Second, the variable has been declared, but at this moment it \nhas no value. How can some variable exist if we didn’t declare it?</p><h3><span>Understanding how hoisting works</span></h3><p>In order to answer this question, we have to make a detour from these\n JavaScript tips. I will have to tell you something about hoisting. It \nmay seem like just another glitch of JavaScript. The reality is that \nthis is default behavior of JavaScript. It means that it will move all \ndeclarations in the code to the top of the current scope. If you declare\n some variable inside function, JavaScript will move that variable on \ntop of the function body. Let’s apply this theory on previous snippet.</p><p>Example:</p><pre><code>function variableFactory() {\n  var i; // declare i without value\n\n  console.log(‘Before the loop: ‘ + i); // ‘Undefined’ - this is where hoisting happens\n\n  // Assign new value to i\n  for (i = 0, j = 10; i&lt; j; i++) {\n    // do something\n  }\n}</code></pre><p>Example:</p><pre><code>// JavaScript will declare empty testVariable\nvar testVariable;\n\n// Let’s try to log non-existing variable\nconsole.log(testVariable);\n\n// JavaScript will assign new value to testVariable\ntestVariable = 'Surprise!';\n\nconsole.log(shadyVariable); // Surprise!</code></pre><p>If you didn’t know about hoisting, don’t worry. This is one of those \nshadow areas developers are not talking about as often. In a fact, many \ndevelopers don’t know about it as well. I learned about it just \nrecently. The problem is that when you don’t know about or understand \nhoisting, it can cause you some troubles. Due to hoisting, your code may\n not work as you think it would.</p><p>Fortunately, there is quite simple way to avoid any bugs related to \nhoisting. Make sure to declare all your variables at the beginning. This\n is one of the things that <a href=\"http://coffeescript.org/\" target=\"_blank\" rel=\"noopener\">CoffeeScript</a>&nbsp;does\n automatically. However, this is about JavaScript tips, right? If you \nuse ‘use strict’ directive, JavaScript will not allow you to use any \nvariable before you declare it.</p><h3><span>Introducing ES6, let and const</span></h3><p>Let’s now switch our focus on ES6. When you write your JavaScript \ncode in ES6 syntax, you can use two new ways to declare variables. You \ncan use either <i>let</i> or <i>const</i> keywords, or the good old <i>var</i>. Let’s talk about the <i>const </i>keyword first. Any variable you declare using <i>const</i> is read-only. This means that once you declare the variable, you can’t overwrite its value. Try it, you will get an error.</p><p>Example:</p><pre><code>const x = 3;\n\nconsole.log(x); // 3\n\nx = 4; // TypeError: Assignment to constant variable.</code></pre><p>Let’s now take a look at the second newcomer that is <i>let</i> keyword. What is the difference between <i>let</i> and <i>var</i>? The difference is in the scope. When you declare variable with <i>let</i>,\n you declare it in block scope. This means that your variable will exist\n only in the scope of current block of code. For example, if you declare\n some variable with <i>let</i> in global scope it will exist in global \nscope. This variable will be visible everywhere. If you declare the same\n variable again with <i>let</i>, but in some function, it will be visible only in that function. The same is also true for loops.</p><p>Example:</p><pre><code>let globalVariable = ‘Variable in global scope.’;\n\nfunction scopeChanger() {\n  console.log(globalVariable); // ‘Variable in global scope.’\n\n  let localVariable = ‘Variable in block scope.’; // ‘Variable in block scope.’\n\n  console.log(localVariable); // ‘Variable in global scope.’\n\n  for (let i = 0, j = 5; i&lt;j; i++) {\n    // do something\n  }\n\n  console.log(i); // ReferenceError: i is not defined\n}\n\nscopeChanger();\n\nconsole.log(globalVariable); // ‘Variable in global scope.’\n\nconsole.log(localVariable); // ReferenceError: localVariable is not defined</code></pre><h3><span>When to use <i>let</i>, <i>const</i> or <i>var</i></span></h3><p>As you can see on the example above, <i>let</i> is really not visible outside the scope it was defined at. This is why you will get an error when you try to access <i>i </i>variable outside the <i>for</i>\n loop. To close this item on our JavaScript tips list let’s talk about \nwhen to use what. I think that the best way to decide is by asking \nyourself this simple question. Will I need to reassign this variable? If\n your answer is clear “No”, than would suggest that you use <i>const</i>. This will make it clear that this value shouldn’t be changed in the future. Well, with <i>const</i> it will not be.</p><p>On the other hand, what if your answer is “Yes”? Then, I would suggest that you use <i>let</i>. At this moment, I write the majority of JavaScript in ES6 and I don’t use <i>var</i>. Now, any time I want to use <i>var</i> to declare new variable I will use <i>let</i> instead. So, as a rule of thumb, use <i>const</i> for variables that shouldn’t be reassigned and <i>let</i> for variables that may be. And, what about <i>var</i>?\n Well, slowly stop using it. If you are writing JavaScript in ES6, as \nyou should, don’t use it. If you are not, take this list of JavaScript \ntips to heart and start today.</p><h2><span>No.7: Use style guide</span></h2><p>Let’s now take this article about JavaScript tips on more theoretical\n level. It is time to talk about style of your code. What I want to \nsuggest is that you create and start using style guide. Why? When you \nuse styles guides, you can document your coding conventions. Your style \nguide can contain topics such as code indentation, spacing and linting. \nYou can also document conventions for variable and file names. We should\n also not forget documenting proper use of comments, semicolons and \ndeclaring variables.</p><p>This all may seem like a lot of unnecessary work. What are some \nbenefits of doing all that? There are two main benefits in using a style\n guide. First, your code will be easier to read. Style guide will force \nyou to use consistent style. This will result in much better readability\n of your code. In other words, style guide will provide you with \nguidelines for writing clearer code. Second, when you create naming \nconventions naming files and variables will get easier.</p><p>As a result, you will have to think about and make smaller number of \nchoices. This will allow you to focus on what is more important. You \nwill be able to concentrate your mental capacities on code’s logic or \ndesign. I know, this is article about JavaScript tips. However, you can \ncreate a style guide for yourself also if you are a designer. For \nexample, you can create naming conventions for layers in Photoshop or \nSketch. You can do the same for your project files, folders and \nmoodboards.</p><h3><span>Create it or adopt it</span></h3><p>Let’s say you like this idea about style guides. The question is, is \nit better to create your own or adopt some already existing one? In the \nbeginning, I think that it is better to adopt existing style guide. \nThere are a lot of topics style guide has to cover. You also have to \nfollow all conventions defined there. If you break some convention here \nand there, the style guide will lose its meaning. Adopting a style guide\n will also help you avoid one common problem. This problem is your inner\n chatter. These are your thoughts based on your opinions and preferences\n about the what’s best.</p><p>One think to keep in mind is that developing style guide will take a \nlot of time. You may not have the necessary amount of time at this \nmoment. Also, you may not know where to start. For all these reasons I \nwould suggest that you start by looking at some well-known companies and\n projects. For example, there is a style guide developed by <a href=\"https://google.github.io/styleguide/javascriptguide.xml\" target=\"_blank\" rel=\"noopener\">Google</a>. You can also try out style guide created by <a href=\"https://github.com/airbnb/javascript\" target=\"_blank\" rel=\"noopener\">Airbnb</a>. Let’s also don’t forget about JavaScript style guide used by <a href=\"https://contribute.jquery.org/style-guide/js/\" target=\"_blank\" rel=\"noopener\">jQuery</a>&nbsp;and <a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Coding_Style\" target=\"_blank\" rel=\"noopener\">MDN</a>. As you can see, there is plenty of examples. Either adopt one or use them as inspiration for your own.</p><h3><span>Style guides, experience and customization</span></h3><p>Let’s assume you decided to adopt some existing style guide. You also\n found one style guide you like. Yet, there are some parts you just \ncan’t stand. There are three possible options you can choose from. \nFirst, you can swallow that bitter pill and follow the style guide. \nSecond, you can customize the style guide to suit your preferences and \nopinions. Third, you can drop that style guide completely and choose \ndifferent one. Which options is better?</p><p>Let me ask you a couple of questions. How much do you dislike that \nconvention? Can you get over it? How many experiences do you have? How \nimportant is the convention? There will be some conventions you can get \nover without any effort. Also, not all conventions are equally \nimportant. Some conventions are purely for better readability and has no\n effect on performance. Others, will may have the opposite effect. These\n conventions can have significant effect on performance. Yet, they may \nhave close to zero effect on code readability.</p><p>Anyway, I think that the most important question is the one focused \non your experience. Let’s say that you know that some guideline may not \nbe the best option. Let’s say that you know about something better. \nThen, I would suggest that you follow your intuition and experience. \nChances are that your expertise is deep enough. I think you can manage \ncustomizing the style guide to your personal tastes. If your expertise \nis shallow, I would suggest that you follow the style guide.</p><p>Style guides are usually created by skilled professionals with best \npractices in mind. If you don’t have sufficient knowledge or experience \nyou should at least try to follow it for a period of time. Or, discuss \nyour opinions with someone more experienced than yourself. See, if you \nare right.</p><h3><span>Should you stick to style guide or not</span></h3><p>Like best practices and quality JavaScript tips, style guides should \nbe followed consistently. This is, in the end, why you want to use a \nstyle guide. You want to spend less time thinking about less productive \ntopics. Your client will probably doesn’t care about what indentation do\n you use. She will also probably doesn’t care about what kind of quotes \ndo you use. In the majority of cases, she will not even notice these \nsubtle details. I don’t want to hurt your feelings, but this is the \ntruth.</p><p>However, your client will notice if the work takes longer than it \nshould. What do I mean? She will notice if you miss a couple of \ndeadlines because you can’t decide on what type of quotes to use. And, \nshe will not be happy to pay you more to cover this “thinking” time. For\n this reason, and couple others, choose one style guide and stick to it.\n Do the same if you decide to create your own. Specify all conventions, \nwrite them down and follow them meticulously.</p><p>What if you realize that some convention is not working as it should?\n What if you find something better? Then, you will have to decide. Don’t\n get me wrong, but there is no excuse for using one coding style here \nand another one there. Let’s say that you found some HTML, CSS, Sass or \nJavaScript tips related to coding style you like. Then, experiment with \nthem outside your normal work. If you find these HTML, CSS, Sass or \nJavaScript tips useful, update your style guide. If you don’t want to \nimplement these tips, don’t use them. Instead, stick to your own style \nguide.</p><h3><span>Style guides and teams</span></h3><p>There is one last topic we should discuss to before we move to \nanother item on our list of JavaScript tips. What if you are working in \nteam? First, when you work with more people, style guide will be even \nmore useful. In a team, the importance of creating consistent and \nmaintainable code is much higher. It can be also much harder to achieve.\n The more people are in the team the more diverse the coding style will \nbe. You have to find compromise between different opinions.</p><p>Otherwise, the danger is that some members of your team may decide to\n ignore the style guide. Then, the style guide will lose any meaning. \nThe truth is what styling conventions you choose doesn’t matter very \nmuch. What does matter is that everyone follows these conventions \nconsistently. That’s why it is so important to discuss every angle of \nthe style guide with all members of your team. You need to listen to all\n their opinions and ideas.</p><p>When you decide to implement a style guide, get everyone in one room \nand give everyone enough space to speak. Sometimes, it can be useful to \nlet everyone write down his ideas first. This may help you get even the \nmost shy people talking. When you allow them share their ideas \nanonymously will help reduce their anxiety. Otherwise, you may not get \nthese people to voice their ideas and opinions. When you get all ideas, \nit’s important to ask a lot of “why” questions.</p><p>You shouldn’t accept or agree on any convention just because there is\n no other option. Instead, dig deep and find why implementing this \nconvention is a good idea. If you adopt some style guide, do the same. \nQuestion all conventions and make sure everyone is on board. If not, \nchange that convention.</p><h2><span>No.8: Put scripts into external files</span></h2><p>The last but not least of the JavaScript tips on the list is about \nputting scripts into external files. There are at least two reasons for \ndoing this. First, when you put all scripts into one file, it will make \nyour JavaScript more manageable. When you will need to change something,\n you will know where to look. The only thing you will need is to find \nthe right line. It is simple as that. The second reason to put scripts \ninto external files is to take advantage of caching.</p><p>Let’s say that you have some scripts written in HTML code. Then, \nbrowser will load these scripts every time user will change the page or \nrefresh it. This is something that is not necessarily. On the other \nhand, what will happen when you put the scripts into external files? \nBrowser will download these files and store them in the cache. This is \nsomething like browser’s local storage. In this storage, your browser \nkeeps specific informations and objects downloaded from the Internet. If\n your browser download these files, it will not download them again.</p><p>The exception is when these files are deleted or they expired. The \nresult is that the website needs less time to load – it has to load \nfewer resources. For example, let’s say you are using the latest version\n of jQuery on your website provided by some CDN. When someone visits \nyour website and her browser has jQuery in cache, it will not download \nit again from your website. This is also one of the reasons why using \nCDNs may be a good idea.</p><h3><span>The advantage of CDN</span></h3><p>When I think about it, this could be another item on this list of \nJavaScript tips. Aside from pre-caching files such as stylesheets and \nscripts, what else can CDNs do for you? When you use CDN to serve some \nof your content you reduce the number of requests on our server. This \nmay not look like a big deal, but it can be. Browsers limit the number \nof concurrent connections to a single domain. This number of active \nconnections is usually somewhere around four. Every connection stands \nfor downloading one file from your server.</p><p>What this means in plain English? Browsers will download up to four \nfiles at the same time. If your website requires more than four files, \nthe rest will be blocked. Browser will download the fifth file only when\n one of the previous files has been fully retrieved. What will happen if\n you “outsource” some of this content to CDN? Browsers limit the number \nof connections per domain. However, files on CDN are hosted on a \ndifferent domain. As a result, one CDN allows your browser to download \nanother four files at the same time.</p><p>We can take this simple example a little bit further. Let’s say your \nwebsite requires twelve files in total. Without CDN, browser will \ntheoretically download the first four files. Then, it will download the \nfifth, sixth, seventh and so on. Depending on the size of the files, \nthis can take significant amount of time. In the world of Internet, \nevery second counts. You don’t want to make your users wait. You can \nbypass this. Divide the files into three chunks of four and use \ndifferent CDNs. One chunk will be downloaded from your domain, one from \nfirst CDN and one from second. In this way, the limit basically doesn’t \nexist.</p><h2><span>No.9: Measure performance of JavaScript blocks</span></h2><p>The last of the JavaScript tips we are going to discuss will be about\n performance. As I mentioned above, performance matters a lot. This is \nnot true only for the Internet. We want everything to be as fast as \npossible. Well, almost everything (spoiler: not for kids). \nUnfortunately, we can’t know for sure how fast something is, or not, \nunless we measure it. Nowadays, one of the heaviest items in <a href=\"http://blog.alexdevero.com/performance-budget-website-optimization-the-right-way/\" target=\"_blank\" rel=\"noopener\">performance budget</a>&nbsp;is JavaScript. This is why I want to dedicate this final section of JavaScript tips to performance in JavaScript.</p><h3><span>Two methods to measure performance</span></h3><p>There are a couple of ways in which you can measure JavaScript \nperformance. For example, you can use various browser extensions or \nbenchmark tests. However, there is also one much simpler solution. \nWhat’s more, this solution is built-in right in JavaScript. I am talking\n about two specific methods – <i>console.time</i><i>()</i> and <i>console.timeEnd</i><i>()</i>. These methods are available in all modern browsers, including even IE 11. How can you use these two methods?</p><p>The first step is writing <i>console.time</i><i>() </i>in the beginning of the block of code you want to measure. The second step is writing <i>console.time</i><i>End()</i>\n after that block of code. Then, these two stamps will measure the time \nit takes to execute whatever code is between them. For example, let’s \nsay you want to measure how long it takes to execute certain function. \nIn that case, you will put this function between the <i>console.time</i><i>()</i> and <i>console.timeEnd</i><i>()</i><i> </i>methods.</p><p>Example:</p><pre><code>// First stamp to mark beginning of the testing block\nconsole.time(\"Array initialize\");\n\n// Function to test\nfunction test() {\n  // Create an array with 2000 items\n  let testingArray = new Array(2000);\n\n  // Populate the array with objects\n  for (let i = 0, j = testingArray.length; i &lt; j; i++) {\n    testingArray[i] = new Object();\n  }\n}\n\n// Initialize test function\n\ntest();\n\n// Second stamp to mark the end of the testing block\nconsole.timeEnd(\"Array initialize\"); // Array initialize: 9.864ms</code></pre><h3><span>Another way to measure performance</span></h3><p>Aside from <i>console.time()</i> and <i>console.timeEnd</i><i>()</i><i> </i>methods there is another method you can use as well. This method is <i>performance.now()</i>.\n This method returns value that is measured in milliseconds and it is \naccurate to one thousandth of a millisecond. Unlike the previous two \nmethods, this returns one value. This means that you will have to assign\n this method to one variable on the beginning and on the end. Then, you \nwill have to subtract the second from the first. The result will be the \ntime it takes to execute the code.</p><p>Example:</p><pre><code>// First stamp to mark beginning of the testing block\nlet timeStart = performance.now();\n\n// Function we want test\nfunction test() {\n  // Create an array with 2000 items\n  let testingArray = new Array(2000);\n\n  // Populate the array with objects\n  for (let i = 0, j = testingArray.length; i &lt; j; i++) {\n    testingArray[i] = new Object();\n  }\n}\n\n// Initialize test function\ntest();\n\n// Second stamp to mark the end of the testing block\nlet timeEnd = performance.now();\n\nconsole.log(timeEnd – timeStart); // 7.265000000000001</code></pre><h2><span>Closing thoughts on JavaScript tips</span></h2><p>Congrats, you just finished this mini series about JavaScript tips! I\n hope you found these nine JavaScript tips useful. Let’s quickly recap \nwhat we discussed today. The first tip was about starting to use <i>let</i> and <i>const</i>\n from ES6. These new ways to declare variables can help you solve \npotential problems with scope and also hoisting. The second tip was \nabout implementing a style guide. This will help you make your code more\n consistent. It will also let you focus on more important things.</p><p>The third tip we discussed was about putting JavaScript code into \nexternal files. This way you can take advantage of caching. We also \ntalked about connection limits and benefits of using CDNs. Lastly, we \ntook a look at two ways in which you can measure performance of your \ncode. There is also third way, using <i>Date</i> object, but the two we \ndiscussed are better. Anyway, I’m looking forward to seeing you here \nagain on Monday. Until then, have a great time!</p><p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n</p><p>Do you have any questions, recommendations, thoughts, advice or tip \nyou would like to share with other readers of this blog, and me? Please \nshare it in a comment. You can also send me a <a href=\"https://alexdevero.com/contact.html\" rel=\"noopener\">mail</a>. I would love to hear from you.</p>","filePath":"pages/JavaScript/.md","_id":"KYIrk5NgdvMWiQFX"}
{"date":{"$$date":1542213039412},"title":"Introduction to Sets in JavaScript","sourceUrl":"https://alligator.io/js/sets-introduction/","path":"ES6/","category":"ES6","tags":["ES6"," Sets"],"author":"","excerpt":"Sets are a new object type with ES6 (ES2015) that allow to create collections of unique values. The values in a set can be either simple primitives like strings or integers, but more complex object types like object literals or arrays can also be part of a set.","dateCreated":1542212538792,"coverImage":"","type":"Post","frontmatter":"---\npath: 'ES6/'\ndate: 'Wed Nov 14 2018 21:59:10 GMT+0530 (India Standard Time)'\ntitle: 'Introduction to Sets in JavaScript'\ntags: ['ES6','Sets']\ncategory: 'ES6'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://alligator.io/js/sets-introduction/'\ntype: 'Post'\n---\n    ","htmlCode":"<div itemprop=\"articleSection\"><p>Sets are a new object type with ES6 (ES2015) that allow to create collections of unique values. The values in a set can be either simple primitives like strings or integers, but more complex object types like object literals or arrays can also be part of a set.</p><p>Here’s a simple example showing off a basic set and a few of the available methods on it like <em>add</em>, <em>size</em>, <em>has</em>, <em>forEach</em>, <em>delete</em> and <em>clear</em>:</p><pre><code><span>let</span> animals = <span>new</span> <span>Set</span>();\n\nanimals.add(<span>'🐷'</span>);\nanimals.add(<span>'🐼'</span>);\nanimals.add(<span>'🐢'</span>);\nanimals.add(<span>'🐿'</span>);\n<span>console</span>.log(animals.size); <span>// 4</span>\nanimals.add(<span>'🐼'</span>);\n<span>console</span>.log(animals.size); <span>// 4</span>\n\n<span>console</span>.log(animals.has(<span>'🐷'</span>)); <span>// true</span>\nanimals.delete(<span>'🐷'</span>);\n<span>console</span>.log(animals.has(<span>'🐷'</span>)); <span>// false</span>\n\nanimals.forEach(<span><span>animal</span> =&gt;</span> {\n  <span>console</span>.log(<span>`Hey <span>${animal}</span>!`</span>);\n});\n\n<span>// Hey 🐼!</span>\n<span>// Hey 🐢!</span>\n<span>// Hey 🐿!</span>\n\nanimals.clear();\n<span>console</span>.log(animals.size); <span>// 0</span></code></pre><div><h4>🏋️‍♂️ Recommended course <sub>⤵</sub></h4><a href=\"https://ES6.io/friend/ALLIGATOR\" rel=\"nofollow\">Wes Bos' ES6 for Everyone!</a></div><hr><p>Here’s another example where we pass-in an array to initialize the set. Notice how the initializing array gets deconstructed, but an array added added later stays in the form of an array:</p><pre><code><span>let</span> myAnimals = <span>new</span> <span>Set</span>([<span>'🐷'</span>, <span>'🐢'</span>, <span>'🐷'</span>, <span>'🐷'</span>]);\n\nmyAnimals.add([<span>'🐨'</span>, <span>'🐑'</span>]);\nmyAnimals.add({ <span>name</span>: <span>'Rud'</span>, <span>type</span>: <span>'🐢'</span> });\n<span>console</span>.log(myAnimals.size); <span>// 4</span>\n\nmyAnimals.forEach(<span><span>animal</span> =&gt;</span> {\n  <span>console</span>.log(animal);\n});\n\n\n<span>// 🐷</span>\n<span>// 🐢</span>\n<span>// [\"🐨\", \"🐑\"]</span>\n<span>// Object { name: \"Rud\", type: \"🐢\" }</span></code></pre><hr><p>Strings are a valid iterable so they can also be passed-in to initialize a set:</p><pre><code><span>console</span>.log(<span>'Only unique characters will be in this set.'</span>.length); <span>// 43</span>\n\n<span>let</span> sentence = <span>new</span> <span>Set</span>(<span>'Only unique characters will be in this set.'</span>);\n<span>console</span>.log(sentence.size); <span>// 18</span></code></pre><hr><p>On top of using <em>forEach</em> on a set, <a href=\"/js/for-of-for-in-loops/\">for…of</a> loops can also be used to iterate over sets:</p><pre><code><span>let</span> moreAnimals = <span>new</span> <span>Set</span>([<span>'🐺'</span>, <span>'🐴'</span>, <span>'🐕'</span>, <span>'🐇'</span>]);\n\n<span>for</span> (<span>let</span> animal <span>of</span> moreAnimals) {\n  <span>console</span>.log(<span>`Howdy <span>${ animal }</span>`</span>);\n}\n\n<span>// Howdy 🐺</span>\n<span>// Howdy 🐴</span>\n<span>// Howdy 🐕</span>\n<span>// Howdy 🐇</span></code></pre><h2><a href=\"#keys-and-values\" aria-label=\"Anchor\" data-anchorjs-icon=\"\"></a>Keys and Values</h2><p>Sets also have the <em>keys</em> and <em>values</em> methods, with <strong>keys</strong> being an alias for <strong>values</strong>, so both methods do exactly the same thing. Using either of these methods returns a new iterator object with the values of the set in the same order in which they were added to the set. Here’s an example:</p><pre><code><span>let</span> partyItems = <span>new</span> <span>Set</span>([<span>'🍕'</span>, <span>'🍾'</span>, <span>'🎊'</span>]);\n<span>let</span> items = partyItems.values();\n\n<span>console</span>.log(items.next());\n<span>console</span>.log(items.next());\n<span>console</span>.log(items.next());\n<span>console</span>.log(items.next().done);\n\n<span>// Object {</span>\n<span>//   done: false,</span>\n<span>//   value: \"🍕\"</span>\n<span>// }</span>\n\n<span>// Object {</span>\n<span>//   done: false,</span>\n<span>//   value: \"🍾\"</span>\n<span>// }</span>\n\n<span>// Object {</span>\n<span>//   done: false,</span>\n<span>//   value: \"🎊\"</span>\n<span>// }</span>\n\n<span>// true</span></code></pre><h2><a href=\"#see-also\" aria-label=\"Anchor\" data-anchorjs-icon=\"\"></a>See also</h2><ul><li><a href=\"/js/maps-introduction/\">Introduction to Maps</a></li></ul></div>","filePath":"pages/ES6/.md","_id":"Kmva6UW87I1oH3Fw","dateUpdated":1542213039412}
{"date":{"$$date":1542208454707},"title":"Testing Classes & Pipes","sourceUrl":"https://codecraft.tv/courses/angular/unit-testing/classes-and-pipes/","path":"Angular/Angular/","category":"Angular","tags":["Angular"," TDD"],"author":"Asim","excerpt":"","dateCreated":1542207583221,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Angular/'\ndate: 'Wed Nov 14 2018 20:41:37 GMT+0530 (India Standard Time)'\ntitle: 'Testing Classes & Pipes'\ntags: ['Angular','TDD']\ncategory: 'Angular'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://codecraft.tv/courses/angular/unit-testing/classes-and-pipes/'\ntype: 'Post'\n---\n    ","htmlCode":"<div>\n                <div>\n\n<ul>\n<li><a href=\"#_learning_objectives\">Learning Objectives</a></li>\n<li><a href=\"#_sample_class_test_suite\">Sample class &amp; test suite</a></li>\n<li><a href=\"#_setup_teardown\">Setup &amp; teardown</a></li>\n<li><a href=\"#_creating_test_specs\">Creating test specs</a></li>\n<li><a href=\"#_running_the_tests\">Running the&nbsp;tests</a></li>\n<li><a href=\"#_pipes\">Pipes</a></li>\n<li><a href=\"#_summary\">Summary</a></li>\n<li><a href=\"#_listing\">Listing</a></li>\n</ul>\n</div>\n<div>\n<h2><a href=\"#_learning_objectives\">Learning Objectives</a></h2>\n<div>\n<div>\n<ul>\n<li>\n<p>How to&nbsp;unit test an&nbsp;instance of&nbsp;a class.</p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n<div>\n<h2><a href=\"#_sample_class_test_suite\">Sample class &amp; test suite</a></h2>\n<div>\n<div>\n<p>We’ll start our unit testing journey with all you will ever need to&nbsp;know, how to&nbsp;test a&nbsp;<code>class</code>.</p>\n</div>\n<div><h4>Tip</h4><div>\nEverything in&nbsp;Angular is an&nbsp;instance of&nbsp;a class, be it a&nbsp;Component, Directive, Pipe and&nbsp;so on. So once you know how to&nbsp;test a&nbsp;basic class you can test everything.\n</div></div>\n<div>\n<p>Let’s imagine we have a&nbsp;simple class called <code>AuthService</code> it’s something we want to&nbsp;provide to&nbsp;Angulars DI framework but that doesn’t play a&nbsp;part in&nbsp;how we want to&nbsp;test it.</p>\n</div>\n<div>\n<div>Listing 1. app/auth.service.ts</div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>export</span> <span>class</span> <span>AuthService</span> <span>{</span>\n  <span>isAuthenticated</span><span>()</span><span>:</span> <span>boolean</span> <span>{</span>\n    <span>return</span> <span>!!</span><span>localStorage</span><span>.</span><span>getItem</span><span>(</span><span>'token'</span><span>);</span>\n  <span>}</span>\n<span>}</span></code></pre>\n</div>\n</div>\n<div>\n<p>It has one function called <code>isAuthenticated</code> which returns <code>true</code> if there is a&nbsp;token stored in&nbsp;the browsers <code>localStorage</code>.</p>\n</div>\n<div>\n<p>To&nbsp;test this class we create a&nbsp;test file called <code>auth.service.spec.ts</code> that sits next to&nbsp;our <code>auth.service.ts</code> file, like so:</p>\n</div>\n<div>\n<div>Listing 2. app/auth.service.spec.ts</div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>import</span> <span>{</span><span>AuthService</span><span>}</span> <span>from</span> <span>'./auth.service'</span><span>;</span> <i data-value=\"1\"></i><b>(1)</b>\n\n<span>describe</span><span>(</span><span>'Service: Auth'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span> <i data-value=\"2\"></i><b>(2)</b>\n<span>});</span></code></pre>\n</div>\n</div>\n<div>\n<table>\n<tbody><tr>\n<td><i data-value=\"1\"></i><b>1</b></td>\n<td>We first import the&nbsp;<code>AuthService</code> class we want to&nbsp;run our tests against.</td>\n</tr>\n<tr>\n<td><i data-value=\"2\"></i><b>2</b></td>\n<td>We add a&nbsp;<code>describe</code> test suite function to&nbsp;hold all our individual test specs.</td>\n</tr>\n</tbody></table>\n</div>\n</div>\n</div>\n<div>\n<h2><a href=\"#_setup_teardown\">Setup &amp; teardown</a></h2>\n<div>\n<div>\n<p>We want to&nbsp;run our test specs against <em>fresh</em> instances of&nbsp;<code>AuthService</code> so we use the&nbsp;<code>beforeEach</code> and&nbsp;<code>afterEach</code> functions to&nbsp;setup and&nbsp;clean instances like so:</p>\n</div>\n<div>\n<div>Listing 3. app/auth.service.spec.ts</div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>describe</span><span>(</span><span>'Service: Auth'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n  <span>let</span> <span>service</span>: <span>AuthService</span><span>;</span>\n\n  <span>beforeEach</span><span>(()</span> <span>=&gt;</span> <span>{</span> <i data-value=\"1\"></i><b>(1)</b>\n    <span>service</span> <span>=</span> <span>new</span> <span>AuthService</span><span>();</span>\n  <span>});</span>\n\n  <span>afterEach</span><span>(()</span> <span>=&gt;</span> <span>{</span> <i data-value=\"2\"></i><b>(2)</b>\n    <span>service</span> <span>=</span> <span>null</span><span>;</span>\n    <span>localStorage</span><span>.</span><span>removeItem</span><span>(</span><span>'token'</span><span>);</span>\n  <span>});</span>\n<span>});</span></code></pre>\n</div>\n</div>\n<div>\n<table>\n<tbody><tr>\n<td><i data-value=\"1\"></i><b>1</b></td>\n<td>Before each test spec is run we create a&nbsp;new instance of&nbsp;<code>AuthService</code> and&nbsp;store on&nbsp;the <code>service</code> variable.</td>\n</tr>\n<tr>\n<td><i data-value=\"2\"></i><b>2</b></td>\n<td>After each test spec is finished we null out our <code>service</code> and&nbsp;also remove any tokens we stored in&nbsp;localStorage.</td>\n</tr>\n</tbody></table>\n</div>\n</div>\n</div>\n<div>\n<h2><a href=\"#_creating_test_specs\">Creating test specs</a></h2>\n<div>\n<div>\n<p>Now we create some test specs, the&nbsp;first spec I&nbsp;want to&nbsp;create should check if the&nbsp;<code>isAuthenticated</code> function returns <code>true</code> when there is a&nbsp;token.</p>\n</div>\n<div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>it</span><span>(</span><span>'should return true from isAuthenticated when there is a token'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span> <i data-value=\"1\"></i><b>(1)</b>\n  <span>localStorage</span><span>.</span><span>setItem</span><span>(</span><span>'token'</span><span>,</span> <span>'1234'</span><span>);</span> <i data-value=\"2\"></i><b>(2)</b>\n  <span>expect</span><span>(</span><span>service</span><span>.</span><span>isAuthenticated</span><span>()).</span><span>toBeTruthy</span><span>();</span> <i data-value=\"3\"></i><b>(3)</b>\n<span>});</span></code></pre>\n</div>\n</div>\n<div>\n<table>\n<tbody><tr>\n<td><i data-value=\"1\"></i><b>1</b></td>\n<td>We pass to&nbsp;the <code>it</code> function a&nbsp;human readable description of&nbsp;what we are testing. This is shown in&nbsp;the test report and&nbsp;makes it easy to&nbsp;understand what feature isn’t working.</td>\n</tr>\n<tr>\n<td><i data-value=\"2\"></i><b>2</b></td>\n<td>We setup some <em>spec only</em> data in&nbsp;local storage which should trigger the&nbsp;effect we want.</td>\n</tr>\n<tr>\n<td><i data-value=\"3\"></i><b>3</b></td>\n<td>We test an&nbsp;expectation that the&nbsp;<code>service.isAuthenticated()</code> function returns something that resolves to&nbsp;<code>true</code>.</td>\n</tr>\n</tbody></table>\n</div>\n<div>\n<p>We also want to&nbsp;test the&nbsp;reverse case, when there is no token the&nbsp;function should return <code>false</code>:</p>\n</div>\n<div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>it</span><span>(</span><span>'should return false from isAuthenticated when there is no token'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n  <span>expect</span><span>(</span><span>service</span><span>.</span><span>isAuthenticated</span><span>()).</span><span>toBeFalsy</span><span>();</span>\n<span>});</span></code></pre>\n</div>\n</div>\n<div>\n<p>We <em>know</em> that in&nbsp;this function the&nbsp;<code>token</code> isn’t set since we make sure to&nbsp;clear out the&nbsp;token in&nbsp;the <code>afterEach</code> function.</p>\n</div>\n<div>\n<p>We now test an&nbsp;expectation that the&nbsp;<code>service.isAuthenticated()</code> function returns something that resolves to&nbsp;<code>false</code>.</p>\n</div>\n</div>\n</div>\n<div>\n<h2><a href=\"#_running_the_tests\">Running the&nbsp;tests</a></h2>\n<div>\n<div>\n<p>To&nbsp;run our tests we simply open up the&nbsp;<abbr>HTML</abbr> file in&nbsp;the browser, you can just click the&nbsp;plunker link and&nbsp;make sure to&nbsp;press run in&nbsp;the toolbar.</p>\n</div>\n<div>\n<div>\n<img src=\"/assets/images/courses/angular/13.unit-testing/class-suite-pass.png\" alt=\"class suite pass\">\n</div>\n</div>\n</div>\n</div>\n<div>\n<h2><a href=\"#_pipes\">Pipes</a></h2>\n<div>\n<div>\n<p>Pipes are by&nbsp;far the&nbsp;simplest part of&nbsp;Angular, they can be implemented as&nbsp;a class with one function and&nbsp;therefore can be tested with <em>just</em> Jasmine and&nbsp;the knowledge we’ve gained so far.</p>\n</div>\n<div>\n<p>In&nbsp;the section on&nbsp;pipes we built one called <code>DefaultPipe</code>, this pipe lets us provide default values for&nbsp;variables in&nbsp;templates like so:</p>\n</div>\n<div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a>{{ image | default:\"<a href=\"http://example.com/default-image.png\" rel=\"nofollow\"><span>http</span><span>://</span><span>example</span><span>.</span><span>com</span><span>/</span><span>default</span><span>-</span><span>image</span><span>.</span><span>png</span></a>\" }}</pre>\n</div>\n</div>\n<div>\n<p>The&nbsp;code for&nbsp;this pipe looked like so:</p>\n</div>\n<div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>import</span> <span>{</span><span>Pipe</span><span>,</span> <span>PipeTransform</span><span>}</span> <span>from</span> <span>'@angular/core'</span><span>;</span>\n\n<span>@Pipe</span><span>({</span>\n  <span>name</span><span>:</span> <span>'default'</span>\n<span>})</span>\n<span>export</span> <span>class</span> <span>DefaultPipe</span> <span>implements</span> <span>PipeTransform</span> <span>{</span>\n\n  <span>transform</span><span>(</span><span>value</span>: <span>string</span><span>,</span> <span>fallback</span>: <span>string</span><span>,</span> <span>forceHttps</span>: <span>boolean</span> <span>=</span> <span>false</span><span>)</span><span>:</span> <span>string</span> <span>{</span>\n    <span>let</span> <span>image</span> <span>=</span> <span>\"\"</span><span>;</span>\n    <span>if</span> <span>(</span><span>value</span><span>)</span> <span>{</span>\n      <span>image</span> <span>=</span> <span>value</span><span>;</span>\n    <span>}</span> <span>else</span> <span>{</span>\n      <span>image</span> <span>=</span> <span>fallback</span><span>;</span>\n    <span>}</span>\n    <span>if</span> <span>(</span><span>forceHttps</span><span>)</span> <span>{</span>\n      <span>if</span> <span>(</span><span>image</span><span>.</span><span>indexOf</span><span>(</span><span>\"https\"</span><span>)</span> <span>==</span> <span>-</span><span>1</span><span>)</span> <span>{</span>\n        <span>image</span> <span>=</span> <span>image</span><span>.</span><span>replace</span><span>(</span><span>\"http\"</span><span>,</span> <span>\"https\"</span><span>);</span>\n      <span>}</span>\n    <span>}</span>\n    <span>return</span> <span>image</span><span>;</span>\n  <span>}</span>\n<span>}</span></code></pre>\n</div>\n</div>\n<div>\n<p>Our starting test suite file looks like so:</p>\n</div>\n<div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>describe</span><span>(</span><span>'Pipe: Default'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n  <span>let</span> <span>pipe</span>: <span>DefaultPipe</span><span>;</span>\n\n  <span>beforeEach</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n    <span>pipe</span> <span>=</span> <span>new</span> <span>DefaultPipe</span><span>();</span>\n  <span>});</span>\n<span>});</span></code></pre>\n</div>\n</div>\n<div>\n<p>In&nbsp;our setup function we create an&nbsp;instance of&nbsp;our pipe class.</p>\n</div>\n<div>\n<p>Pipe classes have one function called <code>transform</code> so in&nbsp;order to&nbsp;test pipes we just need to&nbsp;test this one function, passing inputs and&nbsp;expecting outputs.</p>\n</div>\n<div>\n<p>Our first test spec checks to&nbsp;see that if the&nbsp;pipe doesn’t recieve an&nbsp;input it returns the&nbsp;default value, like so:</p>\n</div>\n<div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>it</span><span>(</span><span>'providing no value returns fallback'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n  <span>expect</span><span>(</span><span>pipe</span><span>.</span><span>transform</span><span>(</span><span>''</span><span>,</span> <span>'<a href=\"http://place-hold.it/300\" rel=\"nofollow\"><span>http</span><span>://</span><span>place</span><span>-</span><span>hold</span><span>.</span><span>it</span><span>/</span><span>300</span></a>'</span><span>)).</span><span>toBe</span><span>(</span><span>'<a href=\"http://place-hold.it/300\" rel=\"nofollow\"><span>http</span><span>://</span><span>place</span><span>-</span><span>hold</span><span>.</span><span>it</span><span>/</span><span>300</span></a>'</span><span>);</span>\n<span>});</span></code></pre>\n</div>\n</div>\n<div>\n<p>We pass in&nbsp;empty string as&nbsp;the input to&nbsp;the transform function and&nbsp;therefore it returns the&nbsp;second argument back to&nbsp;us.</p>\n</div>\n<div>\n<p>For&nbsp;testing pipes there isn’t much else to&nbsp;it, we simply check the&nbsp;various inputs and&nbsp;expected ouputs of&nbsp;our transform function.</p>\n</div>\n<div><h4>Note</h4><div>\nIn&nbsp;order to&nbsp;run this test spec file in&nbsp;our test Plunker remember to&nbsp;add it to&nbsp;the list of&nbsp;test spec files in&nbsp;the <code><em>spec_files</em></code> array.\n</div></div>\n<div><h4>Tip</h4><div>\nIf your <em>Pipe</em> requires dependencies to&nbsp;be injected into the&nbsp;constructor it might be better to&nbsp;use the&nbsp;<em>Angular Test Bed</em> which we cover later on&nbsp;in this section.\n</div></div>\n</div>\n</div>\n<div>\n<h2><a href=\"#_summary\">Summary</a></h2>\n<div>\n<div>\n<p>That’s it really, we can test any <em>isolated</em> class that doesn’t require anything else with a&nbsp;simple jasmine spec file, nothing more complex required.</p>\n</div>\n<div>\n<p>Since everything in&nbsp;Angular is represented as&nbsp;classes, we could stop here&nbsp;— you have most of&nbsp;the tools already to&nbsp;write tests for&nbsp;directives, components, pipes and&nbsp;so on.</p>\n</div>\n<div>\n<p>However our code often requires <em>other</em> code to&nbsp;work, it has dependencies. So how we write <em>isolated</em> tests for&nbsp;pieces of&nbsp;code which by&nbsp;nature are not isolated and&nbsp;need dependencies is the&nbsp;topic of&nbsp;the next lecture.</p>\n</div>\n</div>\n</div>\n<div>\n<h2><a href=\"#_listing\">Listing</a></h2>\n<div>\n<div>\n<div>Listing 4. auth.service.ts</div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>export</span> <span>class</span> <span>AuthService</span> <span>{</span>\n  <span>isAuthenticated</span><span>()</span><span>:</span> <span>boolean</span> <span>{</span>\n    <span>return</span> <span>!!</span><span>localStorage</span><span>.</span><span>getItem</span><span>(</span><span>'token'</span><span>);</span>\n  <span>}</span>\n<span>}</span></code></pre>\n</div>\n</div>\n<div>\n<div>Listing 5. auth.service.spec.ts</div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>import</span> <span>{</span><span>AuthService</span><span>}</span> <span>from</span> <span>'./auth.service'</span><span>;</span>\n\n<span>describe</span><span>(</span><span>'Service: Auth'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n\n  <span>let</span> <span>service</span>: <span>AuthService</span><span>;</span>\n\n  <span>beforeEach</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n    <span>service</span> <span>=</span> <span>new</span> <span>AuthService</span><span>();</span>\n  <span>});</span>\n\n  <span>afterEach</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n    <span>service</span> <span>=</span> <span>null</span><span>;</span>\n    <span>localStorage</span><span>.</span><span>removeItem</span><span>(</span><span>'token'</span><span>);</span>\n  <span>});</span>\n\n  <span>it</span><span>(</span><span>'should return true from isAuthenticated when there is a token'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>localStorage</span><span>.</span><span>setItem</span><span>(</span><span>'token'</span><span>,</span> <span>'1234'</span><span>);</span>\n    <span>expect</span><span>(</span><span>service</span><span>.</span><span>isAuthenticated</span><span>()).</span><span>toBeTruthy</span><span>();</span>\n  <span>});</span>\n\n  <span>it</span><span>(</span><span>'should return false from isAuthenticated when there is no token'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>expect</span><span>(</span><span>service</span><span>.</span><span>isAuthenticated</span><span>()).</span><span>toBeFalsy</span><span>();</span>\n  <span>});</span>\n\n<span>});</span></code></pre>\n</div>\n</div>\n<div>\n<div>Listing 6. default.pipe.ts</div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>import</span> <span>{</span><span>Pipe</span><span>,</span> <span>PipeTransform</span><span>}</span> <span>from</span> <span>'@angular/core'</span><span>;</span>\n\n<span>@Pipe</span><span>({</span>\n  <span>name</span><span>:</span> <span>'default'</span>\n<span>})</span>\n<span>export</span> <span>class</span> <span>DefaultPipe</span> <span>implements</span> <span>PipeTransform</span> <span>{</span>\n\n  <span>transform</span><span>(</span><span>value</span>: <span>string</span><span>,</span> <span>fallback</span>: <span>string</span><span>,</span> <span>forceHttps</span>: <span>boolean</span> <span>=</span> <span>false</span><span>)</span><span>:</span> <span>string</span> <span>{</span>\n    <span>let</span> <span>image</span> <span>=</span> <span>\"\"</span><span>;</span>\n    <span>if</span> <span>(</span><span>value</span><span>)</span> <span>{</span>\n      <span>image</span> <span>=</span> <span>value</span><span>;</span>\n    <span>}</span> <span>else</span> <span>{</span>\n      <span>image</span> <span>=</span> <span>fallback</span><span>;</span>\n    <span>}</span>\n    <span>if</span> <span>(</span><span>forceHttps</span><span>)</span> <span>{</span>\n      <span>if</span> <span>(</span><span>image</span><span>.</span><span>indexOf</span><span>(</span><span>\"https\"</span><span>)</span> <span>==</span> <span>-</span><span>1</span><span>)</span> <span>{</span>\n        <span>image</span> <span>=</span> <span>image</span><span>.</span><span>replace</span><span>(</span><span>\"http\"</span><span>,</span> <span>\"https\"</span><span>);</span>\n      <span>}</span>\n    <span>}</span>\n    <span>return</span> <span>image</span><span>;</span>\n  <span>}</span>\n<span>}</span></code></pre>\n</div>\n</div>\n<div>\n<div>Listing 7. default.pipe.spec.ts</div>\n<div>\n<pre><span></span><a data-original-title=\"Copied!\">Copy</a><code data-lang=\"typescript\"><span></span><span>/* tslint:disable:no-unused-variable */</span>\n\n<span>import</span> <span>{</span><span>DefaultPipe</span><span>}</span> <span>from</span> <span>'./default.pipe'</span><span>;</span>\n\n<span>describe</span><span>(</span><span>'Pipe: Default'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n  <span>let</span> <span>pipe</span>: <span>DefaultPipe</span><span>;</span>\n\n  <span>beforeEach</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n    <span>pipe</span> <span>=</span> <span>new</span> <span>DefaultPipe</span><span>();</span>\n  <span>});</span>\n\n  <span>it</span><span>(</span><span>'providing no value returns fallback'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>expect</span><span>(</span><span>pipe</span><span>.</span><span>transform</span><span>(</span><span>''</span><span>,</span> <span>'<a href=\"http://place-hold.it/300\" rel=\"nofollow\"><span>http</span><span>://</span><span>place</span><span>-</span><span>hold</span><span>.</span><span>it</span><span>/</span><span>300</span></a>'</span><span>)).</span><span>toBe</span><span>(</span><span>'<a href=\"http://place-hold.it/300\" rel=\"nofollow\"><span>http</span><span>://</span><span>place</span><span>-</span><span>hold</span><span>.</span><span>it</span><span>/</span><span>300</span></a>'</span><span>);</span>\n  <span>});</span>\n\n  <span>it</span><span>(</span><span>'providing a value returns value'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>expect</span><span>(</span><span>pipe</span><span>.</span><span>transform</span><span>(</span><span>'<a href=\"http://place-hold.it/300\" rel=\"nofollow\"><span>http</span><span>://</span><span>place</span><span>-</span><span>hold</span><span>.</span><span>it</span><span>/</span><span>300</span></a>'</span><span>,</span> <span>'fallback'</span><span>)).</span><span>toBe</span><span>(</span><span>'<a href=\"http://place-hold.it/300\" rel=\"nofollow\"><span>http</span><span>://</span><span>place</span><span>-</span><span>hold</span><span>.</span><span>it</span><span>/</span><span>300</span></a>'</span><span>);</span>\n  <span>});</span>\n\n  <span>it</span><span>(</span><span>'asking for https returns https'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>expect</span><span>(</span><span>pipe</span><span>.</span><span>transform</span><span>(</span><span>''</span><span>,</span> <span>'<a href=\"http://place-hold.it/300\" rel=\"nofollow\"><span>http</span><span>://</span><span>place</span><span>-</span><span>hold</span><span>.</span><span>it</span><span>/</span><span>300</span></a>'</span><span>,</span> <span>true</span><span>)).</span><span>toBe</span><span>(</span><span>'<a href=\"https://place-hold.it/300\" rel=\"nofollow\"><span>https</span><span>://</span><span>place</span><span>-</span><span>hold</span><span>.</span><span>it</span><span>/</span><span>300</span></a>'</span><span>);</span>\n  <span>});</span>\n<span>});</span></code></pre>\n</div>\n</div>\n</div>\n</div>\n\n      </div>","filePath":"pages/Angular/.md","_id":"Kn4xqbXiEFoM7Hfx","dateUpdated":1542208454708}
{"date":"2019-03-01T16:03:38.177Z","title":"RxJS: Observables, Observers and Operators Introduction","sourceUrl":"https://toddmotto.com/rxjs-observables-observers-operators","path":"RxJs/","category":"RxJs","tags":["RxJs"," Observable"],"author":"Todd Motto","excerpt":"","dateCreated":1551456142945,"coverImage":"","type":"Post","frontmatter":"---\npath: 'RxJs/'\ndate: 'Fri Mar 01 2019 21:33:38 GMT+0530 (India Standard Time)'\ntitle: 'RxJS: Observables, Observers and Operators Introduction'\ntags: ['RxJs','Observable']\ncategory: 'RxJs'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://toddmotto.com/rxjs-observables-observers-operators'\ntype: 'Post'\n---\n    ","htmlCode":"<p>RxJS is an incredible tool for reactive programming, and today we’re going to dive a little deeper into what Observables and observers are - as well as learn how to create our own operators.</p><p>If you’ve used RxJS before and want to understand some of the inner workings and internals to “how” Observables work, as well as the operators, then this post is for you.</p><div><p>Table of contents</p><ul><li><a href=\"https://toddmotto.com/rxjs-observables-observers-operators#what-is-an-observable\">What is an Observable?</a></li><li><a href=\"https://toddmotto.com/rxjs-observables-observers-operators#what-is-an-observer\">What is an observer?</a></li><li><a href=\"https://toddmotto.com/rxjs-observables-observers-operators#what-is-an-operator\">What is an operator?</a></li><li><a href=\"https://toddmotto.com/rxjs-observables-observers-operators#building-our-own-observable\">Building our own Observable</a><ul><li><a href=\"https://toddmotto.com/rxjs-observables-observers-operators#observable-constructor\">Observable constructor</a></li><li><a href=\"https://toddmotto.com/rxjs-observables-observers-operators#observer-example\">Observer example</a></li><li><a href=\"https://toddmotto.com/rxjs-observables-observers-operators#observablefromevent\">Observable.fromEvent</a></li></ul></li><li><a href=\"https://toddmotto.com/rxjs-observables-observers-operators#building-our-own-operator\">Building our own operator</a></li></ul></div><h3><a href=\"https://toddmotto.com/rxjs-observables-observers-operators#what-is-an-observable\"><span><i></i></span>What is an Observable?</a></h3><p>An Observable is just a function, with a few special characteristics. These are that it takes in an “observer” (an object with “next”, “error” and “complete” methods on it), and returns cancellation logic. In our examples we will use a simple “unsubscribe” function to handle this further on when we write our own. In RxJS it would be a Subscription object with an&nbsp;<code>unsubscribe</code>&nbsp;method on it.</p><p>An Observable sets up the observer (we’ll learn more about this) and connects it to the “thing” we want to get values from. This “thing” is called a producer, and is a source of values, perhaps from a&nbsp;<code>click</code>&nbsp;or&nbsp;<code>input</code>&nbsp;event in the DOM. It could even be something more complex such as communication over HTTP.</p><p>To better understand Observables, we’re going to write our own! But first, let’s take a look at an example with a subscription:</p><div><div><pre><code><span>const</span> <span>node</span> <span>=</span> <span>document</span><span>.</span><span>querySelector</span><span>(</span><span>'input[type=text]'</span><span>);</span>\n\n<span>const</span> <span>input$</span> <span>=</span> <span>Rx</span><span>.</span><span>Observable</span><span>.</span><span>fromEvent</span><span>(</span><span>node</span><span>,</span> <span>'input'</span><span>);</span>\n\n<span>input$</span><span>.</span><span>subscribe</span><span>({</span>\n  <span>next</span><span>:</span> <span>event</span> <span>=&gt;</span> <span>console</span><span>.</span><span>log</span><span>(</span><span>`You just typed </span><span>${</span><span>event</span><span>.</span><span>target</span><span>.</span><span>value</span><span>}</span><span>!`</span><span>),</span>\n  <span>error</span><span>:</span> <span>err</span> <span>=&gt;</span> <span>console</span><span>.</span><span>log</span><span>(</span><span>`Oops... </span><span>${</span><span>err</span><span>}</span><span>`</span><span>),</span>\n  <span>complete</span><span>:</span> <span>()</span> <span>=&gt;</span> <span>console</span><span>.</span><span>log</span><span>(</span><span>`Complete!`</span><span>),</span>\n<span>});</span>\n</code></pre></div></div><p>This example takes an&nbsp;<code>&lt;input type=\"text\"&gt;</code>&nbsp;element and passes it into&nbsp;<code>Rx.Observable.fromEvent()</code>, which returns us an Observable of our input’s&nbsp;<code>Event</code>&nbsp;object when the event name we specified emits (which is why we’re using&nbsp;<code>${event.target.value}</code>&nbsp;in the console).</p><p>When the input’s event listener fires, the Observable passes the value to the&nbsp;<em>observer</em>.</p><h3><a href=\"https://toddmotto.com/rxjs-observables-observers-operators#what-is-an-observer\"><span><i></i></span>What is an observer?</a></h3><p>An observer is quite simple, in the above example the observer is the object literal we pass into our&nbsp;<code>.subscribe()</code>&nbsp;(subscribe will invoke our Observable).</p><blockquote><p><code>.subscribe(next, error, complete)</code>&nbsp;is also valid syntax, but we’ll be exploring the object literal form in this post</p></blockquote><p>When an Observable produces values, it then informs the&nbsp;<em>observer</em>, calling&nbsp;<code>.next()</code>&nbsp;when a new value was successfully captured and&nbsp;<code>.error()</code>&nbsp;when an error occurs.</p><p>When we subscribe to an Observable, it will keep passing any values to an observer until one of two things happens. Either the producer says there are no more values to be sent, in which case it will call&nbsp;<code>.complete()</code>&nbsp;on our observer, or we (as the “consumers”) decide we are no longer interested in the values and we unsubscribe.</p><p>When we want to compose the values returned from an Observable, before they reach our final&nbsp;<code>.subscribe()</code>&nbsp;block, the value is passed (or can be passed) through a chain of Observables, which is typically done via “operators”. This chain is what we call an Observable sequence. Each operator returns a new Observable to continue our sequence - also known as a “stream”.</p><h3><a href=\"https://toddmotto.com/rxjs-observables-observers-operators#what-is-an-operator\"><span><i></i></span>What is an operator?</a></h3><p>As we’ve mentioned, Observables can be chained, which means we can do something like this:</p><div><div><pre><code><span>const</span> <span>input$</span> <span>=</span> <span>Rx</span><span>.</span><span>Observable</span><span>.</span><span>fromEvent</span><span>(</span><span>node</span><span>,</span> <span>'input'</span><span>)</span>\n  <span>.</span><span>map</span><span>(</span><span>event</span> <span>=&gt;</span> <span>event</span><span>.</span><span>target</span><span>.</span><span>value</span><span>)</span>\n  <span>.</span><span>filter</span><span>(</span><span>value</span> <span>=&gt;</span> <span>value</span><span>.</span><span>length</span> <span>&gt;=</span> <span>2</span><span>)</span>\n  <span>.</span><span>subscribe</span><span>(</span><span>value</span> <span>=&gt;</span> <span>{</span>\n    <span>// use the `value`</span>\n  <span>});</span>\n</code></pre></div></div><p>Here are the steps of this sequence:</p><ul><li>Let’s assume the user types “a” into our input</li><li>The Observable then reacts to this event, passing the value to the&nbsp;<em>next</em>&nbsp;observer</li><li>The value “a” is passed to&nbsp;<code>.map()</code>, which is subscribing to our&nbsp;<em>initial</em>&nbsp;observable</li><li><code>.map()</code>&nbsp;returns a new Observable of&nbsp;<code>event.target.value</code>&nbsp;and calls&nbsp;<code>.next()</code>&nbsp;on it’s observer</li><li>The&nbsp;<code>.next()</code>&nbsp;call will invoke&nbsp;<code>.filter()</code>, which is subscribing to&nbsp;<code>.map()</code>, with the&nbsp;<em>resulting</em>&nbsp;value of the&nbsp;<code>.map()</code>&nbsp;call</li><li><code>.filter()</code>&nbsp;will then return another Observable with the filtered results, calling&nbsp;<code>.next()</code>&nbsp;with the value if the&nbsp;<code>.length</code>&nbsp;is 2 or above</li><li>We get the final value through our&nbsp;<code>.subscribe()</code>&nbsp;block</li></ul><p>Quite a lot happening, and if you’re a little unsure, remember:</p><p>Each time a new Observable is returned, a new&nbsp;<em>observer</em>&nbsp;is hooked up to the previous Observable, thus allowing us to pass values along a “stream” of observers that simply do something you’ve asked and call&nbsp;<code>.next()</code>&nbsp;when it’s done, passing it to the next observer.</p><p>In short, an operator typically returns a new Observable each time - allowing us to continue our stream. As users we don’t need to worry about all the Observables and observers which are created and used behind scenes, we only use one per chain - our subscription.</p><h3><a href=\"https://toddmotto.com/rxjs-observables-observers-operators#building-our-own-observable\"><span><i></i></span>Building our own Observable</a></h3><p>So, let’s get started and write our own Observable implementation. It won’t be as advanced as Rx’s implementation, but we’ll hopefully build the picture enough.</p><h4><a href=\"https://toddmotto.com/rxjs-observables-observers-operators#observable-constructor\"><span><i></i></span>Observable constructor</a></h4><p>First, we’ll create an Observable constructor function that takes a&nbsp;<code>subscribe</code>&nbsp;function as its only argument. We’ll store the subscribe property on the instance of Observable, so that we can call it later with an observer:</p><div><div><pre><code><span>function</span> <span>Observable</span><span>(</span><span>subscribe</span><span>)</span> <span>{</span>\n  <span>this</span><span>.</span><span>subscribe</span> <span>=</span> <span>subscribe</span><span>;</span>\n<span>}</span>\n</code></pre></div></div><p>Each&nbsp;<code>subscribe</code>&nbsp;callback that we assign to&nbsp;<code>this.subscribe</code>&nbsp;will be invoked either by us or another Observable. This will make more sense as we continue.</p><h4><a href=\"https://toddmotto.com/rxjs-observables-observers-operators#observer-example\"><span><i></i></span>Observer example</a></h4><p>Before we dive into our real world example, let’s give a basic one.</p><p>As we’ve setup our Observable function, we can now invoke our observer, passing in&nbsp;<code>1</code>&nbsp;as a value and subscribe to it:</p><div><div><pre><code><span>const</span> <span>one$</span> <span>=</span> <span>new</span> <span>Observable</span><span>(</span><span>observer</span> <span>=&gt;</span> <span>{</span>\n  <span>observer</span><span>.</span><span>next</span><span>(</span><span>1</span><span>);</span>\n  <span>observer</span><span>.</span><span>complete</span><span>();</span>\n<span>});</span>\n\n<span>one$</span><span>.</span><span>subscribe</span><span>({</span>\n  <span>next</span><span>:</span> <span>value</span> <span>=&gt;</span> <span>console</span><span>.</span><span>log</span><span>(</span><span>value</span><span>),</span> <span>// 1</span>\n<span>});</span>\n</code></pre></div></div><p>We subscribe to the Observable instance, and pass our observer (object literal) into the constructor (which is then assigned to&nbsp;<code>this.subscribe</code>).</p><h4><a href=\"https://toddmotto.com/rxjs-observables-observers-operators#observablefromevent\"><span><i></i></span>Observable.fromEvent</a></h4><p>That’s all we actually needed to create the basis of our Observable, the next piece we need is a&nbsp;<code>static</code>&nbsp;method on the Observable:</p><div><div><pre><code><span>Observable</span><span>.</span><span>fromEvent</span> <span>=</span> <span>(</span><span>element</span><span>,</span> <span>name</span><span>)</span> <span>=&gt;</span> <span>{};</span>\n</code></pre></div></div><p>We’re going to use our Observable just like in RxJS:</p><div><div><pre><code><span>const</span> <span>node</span> <span>=</span> <span>document</span><span>.</span><span>querySelector</span><span>(</span><span>'input'</span><span>);</span>\n\n<span>const</span> <span>input$</span> <span>=</span> <span>Observable</span><span>.</span><span>fromEvent</span><span>(</span><span>node</span><span>,</span> <span>'input'</span><span>);</span>\n</code></pre></div></div><p>Which means we need to return a new Observable and pass a function in as the argument:</p><div><div><pre><code><span>Observable</span><span>.</span><span>fromEvent</span> <span>=</span> <span>(</span><span>element</span><span>,</span> <span>name</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>return</span> <span>new</span> <span>Observable</span><span>(</span><span>observer</span> <span>=&gt;</span> <span>{});</span>\n<span>};</span>\n</code></pre></div></div><p>This then passes our function to our&nbsp;<code>this.subscribe</code>&nbsp;in the constructor. Next up, we need to hook our event in:</p><div><div><pre><code><span>Observable</span><span>.</span><span>fromEvent</span> <span>=</span> <span>(</span><span>element</span><span>,</span> <span>name</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>return</span> <span>new</span> <span>Observable</span><span>(</span><span>observer</span> <span>=&gt;</span> <span>{</span>\n    <span>element</span><span>.</span><span>addEventListener</span><span>(</span><span>name</span><span>,</span> <span>event</span> <span>=&gt;</span> <span>{},</span> <span>false</span><span>);</span>\n  <span>});</span>\n<span>};</span>\n</code></pre></div></div><p>So, what’s this&nbsp;<code>observer</code>&nbsp;argument, and where does it come from?</p><p>The&nbsp;<code>observer</code>&nbsp;is actually your object literal with&nbsp;<code>next</code>,&nbsp;<code>error</code>&nbsp;and&nbsp;<code>complete</code>&nbsp;on.</p><blockquote><p>Here is the interesting piece. The&nbsp;<code>observer</code>&nbsp;is never passed through&nbsp;<em>until</em>&nbsp;<code>.subscribe()</code>&nbsp;is invoked. This means the&nbsp;<code>addEventListener</code>&nbsp;is never “setup” by our Observable until it’s subscribed to.</p></blockquote><p>Once subscribe is invoked, inside the Observable’s constructor the&nbsp;<code>this.subscribe</code>&nbsp;is then called, which&nbsp;<em>invokes</em>&nbsp;the callback we passed to&nbsp;<code>new Observable(callback)</code>&nbsp;and also passes through our observer literal. This then allows the Observable to do it’s thing and once it’s done, it’ll&nbsp;<code>.next()</code>&nbsp;on our observer with the updated value.</p><p>Okay so what now? We’ve got an event listener setup, but nothing is calling&nbsp;<code>.next()</code>, let’s fix that:</p><div><div><pre><code><span>Observable</span><span>.</span><span>fromEvent</span> <span>=</span> <span>(</span><span>element</span><span>,</span> <span>name</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>return</span> <span>new</span> <span>Observable</span><span>(</span><span>observer</span> <span>=&gt;</span> <span>{</span>\n    <span>element</span><span>.</span><span>addEventListener</span><span>(</span>\n      <span>name</span><span>,</span>\n      <span>event</span> <span>=&gt;</span> <span>{</span>\n        <span>observer</span><span>.</span><span>next</span><span>(</span><span>event</span><span>);</span>\n      <span>},</span>\n      <span>false</span>\n    <span>);</span>\n  <span>});</span>\n<span>};</span>\n</code></pre></div></div><p>As we know, Observables need a “tear down” function which is called when the Observable is destroyed, in our case we’ll remove the event:</p><div><div><pre><code><span>Observable</span><span>.</span><span>fromEvent</span> <span>=</span> <span>(</span><span>element</span><span>,</span> <span>name</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>return</span> <span>new</span> <span>Observable</span><span>(</span><span>observer</span> <span>=&gt;</span> <span>{</span>\n    <span>const</span> <span>callback</span> <span>=</span> <span>event</span> <span>=&gt;</span> <span>observer</span><span>.</span><span>next</span><span>(</span><span>event</span><span>);</span>\n    <span>element</span><span>.</span><span>addEventListener</span><span>(</span><span>name</span><span>,</span> <span>callback</span><span>,</span> <span>false</span><span>);</span>\n    <span>return</span> <span>()</span> <span>=&gt;</span> <span>element</span><span>.</span><span>removeEventListener</span><span>(</span><span>name</span><span>,</span> <span>callback</span><span>,</span> <span>false</span><span>);</span>\n  <span>});</span>\n<span>};</span>\n</code></pre></div></div><p>We’ve not called&nbsp;<code>.complete()</code>&nbsp;because this Observable is dealing with DOM APIs and events, so technically they’re infinitely available.</p><p>Let’s try it out! Here’s the full code of what we’ve done:</p><div><div><pre><code><span>const</span> <span>node</span> <span>=</span> <span>document</span><span>.</span><span>querySelector</span><span>(</span><span>'input'</span><span>);</span>\n<span>const</span> <span>p</span> <span>=</span> <span>document</span><span>.</span><span>querySelector</span><span>(</span><span>'p'</span><span>);</span>\n\n<span>function</span> <span>Observable</span><span>(</span><span>subscribe</span><span>)</span> <span>{</span>\n  <span>this</span><span>.</span><span>subscribe</span> <span>=</span> <span>subscribe</span><span>;</span>\n<span>}</span>\n\n<span>Observable</span><span>.</span><span>fromEvent</span> <span>=</span> <span>(</span><span>element</span><span>,</span> <span>name</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>return</span> <span>new</span> <span>Observable</span><span>(</span><span>observer</span> <span>=&gt;</span> <span>{</span>\n    <span>const</span> <span>callback</span> <span>=</span> <span>event</span> <span>=&gt;</span> <span>observer</span><span>.</span><span>next</span><span>(</span><span>event</span><span>);</span>\n    <span>element</span><span>.</span><span>addEventListener</span><span>(</span><span>name</span><span>,</span> <span>callback</span><span>,</span> <span>false</span><span>);</span>\n    <span>return</span> <span>()</span> <span>=&gt;</span> <span>element</span><span>.</span><span>removeEventListener</span><span>(</span><span>name</span><span>,</span> <span>callback</span><span>,</span> <span>false</span><span>);</span>\n  <span>});</span>\n<span>};</span>\n\n<span>const</span> <span>input$</span> <span>=</span> <span>Observable</span><span>.</span><span>fromEvent</span><span>(</span><span>node</span><span>,</span> <span>'input'</span><span>);</span>\n\n<span>const</span> <span>unsubscribe</span> <span>=</span> <span>input$</span><span>.</span><span>subscribe</span><span>({</span>\n  <span>next</span><span>:</span> <span>event</span> <span>=&gt;</span> <span>{</span>\n    <span>p</span><span>.</span><span>innerHTML</span> <span>=</span> <span>event</span><span>.</span><span>target</span><span>.</span><span>value</span><span>;</span>\n  <span>},</span>\n<span>});</span>\n\n<span>// automatically unsub after 5s</span>\n<span>setTimeout</span><span>(</span><span>unsubscribe</span><span>,</span> <span>5000</span><span>);</span>\n</code></pre></div></div><p>Live example (type, then watch):</p><iframe width=\"100%\" height=\"300\" src=\"https://jsfiddle.net/toddmotto/3zgv7q2g/embedded/result,js,html\" allowfullscreen=\"allowfullscreen\" frameborder=\"0\"></iframe><span></span><h3><a href=\"https://toddmotto.com/rxjs-observables-observers-operators#building-our-own-operator\"><span><i></i></span>Building our own operator</a></h3><p>Building our own operator should be a little easier now we understand the concepts behind an Observable and observer. On our&nbsp;<code>Observable</code>&nbsp;object, we’ll add a new prototype method:</p><div><div><pre><code><span>Observable</span><span>.</span><span>prototype</span><span>.</span><span>map</span> <span>=</span> <span>function</span><span>(</span><span>mapFn</span><span>)</span> <span>{};</span>\n</code></pre></div></div><p>This method will be used as such, pretty much like&nbsp;<code>Array.prototype.map</code>&nbsp;in JavaScript but for any value:</p><div><div><pre><code><span>const</span> <span>input$</span> <span>=</span> <span>Observable</span><span>.</span><span>fromEvent</span><span>(</span><span>node</span><span>,</span> <span>'input'</span><span>).</span><span>map</span><span>(</span>\n  <span>event</span> <span>=&gt;</span> <span>event</span><span>.</span><span>target</span><span>.</span><span>value</span>\n<span>);</span>\n</code></pre></div></div><p>So we need to take the callback function and invoke it, which in turn will return our desired data. Before we can do this, we need the latest value in the&nbsp;<em>stream</em>.</p><p>Here comes the clever part, we need to gain access to the instance of the Observable that invoked our&nbsp;<code>.map()</code>&nbsp;operator. Because it’s on the prototype we can do exactly that:</p><div><div><pre><code><span>Observable</span><span>.</span><span>prototype</span><span>.</span><span>map</span> <span>=</span> <span>function</span><span>(</span><span>mapFn</span><span>)</span> <span>{</span>\n  <span>const</span> <span>input</span> <span>=</span> <span>this</span><span>;</span>\n<span>};</span>\n</code></pre></div></div><p>Ready for more funk? Now we subscribe inside a returned Observable:</p><div><div><pre><code><span>Observable</span><span>.</span><span>prototype</span><span>.</span><span>map</span> <span>=</span> <span>function</span><span>(</span><span>mapFn</span><span>)</span> <span>{</span>\n  <span>const</span> <span>input</span> <span>=</span> <span>this</span><span>;</span>\n  <span>return</span> <span>new</span> <span>Observable</span><span>(</span><span>observer</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>input</span><span>.</span><span>subscribe</span><span>();</span>\n  <span>});</span>\n<span>};</span>\n</code></pre></div></div><blockquote><p>We are&nbsp;<em>returning</em>&nbsp;the&nbsp;<code>input.subscribe()</code>&nbsp;because when we unsubscribe, the unsubscriptions (is that a word?) will flow up the chain, unsubscribing from each Observable.</p></blockquote><p>This subscription will allow us to be passed the previous value from our&nbsp;<code>Observable.fromEvent</code>, because it returns a new Observable with a&nbsp;<code>subscribe</code>&nbsp;property in the constructor, we can simply subscribe to any updates it makes! Let’s finish this off by invoking our&nbsp;<code>mapFn()</code>&nbsp;passed through map:</p><div><div><pre><code><span>Observable</span><span>.</span><span>prototype</span><span>.</span><span>map</span> <span>=</span> <span>function</span><span>(</span><span>mapFn</span><span>)</span> <span>{</span>\n  <span>const</span> <span>input</span> <span>=</span> <span>this</span><span>;</span>\n  <span>return</span> <span>new</span> <span>Observable</span><span>(</span><span>observer</span> <span>=&gt;</span> <span>{</span>\n    <span>return</span> <span>input</span><span>.</span><span>subscribe</span><span>({</span>\n      <span>next</span><span>:</span> <span>value</span> <span>=&gt;</span> <span>observer</span><span>.</span><span>next</span><span>(</span><span>mapFn</span><span>(</span><span>value</span><span>)),</span>\n      <span>error</span><span>:</span> <span>err</span> <span>=&gt;</span> <span>observer</span><span>.</span><span>error</span><span>(</span><span>err</span><span>),</span>\n      <span>complete</span><span>:</span> <span>()</span> <span>=&gt;</span> <span>observer</span><span>.</span><span>complete</span><span>(),</span>\n    <span>});</span>\n  <span>});</span>\n<span>};</span>\n</code></pre></div></div><p>Now we can chain it!</p><div><div><pre><code><span>const</span> <span>input$</span> <span>=</span> <span>Observable</span><span>.</span><span>fromEvent</span><span>(</span><span>node</span><span>,</span> <span>'input'</span><span>).</span><span>map</span><span>(</span>\n  <span>event</span> <span>=&gt;</span> <span>event</span><span>.</span><span>target</span><span>.</span><span>value</span>\n<span>);</span>\n\n<span>input$</span><span>.</span><span>subscribe</span><span>({</span>\n  <span>next</span><span>:</span> <span>value</span> <span>=&gt;</span> <span>{</span>\n    <span>p</span><span>.</span><span>innerHTML</span> <span>=</span> <span>value</span><span>;</span>\n  <span>},</span>\n<span>});</span>\n</code></pre></div></div><p>Notice how the final&nbsp;<code>.subscribe()</code>&nbsp;block is passed only the&nbsp;<code>value</code>&nbsp;and not the&nbsp;<code>Event</code>&nbsp;object like before? You’ve successfully created an Observable stream.</p><p>Try it again:</p><iframe width=\"100%\" height=\"300\" src=\"https://jsfiddle.net/toddmotto/0rpkchm8/embedded/result,js,html\" allowfullscreen=\"allowfullscreen\" frameborder=\"0\"></iframe><span></span><p>Hopefully this post was good fun for you :)</p>","filePath":"pages/RxJs/.md","_id":"LXMRB5Q7zS5YPks6"}
{"date":"2018-11-21T16:06:43.895Z","title":"Build a React To-Do App with React Hooks (No Class Components)","sourceUrl":"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components","path":"React/","category":"React","tags":["React"," Hooks"],"author":"Sarah Jorgenson","excerpt":"","dateCreated":1542816109116,"coverImage":"","type":"Post","frontmatter":"---\npath: 'React/'\ndate: 'Wed Nov 21 2018 21:36:43 GMT+0530 (India Standard Time)'\ntitle: 'Build a React To-Do App with React Hooks (No Class Components)'\ntags: ['React','Hooks']\ncategory: 'React'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Yes, a to-do app, seems like something we’ve all done in the past. The great thing about a to-do app is that it covers all 4 aspects of CRUD; Create, Read, Update, Delete. As a developer, we need to know CRUD and a to-do app is the best way to start that learning or refresh some of the things we may be a little rusty on.</p><p><a href=\"https://reactjs.org/\">React</a>&nbsp;is the frontend JavaScript library we are going to be using today. Whether you are new to React or are an avid React user, we can all agree on one thing:&nbsp;<span>React is pretty great</span>.</p><p>We've already done a&nbsp;<a href=\"https://scotch.io/tutorials/create-a-simple-to-do-app-with-react\">React To-Do App</a>&nbsp;here at Scotch, but that was with Class components. Today we will&nbsp;<span>have no Class components</span>&nbsp;by integrating&nbsp;<a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks\">React Hooks</a>, React’s newest&nbsp;<a href=\"https://scotch.io/bar-talk/whats-new-in-react-166\">upgrade feature</a>. Let’s get started.</p><div><h3>Table of Contents</h3><ul><li><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-react-hooks\">React Hooks</a></li><li><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-starting-a-react-app\">Starting a React App</a></li><li><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-styling-your-application\">Styling Your Application</a></li><li><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-reading-a-list-of-items-crud-\">Reading a List of Items. cRud.</a></li><li><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-creating-new-items-to-the-to-do-list-crud\">Creating New Items to the To-Do List - Crud</a></li><li><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-updating-items-in-the-to-do-list-to-be-completed-crud\">Updating Items in the To-Do List to be Completed - crUd</a></li><li><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-deleting-a-to-do-item-crud\">Deleting a To-Do Item - cruD</a></li><li><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-the-final-product\">The Final Product</a></li><li><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-what-have-we-learned-\">What have we learned?</a></li></ul></div><p></p><div><iframe src=\"https://codesandbox.io/embed/oj3qm2zq06\" allowfullscreen=\"\"></iframe></div><p></p><div><div></div></div><h2><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-react-hooks\">React Hooks</a></h2><p>React is always improving and growing. The latest update is React 16.7, so new it’s in alpha stages. In this upgrade, we are given the power of React Hooks.</p><blockquote><p>React Hooks allow for functional components to have a state and utilize lifecycle methods.</p></blockquote><p>No longer do we need to rely on just class components for that functionality.</p><p>You can learn all about&nbsp;<a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks\">React Hooks here</a>&nbsp;or visit&nbsp;<a href=\"https://reactjs.org/docs/hooks-intro.html\">React’s docs on Hooks here</a>.</p><h2><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-starting-a-react-app\">Starting a React App</a></h2><p>Navigate to the place you would like your new application to be located and type:</p><pre data-title=\"bash\"><code>npx create-react-app react-to-do</code></pre><p>*<em>Note: *</em>Running&nbsp;<code>npx</code>before the command allows for it to be installed if it is not already installed globally on your machine.</p><p>Sit back and relax, React is taking care of the initial build for your new application.</p><p>Once it is done, you will need to navigate into the project:</p><pre data-title=\"bash\"><code><span>cd</span> react-to-do</code></pre><p>and then to run the project:</p><pre data-title=\"bash\"><code><span>npm</span> run start</code></pre><p>and navigate to&nbsp;<code>http://localhost:3000/</code>&nbsp;to see the spinning React logo in your browser.</p><h3>React 16.7 currently in alpha</h3><p>At the time of this writing, React Hooks are in React 16.7, but React 16.7 is in alpha currently. You'll need to install that specifically until it comes out of alpha.</p><pre data-title=\"bash\"><code><span>npm</span> <span>install</span> -S react@16.7.0-alpha.2 react-dom@16.7.0-alpha.2</code></pre><h3>Using CodeSandbox</h3><p>CodeSandbox is a great tool to build applications in your browser without having to open up your CLI. Try building this online. Also, be sure to remove the React 16.6 dependencies and add React 16.7.</p><div><div></div></div><h2><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-styling-your-application\">Styling Your Application</a></h2><p>Jump into your src/App.css file and add in the three classes we will be using throughout our app. Styling won't be the focus of this app, so we'll keep this short and sweet.</p><h4>src/App.css</h4><pre data-title=\"css\"><code><span><span>.app</span> </span><span>{</span>\n  <span>background</span><span>:</span> <span>#209cee</span><span>;</span>\n  <span>padding</span><span>:</span> <span>30</span>px<span>;</span>\n  <span>height</span><span>:</span> <span>100</span>vh<span>;</span>\n<span>}</span>\n\n<span><span>.todo-list</span> </span><span>{</span>\n  <span>background</span><span>:</span> <span>#e8e8e8</span><span>;</span>\n  <span>border-radius</span><span>:</span> <span>4</span>px<span>;</span>\n  <span>padding</span><span>:</span> <span>5</span>px<span>;</span>\n  <span>max-width</span><span>:</span> <span>400</span>px<span>;</span>\n<span>}</span>\n\n<span><span>.todo</span> </span><span>{</span>\n  <span>background</span><span>:</span> <span>#fff</span><span>;</span>\n  <span>box-shadow</span><span>:</span> <span>1</span>px <span>1</span>px <span>1</span>px <span>rgba</span><span>(</span><span>0</span>, <span>0</span>, <span>0</span>, <span>0.15</span><span>)</span><span>;</span>\n  <span>padding</span><span>:</span> <span>3</span>px <span>10</span>px<span>;</span>\n  <span>font-size</span><span>:</span> <span>12</span>px<span>;</span>\n  <span>margin-bottom</span><span>:</span> <span>6</span>px<span>;</span>\n  <span>border-radius</span><span>:</span> <span>3</span>px<span>;</span>\n  <span>display</span><span>:</span> flex<span>;</span>\n  <span>align-items</span><span>:</span> center<span>;</span>\n  <span>justify-content</span><span>:</span> space-between<span>;</span>\n<span>}</span></code></pre><h2><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-reading-a-list-of-items-crud-\">Reading a List of Items. cRud.</a></h2><p>With your application running and the styling ready to be used, let’s start on the Read part of CRUD. We’ll want to make a list of things, just so we can Read/view the list.</p><h3>Adding in State</h3><p>Go into your&nbsp;<code>src/App.js</code>&nbsp;file and let’s add a state to our component. We are going to be using React Hooks so state will look a little different than what you're used to in classes.</p><h4>src/App.js</h4><pre data-title=\"javascript\"><code><span>function</span> <span>App</span><span>(</span><span>)</span> <span>{</span>\n  <span>const</span> <span>[</span>todos<span>,</span> setTodos<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>[</span>\n    <span>{</span> text<span>:</span> <span>\"Learn about React\"</span> <span>}</span><span>,</span>\n    <span>{</span> text<span>:</span> <span>\"Meet friend for lunch\"</span> <span>}</span><span>,</span>\n    <span>{</span> text<span>:</span> <span>\"Build really cool todo app\"</span> <span>}</span>\n  <span>]</span><span>)</span><span>;</span>\n\n  <span>// we'll render our todos here ...</span>\n  <span>// return &lt;div&gt;&lt;/div&gt;</span>\n<span>}</span></code></pre><p>The component, as we can see, is a functional component. In past versions of React, function components were unable to handle state, but now, by using Hooks, they can.</p><ul><li>The first parameter,&nbsp;<code>todos</code>&nbsp;is what we are going to name our state.</li><li>The second parameter,&nbsp;<code>setTodos</code>&nbsp;is what we are going to use to set the state.</li></ul><p>We've got a writeup on array destructuring if you want to know more info about that&nbsp;<code>[todos, setTodos]</code>&nbsp;syntax&nbsp;<a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-is-this-usestate-syntax-\">here</a>.</p><p>The hook of&nbsp;<code>useState</code>&nbsp;is what React uses to \"hook\" into the state or lifecycle of the component. We then create an array of objects and we have the beginnings of our state.</p><h3>Comparing to a Class Component</h3><p>Let's take a quick detour and see how this would've done with classes:</p><pre data-title=\"javascript\"><code><span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  state <span>=</span> <span>{</span>\n    todos<span>:</span> <span>[</span>\n      <span>{</span> text<span>:</span> <span>\"Learn about React\"</span> <span>}</span><span>,</span>\n      <span>{</span> text<span>:</span> <span>\"Meet friend for lunch\"</span> <span>}</span><span>,</span>\n      <span>{</span> text<span>:</span> <span>\"Build really cool todo app\"</span> <span>}</span>\n    <span>]</span>\n  <span>}</span>\n\n  <span>setTodos</span> <span>=</span> todos <span>=&gt;</span> <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span> todos <span>}</span><span>)</span><span>;</span>\n\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span>return</span> <span>&lt;</span>div<span>&gt;</span><span>&lt;</span><span>/</span>div<span>&gt;</span>\n  <span>}</span>\n\n<span>}</span></code></pre><p>A lot more typing. React Hooks let's us make that really clean! We'll continue with our functional component version from above.</p><h3>Our \"Todo\" Component</h3><p>We will want to create a component that we can use later on in the return of the main App component. We will call that&nbsp;<code>Todo</code>&nbsp;and it will pass in the (<code>todo</code>) and show the “text” part of the todo (<code>todo.text</code>), like so:</p><img data-src=\"https://track.mailerlite.com/webforms/o/1112154/c7r3j6?vaa4d608450783acdc64d5338ff94f6d5\" width=\"1\" height=\"1\" border=\"0\" src=\"https://track.mailerlite.com/webforms/o/1112154/c7r3j6?vaa4d608450783acdc64d5338ff94f6d5\" data-was-processed=\"true\"><pre data-title=\"javascript\"><code><span>const</span> <span>Todo</span> <span>=</span> <span>(</span><span>{</span> todo <span>}</span><span>)</span> <span>=&gt;</span> <span>&lt;</span>div className<span>=</span><span>\"todo\"</span><span>&gt;</span><span>{</span>todo<span>.</span>text<span>}</span><span>&lt;</span><span>/</span>div<span>&gt;</span><span>;</span></code></pre><p>Let’s see how we will use that in our&nbsp;<code>App</code>&nbsp;component.</p><h3>Using Our Todo Variable to Get a List Returned</h3><p>Go down to the&nbsp;<code>return</code>&nbsp;part of the&nbsp;<code>App</code>&nbsp;component and remove almost everything. We want to empty out that return part especially so that the spinning logo we saw earlier when we navigated to&nbsp;<code>http://localhost:3000</code>, goes away and we have our list being displayed on the page.</p><p>By using the&nbsp;<a href=\"https://www.w3schools.com/jsref/jsref_map.asp\">JavaScript method,&nbsp;<code>map()</code></a>, we are able to create a new array of items by mapping over the&nbsp;<code>todo</code>&nbsp;items from state and displaying them by index.</p><p>Let’s create a pretty list of items:</p><h4>src/App.js</h4><pre data-title=\"javascript\"><code>  <span>return</span> <span>(</span>\n    <span>&lt;</span>div className<span>=</span><span>\"app\"</span><span>&gt;</span>\n      <span>&lt;</span>div className<span>=</span><span>\"todo-list\"</span><span>&gt;</span>\n        <span>{</span>todos<span>.</span><span>map</span><span>(</span><span>(</span>todo<span>,</span> index<span>)</span> <span>=&gt;</span> <span>(</span>\n          <span>&lt;</span>Todo\n            key<span>=</span><span>{</span>index<span>}</span>\n            index<span>=</span><span>{</span>index<span>}</span>\n            todo<span>=</span><span>{</span>todo<span>}</span>\n          <span>/</span><span>&gt;</span>\n        <span>)</span><span>)</span><span>}</span>\n      <span>&lt;</span><span>/</span>div<span>&gt;</span>\n    <span>&lt;</span><span>/</span>div<span>&gt;</span>\n  <span>)</span><span>;</span></code></pre><p>Navigate to your browser and you should see something like this:</p><p><img alt=\"\" data-src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1542086626/m74y4gkymoynetw2wqgz.png\" src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1542086626/m74y4gkymoynetw2wqgz.png\" data-was-processed=\"true\"></p><h2><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-creating-new-items-to-the-to-do-list-crud\">Creating New Items to the To-Do List - Crud</a></h2><p>Want to create a new item to the list? What if we forgot to add something to our to-do list and don’t want to forget that thing? Let’s give our application the power to Create a new item for our to-do app.</p><p>While in the&nbsp;<code>src/App.js</code>&nbsp;file, we are going to want to add a couple of things. At the top we are going to add another component, we’ll call it&nbsp;<code>TodoForm</code>. In this component we want it to:</p><ul><li>Start with an empty state for an input field.</li><li>Be able to update the form by setting the state.</li><li>Handle the submit.</li></ul><h3>Setting our Empty State for the Form Input</h3><p>Remember, we are using React Hooks so state is going to be a little different. To set our state we are going to want to write it like so:</p><pre data-title=\"javascript\"><code><span>const</span> <span>[</span>value<span>,</span> setValue<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>\"\"</span><span>)</span><span>;</span></code></pre><p>The first is the \"value\" and the second is how we are going to be setting the state. The state starts off empty and as we add things to our state, it will add it to our list of to-do items.</p><p>We will want to add in a&nbsp;<code>handleSubmit</code>&nbsp;variable that can handle our&nbsp;<code>addTodo</code>&nbsp;function (we will make that function soon) and add the item to the list. If nothing is in the input box and the user presses “enter”, we want it to not do anything (i.e., not add in an empty tile to the list).</p><p>Adding that functionality into a form that has an input box, we should have our code look like this:</p><h4>src/App.js</h4><pre data-title=\"javascript\"><code><span>function</span> <span>TodoForm</span><span>(</span><span>{</span> addTodo <span>}</span><span>)</span> <span>{</span>\n  <span>const</span> <span>[</span>value<span>,</span> setValue<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>\"\"</span><span>)</span><span>;</span>\n\n  <span>const</span> <span>handleSubmit</span> <span>=</span> e <span>=&gt;</span> <span>{</span>\n    e<span>.</span><span>preventDefault</span><span>(</span><span>)</span><span>;</span>\n    <span>if</span> <span>(</span><span>!</span>value<span>)</span> <span>return</span><span>;</span>\n    <span>addTodo</span><span>(</span>value<span>)</span><span>;</span>\n    <span>setValue</span><span>(</span><span>\"\"</span><span>)</span><span>;</span>\n  <span>}</span><span>;</span>\n\n  <span>return</span> <span>(</span>\n    <span>&lt;</span>form onSubmit<span>=</span><span>{</span>handleSubmit<span>}</span><span>&gt;</span>\n      <span>&lt;</span>input\n        type<span>=</span><span>\"text\"</span>\n        className<span>=</span><span>\"input\"</span>\n        value<span>=</span><span>{</span>value<span>}</span>\n        onChange<span>=</span><span>{</span>e <span>=&gt;</span> <span>setValue</span><span>(</span>e<span>.</span>target<span>.</span>value<span>)</span><span>}</span>\n      <span>/</span><span>&gt;</span>\n    <span>&lt;</span><span>/</span>form<span>&gt;</span>\n  <span>)</span><span>;</span>\n<span>}</span></code></pre><p>The&nbsp;<code>addTodo</code>&nbsp;function I told you about earlier? Let’s go ahead and build that now. Staying within&nbsp;<code>App.js</code>, under the state of the&nbsp;<code>App</code>&nbsp;component, the function should be able to grab the existing list of items, add on the new item, and display that new list.</p><h4>src/App.js</h4><pre data-title=\"javascript\"><code><span>const</span> <span>addTodo</span> <span>=</span> text <span>=&gt;</span> <span>{</span>\n    <span>const</span> newTodos <span>=</span> <span>[</span><span>...</span>todos<span>,</span> <span>{</span> text <span>}</span><span>]</span><span>;</span>\n    <span>setTodos</span><span>(</span>newTodos<span>)</span><span>;</span>\n  <span>}</span><span>;</span></code></pre><p>Notice the lack of&nbsp;<code>this.state.</code>? With the new React Hooks, we have no more need to use that. Can you use it? Sure, of course. But the new Hooks allow for less typing, more efficiency, and understand that&nbsp;<code>this.state.</code>&nbsp;is going to be implied in certain places.</p><p>See that&nbsp;<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax\">spread operator</a>? The three dots before the&nbsp;<code>todos</code>, that is essentially \"copying\" the list for us so that we are able to add on the new to-do item. Then using our keyword that we set earlier, we will set the state with&nbsp;<code>setTodos</code>.</p><p>By using the&nbsp;<code>TodoForm</code>&nbsp;down in the return of the&nbsp;<code>App</code>&nbsp;component, we will see that input box pop up now. The entire&nbsp;<code>src/App.js</code>&nbsp;file should look like this so far:</p><h4>src/App.js</h4><pre data-title=\"javascript\"><code><span>import</span> React<span>,</span> <span>{</span> useState <span>}</span> <span>from</span> <span>\"react\"</span><span>;</span>\n<span>import</span> <span>\"./App.css\"</span><span>;</span>\n\n<span>const</span> <span>Todo</span> <span>=</span> <span>(</span><span>{</span> todo <span>}</span><span>)</span> <span>=&gt;</span> <span>&lt;</span>div className<span>=</span><span>\"todo\"</span><span>&gt;</span><span>{</span>todo<span>.</span>text<span>}</span><span>&lt;</span><span>/</span>div<span>&gt;</span><span>;</span>\n\n<span>function</span> <span>TodoForm</span><span>(</span><span>{</span> addTodo <span>}</span><span>)</span> <span>{</span>\n  <span>const</span> <span>[</span>value<span>,</span> setValue<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>\"\"</span><span>)</span><span>;</span>\n\n  <span>const</span> <span>handleSubmit</span> <span>=</span> e <span>=&gt;</span> <span>{</span>\n    e<span>.</span><span>preventDefault</span><span>(</span><span>)</span><span>;</span>\n    <span>if</span> <span>(</span><span>!</span>value<span>)</span> <span>return</span><span>;</span>\n    <span>addTodo</span><span>(</span>value<span>)</span><span>;</span>\n    <span>setValue</span><span>(</span><span>\"\"</span><span>)</span><span>;</span>\n  <span>}</span><span>;</span>\n\n  <span>return</span> <span>(</span>\n    <span>&lt;</span>form onSubmit<span>=</span><span>{</span>handleSubmit<span>}</span><span>&gt;</span>\n      <span>&lt;</span>input\n        type<span>=</span><span>\"text\"</span>\n        className<span>=</span><span>\"input\"</span>\n        value<span>=</span><span>{</span>value<span>}</span>\n        onChange<span>=</span><span>{</span>e <span>=&gt;</span> <span>setValue</span><span>(</span>e<span>.</span>target<span>.</span>value<span>)</span><span>}</span>\n      <span>/</span><span>&gt;</span>\n    <span>&lt;</span><span>/</span>form<span>&gt;</span>\n  <span>)</span><span>;</span>\n<span>}</span>\n\n<span>function</span> <span>App</span><span>(</span><span>)</span> <span>{</span>\n  <span>const</span> <span>[</span>todos<span>,</span> setTodos<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>[</span>\n    <span>{</span> text<span>:</span> <span>\"Learn about React\"</span> <span>}</span><span>,</span>\n    <span>{</span> text<span>:</span> <span>\"Meet friend for lunch\"</span> <span>}</span><span>,</span>\n    <span>{</span> text<span>:</span> <span>\"Build really cool todo app\"</span> <span>}</span>\n  <span>]</span><span>)</span><span>;</span>\n\n  <span>const</span> <span>addTodo</span> <span>=</span> text <span>=&gt;</span> <span>{</span>\n    <span>const</span> newTodos <span>=</span> <span>[</span><span>...</span>todos<span>,</span> <span>{</span> text <span>}</span><span>]</span><span>;</span>\n    <span>setTodos</span><span>(</span>newTodos<span>)</span><span>;</span>\n  <span>}</span><span>;</span>\n\n  <span>return</span> <span>(</span>\n    <span>&lt;</span>div className<span>=</span><span>\"app\"</span><span>&gt;</span>\n      <span>&lt;</span>div className<span>=</span><span>\"todo-list\"</span><span>&gt;</span>\n        <span>{</span>todos<span>.</span><span>map</span><span>(</span><span>(</span>todo<span>,</span> index<span>)</span> <span>=&gt;</span> <span>(</span>\n          <span>&lt;</span>Todo\n            key<span>=</span><span>{</span>index<span>}</span>\n            index<span>=</span><span>{</span>index<span>}</span>\n            todo<span>=</span><span>{</span>todo<span>}</span>\n          <span>/</span><span>&gt;</span>\n        <span>)</span><span>)</span><span>}</span>\n        <span>&lt;</span>TodoForm addTodo<span>=</span><span>{</span>addTodo<span>}</span> <span>/</span><span>&gt;</span>\n      <span>&lt;</span><span>/</span>div<span>&gt;</span>\n    <span>&lt;</span><span>/</span>div<span>&gt;</span>\n  <span>)</span><span>;</span>\n<span>}</span>\n  <span>export</span> <span>default</span> App<span>;</span></code></pre><p>Go to your browser and play around. You can now add in a to-do item to your list!</p><p><img alt=\"\" data-src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1542087510/ojhe7fxwm4ejjyn2jlz2.png\" src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1542087510/ojhe7fxwm4ejjyn2jlz2.png\" data-was-processed=\"true\"></p><h2><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-updating-items-in-the-to-do-list-to-be-completed-crud\">Updating Items in the To-Do List to be Completed - crUd</a></h2><p>How would we want to update our to-do application? Maybe let’s have the functionality of being able to cross off an item. Let’s get started on that code!</p><h3>Updating our State</h3><p>Our state in our&nbsp;<code>App</code>&nbsp;component needs a little extra to it for the \"Completed\" status to be able to change. We will be adding in another key/value pair to our list of objects. By adding in an \"isCompleted: false\" value, we set that to false to begin with and will, when prompted, change that to true.</p><h4>src/App.js</h4><pre data-title=\"javascript\"><code><span>const</span> <span>[</span>todos<span>,</span> setTodos<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>[</span>\n     <span>{</span>\n       text<span>:</span> <span>\"Learn about React\"</span><span>,</span>\n       isCompleted<span>:</span> <span>false</span>\n     <span>}</span><span>,</span>\n     <span>{</span>\n       text<span>:</span> <span>\"Meet friend for lunch\"</span><span>,</span>\n       isCompleted<span>:</span> <span>false</span>\n     <span>}</span><span>,</span>\n     <span>{</span>\n       text<span>:</span> <span>\"Build really cool todo app\"</span><span>,</span>\n       isCompleted<span>:</span> <span>false</span>\n     <span>}</span>\n   <span>]</span><span>)</span><span>;</span></code></pre><p>We will need a function like the&nbsp;<code>addTodo</code>&nbsp;function but this one will be able to “complete” an item. We will want to do some similar things that we did in the&nbsp;<code>addTodo</code>&nbsp;like using the spread operator to grab the current list of items. In this function, we will be changing the&nbsp;<code>isCompleted</code>&nbsp;status to&nbsp;<code>true</code>&nbsp;so that it knows it has been completed. It will then update the state and set the state to the&nbsp;<code>newTodos</code>.</p><h4>src/App.js</h4><pre data-title=\"javascript\"><code><span>const</span> <span>completeTodo</span> <span>=</span> index <span>=&gt;</span> <span>{</span>\n     <span>const</span> newTodos <span>=</span> <span>[</span><span>...</span>todos<span>]</span><span>;</span>\n     newTodos<span>[</span>index<span>]</span><span>.</span>isCompleted <span>=</span> <span>true</span><span>;</span>\n     <span>setTodos</span><span>(</span>newTodos<span>)</span><span>;</span>\n   <span>}</span><span>;</span></code></pre><p>By using&nbsp;<code>completeTodo</code>&nbsp;in the&nbsp;<code>Todo</code>&nbsp;function, we are going to be able to fire off that functionality. When the “Complete” button is clicked, it will add in the&nbsp;<code>textDecoration</code>styling and cross-out the item. We are using a&nbsp;<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator\">ternary operator</a>, a feature within ES6 JavaScript, which is a simpler way of doing an&nbsp;<code>if/else</code>&nbsp;statement. This is our way of completing an item on the list and “updating” the list. The code should look as follows:</p><h4>src/App.js</h4><pre data-title=\"javascript\"><code><span>function</span> <span>Todo</span><span>(</span><span>{</span> todo<span>,</span> index<span>,</span> completeTodo <span>}</span><span>)</span> <span>{</span>\n  <span>return</span> <span>(</span>\n    <span>&lt;</span>div\n      className<span>=</span><span>\"todo\"</span>\n      style<span>=</span><span>{</span><span>{</span> textDecoration<span>:</span> todo<span>.</span>isCompleted <span>?</span> <span>\"line-through\"</span> <span>:</span> <span>\"\"</span> <span>}</span><span>}</span>\n    <span>&gt;</span>\n      <span>{</span>todo<span>.</span>text<span>}</span>\n\n      <span>&lt;</span>div<span>&gt;</span>\n        <span>&lt;</span>button onClick<span>=</span><span>{</span><span>(</span><span>)</span> <span>=&gt;</span> <span>completeTodo</span><span>(</span>index<span>)</span><span>}</span><span>&gt;</span>Complete<span>&lt;</span><span>/</span>button<span>&gt;</span>\n      <span>&lt;</span><span>/</span>div<span>&gt;</span>\n    <span>&lt;</span><span>/</span>div<span>&gt;</span>\n  <span>)</span><span>;</span>\n<span>}</span></code></pre><p>Dive down to the&nbsp;<code>return</code>&nbsp;of the&nbsp;<code>App</code>&nbsp;component and we’ll add in the following line:</p><pre data-title=\"javascript\"><code>completeTodo<span>=</span><span>{</span>completeTodo<span>}</span></code></pre><p>to look like this in the code:</p><h4>src/App.js</h4><pre data-title=\"javascript\"><code><span>&lt;</span>div className<span>=</span><span>\"card-content\"</span><span>&gt;</span>\n    <span>{</span>todos<span>.</span><span>map</span><span>(</span><span>(</span>todo<span>,</span> index<span>)</span> <span>=&gt;</span> <span>(</span>\n        <span>&lt;</span>Todo\n            key<span>=</span><span>{</span>index<span>}</span>\n            index<span>=</span><span>{</span>index<span>}</span>\n            todo<span>=</span><span>{</span>todo<span>}</span>\n            completeTodo<span>=</span><span>{</span>completeTodo<span>}</span>\n        <span>/</span><span>&gt;</span>\n    <span>)</span><span>)</span><span>}</span>\n<span>&lt;</span><span>/</span>div<span>&gt;</span></code></pre><p>Returning to the browser, your to-do app should look something like this when a “Complete” button is clicked.</p><p><img alt=\"\" data-src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1542087957/btazhjbetjxi52eta99w.png\" src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1542087957/btazhjbetjxi52eta99w.png\" data-was-processed=\"true\"></p><p>Now we can read our list, add to our list, and update the completed status of each item. What’s left? Delete an item.</p><h2><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-deleting-a-to-do-item-crud\">Deleting a To-Do Item - cruD</a></h2><p>So you’ve completed an item on your to-do list, the day is over and you want to delete it from your list to be able to start over tomorrow. We are going to want to delete that item completely. Let’s see how we can get that going.</p><p>By adding just a couple lines, we will be able to add in the functionality of deleting an item.</p><p>We will go ahead and build the&nbsp;<code>removeTodo</code>&nbsp;function so that when we click on an “X” to delete an item, that will be fired off. That function will be located by the others underneath the state of the&nbsp;<code>App</code>&nbsp;component.</p><p>In this&nbsp;<code>removeTodo</code>&nbsp;function, we will again be using the spread operator but once we grab that current list, we will be \"<a href=\"https://www.w3schools.com/jsref/jsref_splice.asp\">splicing</a>\" the chosen index off of the array of items. Once that is removed, we will return the new state by setting it with&nbsp;<code>setTodos</code>&nbsp;to be&nbsp;<code>newTodos</code>.</p><h4>src/App.js</h4><pre data-title=\"javascript\"><code><span>const</span> <span>removeTodo</span> <span>=</span> index <span>=&gt;</span> <span>{</span>\n     <span>const</span> newTodos <span>=</span> <span>[</span><span>...</span>todos<span>]</span><span>;</span>\n     newTodos<span>.</span><span>splice</span><span>(</span>index<span>,</span> <span>1</span><span>)</span><span>;</span>\n     <span>setTodos</span><span>(</span>newTodos<span>)</span><span>;</span>\n   <span>}</span><span>;</span></code></pre><p>In your&nbsp;<code>Todo</code>&nbsp;function, you will want to add in this line:</p><pre data-title=\"javascript\"><code><span>&lt;</span>button onClick<span>=</span><span>{</span><span>(</span><span>)</span> <span>=&gt;</span> <span>removeTodo</span><span>(</span>index<span>)</span><span>}</span><span>&gt;</span>x<span>&lt;</span><span>/</span>button<span>&gt;</span></code></pre><p>like this:</p><h4>src/App.js</h4><pre data-title=\"javascript\"><code><span>function</span> <span>Todo</span><span>(</span><span>{</span> todo<span>,</span> index<span>,</span> completeTodo<span>,</span> removeTodo <span>}</span><span>)</span> <span>{</span>\n  <span>return</span> <span>(</span>\n    <span>&lt;</span>div\n      className<span>=</span><span>\"todo\"</span>\n      style<span>=</span><span>{</span><span>{</span> textDecoration<span>:</span> todo<span>.</span>isCompleted <span>?</span> <span>\"line-through\"</span> <span>:</span> <span>\"\"</span> <span>}</span><span>}</span>\n    <span>&gt;</span>\n      <span>{</span>todo<span>.</span>text<span>}</span>\n\n      <span>&lt;</span>div<span>&gt;</span>\n        <span>&lt;</span>button onClick<span>=</span><span>{</span><span>(</span><span>)</span> <span>=&gt;</span> <span>completeTodo</span><span>(</span>index<span>)</span><span>}</span><span>&gt;</span>Complete<span>&lt;</span><span>/</span>button<span>&gt;</span>\n        <span>&lt;</span>button onClick<span>=</span><span>{</span><span>(</span><span>)</span> <span>=&gt;</span> <span>removeTodo</span><span>(</span>index<span>)</span><span>}</span><span>&gt;</span>x<span>&lt;</span><span>/</span>button<span>&gt;</span>\n      <span>&lt;</span><span>/</span>div<span>&gt;</span>\n    <span>&lt;</span><span>/</span>div<span>&gt;</span>\n  <span>)</span><span>;</span>\n<span>}</span></code></pre><p>You’ll see as well that we are bringing in&nbsp;<code>removeTodo</code>&nbsp;at the top and then using it in the onClick of the “X”.</p><p>Adding in the&nbsp;<code>removeTodo</code>&nbsp;in the&nbsp;<code>Todo</code>&nbsp;part of the returning the&nbsp;<code>App</code>&nbsp;component, our “delete” will be fully functional. Add it in here:</p><h4>src/App.js</h4><pre data-title=\"javascript\"><code><span>&lt;</span>Todo\n    key<span>=</span><span>{</span>index<span>}</span>\n    index<span>=</span><span>{</span>index<span>}</span>\n    todo<span>=</span><span>{</span>todo<span>}</span>\n    completeTodo<span>=</span><span>{</span>completeTodo<span>}</span>\n    removeTodo<span>=</span><span>{</span>removeTodo<span>}</span>\n<span>/</span><span>&gt;</span></code></pre><p>With that added in, go to your browser and you’ll see a button with an \"X\" that when clicked, deletes the item completely.</p><p><img alt=\"\" data-src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1542088330/pbj08nirecdcn3gvldns.png\" src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1542088330/pbj08nirecdcn3gvldns.png\" data-was-processed=\"true\"></p><h2><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-the-final-product\">The Final Product</a></h2><p>The entire&nbsp;<code>src/App.js</code>&nbsp;file should look like this in the end:</p><h4>src/App.js</h4><pre data-title=\"javascript\"><code><span>import</span> React<span>,</span> <span>{</span> useState <span>}</span> <span>from</span> <span>\"react\"</span><span>;</span>\n<span>import</span> <span>\"./App.css\"</span><span>;</span>\n\n<span>function</span> <span>Todo</span><span>(</span><span>{</span> todo<span>,</span> index<span>,</span> completeTodo<span>,</span> removeTodo <span>}</span><span>)</span> <span>{</span>\n  <span>return</span> <span>(</span>\n    <span>&lt;</span>div\n      className<span>=</span><span>\"todo\"</span>\n      style<span>=</span><span>{</span><span>{</span> textDecoration<span>:</span> todo<span>.</span>isCompleted <span>?</span> <span>\"line-through\"</span> <span>:</span> <span>\"\"</span> <span>}</span><span>}</span>\n    <span>&gt;</span>\n      <span>{</span>todo<span>.</span>text<span>}</span>\n\n      <span>&lt;</span>div<span>&gt;</span>\n        <span>&lt;</span>button onClick<span>=</span><span>{</span><span>(</span><span>)</span> <span>=&gt;</span> <span>completeTodo</span><span>(</span>index<span>)</span><span>}</span><span>&gt;</span>Complete<span>&lt;</span><span>/</span>button<span>&gt;</span>\n        <span>&lt;</span>button onClick<span>=</span><span>{</span><span>(</span><span>)</span> <span>=&gt;</span> <span>removeTodo</span><span>(</span>index<span>)</span><span>}</span><span>&gt;</span>x<span>&lt;</span><span>/</span>button<span>&gt;</span>\n      <span>&lt;</span><span>/</span>div<span>&gt;</span>\n    <span>&lt;</span><span>/</span>div<span>&gt;</span>\n  <span>)</span><span>;</span>\n<span>}</span>\n\n<span>function</span> <span>TodoForm</span><span>(</span><span>{</span> addTodo <span>}</span><span>)</span> <span>{</span>\n  <span>const</span> <span>[</span>value<span>,</span> setValue<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>\"\"</span><span>)</span><span>;</span>\n\n  <span>const</span> <span>handleSubmit</span> <span>=</span> e <span>=&gt;</span> <span>{</span>\n    e<span>.</span><span>preventDefault</span><span>(</span><span>)</span><span>;</span>\n    <span>if</span> <span>(</span><span>!</span>value<span>)</span> <span>return</span><span>;</span>\n    <span>addTodo</span><span>(</span>value<span>)</span><span>;</span>\n    <span>setValue</span><span>(</span><span>\"\"</span><span>)</span><span>;</span>\n  <span>}</span><span>;</span>\n\n  <span>return</span> <span>(</span>\n    <span>&lt;</span>form onSubmit<span>=</span><span>{</span>handleSubmit<span>}</span><span>&gt;</span>\n      <span>&lt;</span>input\n        type<span>=</span><span>\"text\"</span>\n        className<span>=</span><span>\"input\"</span>\n        value<span>=</span><span>{</span>value<span>}</span>\n        onChange<span>=</span><span>{</span>e <span>=&gt;</span> <span>setValue</span><span>(</span>e<span>.</span>target<span>.</span>value<span>)</span><span>}</span>\n      <span>/</span><span>&gt;</span>\n    <span>&lt;</span><span>/</span>form<span>&gt;</span>\n  <span>)</span><span>;</span>\n<span>}</span>\n\n<span>function</span> <span>App</span><span>(</span><span>)</span> <span>{</span>\n  <span>const</span> <span>[</span>todos<span>,</span> setTodos<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>[</span>\n    <span>{</span>\n      text<span>:</span> <span>\"Learn about React\"</span><span>,</span>\n      isCompleted<span>:</span> <span>false</span>\n    <span>}</span><span>,</span>\n    <span>{</span>\n      text<span>:</span> <span>\"Meet friend for lunch\"</span><span>,</span>\n      isCompleted<span>:</span> <span>false</span>\n    <span>}</span><span>,</span>\n    <span>{</span>\n      text<span>:</span> <span>\"Build really cool todo app\"</span><span>,</span>\n      isCompleted<span>:</span> <span>false</span>\n    <span>}</span>\n  <span>]</span><span>)</span><span>;</span>\n\n  <span>const</span> <span>addTodo</span> <span>=</span> text <span>=&gt;</span> <span>{</span>\n    <span>const</span> newTodos <span>=</span> <span>[</span><span>...</span>todos<span>,</span> <span>{</span> text <span>}</span><span>]</span><span>;</span>\n    <span>setTodos</span><span>(</span>newTodos<span>)</span><span>;</span>\n  <span>}</span><span>;</span>\n\n  <span>const</span> <span>completeTodo</span> <span>=</span> index <span>=&gt;</span> <span>{</span>\n    <span>const</span> newTodos <span>=</span> <span>[</span><span>...</span>todos<span>]</span><span>;</span>\n    newTodos<span>[</span>index<span>]</span><span>.</span>isCompleted <span>=</span> <span>true</span><span>;</span>\n    <span>setTodos</span><span>(</span>newTodos<span>)</span><span>;</span>\n  <span>}</span><span>;</span>\n\n  <span>const</span> <span>removeTodo</span> <span>=</span> index <span>=&gt;</span> <span>{</span>\n    <span>const</span> newTodos <span>=</span> <span>[</span><span>...</span>todos<span>]</span><span>;</span>\n    newTodos<span>.</span><span>splice</span><span>(</span>index<span>,</span> <span>1</span><span>)</span><span>;</span>\n    <span>setTodos</span><span>(</span>newTodos<span>)</span><span>;</span>\n  <span>}</span><span>;</span>\n\n  <span>return</span> <span>(</span>\n    <span>&lt;</span>div className<span>=</span><span>\"app\"</span><span>&gt;</span>\n      <span>&lt;</span>div className<span>=</span><span>\"todo-list\"</span><span>&gt;</span>\n        <span>{</span>todos<span>.</span><span>map</span><span>(</span><span>(</span>todo<span>,</span> index<span>)</span> <span>=&gt;</span> <span>(</span>\n          <span>&lt;</span>Todo\n            key<span>=</span><span>{</span>index<span>}</span>\n            index<span>=</span><span>{</span>index<span>}</span>\n            todo<span>=</span><span>{</span>todo<span>}</span>\n            completeTodo<span>=</span><span>{</span>completeTodo<span>}</span>\n            removeTodo<span>=</span><span>{</span>removeTodo<span>}</span>\n          <span>/</span><span>&gt;</span>\n        <span>)</span><span>)</span><span>}</span>\n        <span>&lt;</span>TodoForm addTodo<span>=</span><span>{</span>addTodo<span>}</span> <span>/</span><span>&gt;</span>\n      <span>&lt;</span><span>/</span>div<span>&gt;</span>\n    <span>&lt;</span><span>/</span>div<span>&gt;</span>\n  <span>)</span><span>;</span>\n<span>}</span>\n\n<span>export</span> <span>default</span> App<span>;</span></code></pre><h2><a href=\"https://scotch.io/tutorials/build-a-react-to-do-app-with-react-hooks-no-class-components?utm_source=spotim&amp;utm_medium=spotim_recirculation&amp;spotim_referrer=recirculation&amp;spot_im_comment_id=sp_D7GE1sbz_39632_c_gyKFoK#toc-what-have-we-learned-\">What have we learned?</a></h2><p>A to-do app can be a great reminder or starting point when it comes to CRUD in web development. Being able to read information, create new information, update existing information, and deleting said information can be powerful in any application.</p><p><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks\">React Hooks</a>&nbsp;are great. They allow for a more straight-forward way of coding and can make your code clear and concise.</p><p>Now go have fun adding all your many to-do items to your newly built to-do app. And then have even more fun crossing them off when you finish them!</p><p>Happy coding!</p>","filePath":"pages/React/.md","_id":"LZpDAeXRjfYJNQ4O"}
{"date":"2018-11-21T16:15:20.525Z","title":"MY SASS EXTENDS, MIXINS, AND FUNCTIONS","sourceUrl":"http://selfteach.me/sass-extends-mixins-functions/","path":"SCSS/","category":"SCSS","tags":["SCSS"," SCSS MIXINS"," SCSS FUNCTIONS"],"author":"","excerpt":"","dateCreated":1542816740064,"coverImage":"","type":"Post","frontmatter":"---\npath: 'SCSS/'\ndate: 'Wed Nov 21 2018 21:45:20 GMT+0530 (India Standard Time)'\ntitle: 'MY SASS EXTENDS, MIXINS, AND FUNCTIONS'\ntags: ['SCSS','SCSS MIXINS','SCSS FUNCTIONS']\ncategory: 'SCSS'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'http://selfteach.me/sass-extends-mixins-functions/'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Let’s cut to the chase, here’s my Sass broilerplate with some of the mixins, functions, and extends that I use.</p><div><h4>NOTE:</h4>As you’ll notice in the comments of this post, Danny Lewandowski and I had a good back and forth about mixins vs. extends. I’m working on a blog post to explain, but in the meantime, I’ve gone ahead and updated all my code to reflect the preferred mixin.</div><h2>NAMING BREAKPOINTS</h2><p>In my Sass breakpoints file, I’m using&nbsp;<a href=\"http://css-tricks.com/naming-media-queries/\">Chris Coyier’s Breakpoint trick</a>. — It’s a mixin within&nbsp;<span>_2_helpers / _breakpoints.scss</span>&nbsp;file. It takes a breakpoint name and builds out the media query for me.</p><div><h4>NOTE:</h4>I updated my breakpoints. Before I was using&nbsp;<code>max-width</code>&nbsp;which is a desktop first mentality.&nbsp;<code>min-width</code>supports mobile first.<p></p><p>I also updated my class names. Previously, I referenced&nbsp;<a href=\"http://foundation.zurb.com/docs/\" target=\"_blank\">Zurb Foundation</a>, the framework I was using, as well as specific devices. I’ve moved on from both of these practices, become more devices (and framework) agnostic.</p></div><div><div>CSS</div></div><pre><code><span><span>@mixin</span> <span>breakpoint</span><span>(</span>$point<span>)</span></span> \t\t<span>{</span>\n\t<span><span>@if</span> $point == retina</span> <span>{</span>\n\t\t<span><span>@media</span> <span>(</span><span>-webkit-min-device-pixel-ratio</span><span>:</span> 2<span>)</span>, <span>(</span><span>min-resolution</span><span>:</span> 192dpi<span>)</span></span> <span>{</span> <span><span>@content</span><span>;</span></span> <span>}</span>\n\t<span>}</span>\n\t<span><span>@if</span> $point == xxlarge</span> <span>{</span>\n\t\t<span><span>@media</span> <span>(</span><span>min-width</span><span>:</span> 1921px<span>)</span></span> <span>{</span> <span><span>@content</span><span>;</span></span> <span>}</span>\n\t<span>}</span>\n\t<span><span>@if</span> $point == xlarge</span> <span>{</span>\n\t\t<span><span>@media</span> <span>(</span><span>min-width</span><span>:</span> 1600px<span>)</span></span> <span>{</span> <span><span>@content</span><span>;</span></span> <span>}</span>\n\t<span>}</span>\n\t<span><span>@if</span> $point == large</span> <span>{</span>\n\t\t<span><span>@media</span> <span>(</span><span>min-width</span><span>:</span> 1441px<span>)</span></span> <span>{</span> <span><span>@content</span><span>;</span></span> <span>}</span>\n\t<span>}</span>\n    <span><span>@else</span> if $point == regular-screen</span> <span>{</span>\n\t    <span><span>@media</span> <span>(</span><span>min-width</span><span>:</span> 1200px<span>)</span></span> <span>{</span> <span><span>@content</span><span>;</span></span> <span>}</span>\n  \t<span>}</span>\n  \t<span><span>@else</span> if $point ==  medium</span> <span>{</span>\n\t    <span><span>@media</span> <span>(</span><span>min-width</span><span>:</span> 1024px<span>)</span></span>  <span>{</span> <span><span>@content</span><span>;</span></span> <span>}</span>\n  \t<span>}</span>\n\t<span><span>@else</span> if $point ==  landscape</span> <span>{</span>\n\t    <span><span>@media</span> <span>(</span><span>min-width</span><span>:</span> 1024px<span>)</span></span>  <span>{</span> <span><span>@content</span><span>;</span></span> <span>}</span>\n  \t<span>}</span>\n    <span><span>@else</span> if $point ==  smaller-screen</span> <span>{</span>\n\t    <span><span>@media</span> <span>(</span><span>min-width</span><span>:</span> 800px<span>)</span></span>  <span>{</span> <span><span>@content</span><span>;</span></span> <span>}</span>\n  \t<span>}</span>\n\t<span><span>@else</span> if $point ==  portrait</span> <span>{</span>\n\t\t<span><span>@media</span> <span>(</span><span>min-width</span><span>:</span> 768px<span>)</span></span>  <span>{</span> <span><span>@content</span><span>;</span></span> <span>}</span>\n\t<span>}</span>\n\t<span><span>@else</span> if $point ==  small</span> <span>{</span>\n\t\t<span><span>@media</span> <span>(</span><span>min-width</span><span>:</span> 640px<span>)</span></span>  <span>{</span> <span><span>@content</span><span>;</span></span> <span>}</span>\n\t<span>}</span>\n\t<span><span>@else</span> if $point ==  large-mobile</span> <span>{</span>\n\t\t<span><span>@media</span> <span>(</span><span>min-width</span><span>:</span> 480px<span>)</span></span>  <span>{</span> <span><span>@content</span><span>;</span></span> <span>}</span>\n\t<span>}</span>\n\t<span><span>@else</span> if $point ==  mobile</span> <span>{</span>\n\t\t<span><span>@media</span> <span>(</span><span>min-width</span><span>:</span> 360px<span>)</span></span>  <span>{</span> <span><span>@content</span><span>;</span></span> <span>}</span>\n\t<span>}</span>\n<span>}</span>\n</code></pre><p>When I want to implement these breakpoints within my SASS, it looks like this:</p><div><div>CSS</div></div><pre><code><span>.something</span> <span>{</span>\n\t<span>padding</span><span>:</span> 100px<span>;</span>\n\n\t<span><span>@include</span> <span>breakpoint</span><span>(</span>small<span>)</span></span> <span>{</span>\n\t\t<span>padding</span><span>:</span> 10px<span>;</span>\n\t<span>}</span>\n<span>}</span>\n</code></pre><p>I have&nbsp;<a href=\"http://selfteach.me/sublime-text-brain-dump/\" title=\"A Brain Dump on Sublime Text 3\">a snippet set up within Sublime Text 3</a>&nbsp;that makes this really easy to implement.</p><hr><h2>ARROWS</h2><p>On CSS-Tricks, there’s&nbsp;<a href=\"http://css-tricks.com/snippets/css/css-triangle/\">a post about creating triangles</a>&nbsp;in pure CSS. I decided to turn that into a mixin.</p><div><div>CSS</div></div><pre><code><span><span>@mixin</span> arrow <span>(</span>$direction, $size, $color<span>)</span></span> <span>{</span>\n\t<span><span>@if</span> $direction == up</span> <span>{</span>\n\t\t<span>border-left</span><span>:</span> $size solid transparent<span>;</span>\n\t\t<span>border-right</span><span>:</span> $size solid transparent<span>;</span>\n\t\t<span>border-bottom</span><span>:</span> $size solid $color<span>;</span>\n\t<span>}</span> <span><span>@else</span> if $direction == down</span> <span>{</span>\n\t\t<span>border-left</span><span>:</span> $size solid transparent<span>;</span>\n\t\t<span>border-right</span><span>:</span> $size solid transparent<span>;</span>\n\t\t<span>border-top</span><span>:</span> $size solid $color<span>;</span>\n\t<span>}</span> <span><span>@else</span> if $direction == right</span> <span>{</span>\n\t\t<span>border-top</span><span>:</span> $size solid transparent<span>;</span>\n\t\t<span>border-bottom</span><span>:</span> $size solid transparent<span>;</span>\n\t\t<span>border-left</span><span>:</span> $size solid $color<span>;</span>\n\t<span>}</span> <span><span>@else</span> if $direction == left</span> <span>{</span>\n\t\t<span>border-top</span><span>:</span> $size solid transparent<span>;</span>\n\t\t<span>border-bottom</span><span>:</span> $size solid transparent<span>;</span>\n\t\t<span>border-right</span><span>:</span>$size solid $color<span>;</span>\n\t<span>}</span>\n<span>}</span>\n</code></pre><p>Then, when I want to implement it:</p><div><div>CSS</div></div><pre><code><span>.read-more</span> <span>{</span> \n\t\t<span>&amp;:before</span> <span>{</span>\n\t\t\t<span><span>@include</span> arrow <span>(</span>right, 3px, black<span>)</span><span>;</span></span>\n\t\t<span>}</span>\n<span>}</span>\n</code></pre><p>That’s easy enough.</p><hr><h2>COLOR</h2><p>I have a set of functions for dealing with color:</p><div><div>CSS</div></div><pre><code><span><span>@function</span> <span>darkest</span><span>(</span> $color <span>)</span></span> \t<span>{</span> <span><span>@return</span> <span>darken</span><span>(</span>$color,20%<span>)</span><span>;</span></span> <span>}</span>\n<span><span>@function</span> <span>darker</span><span>(</span> $color <span>)</span></span> \t\t<span>{</span> <span><span>@return</span> <span>darken</span><span>(</span>$color,13.333%<span>)</span><span>;</span></span> <span>}</span>\n<span><span>@function</span> <span>dark</span><span>(</span> $color <span>)</span></span> \t\t<span>{</span> <span><span>@return</span> <span>darken</span><span>(</span>$color,6.667%<span>)</span><span>;</span></span> <span>}</span>\n<span><span>@function</span> <span>light</span><span>(</span> $color <span>)</span></span> \t\t<span>{</span> <span><span>@return</span> <span>lighten</span><span>(</span>$color,16.667%<span>)</span><span>;</span></span> <span>}</span>\n<span><span>@function</span> <span>lighter</span><span>(</span> $color <span>)</span></span> \t<span>{</span> <span><span>@return</span> <span>lighten</span><span>(</span>$color,33.333%<span>)</span><span>;</span></span> <span>}</span>\n<span><span>@function</span> <span>lightest</span><span>(</span> $color <span>)</span></span> \t<span>{</span> <span><span>@return</span> <span>lighten</span><span>(</span>$color,50%<span>)</span><span>;</span></span> <span>}</span>\n</code></pre><p>I can easily make the rollover color, a shade darker by using:</p><div><div>CSS</div></div><pre><code><span>a</span> <span>{</span>\n\t<span>&amp;:hover</span> <span>{</span>\n\t\t<span>color</span><span>:</span> <span>darker</span><span>(</span>$red<span>)</span><span>;</span>\n\t<span>}</span>\n<span>}</span>\n</code></pre><p>I don’t have to open Photoshop or create an additional variable.</p><hr><h2>BLACK AND WHITE (AND COLOR)</h2><div><div>CSS</div></div><pre><code><span><span>@mixin</span> <span>black-and-white</span><span>(</span><span>)</span></span> <span>{</span>\n\t<span>filter</span><span>:</span> <span>grayscale</span><span>(</span>100%<span>)</span><span>;</span>\n<span>}</span>\n\n<span><span>@mixin</span> <span>color</span><span>(</span><span>)</span></span> <span>{</span>\n\t<span>filter</span><span>:</span> <span>grayscale</span><span>(</span>0%<span>)</span><span>;</span>\n<span>}</span>\n</code></pre><p>Now, I can easily convert anything to black and white:</p><div><div>CSS</div></div><pre><code><span>.my-image</span> <span>{</span>\n\t<span><span>@include</span> black-and-white<span>;</span></span>\n<span>}</span>\n</code></pre><p>Then, if I want to give it color, say on rollover:</p><div><div>CSS</div></div><pre><code><span>.my-image</span> <span>{</span>\n\t\t<span>&amp;:hover</span> <span>{</span>\n\t\t\t<span><span>@include</span> color<span>;</span></span>\n\t\t<span>}</span>\n\t<span>}</span>\n</code></pre><hr><h2>COLUMNS</h2><div><div>CSS</div></div><pre><code><span><span>@mixin</span> columns <span>(</span>$<span>columns</span><span>:</span> 2, $<span>gap</span><span>:</span> 90px<span>)</span></span> <span>{</span>\n\t<span>column-count</span><span>:</span> $columns<span>;</span>\n\t<span>column-gap</span><span>:</span> $gap<span>;</span>\n<span>}</span>\n</code></pre><p>This mixin makes it easy to implement columns. You can tell from the code that I have defaults set for 2 columns with 90px between each column. Meaning, I can implement it without adding any parameters:</p><div><div>CSS</div></div><pre><code><span>.two-columns</span> <span>{</span>\n\t<span><span>@include</span> <span>columns</span><span>(</span><span>)</span><span>;</span></span>\n<span>}</span>\n</code></pre><p>Or if I want to override it I can:</p><div><div>CSS</div></div><pre><code><span>.three-columns</span> <span>{</span>\n\t\t<span><span>@include</span> <span>columns</span><span>(</span>3, 30px<span>)</span><span>;</span></span>\n<span>}</span>\n</code></pre><p>If I want to get crazy, I can even use some of my mixins together:</p><div><div>CSS</div></div><pre><code><span>.two-columns</span> <span>{</span>\n\t<span><span>@include</span> <span>columns</span><span>(</span><span>)</span><span>;</span></span>\n\n\t<span><span>@include</span> <span>breakpoint</span><span>(</span>zurb-small<span>)</span></span> <span>{</span>\n\t\t<span><span>@include</span> <span>columns</span><span>(</span>1<span>)</span><span>;</span></span>\n\t<span>}</span>\n<span>}</span>\n</code></pre><p>This just says that the two column class will display 2 columns, unless we’re on mobile. Then, display 1 column.</p><h3>PATH</h3><p>I have a path function that makes it easy to include images within my SCSS:</p><div><div>CSS</div></div><pre><code><span><span>@function</span> <span>path</span><span>(</span>$src, $<span>dir</span><span>:</span> img<span>)</span></span> <span>{</span>\n\t$<span>src</span><span>:</span> <span>unquote</span><span>(</span>$src<span>)</span><span>;</span>\n\t<span><span>@return</span> <span>url(unquote(\"..\")</span>/$dir/$src<span>)</span><span>;</span></span>\n<span>}</span>\n</code></pre><p>When I set a background image, it might look like this:</p><div><div>CSS</div></div><pre><code><span>.background-image</span> <span>{</span>\n\t<span>background</span><span>:</span> <span>path</span><span>(</span><span>\"my-background-image.jpg\"</span><span>)</span> center top no-repeat<span>;</span>\n<span>}</span>\n</code></pre><p>By default, it puts my images within a&nbsp;<span>img</span>&nbsp;directory. I can override that, either by passing in another parameter or adjusting the function.</p><hr><h2>LIST STYLING</h2><div><div>CSS</div></div><pre><code><span><span>@mixin</span> no-bullets</span> <span>{</span>\n\t<span>list-style</span><span>:</span> none<span>;</span>\n<span>}</span>\n</code></pre><p>This is great when I’m working on site navigation:</p><div><div>CSS</div></div><pre><code><span>nav ul</span> <span>{</span>\n\t<span><span>@include</span> no-bullets<span>;</span></span>\n<span>}</span>\n</code></pre><hr><h2>NO MARGIN, NO PADDING</h2><div><div>CSS</div></div><pre><code><span><span>@mixin</span> <span>no-margin-padding</span><span>(</span><span>)</span></span> <span>{</span>\n\t\t<span>margin</span><span>:</span> 0<span>;</span>\n\t\t<span>padding</span><span>:</span> 0<span>;</span>\n<span>}</span>\n</code></pre><p>Just as the name suggests, using this will remove any margin and padding from the element:</p><div><div>CSS</div></div><pre><code><span>nav ul</span> <span>{</span>\n\t<span><span>@include</span> no-margin-padding<span>;</span></span>\n<span>}</span>\n</code></pre><hr><h2>CIRCLES</h2><div><div>CSS</div></div><pre><code><span><span>@mixin</span> <span>circle</span><span>(</span><span>)</span></span> <span>{</span>\n\t<span>border-radius</span><span>:</span> 50em<span>;</span>\n<span>}</span>\n</code></pre><p>This turns any item into a circle:</p><div><div>CSS</div></div><pre><code><span>.circle-thumbnail</span> <span>{</span>\n\t\t<span><span>@extend</span> %circle<span>;</span></span>\n<span>}</span>\n</code></pre><hr><h2>CONCLUSION</h2><p>These are all great, but what’s the point? Well, instead of having to write these styles every time I sit down to work on a project, I have a starting point. Don’t reinvent the wheel every time if you don’t have to. Make it easier on yourself!</p><p>Second, any project that I work on, I know I have certain classes available to me. I don’t have to look up the class names. I’ve established a set of standards. Remember, work smarter not harder.</p>","filePath":"pages/SCSS/.md","_id":"MwIf5dSkCdNTh5zT"}
{"date":{"$$date":1553094890894},"title":"How to use React Lifecycle Methods","sourceUrl":"https://www.andreasreiterer.at/reactjs-lifecycle-methods/","path":"React/React/","category":"React","tags":["React"," Lifecycle Methods"],"author":"Andreas Reiterer","excerpt":"React lifecycle methods can be confusing if you don’t know which one to use for your particular use case. Today I’m going to show you, which lifecycle methods exist, and how to use them correctly.","dateCreated":1551456297889,"coverImage":"","type":"Post","frontmatter":"---\npath: 'React/'\ndate: 'Fri Mar 01 2019 21:37:23 GMT+0530 (India Standard Time)'\ntitle: 'How to use React Lifecycle Methods'\ntags: ['React','Lifecycle Methods']\ncategory: 'React'\ncategoryColor: '#F3C610'\nexcerpt: 'React lifecycle methods can be confusing if you don’t know which one to use for your particular use case. Today I’m going to show you, which lifecycle methods exist, and how to use them correctly.'\ncoverImage: ''\nsourceUrl: 'https://www.andreasreiterer.at/reactjs-lifecycle-methods/'\ntype: 'Post'\n---\n    ","htmlCode":"<h2>Introduction</h2><p>React components have several “lifecycle methods” that allow us to execute actions (e.g.: fetching data from a server) at particular times. When I started learning React, I found it hard to figure out which lifecycle method i should use for certain actions. If this is the case with you too, this article should serve as a handy guide.</p><p>I will start with an overview of all lifecycle methods and explain in which order they are called. Then I’ll handle each of them with a short explanation and some example use cases. In the end, you should have a better understanding of when to use which life cycle method.</p><h2>The Lifecycle of a React Component</h2><p>Let’s begin with the lifecycle of a component according to the React docs. There are three particular stages in the lifecycle of a component, that are important for our lifecycle methods, which I will explain:</p><ul><li>Mount</li><li>Update</li><li>Unmount</li></ul><h3>Mount</h3><p>When React creates an instance of a component and inserts it into the DOM (<em>mounting</em>), the following methods are called:</p><ul><li><em>constructor()</em></li><li><del><em>componentWillMount()</em></del><em>&nbsp;/ static getDerivedStateFromProps()</em></li><li><em>render()</em></li><li><em>componentDidMount()</em></li></ul><p><span>Update:</span>&nbsp;<em>componentWillMount</em>&nbsp;will be marked deprecated in a future React 16.x release and&nbsp;<a href=\"https://reactjs.org/blog/2018/03/27/update-on-async-rendering.html\">will be removed with React 17</a>. With React 16.3 there were new lifecycle methods introduced.</p><h3>Update</h3><p>If props or state of a component are changed for whatever reason, an update of the component is performed. However, this means that the component has to be re-rendered, which causes the following methods to be called:</p><ul><li><em><del>componentWillReceiveProps()</del>&nbsp;/ static getDerivedStateFromProps()</em></li><li><em>shouldComponentUpdate()</em></li><li><em><del>componentWillUpdate()</del>&nbsp;/ getSnapshotBeforeUpdate()</em></li><li><em>render()</em></li><li><em>componentDidUpdate()</em></li></ul><p><span>Update:</span><em>&nbsp;componentWillReceiveProps</em>&nbsp;and<em>&nbsp;componentWillUpdate</em>&nbsp;will be marked deprecated in a future React 16.x release and&nbsp;<a href=\"https://reactjs.org/blog/2018/03/27/update-on-async-rendering.html\">will be removed with React 17</a>. With React 16.3 there were new lifecycle methods introduced.</p><h3>Unmount</h3><p>At some point our components will be removed from the DOM again. That process is called&nbsp;<em>unmounting</em>&nbsp;and means that the following method is called:</p><ul><li><em>componentWillUnmount</em></li></ul><h3>React Component Lifecycle Summary</h3><p>I hope I could give you a short overview of the life of a React component and the calling order of lifecycle methods. Just for a compact overview, here’s a list of all lifecycle methods in the correct order.</p><ul><li><em><del>componentWillMount</del></em></li><li><em>static getDerivedStateFromProps()</em></li><li><em>componentDidMount</em></li><li><em><del>componentWillReceiveProps</del></em></li><li><em>shouldComponentUpdate</em></li><li><em><del>componentWillUpdate</del></em></li><li><em>getSnapshotBeforeUpdate()</em></li><li><em>componentDidUpdate</em></li><li><em>componentWillUnmount</em></li></ul><p>You can see, they’re not that many. However, it is important that you choose the right one for different use cases to prevent side effects or errors.</p><p><span>Update:</span><em>&nbsp;componentWillMount,&nbsp;componentWillReceiveProps</em>&nbsp;and<em>componentWillUpdate</em>&nbsp;will be marked deprecated in a future React 16.x release and&nbsp;<a href=\"https://reactjs.org/blog/2018/03/27/update-on-async-rendering.html\">will be removed with React 17</a>. With React 16.3 there were new lifecycle methods introduced.</p><h2>Lifecycle Methods</h2><p>In this section, we are going to explore the different lifecycle methods.&nbsp;I will explain each of them in detail and I’ll do my best to provide different example use cases for a better understanding.</p><h3>componentWillMount()</h3><pre><code>componentWillMount()</code></pre><p>Whenever React renders a component, it’s going to call c<em>omponentWillMount&nbsp;</em>first. Note that this method is only called once in a life of a component, and this is right before it is initially. Therefore, there is&nbsp;<span>no access to the DOM.&nbsp;</span></p><p><span>Note:</span>&nbsp;Because componentWillMount is called before the&nbsp;<em>render()</em>method, this is the only lifecycle method that is called on the server side, when you use serverside rendering.</p><p>Alternatively to this lifecycle hook, the React docs recommend using the constructor instead.</p><p><span>Update:</span>&nbsp;<em>componentWillMount</em>&nbsp;is considered legacy and you should&nbsp;<a href=\"https://reactjs.org/blog/2018/03/27/update-on-async-rendering.html\">avoid it</a>&nbsp;in new code.</p><h4>State</h4><p>You can use&nbsp;<em>this.setState(…)</em>&nbsp;inside this method. However, be aware that it&nbsp;<a href=\"https://facebook.github.io/react/docs/react-component.html#componentwillmount\"><span>may not trigger a re-rendering</span></a>&nbsp;when you set the state&nbsp;<span>synchronously</span>.</p><p>If you can, I would suggest to set the default state inside the constructor instead of setting the state here.</p><h4>Use cases</h4><p>I did not find much example use cases for componentWillMount. Some people suggest to use it for doing some configuration of the root component that you can only do at runtime (e.g.:&nbsp;<a href=\"https://engineering.musefind.com/react-lifecycle-methods-how-and-when-to-use-them-2111a1b692b1\">setting up a Firebase connection</a>)</p><h3>componentDidMount</h3><pre><code>componentDidMount()</code></pre><p>Whenever this method is called, React has already rendered our component and put it into the DOM. Therefore, if there is any initialization you want to perform that relies on the DOM, do it here and now.</p><h4>State</h4><p>You can set the state with&nbsp;<em>this.setState()</em>. Whenever you do this, it will also trigger a re-render of the component.</p><h4>Use Cases</h4><p>You can use componentDidMount to&nbsp;<span>fetch data from a server</span>&nbsp;with AJAX calls. Also if you need to&nbsp;<span>initialize anything that relies on the DOM,&nbsp;</span>you can do this here (e.g. initializing third party libraries like D3). And last but not least, you can&nbsp;<span>add event listeners</span>&nbsp;inside componentDidMount.</p><h3>componentWillReceiveProps</h3><pre><code>componentWillReceiveProps(nextProps)</code></pre><p>Whenever a component receives a new set of props, this method will be called first. Also, please note, that React calls this method, even when the props have not changed. So whenever you use this method, be sure to compare&nbsp;<em>this.props</em>&nbsp;to&nbsp;<em>nextProps</em>&nbsp;to avoid setting the state unnecessarily.</p><p>React doesn’t call this method in the&nbsp;<span>mount</span>&nbsp;process. Instead, it only calls this method, if some of the component’s props may update.</p><p><span>Update:</span>&nbsp;<em>componentWillReceiveProps</em>&nbsp;is considered legacy and you should&nbsp;<a href=\"https://reactjs.org/blog/2018/03/27/update-on-async-rendering.html\">avoid it</a>&nbsp;in new code.</p><h4>Use Cases</h4><p>If you have a state that is a calculation from multiple props, you could do the calculation here. Don’t forget to check if your relevant props have really changed (compare&nbsp;<em>this.props</em>&nbsp;to&nbsp;<em>nextProps</em>)</p><h3>static getDerivedStateFromProps</h3><pre><code>static getDerivedStateFromProps(props, state)</code></pre><p><img src=\"https://i1.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/1_getDerivedStateFromProps.jpg?resize=660%2C136&amp;ssl=1\" alt=\"\" width=\"660\" height=\"137\" srcset=\"https://i1.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/1_getDerivedStateFromProps.jpg?w=789&amp;ssl=1 789w, https://i1.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/1_getDerivedStateFromProps.jpg?resize=300%2C62&amp;ssl=1 300w, https://i1.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/1_getDerivedStateFromProps.jpg?resize=768%2C159&amp;ssl=1 768w\" sizes=\"(max-width: 660px) 100vw, 660px\"></p><p>This method is called on every&nbsp;<em>render</em>&nbsp;– even if props didn’t change. So be careful when you’re using this method – it only exists for very rare use cases where the state depends on changes in props. Be sure if you&nbsp;<a href=\"https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html\">really need this method</a>.</p><h4>Use Cases</h4><p>There are some rare use cases where you might need to derive state from props, like when you’re implementing a&nbsp;<code>&lt;Transition&gt;</code>component that compares it’s previous and next children to decide which ones it should animate in and out.</p><h3>shouldComponentUpdate</h3><pre><code>shouldComponentUpdate(nextProps, nextState)</code></pre><p><img src=\"https://i0.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/3_shouldComponentUpdate.jpg?resize=660%2C107&amp;ssl=1\" alt=\"\" width=\"660\" height=\"107\" srcset=\"https://i0.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/3_shouldComponentUpdate.jpg?w=787&amp;ssl=1 787w, https://i0.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/3_shouldComponentUpdate.jpg?resize=300%2C49&amp;ssl=1 300w, https://i0.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/3_shouldComponentUpdate.jpg?resize=768%2C125&amp;ssl=1 768w\" sizes=\"(max-width: 660px) 100vw, 660px\"></p><p>By default, this method is not implemented, so&nbsp;every update of state or props causes a render, even if the props didn’t change. However, if you want to avoid possible unnecessary renders, you could handle this here. Returning&nbsp;<em>false</em>&nbsp;means, that React will not execute&nbsp;<em>componentWillUpdate()</em>,&nbsp;<em>render()</em>&nbsp;and&nbsp;<em>componentDidUpdate()</em>.</p><p>This method is not called for the initial render.</p><p><span>Note:</span>&nbsp;According to the React docs, React may treat shouldComponentUpdate like a hint instead of strictly following it’s return value. This means, it could be possible that the method returns&nbsp;<em>false</em>&nbsp;but React still decides to re-render the component.</p><h4>State</h4><p>You can’t call&nbsp;<em>setState</em>&nbsp;here. Also, it wouldn’t make much sense to do so. If you want to set the state because of changing props, use&nbsp;<em>componentWillReceiveProps</em>&nbsp;instead.</p><h4>Use Case</h4><p>As already mentioned, you can check, if the update of props or state really affects the output of the component. To do so, you could do a comparison of the current props/state to the next props/state. If the component shouldn’t update, just return false and the component won’t update.</p><p><span>Note:&nbsp;</span>This might lead to serious side effects. React also provides another solution for this use case: If you notice that a certain component is slow, you can inherit it from&nbsp;<em>React.PureComponent</em>&nbsp;instead of&nbsp;<em>React.Component</em>. It will perform a shallow comparison for props and state, which might work for most of the use cases I can imagine right now.</p><h3>componentWillUpdate</h3><pre><code>componentWillUpdate(nextProps, nextState)</code></pre><p>This method is invoked right before rendering. Like&nbsp;<em>shouldComponentUpdate</em>, it is called whenever new props are passed to the component, or the state is changed.</p><p>This method is not called for the initial render.</p><p><span>Update:</span>&nbsp;<em>componentWillUpdate</em>&nbsp;is considered legacy and you should&nbsp;<a href=\"https://reactjs.org/blog/2018/03/27/update-on-async-rendering.html\">avoid it</a>&nbsp;in new code.</p><h4>State</h4><p>You can’t call&nbsp;<em>setState</em>&nbsp;here. Again, if you want to set the state because of changing props, use&nbsp;<del><em>componentWillReceiveProps</em></del>&nbsp;<em>getDerivedStateFromProps</em>&nbsp;instead.</p><h4>Use Cases</h4><p>You can perform preparations that need to be done before updating the component. This lifecycle method is called right before render(), so you should not do anything that relies on the DOM – it will soon be outdated.</p><p>Common use cases seem to be:</p><ul><li>set a variable based on state changes</li><li>dispatching events</li><li><a href=\"https://stackoverflow.com/questions/33075063/what-is-the-exact-usage-of-componentwillupdate-in-reactjs/33075514#33075514\">starting animations</a></li></ul><h3>getSnapshotBeforeUpdate</h3><pre><code>getSnapshotBeforeUpdate(prevProps, prevState)</code></pre><p><img src=\"https://i1.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/4_getSnapshotBeforeUpdate.jpg?resize=660%2C123&amp;ssl=1\" alt=\"\" width=\"660\" height=\"123\" srcset=\"https://i1.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/4_getSnapshotBeforeUpdate.jpg?w=785&amp;ssl=1 785w, https://i1.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/4_getSnapshotBeforeUpdate.jpg?resize=300%2C56&amp;ssl=1 300w, https://i1.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/4_getSnapshotBeforeUpdate.jpg?resize=768%2C143&amp;ssl=1 768w\" sizes=\"(max-width: 660px) 100vw, 660px\"></p><p>This method was added with React 16.3 and in combination with&nbsp;<code>componentDidUpdate</code>&nbsp;it should cover all use cases for the legacy method&nbsp;<code>componentWillUpdate</code>.</p><p><em>getSnapshotBeforeUpdate</em>&nbsp;is called right before the rendered elements are written to the DOM. This way you can capture information from the DOM (e.g. scroll position) before it will be updated.</p><p>You should return a snapshot value or&nbsp;<em>null.</em>&nbsp;Whatever you return, will be available as&nbsp;<em>snapshot</em>&nbsp;argument of&nbsp;<em>componentDidUpdate()</em></p><h4>Use Cases</h4><p>If you want to get the scroll position of a list or in a chat window, you would retrieve this information in this method. Then you would return the scroll position as snapshot value. This allows you to set the correct scroll position after the DOM was updated, in&nbsp;<em>componentDidUpdate</em></p><h3>componentDidUpdate</h3><pre><code>componentDidUpdate(prevProps, prevState, snapshot)</code></pre><p><img src=\"https://i1.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/5_componentDidUpdate.jpg?resize=660%2C124&amp;ssl=1\" alt=\"\" width=\"660\" height=\"124\" srcset=\"https://i1.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/5_componentDidUpdate.jpg?w=785&amp;ssl=1 785w, https://i1.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/5_componentDidUpdate.jpg?resize=300%2C56&amp;ssl=1 300w, https://i1.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/5_componentDidUpdate.jpg?resize=768%2C144&amp;ssl=1 768w\" sizes=\"(max-width: 660px) 100vw, 660px\"></p><p>Yay! Everything went well, and React updated our component. Directly after rendering, React also calls&nbsp;<em>componentDidUpdate</em>.</p><p>This method is not called for the initial render.</p><h4>Use Cases</h4><p>If there is something you have to do with the DOM right after the component has been updated, this is the time and place for it. A good example for this would be the update of a 3rd party UI library like D3 to pass on the new data.</p><p>It is also a good place to&nbsp;<span>perform network requests</span>, as long as you compare the current state/props with the previous state/props to avoid unnecessary network requests.</p><h3>componentWillUnmount</h3><pre><code>componentWillUnmount()</code></pre><p><img src=\"https://i2.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/6_componentWillUnmount.jpg?resize=660%2C120&amp;ssl=1\" alt=\"\" width=\"660\" height=\"120\" srcset=\"https://i2.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/6_componentWillUnmount.jpg?w=789&amp;ssl=1 789w, https://i2.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/6_componentWillUnmount.jpg?resize=300%2C55&amp;ssl=1 300w, https://i2.wp.com/www.andreasreiterer.at/wp-content/uploads/2017/09/6_componentWillUnmount.jpg?resize=768%2C140&amp;ssl=1 768w\" sizes=\"(max-width: 660px) 100vw, 660px\"></p><p>Right before React unmounts and destroys our component, it invokes&nbsp;<em>componentWillUnmount</em>.</p><h4>State</h4><p>You can’t set state before unmounting the component.</p><h4>Use Cases</h4><p>Use this hook to perform clean up actions. This could be</p><ul><li>removing event listeners you added in&nbsp;<em>componentDidMount</em>&nbsp;(or elsewhere)</li><li>cancelling active network requests</li><li>invalidating timers</li><li>cleaning up DOM elements that you created in&nbsp;<em>componentDidMount</em></li></ul><h2>Wrapping up</h2><p>Today you’ve learned, that the lifecycle of a React component consists of three stages: Mounting, Updating and Unmounting.</p><p>Also you’ve learned that React calls a certain set of lifecycle methods at each of those stages. You can use them according to the use case you want to fulfill.</p><p>If you want to read more about React’s component lifecycle, I’d recommend to&nbsp;<span>have a look at the&nbsp;<a href=\"https://reactjs.org/docs/react-component.html#the-component-lifecycle\">official documentation</a>.&nbsp;</span></p><p>A good thing to note here is, that you can only use life cycle methods, when you’re using class components, since functional components don’t support life cycle methods. Read more about it here:</p><blockquote data-secret=\"8fYeVc4g7Y\"><p><a href=\"https://www.andreasreiterer.at/react-functional-components/\">React Functional Components vs. Class Components</a></p></blockquote>","filePath":"pages/React/.md","_id":"PBYGWfGeDCkwVjWD","dateUpdated":1553094890894}
{"date":{"$$date":1542296773815},"title":"From JavaScript to TypeScript, Pt. IIA: Using Classes, Interfaces, & Mixins","sourceUrl":"https://scotch.io/tutorials/from-javascript-to-typescript-pt-iia-using-classes-interfaces-mixins","path":"TypeScript/TypeScript/TypeScript/TypeScript/TypeScript/","category":"TypeScript","tags":["TypeScript"],"author":"Peleke Sengstacke","excerpt":"","dateCreated":1542296478479,"coverImage":"","type":"Post","frontmatter":"---\npath: 'TypeScript/'\ndate: 'Thu Nov 15 2018 21:12:28 GMT+0530 (India Standard Time)'\ntitle: 'From JavaScript to TypeScript, Pt. IIA: Using Classes, Interfaces, & Mixins'\ntags: ['TypeScript']\ncategory: 'TypeScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://scotch.io/tutorials/from-javascript-to-typescript-pt-iia-using-classes-interfaces-mixins'\ntype: 'Post'\n---\n    ","htmlCode":"<div>\n<p>One of TypeScript's main selling points is that it allows developers to use something like classes and interfaces to write a fundamentally prototype-based language. </p>\n<p>I say <em>something like</em>, because TypeScript cannot, and does not, add <em>true</em> class-oriented capabilities to the language, which can make for some surprising gotchas. Still, its remarkably clean syntax does a good job of cleaning up the visual cacophany of working with prototypes.</p>\n<p>After this article, you'll be able to:</p><div><h3>Table of Contents</h3><ul><li><a href=\"#toc-using-classes\">\nUsing Classes\n</a></li><li><a href=\"#toc-using-interfaces\">\nUsing Interfaces\n</a></li><li><a href=\"#toc-using-classes-to-create-mixins\">\nUsing Classes to Create Mixins\n</a></li><li><a href=\"#toc-conclusion\">\nConclusion\n</a></li></ul></div>\n<ul>\n<li>Use <strong>classes</strong>&nbsp;to easily create similar objects;</li>\n<li>Use <strong>interfaces</strong> to describe and enforce the shape and behavior of different classes; and</li>\n<li>Combine classes and interfaces to create robust, self-documentining components.</li>\n</ul>\n<p>I assume you're using Node to run the samples; I'm running v6.0.0.</p>\n\n<div>\n<div></div>\n</div>\n<p>I've uploaded all of the code for this article to <a href=\"https://github.com/Peleke/oop_in_typescript/tree/master\">my repository on GitHub</a>. If you don't want to type, clone it down, and run:</p>\n<p><code>git checkout Part_2A-Using_Classes_and_Interfaces</code></p>\n<p>If you're on Windows, you should be able to just run <code>tsc</code>. You'll get a frightening bundle of errors, but you can safely ignore them.</p>\n<p>If you're on Mac or *nix, you'll still run <code>tsc</code>, but you can also pipe the errors to nowhere if you'd like:</p>\n<pre data-title=\"bash\"><code><span><span><span># Compile all TS files, and silence irrelevant errors.</span></span></span>\n<span><span>tsc</span></span> --target ES5 <span>&gt;</span> /dev/null <span><span>2</span></span><span>&gt;</span><span>&amp;</span><span><span>1</span></span></code></pre>\n<p>Either way, you should end up with a folder called <code>built</code>, which contains the compiled JavaScript.</p>\n<h2>\n<a href=\"#toc-using-classes\">Using Classes</a>\n</h2>\n<p>The syntax for TypeScript's classes is almost identical to that of JavaScript's native classes, which we'll take as our starting point.</p>\n<pre data-title=\"javascript\"><code><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span>// ListComponent maintains a list of things that a user can</span></span></span>\n<span><span><span>//   add to and delete from. This is a pure JavaScript class.</span></span></span>\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListComponent</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>things <span>=</span> <span>[</span><span>]</span><span>;</span> \n    <span>}</span>\n\n<span>}</span>\n\n<span><span><span>// A ListItem is a wrapper around the items in our list.</span></span></span>\n<span><span><span>//   This is also pure JavaScript, for now.</span></span></span>\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListItem</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>name<span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>name <span>=</span> name<span>;</span>\n    <span>}</span>\n\n<span>}</span></code></pre>\n<p>These are perfectly valid JavaScript classes, but ut you'll get errors if you run them through the TypeScript transpiler:</p>\n<p><img alt=\"Property does not exist errors\" data-src=\"https://i.imgsafe.org/655cdb1.png\" src=\"https://i.imgsafe.org/655cdb1.png\" data-was-processed=\"true\"></p>\n\n<div>\n<div></div>\n</div>\n<p>This is one of the few places where the TypeScript compiler will reject raw JavaScript. Let's find out what's wrong, and fix it.</p>\n<h3>Class Properties</h3>\n<p>In JavaScript, classes can only contain method definitions. Adding properties is a syntax error. </p>\n<p>In TypeScript, you <em>must</em> add instance properties if you assign to them using <code>this</code>. Otherwise, your code won't compile.</p>\n<pre data-title=\"typescript\"><code><span><span><span>// list_classes.ts</span></span></span>\n<span><span>\n</span></span><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListComponent</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span><span><span>// Adding a property is as simpleas adding its name and type</span></span></span>\n    <span><span><span>//   at the top of the class.</span></span></span>\n    things <span>:</span> <span><span><span>Array</span></span></span><span>&lt;</span>ListItem<span>&gt;</span><span>;</span> <span><span><span>// Or -- things : ListItem[];</span></span></span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>things <span>=</span> <span>[</span><span>]</span><span>;</span> \n    <span>}</span>\n\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListItem</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    name <span>:</span> <span>string</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>name<span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>name <span>=</span> name<span>;</span>\n    <span>}</span>\n\n<span>}</span></code></pre>\n<p>You'll need to add a property for every instance variable you plan to access with <code>this</code>. </p>\n<p>Create a new <code>ListItem</code>, and print its name:</p>\n<pre data-title=\"typescript\"><code><span><span><span>const</span></span></span> item <span>=</span> <span><span><span>new</span></span></span> <span>ListItem</span><span>(</span><span><span><span>'Thing to Do'</span></span></span><span>)</span><span>;</span>\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>item<span>.</span>name<span>)</span><span>;</span> <span><span><span>// 'Thing to Do'</span></span></span></code></pre>\n<p>. . . And that does away with the first of our errors.</p><style>\n.ml-subscribe-form-1112154 {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: radial-gradient(at top left,#e5d0ad,#d2af73);\n    margin-bottom: 35px;\n    margin-left: -120px;\n    margin-right: -120px;\n    color: #eee;\n    text-align: center;\n    padding-left: 20px;\n    padding-right: 20px;\n    padding-top: 30px;\n    padding-bottom: 30px;\n}\n\n.ml-subscribe-form-1112154 h4 {\n    font-size: 22px;\n    color: #eee;\n    margin-bottom: 20px;\n}\n</style>\n<div>\n<div>\n<div>\n<div>\n<h3>Scotch Newsletter</h3>\n<p>Join 100,000 subscribers. Get weekly dev news and tutorials.</p>\n<form action=\"https://app.mailerlite.com/webforms/submit/c7r3j6\" data-code=\"c7r3j6\" method=\"post\" target=\"_blank\">\n<style type=\"text/css\">\n              .ml_message_wrapper {\n                position: absolute !important;\n                left: -9999px !important;\n              }\n            </style>\n<div aria-label=\"Please leave the following field empty\">\n<input type=\"text\" tabindex=\"-1\" value=\"\" placeholder=\"Message\" autocomplete=\"off\" title=\"message\">\n<input type=\"text\" tabindex=\"-1\" value=\"\" placeholder=\"Email\" autocomplete=\"off\" title=\"email\">\n<input type=\"text\" tabindex=\"-1\" value=\"\" placeholder=\"Name\" autocomplete=\"off\" title=\"name\">\n</div>\n<div>\n<div>\n<input type=\"email\" data-inputmask=\"\" value=\"\" placeholder=\"Email\" aria-label=\"Your Email\">\n<div>\n📧\n</div>\n</div>\n<div>\n<button type=\"submit\">Subscribe</button>\n<button disabled=\"\" type=\"button\">\n🌟 Magic ✨\n</button>\n</div>\n</div>\n<style type=\"text/css\">\n              .ml-form-recaptcha {\n                margin-bottom: 20px;\n              }\n\n              .ml-form-recaptcha.ml-error iframe {\n                border: solid 1px #ff0000;\n              }\n            </style>\n<input type=\"hidden\" value=\"1\">\n</form>\n</div>\n<div>\n<div>\n<h3>Thank you!</h3>\n<p>You have successfully joined the Scotchy super duper web dev awesome mailing list.<br><br></p>\n</div>\n</div>\n</div>\n</div>\n</div>\n<script>\n    function ml_webform_success_1112154() {\n        document.querySelector('.ml-subscribe-form-1112154 .row-success').style.display = 'block';\n        document.querySelector('.ml-subscribe-form-1112154 .row-form').style.display = 'none';\n        // var $ = ml_jQuery || jQuery;\n        // $('.ml-subscribe-form-1112154 .row-success').show();\n        // $('.ml-subscribe-form-1112154 .row-form').hide();\n      }\n  </script>\n<img data-src=\"https://track.mailerlite.com/webforms/o/1112154/c7r3j6?vaa4d608450783acdc64d5338ff94f6d5\" width=\"1\" height=\"1\" border=\"0\" src=\"https://track.mailerlite.com/webforms/o/1112154/c7r3j6?vaa4d608450783acdc64d5338ff94f6d5\" data-was-processed=\"true\">\n<h3>Access Modifiers</h3>\n<p>We could also have declared our instance variables with the <code>public</code> keyword:</p>\n<pre data-title=\"typescript\"><code><span><span><span>// list_classes_public.ts</span></span></span>\n<span><span>\n</span></span><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListComponent</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span>public</span> things <span>:</span> <span><span><span>Array</span></span></span><span>&lt;</span>ListItem<span>&gt;</span><span>;</span> <span><span><span>// Or -- things : ListItem[];</span></span></span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>things <span>=</span> <span>[</span><span>]</span><span>;</span> \n    <span>}</span>\n\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListItem</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span>public</span> name <span>:</span> <span>string</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>name<span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>name <span>=</span> name<span>;</span>\n    <span>}</span>\n\n<span>}</span></code></pre>\n<p>The <code>public</code> keyword is called an <strong>access modifier</strong>, and tells the compiler how much of the code should be able to use the property it prefixes.</p>\n<p>TypeScript provides two access modifiers:</p>\n<ol>\n<li><code>public</code>. You can read or write <em>public</em> properties from anywhere. These behave identically to object properties in vanilla JavaScript.</li>\n<li><code>private</code>. You can <em>only</em> read or write a <em>private</em> property from <em>inside of the class</em> that \"owns\" the property. </li>\n</ol>\n<p>In other words, you can use private properties to implement methods inside of your class, but you can't touch them from outside.</p>\n<p>Private properties help improve consistency and code safety, because the only place you can use them is from <em>within</em> the class. Outsiders can't muck with your data from elsewhere.</p>\n<p>Let's see what happens if we declare our <code>things</code> and <code>name</code> properties <code>private</code>.</p>\n<pre data-title=\"typescript\"><code><span><span><span>// list_classes_private.ts</span></span></span>\n<span><span>\n</span></span><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span>// ListComponent maintains a list of things that a user can</span></span></span>\n<span><span><span>//   add to and delete from. This is a pure JavaScript class.</span></span></span>\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListComponent</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span>private</span> things <span>:</span> <span><span><span>Array</span></span></span><span>&lt;</span>ListItem<span>&gt;</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>things <span>=</span> <span>[</span><span>]</span><span>;</span> \n    <span>}</span>\n\n<span>}</span>\n\n<span><span><span>// A ListItem is a wrapper around the items in our list.</span></span></span>\n<span><span><span>//   This is also pure JavaScript, for now.</span></span></span>\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListItem</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span>private</span> name <span>:</span> <span>string</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>name<span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>name <span>=</span> name<span>;</span>\n    <span>}</span>\n\n<span>}</span>\n\n<span><span><span>const</span></span></span> item <span>=</span> <span><span><span>new</span></span></span> <span>ListItem</span><span>(</span><span><span><span>'Thing to Do'</span></span></span><span>)</span><span>;</span>\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>item<span>.</span>name<span>)</span><span>;</span> <span><span><span>// Property 'name' is private</span></span></span></code></pre>\n<p>The classes are still valid, but you'll notice that the last line causes a compiler error. TypeScript reports: <em>Property 'name' is private and only accessible within the class 'ListItem'.</em></p>\n<p>The most idiomatic way to fix this would be to provide a <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get\">getter</a>.</p>\n<pre data-title=\"typescript\"><code><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListComponent</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span><span><span>// We have to rename the private property so we can name</span></span></span>\n  <span><span><span>//   our \"get\" method \"things\". </span></span></span>\n  <span>private</span> _things <span>:</span> <span><span><span>Array</span></span></span><span>&lt;</span>ListItem<span>&gt;</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>_things <span>=</span> <span>[</span><span>]</span><span>;</span> \n    <span>}</span>\n\n    <span><span><span>// Adds a \"getter\", which returns the private property.</span></span></span>\n    <span>get</span> <span>things</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>Array</span></span></span><span>&lt;</span>ListItem<span>&gt;</span> <span>{</span> <span><span><span>return</span></span></span> <span><span><span>this</span></span></span><span>.</span>_things<span>;</span> <span>}</span>\n\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListItem</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span>private</span> _name <span>:</span> <span>string</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>name<span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>_name <span>=</span> name<span>;</span>\n    <span>}</span>\n\n    <span>get</span> <span>name</span> <span>(</span><span>)</span> <span>:</span> <span>string</span> <span>{</span> <span><span><span>return</span></span></span> <span><span><span>this</span></span></span><span>.</span>_name<span>;</span> <span>}</span>\n\n<span>}</span>\n\n<span><span><span>const</span></span></span> item <span>=</span> <span><span><span>new</span></span></span> <span>ListItem</span><span>(</span><span><span><span>'Thing to Do'</span></span></span><span>)</span><span>;</span>\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>item<span>.</span>name<span>)</span><span>;</span> <span><span><span>// 'Thing to Do'</span></span></span></code></pre>\n<p>If you're not familiar with <code>get</code> methods, check the documentation. Conceptually, they're just functions that JavaScript calls when you access a property with the same name as the get method.</p>\n<p>There are two things to notice.</p>\n<ol>\n<li>We've renamed our <code>things</code> property to <code>_things</code>, and our <code>name</code> property to <code>_name</code>; and</li>\n<li>We've added methods called <code>get things</code> and <code>get name</code>.</li>\n</ol>\n<p>We've renamed our properties from <code>thing</code> and <code>name</code> to <code>_thing</code> and <code>_name</code> so we can name our get methods sensibly. There's nothing special about the underscore prefix -- you could have renamed the private properties <code>list_of_things</code> and <code>silicon_unicorn</code>, if you'd wanted -- but using an underscore-prefixed identifier for private members and exposing them via an unprefixed getter is a convenient convention.</p>\n<p>Renaming the properties lets us preserve our public interface: The rest of our code doesn't even know we've started using getters under the hood.</p>\n<p>If you're wondering why we'd go through all this trouble in the first place, try setting the value of <code>item.name</code>:</p>\n<pre data-title=\"typescript\"><code><span><span><span>// list_item_private_getter.ts</span></span></span>\n\nitem<span>.</span>name <span>=</span> <span><span><span>'Thing Done'</span></span></span><span>;</span>\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>item<span>.</span>name<span>)</span><span>;</span> <span><span><span>// TypeError: Cannot set property name of #&lt;ListItem&gt; which only has a getter</span></span></span></code></pre>\n<p>You'll notice that the TypeScript compiles just fine, but that JavaScript throws at runtime when you try to change the <code>name</code> property. </p>\n<p>This is the main advantage to exposing private properties via getters: <em>It prevents them from being set by clients</em>. </p>\n<p>You can also define a <code>set</code> method, which allows you to change the name of <code>item</code> as we just attempted. This sometimes makes sense. If you're going to do it that way, though, you can usually get away with avoiding getters/setters altogether, and just declare your properties public.</p>\n<p>As a general rule, declaring variables private and exposing them via a getter, but providing <em>no</em> setter, is a good pattern. If you need a setter, provide one. But don't do so unless you have a very good reason: You should generally keep your objects as close to immutable as possible.</p>\n<h4>Hiding Implementations with Private Methods</h4>\n<p>TypeScript also allows you to declare private methods.</p>\n<p>Let's say we want to validate a user before s/he can add items to a list, but we don't want the validation method available outside the class. Easy: We'd declare it <code>private</code>, which will produce compile-time warnings if we try to access it directly.</p>\n<pre data-title=\"typescript\"><code><span><span><span>// list_classes_private_methods.ts</span></span></span>\n<span><span>\n</span></span><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListComponent</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span>private</span> _things <span>:</span> <span><span><span>Array</span></span></span><span>&lt;</span>ListItem<span>&gt;</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>_things <span>=</span> <span>[</span><span>]</span><span>;</span> \n    <span>}</span>\n\n    <span>get</span> <span>things</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>Array</span></span></span><span>&lt;</span>ListItem<span>&gt;</span> <span>{</span> <span><span><span>return</span></span></span> <span><span><span>this</span></span></span><span>.</span>_things<span>;</span> <span>}</span>\n\n    <span>get</span> <span>length</span> <span>(</span><span>)</span> <span>:</span> <span>number</span> <span>{</span> <span><span><span>return</span></span></span> <span><span><span>this</span></span></span><span>.</span>_things<span>.</span>length<span>;</span> <span>}</span>\n\n    <span>add</span> <span>(</span>item <span>:</span> ListItem<span>,</span> <span><span>password</span></span> <span>:</span> <span>string</span><span>)</span> <span>:</span> <span>boolean</span> <span>{</span>\n      <span><span><span>if</span></span></span> <span>(</span><span><span><span>this</span></span></span><span>.</span><span>validate</span><span>(</span>password<span>)</span><span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>_things<span>.</span><span>push</span><span>(</span>item<span>)</span><span>;</span>\n        <span><span><span>return</span></span></span> <span><span><span>true</span></span></span><span>;</span>\n      <span>}</span> <span><span><span>else</span></span></span>\n        <span><span><span>return</span></span></span> <span><span><span>false</span></span></span>\n    <span>}</span>\n\n    <span>private</span> <span>validate</span> <span>(</span>password <span>:</span> <span>string</span><span>)</span> <span>:</span> <span>boolean</span> <span>{</span>\n      <span><span><span>if</span></span></span> <span>(</span>password <span>===</span> <span><span><span>'12345'</span></span></span><span>)</span>\n        <span><span><span>return</span></span></span> <span><span><span>true</span></span></span>\n    <span><span><span>else</span></span></span>\n      <span><span><span>return</span></span></span> <span><span><span>false</span></span></span>\n    <span>}</span>\n\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListItem</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span>private</span> _name <span>:</span> <span>string</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>name<span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>_name <span>=</span> name<span>;</span>\n    <span>}</span>\n\n    <span>get</span> <span>name</span> <span>(</span><span>)</span> <span>:</span> <span>string</span> <span>{</span> <span><span><span>return</span></span></span> <span><span><span>this</span></span></span><span>.</span>_name<span>;</span> <span>}</span>\n\n<span>}</span>\n\n<span><span><span>const</span></span></span> <span>PASS</span> <span>=</span> <span><span><span>'12345'</span></span></span><span>;</span> \n\n<span><span><span>const</span></span></span> item <span>=</span> <span><span><span>new</span></span></span> <span>ListItem</span><span>(</span><span><span><span>'Thing to Do'</span></span></span><span>)</span><span>;</span>\n<span><span><span>const</span></span></span> list_one <span>=</span> <span><span><span>new</span></span></span> <span>ListComponent</span><span>(</span><span>)</span><span>;</span>\n<span><span><span>const</span></span></span> list_two <span>=</span> <span><span><span>new</span></span></span> <span>ListComponent</span><span>(</span><span>)</span><span>;</span>\n\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>list_one<span>.</span><span>add</span><span>(</span>item<span>,</span> <span>PASS</span><span>)</span><span>)</span><span>;</span> <span><span><span>// true</span></span></span>\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>list_one<span>.</span>length<span>)</span><span>;</span> <span><span><span>// 1</span></span></span>\n\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>list_two<span>.</span><span>add</span><span>(</span>item<span>,</span> <span><span><span>'WRONG password'</span></span></span><span>)</span><span>)</span><span>;</span> <span><span><span>// false</span></span></span>\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>list_two<span>.</span>length<span>)</span><span>;</span> <span><span><span>// 0</span></span></span>\n\n<span><span><span>// console.log(list_one.validate('12345')); // Compiler error</span></span></span></code></pre>\n<p>If you try to run <code>list_one.validate('12345')</code>, you'll get a compiler error.</p>\n<h3>Subclasses</h3>\n<p>TypeScript also lets you use subclasses, just as does vanilla JavaScript:</p>\n<pre data-title=\"typescript\"><code><span><span><span>\"use strict\"</span></span></span><span>;</span> \n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>CompletedListItem</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>extends</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListItem</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    completed <span>:</span> <span>boolean</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>name <span>:</span> <span>string</span><span>)</span> <span>{</span>\n        <span><span><span>super</span></span></span><span>(</span>name<span>)</span><span>;</span>\n        <span><span><span>this</span></span></span><span>.</span>completed <span>=</span> <span><span><span>true</span></span></span><span>;</span>\n    <span>}</span>\n\n<span>}</span></code></pre>\n<p>There isn't much more to say about subclasses in TypeScript. For details as to how it all works under the hood, check out my articles on JavaScript's classes; and for some thoughts on designing with subclasses, read the article accompanying this one, on <a href=\"\">Designing with Classes &amp; Interfaces</a>.</p>\n<h3>Property Shorthand</h3>\n<p>Finally, TypeScript offers a shorthand for creating and assigning properties.</p>\n<pre data-title=\"typescript\"><code><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>Person</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>public</span> first_name <span>:</span> <span>string</span><span>,</span> <span>public</span> last_name <span>:</span> <span>string</span><span>)</span> <span>{</span> <span>}</span>\n\n<span>}</span></code></pre>\n<p>This code is equivalent to:</p>\n<pre data-title=\"typescript\"><code><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>Person</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span>public</span> first_name <span>:</span> <span>string</span><span>;</span>\n    <span>public</span> last_name <span>:</span> <span>string</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>first_name <span>:</span> <span>string</span><span>,</span> last_name <span>:</span> last_name<span>)</span> <span>{</span> <span>}</span>\n\n<span>}</span></code></pre>\n<p>Using this shorthand, we can rewrite our <code>ListComponent</code> like this:</p>\n<pre data-title=\"typescript\"><code><span><span><span>// list_classes_shorthand.ts</span></span></span>\n<span><span>\n</span></span><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListComponent</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>private</span> _things <span>:</span> ListItem<span>[</span><span>]</span><span>)</span> <span>{</span> <span>}</span>\n\n    <span>get</span> <span>things</span> <span>(</span><span>)</span> <span>:</span> ListItem<span>[</span><span>]</span> <span>{</span> <span><span><span>return</span></span></span> <span><span><span>this</span></span></span><span>.</span>_things<span>;</span> <span>}</span>\n\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ListItem</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span><span>private</span> _name<span>)</span> <span>{</span> <span>}</span>\n\n    <span>get</span> <span>name</span> <span>(</span><span>)</span> <span>:</span> <span>string</span> <span>{</span> <span><span><span>return</span></span></span> <span><span><span>this</span></span></span><span>.</span>_name<span>;</span> <span>}</span>\n\n<span>}</span>\n\n<span><span><span>const</span></span></span> item <span>=</span> <span><span><span>new</span></span></span> <span>ListItem</span><span>(</span><span><span><span>'Thing to Do'</span></span></span><span>)</span><span>;</span>\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>item<span>.</span>name<span>)</span><span>;</span> <span><span><span>// Property 'name' is private</span></span></span>\n\nitem<span>.</span>name <span>=</span> <span><span><span>'Fish'</span></span></span><span>;</span>\n<span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span>item<span>.</span>name<span>)</span><span>;</span> <span><span><span>// </span></span></span></code></pre>\n<h3>A Word of Caution</h3>\n<p>TypeScript's <code>private</code> access modifier is handy, but it is <em>just</em> syntactical sugar. Its compile-time checks against your code do <em>not</em> prevent other code, or even your code, from accessing private properties at runtime.</p>\n<p>As an example, while <code>list_one.validate('12345')</code> generates a compiler error, <code>list_one['validate']('12345')</code> does <em>not</em>. That'll actually work just fine.</p>\n<p> When you use bracket notaton, JavaScript first evaluates the expression inside of the brackets, and then attempts to access the property on the object with the name of the result. In contrast, TypeScript can analyze direct property access, as in <code>list_one.validate</code>, without the intermediate step of evaluating an expression.</p>\n<p>It's just a guess, but I reckon the transpiler doesn't guard against such evaluated property accesses because it would be unreliable: In general, the value of an expression is constrained by its runtime context, which can't be fully determined at compile-time.</p>\n<p>The takeaway is twofold:</p>\n<ol>\n<li>While the private modifier is handy, it can't <em>guarantee</em> privacy, and you shoudn't rely on it to do so; and</li>\n<li>TypeScript's OOP sugar is <em>just</em> sugar. You can still add and delete methods, see and access <code>private</code> properties, and do other such blasphemy at runtime, if you're clever enough.</li>\n</ol>\n<p>If you <em>absolutely need</em> private data in your classes, you may be better off using closures, or using <a href=\"http://exploringjs.com/es6/ch_classes.html#sec_private-data-for-classes\">one of the several techniques Dr Rauschmayer discusses in Exploring ES6</a>.</p>\n<h2>\n<a href=\"#toc-using-interfaces\">Using Interfaces</a>\n</h2>\n<p>Classes collect a set of properties and methods into a blueprint you to create objects that differ in state, but otherwise share the same capabilities and shape.</p>\n<p>Interfaces allow you to collect a set of properties and behaviors into a blueprint that classes can promise they'll <strong>implement</strong>, but <em>do not</em> define those properties, nor provide definitions for the methods.</p>\n<p>TypeScript uses interfaces for two things: To guarantee that objects created from an implementing class will have a certain <strong>shape</strong>, or that they'll expose a certain <strong>API</strong> -- or list of public methods. Each implementing class gets to decide how it will implement that API.</p>\n<p>That's all a little abstract, so let's frame it with an example. </p>\n<h3>Enforcing Shape</h3>\n<p>The <strong>shape</strong> of an object is the set of data that it contains. To expect an object to have a certain shape is to expect it to hold certain data. We expect a User object to have a <code>name</code> and an <code>email</code>, for example. These two properties are part of the User object's shape. </p>\n<p>An <strong>interface</strong> is a tool for enforcing a particular shape. If a class implements an interface, it <em>must</em> contain the instance variables and methods listed in the interface. </p>\n<p>Creating an interface is much the same as creating a class, except you use the <code>interface</code> keyword instead of <code>class</code>. Otherwise, you list properties and their types identically:</p>\n<pre data-title=\"typescript\"><code><span><span><span>// interfaces.ts</span></span></span>\n<span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span>interface</span> <span>User</span> <span>{</span>\n    <span><span>name</span></span> <span>:</span> <span>string</span><span>;</span>\n    email <span>:</span> <span>string</span><span>;</span>\n<span>}</span></code></pre>\n<p>Any object that implements the <code>User</code> interface <em>must</em> have a <code>name</code> and <code>email</code> property, or the TypeScript compiler will scream at us with an \"Interface not implemented properly\" error.</p>\n<p>Using an interface is like creating a subclass, but you use <code>implements</code> in place of <code>extends</code>.</p>\n<pre><code><span><span>// interfaces.ts</span></span>\n\n<span><span><span><span>class</span></span></span><span> </span><span><span><span>RegisteredUser</span></span></span><span> </span><span><span><span>implements</span></span></span><span> </span><span><span><span>User</span></span></span><span> </span></span>{\n\n  <span><span>// Shorthand</span></span>\n  constructor (<span><span>public</span></span> name : string, <span><span>public</span></span> email : string) { }\n\n}</code></pre><p>We can also specify certain properties as optional. If we want to add a <code>avatar</code> property but acknowledge that users don't <em>have</em> to have a picture, you mark the property with a question mark.</p>\n<pre data-title=\"typescript\"><code><span><span><span>// interfaces_optional.ts</span></span></span>\n<span><span>\n</span></span><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span>interface</span> <span>User</span> <span>{</span>\n    <span><span>name</span></span> <span>:</span> <span>string</span><span>;</span>\n    email <span>:</span> <span>string</span><span>;</span>\n    avatar<span>?</span> <span>:</span> <span><span>Object</span></span><span>;</span>\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>RegisteredUser</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>implements</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>User</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span><span><span>constructor</span></span></span> <span>(</span><span>public</span> name <span>:</span> <span>string</span><span>,</span> <span>public</span> email <span>:</span> <span>string</span><span>)</span> <span>{</span> <span>}</span>\n\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ImageUser</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>implements</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>User</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span><span><span>constructor</span></span></span> <span>(</span><span>public</span> name <span>:</span> <span>string</span><span>,</span>\n               <span>public</span> email <span>:</span> <span>string</span><span>,</span>\n               <span>public</span> avatar <span>:</span> Object<span>)</span> <span>{</span> <span>}</span>\n\n<span>}</span></code></pre>\n<h3>Method Signatures</h3>\n<p>Interfaces also allow you to specify <em>methods</em> that a class must implement, while allowing the classes themselves decide on the implementation details.</p>\n<p>Including method signatures in an interface is as simple as adding a function signature to the interface.</p>\n<pre data-title=\"typescript\"><code><span><span><span>// interfaces_methods.ts</span></span></span>\n<span><span>\n</span></span><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span>interface</span> <span>User</span> <span>{</span>\n    <span><span><span>// PROPERTIES</span></span></span>\n    name <span>:</span> <span>string</span><span>;</span>\n    email <span>:</span> <span>string</span><span>;</span>\n    avatar<span>?</span> <span>:</span> <span><span>Object</span></span><span>;</span>\n\n  <span><span><span>// API</span></span></span>\n  <span>print</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>void</span></span></span><span>;</span>\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>RegisteredUser</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>implements</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>User</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span><span><span>constructor</span></span></span> <span>(</span><span>public</span> name <span>:</span> <span>string</span><span>,</span> <span>public</span> email <span>:</span> <span>string</span><span>)</span> <span>{</span> <span>}</span>\n\n  <span>print</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>void</span></span></span> <span>{</span>\n    <span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span><span><span><span><span>`Name: </span></span></span><span><span><span><span><span><span>${</span></span></span></span></span><span><span><span><span><span><span><span>this</span></span></span></span></span></span></span><span><span><span><span><span>.</span></span></span></span></span><span><span><span><span>name</span></span></span></span><span><span><span><span><span>}</span></span></span></span></span></span><span><span><span> | Email: </span></span></span><span><span><span><span><span><span>${</span></span></span></span></span><span><span><span><span><span><span><span>this</span></span></span></span></span></span></span><span><span><span><span><span>.</span></span></span></span></span><span><span><span><span>email</span></span></span></span><span><span><span><span><span>}</span></span></span></span></span></span><span><span><span> | No avatar.`</span></span></span></span><span>)</span><span>;</span>\n  <span>}</span>\n\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>ImageUser</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>implements</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>User</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n  <span><span><span>constructor</span></span></span> <span>(</span><span>public</span> name <span>:</span> <span>string</span><span>,</span>\n               <span>public</span> email <span>:</span> <span>string</span><span>,</span>\n               <span>public</span> avatar <span>:</span> Object<span>)</span> <span>{</span> <span>}</span>\n\n  <span>print</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>void</span></span></span> <span>{</span>\n    <span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span><span><span><span><span>`Name: </span></span></span><span><span><span><span><span><span>${</span></span></span></span></span><span><span><span><span><span><span><span>this</span></span></span></span></span></span></span><span><span><span><span><span>.</span></span></span></span></span><span><span><span><span>name</span></span></span></span><span><span><span><span><span>}</span></span></span></span></span></span><span><span><span> | Email: </span></span></span><span><span><span><span><span><span>${</span></span></span></span></span><span><span><span><span><span><span><span>this</span></span></span></span></span></span></span><span><span><span><span><span>.</span></span></span></span></span><span><span><span><span>email</span></span></span></span><span><span><span><span><span>}</span></span></span></span></span></span><span><span><span> | Has avatar.`</span></span></span></span><span>)</span><span>;</span>\n  <span>}</span>\n\n<span>}</span>\n\n<span><span><span>const</span></span></span> user <span>=</span> <span><span><span>new</span></span></span> <span>RegisteredUser</span><span>(</span><span><span><span>'Peleke'</span></span></span><span>,</span> <span><span><span>'resil.design@gmail.com'</span></span></span><span>)</span><span>;</span>\nuser<span>.</span><span>print</span><span>(</span><span>)</span><span>;</span></code></pre>\n<p>Three things to notice.</p>\n<ol>\n<li>If you omit <code>print</code> in either class, you'll get a compiler error;</li>\n<li>If you declare <code>print</code> with the wrong type in either class, you'll get a compiler error; and</li>\n<li>Each class implements <code>print</code> <em>differently</em>. </li>\n</ol>\n<p>This last point is important. Different classes will often expose the same abstract behavior -- <code>User</code>s of all types should be able to <code>print</code> themselves for instance -- but, in general, they might want to do things differently. </p>\n<p>Interfaces <em>describe</em> such behavior in the abstract, but allow their implementing classes to <em>define</em> that behavior as they see fit.</p>\n<h2>\n<a href=\"#toc-using-classes-to-create-mixins\">Using Classes to Create Mixins</a>\n</h2>\n<p>Occasionally, we want classes to expose some API that would be best expressed in terms of an interface -- say, <code>Printable</code>, or <code>Identifiable</code> -- but which they'll all implement in the same way.</p>\n<p>One possibility is to create subclasses, but this approach fails on two major fronts.</p>\n<ol>\n<li>Classes can only inherit from a single parent class. If we need to implement multiple sets of behavior -- <em>both</em> <code>Printable</code> and <code>Identifiable</code>, for instance -- then subclassing doesn't work.</li>\n<li>If the objects that need to implement the interfaces aren't closely related, subclassing is the wrong abstraction. To have a <code>Book</code> and <code>Person</code> both inherit from an <code>Identifiable</code> base class because they both have an ID makes no sense from the standpoint of building a class hierarchy.</li>\n</ol>\n<p>The correct abstraction in this case is the interface. But writing the same implementation in <em>each</em> class that implements it is suboptimal. On</p>\n<p>one hand, it's more typing. And typing sucks. More seriously, writing the same code in several places is brittle, and if you ever need to change what you intend to be a common implementation, you'll have to rewrite the code in every class that implements the interface. </p>\n<p>What we'd want is a way to create an interface that allows us to include implementations. Languages like <a href=\"http://docs.groovy-lang.org/next/html/documentation/core-traits.html\">Groovy</a> solve the problem directly with <em>traits</em> -- in effect, interfaces that can host default method implementations. </p>\n<p>JavaScript doesn't directly support traits,but has made use of the <a href=\"https://api.jquery.com/jquery.extend/\">mixin pattern</a> for quite some time to achieve the same ends. TypeScript provides a little sugar to create mixins by using <em>classes</em> with the <em>implements</em> keyword.</p>\n<h3>Partial Classes</h3>\n<p>Creating a class to use as a mixin is almost identical to creating an interface. There are two differences:</p>\n<ol>\n<li>You use the <code>class</code> keyword, instead of <code>interface</code>; and</li>\n<li>You include method definitions.</li>\n</ol>\n<pre data-title=\"typescript\"><code><span><span><span>// mixins.ts</span></span></span>\n<span><span>\n</span></span><span><span><span>\"use strict\"</span></span></span><span>;</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>Printable</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    text <span>:</span> <span>string</span><span>;</span>\n\n    <span>print</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>void</span></span></span> <span>{</span>\n        <span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span><span><span><span>this</span></span></span><span>.</span>text<span>)</span><span>;</span>\n    <span>}</span>\n\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>Identifiable</span></span></span></span></span><span><span> </span></span><span>{</span>\n\n    name <span>:</span> <span>string</span><span>;</span>\n    id <span>:</span> <span>number</span><span>;</span>\n\n    <span>identify</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>void</span></span></span> <span>{</span>\n        <span><span><span>console</span></span></span><span>.</span><span>log</span><span>(</span><span><span><span><span>`My name is </span></span></span><span><span><span><span><span><span>${</span></span></span></span></span><span><span><span><span><span><span><span>this</span></span></span></span></span></span></span><span><span><span><span><span>.</span></span></span></span></span><span><span><span><span>name</span></span></span></span><span><span><span><span><span>}</span></span></span></span></span></span><span><span><span>, and my ID is </span></span></span><span><span><span><span><span><span>${</span></span></span></span></span><span><span><span><span><span><span><span>this</span></span></span></span></span></span></span><span><span><span><span><span>.</span></span></span></span></span><span><span><span><span>id</span></span></span></span><span><span><span><span><span>}</span></span></span></span></span></span><span><span><span>`</span></span></span></span><span>)</span><span>;</span>\n    <span>}</span>\n<span>}</span>\n\n<span><span><span><span><span>class</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>Book</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>implements</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>Printable</span></span></span></span></span><span><span><span>,</span></span></span><span><span> </span><span><span><span>Identifiable</span></span></span><span> </span></span><span>{</span> <span><span><span>// LINE A</span></span></span>\n\n  name <span>:</span> <span>string</span><span>;</span>\n  id <span>:</span> <span>number</span><span>;</span>\n\n  text <span>:</span> <span>string</span><span>;</span>\n\n    <span><span><span>constructor</span></span></span> <span>(</span>name <span>:</span> <span>string</span><span>,</span> id <span>:</span> <span>number</span><span>,</span> text <span>:</span> <span>string</span><span>)</span> <span>{</span>\n        <span><span><span>this</span></span></span><span>.</span>name <span>=</span> name<span>;</span>\n        <span><span><span>this</span></span></span><span>.</span>id <span>=</span> id<span>;</span>\n\n        <span><span><span>this</span></span></span><span>.</span>text <span>=</span> text<span>;</span>\n    <span>}</span>\n\n    <span><span><span>// DUMMY methods to satisfy the compiler. If we don't have these, TS</span></span></span>\n    <span><span><span>//   will complain with \"Interface not implemented properly\".</span></span></span>\n    <span><span><span>// Printable </span></span></span>\n    <span>print</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>void</span></span></span> <span>{</span> <span>}</span>\n\n    <span><span><span>// Identifiable</span></span></span>\n    <span>identify</span> <span>(</span><span>)</span> <span>:</span> <span><span><span>void</span></span></span> <span>{</span> <span>}</span>\n\n<span>}</span>\n<span>applyMixins</span><span>(</span>Book<span>,</span> <span>[</span>Printable<span>,</span> Identifiable<span>]</span><span>)</span><span>;</span>\n\n<span><span><span>const</span></span></span> bad_novel <span>=</span> <span><span><span>new</span></span></span> <span>Book</span><span>(</span><span><span><span>'A Buncha Nonsense'</span></span></span><span>,</span> <span><span><span>2190</span></span></span><span>,</span> <span><span><span>'This book/Is awful. FIN'</span></span></span><span>)</span><span>;</span>\nbad_novel<span>.</span><span>print</span><span>(</span><span>)</span><span>;</span>\n\n<span><span><span>// NECESSARY EVIL :: </span></span></span>\n<span><span><span>//  From TS docs :: http://www.typescriptlang.org/docs/handbook/mixins.html</span></span></span>\n<span><span><span><span><span>function</span></span></span></span></span><span><span> </span></span><span><span><span><span><span>applyMixins</span></span></span></span></span><span><span><span>(</span></span></span><span><span><span><span>derivedCtor</span></span></span></span><span><span><span><span><span>:</span></span></span></span></span><span><span><span><span> </span></span></span></span><span><span><span><span><span>any</span></span></span></span></span><span><span><span><span><span>,</span></span></span></span></span><span><span><span><span> baseCtors</span></span></span></span><span><span><span><span><span>:</span></span></span></span></span><span><span><span><span> </span></span></span></span><span><span><span><span><span>any</span></span></span></span></span><span><span><span><span><span>[</span></span></span></span></span><span><span><span><span><span>]</span></span></span></span></span><span><span><span>)</span></span></span><span><span> </span></span><span>{</span>\n    baseCtors<span>.</span><span>forEach</span><span>(</span><span><span><span><span>baseCtor</span></span></span><span> </span></span><span><span><span>=&gt;</span></span></span> <span>{</span>\n        <span><span>Object</span></span><span>.</span><span>getOwnPropertyNames</span><span>(</span>baseCtor<span>.</span>prototype<span>)</span><span>.</span><span>forEach</span><span>(</span><span><span><span><span>name</span></span></span><span> </span></span><span><span><span>=&gt;</span></span></span> <span>{</span>\n            derivedCtor<span>.</span>prototype<span>[</span>name<span>]</span> <span>=</span> baseCtor<span>.</span>prototype<span>[</span>name<span>]</span><span>;</span>\n        <span>}</span><span>)</span><span>;</span>\n    <span>}</span><span>)</span><span>;</span>\n<span>}</span></code></pre>\n<p>Notice that these \"mixin classes\" do <em>not</em> contain constructors. That means you can't instantiate them. Instead, you'll use them purely to collect method definitions and property signatures. </p>\n<p>Note <strong>Line A</strong>. The reason we can get away with something as weird as implementing a class is because TypeScript treats classes that you implement as interfaces. In other words, it checks that the implementing class contains the same method signatures and instance variables as the \"class\" you're implementing, but ignores method implementations. We'll see how to get them back in a minute.</p>\n<p>Once you've defined your mixin classes, you create your extending class using <code>implements</code>. And, just as you do when implementing a normal interface, you provide an implementation for the methods that it exposes. </p>\n<p>The only difference is that, here, we implement a no-op, <em>dummy</em> implementation. This is for two reasons. If we don't do this, the compiler will complain that our class doesn't implement its interfaces properly.</p>\n<p>Of course, we don't want the no-op. We want the method definition inside the partial class. To apply this, we have to use a helper function provided in the <a href=\"http://www.typescriptlang.org/docs/handbook/mixins.html\">TypeScript documentation</a>: <code>applyMixins</code>. It replaces your dummy implementations with the real ones in your partial classes. You'll have to use <code>applyMixins</code> for every mixin class you create. </p>\n<p>If you decide to use mixins, I recommend collecting all the <code>applyMixins</code> calls into their own module, or at least into their own chunk of the program. That way you can keep track of where the magic happens.</p>\n<p>Frankly, I find all this to be more trouble than it's worth. But you'll see this pattern in the wild, whether you use it or not, so it's important to know that it's available.</p>\n<h2>\n<a href=\"#toc-conclusion\">Conclusion</a>\n</h2>\n<p>In this article, you've seen how to:</p>\n<ul>\n<li>Build classes with access modifiers;</li>\n<li>Use interfaces to define the \"shape\" of a class's data;</li>\n<li>Use interfaces for modular development of a class's API; and</li>\n<li>Create mixins using partial classes as interfaces.</li>\n</ul>\n<p>As you can imagine, TypeScript's classes, interfaces, and mixins are powerful tools for defining complex behaviors and hierarchies. If you'd like to take a deeper dive into the details of how classes work under the hood, read up on <a href=\"https://scotch.io/tutorials/better-javascript-with-es6-pt-ii-a-deep-dive-into-classes\">\"Class\" &amp; Prototypes</a>.</p>\n<p>In the companion to this article, Part IIB, we'll take a look at some terminology and desgn principles from the world of OOP; and after that, we'll dive into TypeScript's Types &amp; Generics. </p>\n<p>As always, feel free to leave questions in the comments, or shoot them to me on Twitter (<a href=\"https://twitter.com/PelekeS\">@PelekeS</a>).</p>\n</div>","filePath":"pages/TypeScript/.md","_id":"QUMDNj724mb9DATT","dateUpdated":1542296773815}
{"date":"2018-11-22T11:38:07.325Z","title":"Fun Tip: Use calc() to Change the Height of a Hero Component","sourceUrl":"https://css-tricks.com/fun-tip-use-calc-to-change-the-height-of-a-hero-component/","path":"CSS/","category":"CSS","tags":["CSS"],"author":"MARTINO STENTA","excerpt":"","dateCreated":1542884021848,"coverImage":"","type":"Post","frontmatter":"---\npath: 'CSS/'\ndate: 'Thu Nov 22 2018 17:08:07 GMT+0530 (India Standard Time)'\ntitle: 'Fun Tip: Use calc() to Change the Height of a Hero Component'\ntags: ['CSS']\ncategory: 'CSS'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://css-tricks.com/fun-tip-use-calc-to-change-the-height-of-a-hero-component/'\ntype: 'Post'\n---\n    ","htmlCode":"<p>The concept of&nbsp;<a href=\"https://css-tricks.com/snippets/css/fluid-typography/\">Fluid Typography</a>&nbsp;was tossed around a couple of years ago. The main idea is that if you know what size your font is at two different viewport sizes, then you can have the font scaling smoothly between the two sizes. We had a jQuery solution for this in&nbsp;<a href=\"http://fittextjs.com/\">FitText</a>(meant of headings, of course) until the&nbsp;<code>calc()</code>&nbsp;function was shipped giving us a pure CSS solution.</p><p><span></span></p><pre rel=\"CSS\"><code><span>p </span><span>{</span>\n  <span>font-size</span><span>:</span> <span>calc</span><span>(</span><span>16</span>px + <span>(</span><span>24</span> - <span>16</span><span>)</span>*<span>(</span><span>100</span>vw - <span>400</span>px<span>)</span>/<span>(</span><span>800</span> - <span>400</span><span>)</span><span>)</span><span>;</span>\n<span>}</span></code></pre><div><iframe src=\"https://codepen.io/martinostenta/embed/PypqRO?height=381&amp;theme-id=1&amp;slug-hash=PypqRO&amp;default-tab=css%2Cresult&amp;user=martinostenta&amp;pen-title=Fluid%20Typography\" scrolling=\"no\" frameborder=\"0\" height=\"381\" allowtransparency=\"true\" allowfullscreen=\"true\" allowpaymentrequest=\"true\" title=\"Fluid Typography\"></iframe><div></div></div><p>The important numbers here are 24px (the larger font up to 800px viewports) and 16px (the smaller font size down to 400px viewports). I wouldn’t use the terms \"minimum\" or \"maximum\" to describe font sizes and viewports in this context because it is a little misleading. In fact, you still need to provide a default font size for viewports smaller than 400px and bigger than 800px — otherwise, the font will keep getting smaller (or bigger) with the same scale of the equation. Or, if you are fancy, you could define another scale for bigger screen sizes.</p><div><iframe src=\"https://codepen.io/martinostenta/embed/xyqGjG?height=521&amp;theme-id=1&amp;slug-hash=xyqGjG&amp;default-tab=css%2Cresult&amp;user=martinostenta&amp;pen-title=Fluid%20Typography%20with%20reset%20size\" scrolling=\"no\" frameborder=\"0\" height=\"521\" allowtransparency=\"true\" allowfullscreen=\"true\" allowpaymentrequest=\"true\" title=\"Fluid Typography with reset size\"></iframe><div></div></div><p>It works really well and you should definitely check the math behind this.</p><h3><a href=\"https://css-tricks.com/fun-tip-use-calc-to-change-the-height-of-a-hero-component/#article-header-id-0\">#</a>Padding and line height?</h3><p>I liked the concept of Fluid Typography so much that I asked myself if it could work with other properties. And it does! You can’t use a percentage, but as long as you stick with px, em or rem units, then it’s OK. I’m a pixel guy, so all my experiments have used those, but there is this&nbsp;<a href=\"https://websemantics.uk/tools/responsive-font-calculator/\">neat generator</a>that helps you with conversions if you need it.</p><p>So, back to&nbsp;<code>padding</code>&nbsp;and&nbsp;<code>line-height</code>. Using the same&nbsp;<code>calc()</code>logic, we can achieve a fully fluid *layout* with fixed values for defined screen sizes.</p><figure><img src=\"https://css-tricks.com/wp-content/uploads/2018/10/hero-01.png\" srcset=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1540944693/hero-01_yucp2v.png 1000w, https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_200,f_auto,q_auto/v1540944693/hero-01_yucp2v.png 200w\" sizes=\"(min-width: 1850px) calc( (100vw - 555px) / 3 )\n       (min-width: 1251px) calc( (100vw - 530px) / 2 )\n       (min-width: 1086px) calc(100vw - 480px)\n       (min-width: 626px)  calc(100vw - 335px)\n                           calc(100vw - 30px)\" alt=\"\"></figure><div><iframe src=\"https://codepen.io/martinostenta/embed/gdJrOZ?height=536&amp;theme-id=1&amp;slug-hash=gdJrOZ&amp;default-tab=css%2Cresult&amp;user=martinostenta&amp;pen-title=Pure%20CSS%20Variable%20Padding%2C%20Font%20Size%20and%20Line%20Height\" scrolling=\"no\" frameborder=\"0\" height=\"536\" allowtransparency=\"true\" allowfullscreen=\"true\" allowpaymentrequest=\"true\" title=\"Pure CSS Variable Padding, Font Size and Line Height\"></iframe><div></div></div><p>I implemented this idea&nbsp;<a href=\"https://www.musicultura.it/\">on this website</a>, but kept it to&nbsp;<code>font-size</code>and&nbsp;<code>line-height</code>. And, yes, it gets easier to look past all that math and put to use the more you work with it.</p><div><iframe src=\"https://codepen.io/martinostenta/embed/VEpvYz?height=615&amp;theme-id=1&amp;slug-hash=VEpvYz&amp;default-tab=css%2Cresult&amp;user=martinostenta&amp;pen-title=Working%20Example%20of%20calc()%20on%20font-size%20and%20line-hieght\" scrolling=\"no\" frameborder=\"0\" height=\"615\" allowtransparency=\"true\" allowfullscreen=\"true\" allowpaymentrequest=\"true\" title=\"Working Example of calc() on font-size and line-hieght\"></iframe><div></div></div><h3><a href=\"https://css-tricks.com/fun-tip-use-calc-to-change-the-height-of-a-hero-component/#article-header-id-1\">#</a>A digression about \"Hero\" components</h3><p>If you’re like me, then you might take issue with what we all have come to know as the&nbsp;<strong>hero component</strong>. It’s ubiquitous to the extent that it’s become a staple in design systems (like&nbsp;<a href=\"http://getbootstrap.com/docs/4.1/components/jumbotron/\">Bootstrap</a>) and you may have even seen it&nbsp;<a href=\"http://adventurega.me/bootstrap/\">satirized on sites like this</a>.</p><figure><img src=\"https://css-tricks.com/wp-content/uploads/2018/10/hero-02.jpg\" srcset=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1540944707/hero-02_iloxgb.jpg 1000w, https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_874,f_auto,q_auto/v1540944707/hero-02_iloxgb.jpg 874w, https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_200,f_auto,q_auto/v1540944707/hero-02_iloxgb.jpg 200w\" sizes=\"(min-width: 1850px) calc( (100vw - 555px) / 3 )\n       (min-width: 1251px) calc( (100vw - 530px) / 2 )\n       (min-width: 1086px) calc(100vw - 480px)\n       (min-width: 626px)  calc(100vw - 335px)\n                           calc(100vw - 30px)\" alt=\"\"></figure><p>My main gripe concerns the best way to make them responsive. If it’s not a *full screen* hero (i.e. takes over the entire viewport at any size), then I usually ask the designer how the page should behave. There’s often a proportion of the hero page that works fine, so that allows me to use&nbsp;<code>padding-bottom</code>&nbsp;in % with absolute positioning of the inner content. That tactic works most of the time,</p><p>This is fun and it works fine especially on the desktop version of a website. You end up with a neat hero section, the proportion is good and the content is centered.</p><div><iframe src=\"https://codepen.io/martinostenta/embed/OBXEPB?height=401&amp;theme-id=1&amp;slug-hash=OBXEPB&amp;default-tab=result&amp;user=martinostenta&amp;pen-title=Standard%20hero%20section%20with%20%27padding-bottom%27\" scrolling=\"no\" frameborder=\"0\" height=\"401\" allowtransparency=\"true\" allowfullscreen=\"true\" allowpaymentrequest=\"true\" title=\"Standard hero section with 'padding-bottom'\"></iframe><div></div></div><p>But what happens when you start shrinking the viewport? The hero remains readable up to a point, you really need to change the proportion.</p><p>Assuming we are working with a desktop-first responsive approach, we could start with a horizontal rectangle that scales down to the point where we’re left with a vertical rectangle on small screens.</p><figure><img src=\"https://css-tricks.com/wp-content/uploads/2018/10/hero-03.png\" srcset=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1540944726/hero-03_zkfl3q.png 1000w, https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_200,f_auto,q_auto/v1540944726/hero-03_zkfl3q.png 200w\" sizes=\"(min-width: 1850px) calc( (100vw - 555px) / 3 )\n       (min-width: 1251px) calc( (100vw - 530px) / 2 )\n       (min-width: 1086px) calc(100vw - 480px)\n       (min-width: 626px)  calc(100vw - 335px)\n                           calc(100vw - 30px)\" alt=\"\"><figcaption>Hero component with different proportions based on device</figcaption></figure><p>This is a PITA because you could end up with many lines of CSS to have a nice and readable hero section at various breakpoints.</p><p>There has to be a better way, right? What if the hero could increase its height while the page width gets narrower?</p><h3><a href=\"https://css-tricks.com/fun-tip-use-calc-to-change-the-height-of-a-hero-component/#article-header-id-2\">#</a>Back to fluidity!</h3><p>So, I turned back to the&nbsp;<code>calc()</code>&nbsp;function that worked in those other situations, like making the browser handle the math and scale things accordingly as the viewport changes.</p><p>Here’s the CSS from the Fluid Typography example we started with:</p><pre rel=\"CSS\"><code><span>p </span><span>{</span>\n  <span>width</span><span>:</span> <span>100%</span><span>;</span>\n  <span>max-width</span><span>:</span> <span>1200</span>px<span>;</span>\n  <span>margin</span><span>:</span> <span>0</span> auto<span>;</span>\n  <span>font-family</span><span>:</span> <span>'Open Sans'</span>, sans-serif<span>;</span>\n  <span>font-size</span><span>:</span> <span>calc</span><span>(</span><span>24</span>px + <span>(</span><span>18</span> - <span>24</span><span>)</span>*<span>(</span><span>100</span>vw - <span>400</span>px<span>)</span>/<span>(</span><span>1200</span> - <span>400</span><span>)</span><span>)</span><span>;</span>\n  <span>line-height</span><span>:</span> <span>1.5</span><span>;</span>\n  <span>padding</span><span>:</span> <span>10</span>px<span>;</span>\n<span>}</span></code></pre><p>Here’s what we want:&nbsp;<strong>a hero&nbsp;</strong>component that gets bigger while you shrink the page. I used pixel units for the&nbsp;<em>fluid part</em>&nbsp;and percentages everywhere else.</p><figure><img src=\"https://css-tricks.com/wp-content/uploads/2018/10/s_9236A7FABD59ACD8C507F14A531EB8CDF5CAD6D92450AB41567EB2FDDE09275A_1540481735856_schemamartino_Tavoladisegno1copia2.png\" srcset=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1540944812/s_9236A7FABD59ACD8C507F14A531EB8CDF5CAD6D92450AB41567EB2FDDE09275A_1540481735856_schemamartino_Tavoladisegno1copia2_sjapdr.png 1000w, https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_200,f_auto,q_auto/v1540944812/s_9236A7FABD59ACD8C507F14A531EB8CDF5CAD6D92450AB41567EB2FDDE09275A_1540481735856_schemamartino_Tavoladisegno1copia2_sjapdr.png 200w\" sizes=\"(min-width: 1850px) calc( (100vw - 555px) / 3 )\n       (min-width: 1251px) calc( (100vw - 530px) / 2 )\n       (min-width: 1086px) calc(100vw - 480px)\n       (min-width: 626px)  calc(100vw - 335px)\n                           calc(100vw - 30px)\" alt=\"\"></figure><p>Here’s a screencast of how the solution I landed on:</p><figure><div></div><ficaption><a href=\"https://codepen.io/martinostenta/pen/oPRbpw\">Live Demo</a></ficaption></figure><p>This is pretty useful when you want to give more vertical space to the text. Shrinking the viewport width from large to small will end up having more lines for the same text, since the font size can’t be too small.</p><figure><div></div></figure><div><iframe src=\"https://codepen.io/martinostenta/embed/ReErVK?height=740&amp;theme-id=1&amp;slug-hash=ReErVK&amp;default-tab=result&amp;user=martinostenta&amp;pen-title=Hero%20section%20with%20calc()\" scrolling=\"no\" frameborder=\"0\" height=\"740\" allowtransparency=\"true\" allowfullscreen=\"true\" allowpaymentrequest=\"true\" title=\"Hero section with calc()\"></iframe><div></div></div><p>Pretty nice, right? Yet another way&nbsp;<code>calc()</code>&nbsp;proved it could solve a scenario for me.</p><h3><a href=\"https://css-tricks.com/fun-tip-use-calc-to-change-the-height-of-a-hero-component/#article-header-id-3\">#</a>Yes, there are some caveats</h3><p>Browser support is very good, tallying almost 93% of the users (at the time of writing), with the main exception being Opera mini.</p><div><div><p>This browser support data is from&nbsp;<a href=\"http://caniuse.com/#feat=calc\">Caniuse</a>, which has more detail. A number indicates that browser supports the feature at that version and up.</p></div><div><h4><a href=\"https://css-tricks.com/fun-tip-use-calc-to-change-the-height-of-a-hero-component/#article-header-id-4\">#</a>Desktop</h4><table><thead><tr><th>Chrome</th><th>Opera</th><th>Firefox</th><th>IE</th><th>Edge</th><th>Safari</th></tr></thead><tbody><tr><td title=\"Chrome - \" data-browser-name=\"Chrome\"><span>19*</span></td><td title=\"Opera - \" data-browser-name=\"Opera\"><span>15</span></td><td title=\"Firefox - \" data-browser-name=\"Firefox\"><span>4*</span></td><td title=\"IE - \" data-browser-name=\"IE\"><span>10</span></td><td title=\"Edge - \" data-browser-name=\"Edge\"><span>12</span></td><td title=\"Safari - \" data-browser-name=\"Safari\"><span>6*</span></td></tr></tbody></table></div><div><h4><a href=\"https://css-tricks.com/fun-tip-use-calc-to-change-the-height-of-a-hero-component/#article-header-id-5\">#</a>Mobile / Tablet</h4><table><thead><tr><th>iOS Safari</th><th>Opera Mobile</th><th>Opera Mini</th><th>Android</th><th>Android Chrome</th><th>Android Firefox</th></tr></thead><tbody><tr><td title=\"iOS Safari - \" data-browser-name=\"iOS Safari\"><span>6.0-6.1*</span></td><td title=\"Opera Mobile - \" data-browser-name=\"Opera Mobile\"><span>46</span></td><td title=\"Opera Mini - \" data-browser-name=\"Opera Mini\"><span>No</span></td><td title=\"Android - \" data-browser-name=\"Android\"><span>67</span></td><td title=\"Android Chrome - \" data-browser-name=\"Android Chrome\"><span>69</span></td><td title=\"Android Firefox - \" data-browser-name=\"Android Firefox\"><span>62</span></td></tr></tbody></table></div></div><p>Also, remember that this&nbsp;<code>calc()</code>&nbsp;technique supports only px, em, and rem units. But the examples we covered here are pretty easy to convert units for things like&nbsp;<code>padding-bottom</code>&nbsp;percentages to pixels since the hero is typically 100% in width.</p><p>Oh! And remember to reset your values before and after the breakpoints in the&nbsp;<code>calc()</code>&nbsp;function. Otherwise you’ll end up with either very big or very small values for the target properties.</p><h3><a href=\"https://css-tricks.com/fun-tip-use-calc-to-change-the-height-of-a-hero-component/#article-header-id-6\">#</a>What say you?</h3><p>This is probably just one way we can handle the situation and it was primarily driven by my interest in the&nbsp;<code>calc()</code>&nbsp;function. So, that begs the question: how have you handled scaling hero component height? Have you put&nbsp;<code>calc()</code>&nbsp;to use for it? Do you prefer wrangling breakpoints at various widths? Is there something else you use? Light up the comments!</p>","filePath":"pages/CSS/.md","_id":"RMNNSt4iyYri5tBZ"}
{"title":"Building forms using React — everything you need to know","sourceUrl":"https://www.codementor.io/blizzerand/building-forms-using-react-everything-you-need-to-know-iz3eyoq4y","path":"React/React/React/React/Building forms using React — everything you need to know","category":"React","tags":["React"," Form"],"excerpt":"test","date":{"$$date":1539094456041},"coverImage":"https://reactjs.org/docs/forms.html","type":"Post","frontmatter":"---\npath: \"JavaScript/\"\ndate: \"\"\ntitle: \"rererer\"\ntags: [\"JavaScript\",\"ES6\"]\ncategory: \"JavaScript\"\ncategoryColor: \"#F3C610\"\nexcerpt: \"\"\ncoverImage: \"\"\nsourceUrl: \"\"\ntype: \"Post\"\n---\n    ","filePath":"pages/JavaScript/.md","markdownCode":"Forms are integral to any modern application. They serve as a basic medium for users to interact with your app. Developers rely on forms for everything: securely logging in the user, searching and filtering the product list, booking a product, and building a cart, etc. More complex applications built for enterprises are usually more form-intensive, with the input fields spanning over multiple tabs. On top of that, you have to consider the validation logic that needs to be deployed.\n\nIn this tutorial, we're going to look at how React handles forms. We'll cover not just the basics, but also form validation and best practices too — even experienced developers get certain details wrong.\n\nLet's get started.\n\n[](#creating-a-form-controlled-component-vs-uncontrolled-component)Creating a Form — Controlled Component vs. Uncontrolled Component\n------------------------------------------------------------------------------------------------------------------------------------\n\nReact offers a stateful, reactive approach to building forms. Unlike other DOM elements, HTML form elements work differently in React. The form data, for instance, is usually handled by the component rather than the DOM, and is usually implemented using controlled components. The image below perfectly describes how controlled components work in React.\n\n![react.png](https://process.filestackapi.com/cache=expiry:max/Qb7pi8kTzenybAUcijaB)\n\nThe form’s structure is similar to those of the usual HTML forms. However, each input element gets a component of its own, which we call dumb components. The container component is responsible for maintaining the state. The difference is, we're using a callback function to handle form events and then using the container’s state to store the form data. This gives your component better control over the form control elements and the form data.\n\nThe callback function is triggered on events, including change of form control values, or on form submission. The function then pushes the form values into the local state of the component and the data is then said to be controlled by the component. Because we are using the value attribute on the form element, the value displayed will be the value of `this.state.value`.\n\nThere is another technique, popularly known as uncontrolled components, for creating input forms. This is more like traditional HTML forms because the input form data is stored inside the DOM and not within the component. Elements like `<input>`and `<textarea>` maintain their own state, which they update when the input values change. You can query the DOM for the value of an input field using a ref.\n\nHere is an example from the [official docs](https://reactjs.org/docs/uncontrolled-components.html) that demonstrate how uncontrolled components work.\n\n```javascript\n class NameForm extends Component {\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(e) {\n    alert('The value is: ' + this.input.value);\n    e.preventDefault();\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <label>\n          Name:\n          <input type=\"text\" ref={(input) => this.input = input} />\n        </label>\n        <input type=\"submit\" value=\"Submit\" />\n      </form>\n    );\n  }\n}\n\n\n```\n\nHere, the `<input>` component is responsible for storing its state. The ref attribute creates a reference to the DOM node accessible and you can pull this value when you need it — when you're about to submit the form in the example.\n\nReact recommends using controlled components over refs to implement forms. Refs offer a backdoor to the DOM, which might tempt you to use it to do things the jQuery way. Controlled components, on the other hand, are more straightforward — the form data is handled by a React component. However, if you want to integrate React with a non-React project, or create a quick and easy form for some reason, you can use a `ref`. The rest of this tutorial is going to focus on controlled components.\n\n[](#react-form-demo)React Form Demo\n-----------------------------------\n\nHere is the codesandobx demo for the form that we’ll be creating today.  \n@[React Form Demo](http://codesandbox.io/embed/x8omy0p9z)\n\nYou can also grab a copy of the code from [my GitHub repo](https://github.com/blizzerand/react-forms). Clone the repo, run `npm install`, and then run `npm start`.\n\n[](#structuring-a-form)Structuring a Form\n-----------------------------------------\n\nReact's composition model lets you organize your code into smaller reusable components. Each component exists as an independent functional unit and an hierarchy of components can be used to represent a specific feature. This structure works particularly well with forms. You can create custom components for `<input>`, `<textarea>`, `<select>`, etc. and reuse them to compose a `FormContainer` component.\n\nNote: although it could be tempting to use a form library instead, chances are high that you might come across obstacles when you need to add custom behavior and validation. Creating a reusable form component from scratch will help you bolster your understanding of React forms.\n\n```javascript\nimport React, { Component } from 'react';  \nimport './styles.css';  \nimport FormContainer from './containers/FormContainer';\n\nclass App extends Component {  \n  render() {\n    return (\n      <div className=\"container\">\n        <h3>React Form</h3>\n        <FormContainer />\n      </div>\n    );\n  }\n}\n\nexport default App; \n\n```\n\nFormContainer is a container component that renders all of the form elements and handles all of the business logic. We call it a container component because it takes care of updating the state of the form, handling form submission, and making API calls/dispatching Redux actions. The dumb components or presentational components are concerned with how things look and contain the actual DOM markup. These components receive data and callbacks exclusively as props. I've covered more about it on my [Stateful vs. Stateless components in React](https://code.tutsplus.com/tutorials/stateful-vs-stateless-functional-components-in-react--cms-29541) tutorial.\n\nLet's move on and create a container:\n\n```javascript\nimport React, {Component} from 'react';  \n\n/* Import Components */\nimport CheckBox from '../components/CheckBox';  \nimport Input from '../components/Input';  \nimport TextArea from '../components/TextArea';  \nimport Select from '../components/Select';\nimport Button from '../components/Button'\n\nclass FormContainer extends Component {  \n  constructor(props) {\n    super(props);\n\n    this.state = {\n      newUser: {\n        name: '',\n        email: '',\n        age: '',\n        gender: '',\n        expertise: '',\n        about: ''\n\n      },\n\n      genderOptions: ['Male', 'Female', 'Others'],\n      skillOptions: ['Programming', 'Development', 'Design', 'Testing']\n\n    }\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    this.handleClearForm = this.handleClearForm.bind(this);\n  }\n\n  /* This life cycle hook gets executed when the component mounts */\n\n  handleFormSubmit() {\n    // Form submission logic\n  }\n  handleClearForm() {\n    // Logic for resetting the form\n  }\n  render() {\n    return (\n      <form className=\"container\" onSubmit={this.handleFormSubmit}>\n\n        <Input /> {/* Name of the user */}\n        <Input /> {/* Input for Age */} \n        <Select /> {/* Gender Selection */}\n        <CheckBox /> {/* List of Skills (eg. Programmer, developer) */}\n        <TextArea /> {/* About you */}\n        <Button /> { /*Submit */ }\n        <Button /> {/* Clear the form */}\n      </form>\n    );\n  }\n}\n\nexport default FormContainer;\n}\n\n```\n\nFirst, we've imported the dumb components from the components directory. The components include `<Input>`, `<Select>`, `<CheckBox>`, `<TextArea>`, and `<Button>`.\n\nThen, we have initiated the state for storing the user data and the UI data. Two methods — `handleFormSubmit()` and `handleClearForm()` — have been created to handle the form logic. The render method renders all of the input fields and buttons required for our sign up form.\n\n[](#composing-the-dumb-components)Composing the Dumb Components\n---------------------------------------------------------------\n\nWe've laid out the structure of the form. Next, we need to compose the child components. Let's go through the components one by one.\n\n[](#input)<Input />\n-------------------\n\nThe `<Input />` component displays a one-line input field. The input type could be either text or number. Let's have a look at the props that we need to create an `<Input />` component.\n\n*   `type` — The `type` prop determines whether the input field rendered is of type, text, or number. For instance, if the value of `type` is equal to number, then `<input type=\"number\" />` will be rendered. Otherwise, `<input type=\"text\" />` gets rendered.\n*   `title` — The value of the title prop will be displayed as a label of that particular field.\n*   `name` — This is the name attribute for the input.\n*   `value` — The value (either text or number) that should be displayed inside the input field. You can use this prop to give default value.\n*   `placeholder` — An optional string that you can pass so that the input field displays a placeholder text.\n*   `handleChange` — A control function that gets triggered when the input control element's value changes. The function then updates the state of the parent component and passes the new value through the value prop.\n\nHere's the code for the `<Input/>` component. Note that we're using stateless functional components here.\n\n```javascript\nconst Input = (props) => {\n    return (  \n  <div className=\"form-group\">\n    <label htmlFor={props.name} className=\"form-label\">{props.title}</label>\n    <input\n      className=\"form-input\"\n      id={props.name}\n      name={props.name}\n      type={props.type}\n      value={props.value}\n      onChange={props.handleChange}\n      placeholder={props.placeholder} \n    />\n  </div>\n)\n}\n\nexport default Input;\n\n```\n\nYou can further expand the list of possible attributes and add them as props. Here is what the component's declaration looks like:\n\n```javascript\n<Input type={'text'}\n               title= {'Full Name'} \n               name= {'name'}\n               value={this.state.newUser.name} \n               placeholder = {'Enter your name'}\n               handleChange = {this.handleFullName}\n               /> {/* Name of the user */}\n               \n\n```\n\nThe `handleChange` callback takes care of updating the state and the updated value propagates through `props.value`. I am going to name the callback function as `handleFullName`.\n\n```javascript\n/* FormContainer.jsx */\n\n//...\n  handleFullName(e) {\n   let value = e.target.value;\n   this.setState( prevState => ({ newUser : \n        {...prevState.newUser, name: value\n        }\n      }))\n  }\n//...\n\n```\n\nThe `setState` accepts either an object or an updater function with the following signature.\n\n```\n(prevState, props) => stateChange\n\n```\n\nThe `prevState` object holds the up-to-date value of the previous state. We are going to merge the updated values with the previous state.\n\n_Note_: in JavaScript, class methods are not bound by default. You will need to bind it manually. What does that mean? You will need to add a binding into the constructor for each class method and the binding will look like this:\n\n```\nthis.handleFullName = this.handleFullName.bind(this)\n\n```\n\nAlternatively, you can use [class fields](https://github.com/tc39/proposal-class-fields) to do binding outside the constructor. The feature is still in experimental phase, so you will need to install the babel plugin [transform-class-properties to support it](https://babeljs.io/docs/plugins/transform-class-properties/).\n\nThe next input field is going to be for age. The logic of the `handleAge` will be similar to that of the `handleFullName` method.\n\n```\n/* FormContainer.jsx */\n\nhandleAge(e) {\n       let value = e.target.value;\n   this.setState( prevState => ({ newUser : \n        {...prevState.newUser, age: value\n        }\n      }), () => console.log(this.state.newUser))\n  }\n\n```\n\nThis method updates the state of this.state.newUser.age. Although this approach is okay, you can refactor the code and create a generic handler method that works for all `<Input />` components.\n\n```\n/* FormContainer.jsx */\n\nhandleInput(e) {\n     let value = e.target.value;\n     let name = e.target.name;\n     this.setState( prevState => {\n        return { \n           newUser : {\n                    ...prevState.newUser, [name]: value\n                   }\n        }\n     }, () => console.log(this.state.newUser)\n     )\n }\n\n```\n\n`handleInput()` will replace both `handleFullName()` and `handleAge()`. The only change we've made is to extract the value of name from form variable and then use that data to set the state. So, the value of the name prop should be same as the key of the property in the state.\n\nNext up, `<Select />`.\n\n[](#select)<Select />\n---------------------\n\nThe `<Select />` component displays a list of drop-down items. Usually, there will be a placeholder text or a default value for the drop-down. Here are the props for the `<Select />`:\n\n*   `title` — The value of the title prop be displayed as label of the `<select>` element.\n*   `name` — The name attribute for the `<select>` element.\n*   `options` — An array of available options. For instance, we are using the `<select />` to display a drop-down list of gender options.\n*   `value` — The value prop can be used to set the default value of the field.\n*   `placeholder` — A short string that populates the first `<option>` tag.\n*   `handleChange` — A control function that gets triggered when the input control element's value changes. The function then updates the state of the parent component and passes the new value through the value prop.\n\nLet's have a look at the actual code for the `<Select />` component.\n\n```javascript\n/*Select.jsx*/\n\nconst Select = (props) => {\n    return(\n        <div className=\"form-group\">\n            <label htmlFor={props.name}> {props.title} </label>\n            <select\n              name={props.name}\n              value={props.value}\n              onChange={props.handleChange}\n              >\n              <option value=\"\" disabled>{props.placeholder}</option>\n              {props.options.map(option => {\n                return (\n                  <option\n                    key={option}\n                    value={option}\n                    label={option}>{option}\n                  </option>\n                );\n              })}\n            </select>\n      </div>)\n}\n\nexport default Select;\n\n```\n\nThe first option tag is populated with the placeholder string. The rest of the options are mapped from the array that we passed on as props. While using the map method to iterate through DOM elements, remember to add a `key` attribute that's unique. This helps React keep track of DOM updates. If you leave out the `key` attribute, you will see a warning in your browser and might encounter performance issues down the road.\n\nNow, let's have a look at the callback function. The logic for method is similar to that of the generic handleInput that we created earlier. We can actually plug in that handler method as a prop and everything should work as expected.\n\n```javascript\n<Select title={'Gender'}\n       name={'gender'}\n       options = {this.state.genderOptions} \n       value = {this.state.newUser.gender}\n       placeholder = {'Select Gender'}\n       handleChange = {this.handleInput}\n/> {/* Age Selection */}\n\n```\n\n[](#checkbox)<CheckBox/>\n------------------------\n\nCheckboxes might appear a bit more complicated because arrays are involved. But both `<CheckBox>` and `<Select>` are similar in terms of props. The major difference lies in how the state is updated. Let's have a look at the props first.\n\n*   `title` — Already covered.\n*   `name` — Already covered.\n*   `options` — An array of available options. The array is usually composed of strings that end up being the label and the value of each checkbox.\n*   `selectedOptions` — An array of selected values. If the user had selected certain choices beforehand, the selectedOptions array would be populated with those values. This is synonymous to the <Select /> component's value prop.\n*   `handleChange` — Already covered.\n\nHere's the CheckBox component.\n\n```javascript\n/* CheckBox.jsx */\n\nconst CheckBox = (props) => {\n\n    return( <div>\n    <label for={props.name} className=\"form-label\">{props.title}</label>\n    <div className=\"checkbox-group\">\n      {props.options.map(option => {\n        return (\n          <label key={option}>\n            <input\n              className=\"form-checkbox\"\n              id = {props.name}\n              name={props.name}\n              onChange={props.handleChange}\n              value={option}\n              checked={ props.selectedOptions.indexOf(option) > -1 }\n              type=\"checkbox\" /> {option}\n          </label>\n        );\n      })}\n    </div>\n  </div>\n);\n\n}\n\n```\n\nThe line `checked={ props.selectedOptions.indexOf(option) > -1 }` might be confusing if you've never used JavaScript's `indexOf` method before. `indexOf` checks whether a particular item exists within an array and returns its index. Assuming that option holds a string, it checks whether the string exists within the `selectedOptions` and if the item doesn't exist in the array, it will return -1. This is the easiest way to populate values to a checkbox group in a form.\n\nSince we need to push an array into the state, which is more complicated than the usual `handleInput()`, let's create a new method for handling checkboxes.\n\n```javascript\nhandleSkillsCheckBox(e) {\n\n    const newSelection = e.target.value;\n    let newSelectionArray;\n\n    if(this.state.newUser.skills.indexOf(newSelection) > -1) {\n      newSelectionArray = this.state.newUser.skills.filter(s => s !== newSelection)\n    } else {\n      newSelectionArray = [...this.state.newUser.skills, newSelection];\n    }\n\n      this.setState( prevState => ({ newUser:\n        {...prevState.newUser, skills: newSelectionArray }\n      })\n      )\n}\n\n```\n\nThe user can interact with the checkbox in two ways — check an item, or uncheck an existing item. This user interaction corresponds to two actions — adding an item into the array, or removing an existing item from the array.\n\nThe `newSelection` variable has the value of the newly selected (or deselected) item. We compare it with the existing selection of items stored at `this.state.newUser.skills`. We're again going to rely on `indexOf` to check whether the string stored in `newSelection` is already of the array.  \nIf it's part of the array, the condition falls true and the new selection item is filtered out and stored in newSelection. Otherwise, the newSelection item is concatenated into the array using spread operator.\n\nFinally, the state is updated using `this.setState`.\n\n[](#textarea)<TextArea />\n-------------------------\n\nI am going to leave this as an exercise for the reader. This is fairly similar to the `<Input />` component that we created earlier. The `<textarea />` element should accept additional props for rows and columns. The code for the `TextArea` component is available in the sandbox demo for reference.\n\n[](#button)<Button />\n---------------------\n\nButtons are easiest of the lot. You can keep the `<Button />` component fairly simple and easy. Here is are the list of props that a button requires:\n\n*   `title` — Text for the button.\n*   `action` — Callback function\n*   `style` — Style objects can be passed as props.\n\nHere's the `<Button/>` in action:\n\n```javascript\n/*Button.jsx */\nconst Button = (props) => {\n    console.log(props.style);\n    return(\n        <button \n            style= {props.style} \n            onClick= {props.action}>    \n            {props.title} \n        </button>)\n}\n\nexport default Button;\n\n```\n\n[](#form-actions-handleclearform-and-handleformsubmit)Form Actions — `handleClearForm` and `handleFormSubmit`\n-------------------------------------------------------------------------------------------------------------\n\nWe've nearly reached the end of the tunnel. The last step is to compose the form actions. Since the FormContainer component maintains the state, the form action methods will go there.\n\nThe `handleClearForm` method will clear the state and set it back to its initial values.\n\n```javascript\nhandleClearForm(e) {\n\n      e.preventDefault();\n      this.setState({ \n        newUser: {\n          name: '',\n          age: '',\n          gender: '',\n          skills: [],\n          about: ''\n        },\n      })\n  }\n\n```\n\nThe line `e.preventDefault()` prevents the page from being refreshed on form submission, which is the default form behavior.\n\nThe `handleFormSubmit()` method takes care of making AJAX requests to the server. The data that needs to be sent is available at this.state.newUser. There are many libraries that you can use to make AJAX calls. I am going to use fetch here.\n\n```javascript\nhandleFormSubmit(e) {\n    e.preventDefault();\n    let userData = this.state.newUser;\n\n    fetch('http://example.com',{\n        method: \"POST\",\n        body: JSON.stringify(userData),\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n      }).then(response => {\n        response.json().then(data =>{\n          console.log(\"Successful\" + data);\n        })\n    })\n  }   \n\n```\n\nThat's it!\n\n[](#summary)Summary\n-------------------\n\nIn this article, we've covered everything that you need to know about building forms in React. React has component-based architecture and the components are meant to be reusable. We've gone ahead and created components for the input elements, such as: `<input/>`, `<select />`, `<textArea/>`, etc. You can further customize the components according to your requirements by passing more props.\n\nI hope you've had a good read. What are your thoughts about building forms using React? If you have anything to share, let us know in the comments.","_id":"RnFGXODGFlwDUYjI"}
{"date":"2018-12-26T15:41:02.870Z","title":"Creating and filling Arrays of arbitrary lengths in JavaScript","sourceUrl":"http://2ality.com/2018/12/creating-arrays.html#cheat-sheet-creating-arrays","path":"JavaScript/","category":"JavaScript","tags":["Array"," Tips & Tricks"," JavaScript"],"author":"Dr. Axel Rauschmayer","excerpt":"","dateCreated":1545838668891,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Wed Dec 26 2018 21:11:02 GMT+0530 (India Standard Time)'\ntitle: 'Creating and filling Arrays of arbitrary lengths in JavaScript'\ntags: ['Array','Tips & Tricks','JavaScript']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'http://2ality.com/2018/12/creating-arrays.html#cheat-sheet-creating-arrays'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Filled with holes or&nbsp;<code>undefined</code>:</p><ul><li><code>new Array(3)</code><br>→&nbsp;<code>[ , , ,]</code></li><li><code>Array.from(new Array(2))</code><br>→&nbsp;<code>[undefined, undefined]</code></li><li><code>[...new Array(2)]</code><br>→&nbsp;<code>[undefined, undefined]</code></li></ul><p>Filled with arbitrary values:</p><ul><li><code>const a=[]; for (let i=0; i&lt;3; i++) a.push(0);</code><br>→&nbsp;<code>[0, 0, 0]</code></li><li><code>new Array(3).fill(0)</code><br>→&nbsp;<code>[0, 0, 0]</code></li><li><code>Array.from(new Array(3), () =&gt; 0)</code><br>→&nbsp;<code>[0, 0, 0]</code>&nbsp;(small integers)</li><li><code>Array.from(new Array(3), () =&gt; ({}))</code><br>→&nbsp;<code>[{}, {}, {}]</code>&nbsp;(unique objects)</li></ul><p>Ranges of integers:</p><ul><li><code>Array.from(new Array(3), (x, i) =&gt; i)</code><br>→&nbsp;<code>[0, 1, 2]</code></li><li><code>const START=2, END=5; Array.from(new Array(END-START), (x, i) =&gt; i+START)</code><br>→&nbsp;<code>[2, 3, 4]</code></li><li><code>[...new Array(3).keys()]</code><br>→&nbsp;<code>[0, 1, 2]</code></li></ul>","filePath":"pages/JavaScript/.md","_id":"TBxRQPdkCNdkM3ro"}
{"date":"2018-11-22T10:51:37.967Z","title":"Manage your packages with versions","sourceUrl":"https://ronapelbaum.github.io/2017/12/15/npm-version/","path":"NPM/","category":"NPM","tags":["NPM"],"author":"Ron Apelbaum","excerpt":"","dateCreated":1542882787144,"coverImage":"","type":"Post","frontmatter":"---\npath: 'NPM/'\ndate: 'Thu Nov 22 2018 16:21:37 GMT+0530 (India Standard Time)'\ntitle: 'Manage your packages with versions'\ntags: ['NPM']\ncategory: 'NPM'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://ronapelbaum.github.io/2017/12/15/npm-version/'\ntype: 'Post'\n---\n    ","htmlCode":"<div><h2>Youe package</h2>\n\n<p>So you have your really cool open source project.\nNow what?</p>\n<div><div><pre><code>npm publish\n</code></pre></div></div>\n\n<p>Yep, now your package is public and anyone can use it.</p>\n\n<h2>Show must go on…</h2>\n\n<p>You are continously improving your package, adding features and fix bugs…</p>\n\n<p>Now you need to update your published package, so that you can share the love with the big world.\nIf you’ll try to run <code>npm publish</code>, it will fail. You need to bump your package version first.</p>\n\n<p>You can just change the version in your <code>package.json</code> and then run <code>npm publish</code>.</p>\n\n<h2>Meet <a href=\"http://semver.org/\"><code>semver</code></a></h2>\n\n<p><a href=\"http://semver.org/\"><code>semver</code></a> is a modern approach for managing package versions.</p>\n\n<p><strong>TL;DR;</strong></p>\n\n<p>A package version should have a format of <code>x.y.z</code>:</p>\n<ul>\n  <li><code>x</code>: <em>MAJOR</em> version: should increment on <em>api break</em>.</li>\n  <li><code>y</code>: <em>MINOR</em> version: should increment on <em>api change</em>.</li>\n  <li><code>z</code>: <em>PATCH</em> version: should increment on every tiny change (bug fixes)</li>\n</ul>\n\n<h2><code>npm version</code></h2>\n\n<p>Instead of changing the version in <code>package.json</code> manually, you can use the <a href=\"https://docs.npmjs.com/cli/version\"><code>npm version</code></a> command:</p>\n\n<p>i.e.</p>\n<div><div><pre><code>npm version patch\n</code></pre></div></div>\n<p><em>What does this do?</em></p>\n<ol>\n  <li>change the version in <code>package.json</code></li>\n  <li>commit the change (<code>git commit</code>)</li>\n  <li>create a <code>git tag</code></li>\n</ol>\n\n<blockquote>\n  <p>Since <code>npm version</code> command is using git commands, it’s better that your git working diractory will be clean from any unstaged/uncommitted changes</p>\n</blockquote>\n\n<h2><code>git tag</code></h2>\n\n<p>Git tags are simple pointers, like branches, that point to a commit in the commit tree.</p>\n<blockquote>\n  <p>You can think of <em>tags</em> as <em>read-only</em> pointers, that once you’ve set a tag to a commit it stays forever, as apposed to <em>branches</em> which are <em>read-and-write</em> pointers, that are changed to point to your latest commit on your branch.</p>\n</blockquote>\n\n<p>This allows us to continue working on the project, and still keep “bookmarks” of all our previous versions that were published.</p>\n\n<h2><code>git push</code></h2>\n\n<p>Since we’ve mode some code changes (to <em>package.json</em>), we now need to push the changes back to git origin. We also want to push the new created <em>tag</em>:</p>\n<div><div><pre><code>git push &amp;&amp; git push --tags \n</code></pre></div></div>\n<p>We can also use the <a href=\"https://git-scm.com/docs/git-push#git-push---follow-tags\"><code>follow-tags</code></a> flag:</p>\n<div><div><pre><code>git push --follow-tags\n</code></pre></div></div>\n\n<h2><code>npm publish</code></h2>\n\n<p>Now git origin has all the data about our new release. All that’s left is to publish it to npm repository:</p>\n<div><div><pre><code>npm publish\n</code></pre></div></div></div>","filePath":"pages/NPM/.md","_id":"TLoU41YlRshWLK2Z"}
{"date":"2018-11-22T10:30:51.230Z","title":"Introduction to Unit Testing in Angular","sourceUrl":"https://alligator.io/angular/introduction-unit-testing/","path":"Angular/","category":"Angular","tags":["Angular"," Unit Testing"," TDD"],"author":"","excerpt":"","dateCreated":1542882451098,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Angular/'\ndate: 'Thu Nov 22 2018 16:00:51 GMT+0530 (India Standard Time)'\ntitle: 'Introduction to Unit Testing in Angular'\ntags: ['Angular','Unit Testing','TDD']\ncategory: 'Angular'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://alligator.io/angular/introduction-unit-testing/'\ntype: 'Post'\n---\n    ","htmlCode":"<div itemprop=\"articleSection\">\n    <p>It’s easy to get started with unit testing for Angular 2+ apps. If your projects was setup using the <a href=\"/angular/angular-cli-reference/\">Angular\n            CLI</a>, everything will be ready for you to start writing tests using <a href=\"https://jasmine.github.io/\">Jasmine</a>\n        as the testing framework and <a href=\"https://karma-runner.github.io\">Karma</a> as the test runner. Angular\n        also provides utilities like <em>TestBed</em> and <em>async</em> to make testing asynchronous code, components,\n        directives or services easier.</p>\n    <h2>Jasmine</h2>\n    <p>First, a few things that are important to know about Jasmine:</p>\n    <ul>\n        <li><em>describe</em> blocks define a test suite and each <em>it</em> block is for an individual test.</li>\n        <li><code>beforeEach</code> runs before each test and is used for the <em>setup</em>\n            part of a test.</li>\n        <li><code>afterEach</code> runs after each test and is used for the <em>teardown</em>\n            part of a test.</li>\n        <li>You can also use <code>beforeAll</code> and <code>afterAll</code>,\n            and these run once before or after all tests.</li>\n        <li>You test an assertion in Jasmine with <em>expect</em> and using a matcher like <em>toBeDefined</em>, <em>toBeTruthy</em>,\n            <em>toContain</em>, <em>toEqual</em>, <em>toThrow</em>, <em>toBeNull</em>… For example: <code>expect(myValue).toBeGreaterThan(3);</code></li>\n        <li>You can do negative assertion with <em>not</em>: <code>expect(myValue).not.toBeGreaterThan(3);</code></li>\n        <li>You can also define custom matchers.<a href=\"https://ultimatecourses.com/?ref=76683_tzxmdefcc\" rel=\"noopener nofollow\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</a></li></ul>\n    <h2>Getting started</h2>\n    <p>Your test files (called spec files; hence the <em>.spec.ts</em>) are usually placed right alongside the files\n        that they test, but they can just as well be in their own separate directory if you prefer. Upon creating a new\n        Angular 2+ project, the default spec file for a component will look like the following:</p>\n    <p>app.component.spec.ts</p>\n    <pre><code>import { TestBed, async } from '@angular/core/testing';\n\nimport { AppComponent } from './app.component';\n\ndescribe('AppComponent', () =&gt; {\n  beforeEach(async(() =&gt; {\n    TestBed.configureTestingModule({\n      declarations: [\n        AppComponent\n      ],\n    }).compileComponents();\n  }));\n\n  it('should create the app', async(() =&gt; {\n    const fixture = TestBed.createComponent(AppComponent);\n    const app = fixture.debugElement.componentInstance;\n    expect(app).toBeTruthy();\n  }));\n\n  it(`should have as title 'app works!'`, async(() =&gt; {\n    const fixture = TestBed.createComponent(AppComponent);\n    const app = fixture.debugElement.componentInstance;\n    expect(app.title).toEqual('app works!');\n  }));\n});</code></pre>\n    <p>The above simply tests that the app component is created and that the title property on the component class has\n        the value <strong>app works!</strong></p>\n    <p>This includes a lot of utilities already. Let’s simplify a little bit and just test the component class on its\n        own so that we can then better understand the utilities that are available on top of that:</p>\n    <pre><code>import { AppComponent } from './app.component';\n\ndescribe('AppComponent', () =&gt; {\n  let appComponent = new AppComponent();\n\n  it('should create the app', () =&gt; {\n    const app = appComponent;\n    expect(app).toBeTruthy();\n  });\n\n  it('should have `app works!` title', () =&gt; {\n    const title = appComponent.title;\n    expect(title).toEqual('app works!');\n  });\n});\n</code></pre>\n    <h2>Angular Testing Utilities</h2>\n    <h3>TestBed &amp; Component Fixtures</h3>\n    <p><em>TestBed</em> is the main utility available for Angular-specific testing. You’ll use <code>TestBed.configureTestingModule</code>\n        in your test suite’s <code>beforeEach</code> block and give it an object with similar\n        values as a regular <strong>NgModule</strong> for <em>declarations</em>, <em>providers</em> and <em>imports</em>.\n        You can then chain a call to <code>compileComponents</code> to tell Angular to\n        compile the declared components.</p>\n    <p>You can create a <em>component fixture</em> with <code>TestBed.createComponent</code>.\n        Fixtures have access to a <em>debugElement</em>, which will give you access to the internals of the component\n        fixture.</p>\n    <p>Change detection isn’t done automatically, so you’ll call <code>detectChanges</code>\n        on a fixture to tell Angular to run change detection.</p>\n    <h3>Async</h3>\n    <p>Wrapping the callback function of a test or the first argument of <code>beforeEach</code>\n        with <em>async</em> allows Angular to perform asynchronous compilation and wait until the content inside of the\n        <strong>async</strong> block to be ready before continuing.</p>\n    <h2>A Simple Example</h2>\n    <p>Let’s create a simple component that increments or decrements a value. Here are the internals of the component\n        class:</p>\n    <pre><code>value = 0;\nmessage: string;\n\nincrement() {\n  if (this.value &lt; 15) {\n    this.value += 1;\n    this.message = '';\n  } else {\n    this.message = 'Maximum reached!';\n  }\n}\ndecrement() {\n  if (this.value &gt; 0) {\n    this.value -= 1;\n    this.message = '';      \n  } else {\n    this.message = 'Minimum reached!';\n  }\n}</code></pre>\n    <p>And here’s the template:</p>\n    <div>\n        <div>\n            <pre><code><span>&lt;h1&gt;</span>{{ value }}<span>&lt;/h1&gt;</span>\n\n<span>&lt;hr&gt;</span>\n\n<span>&lt;button</span> <span>(</span><span>click</span><span>)=\"</span><span>increment</span><span>()\"</span> <span>class=</span><span>\"increment\"</span><span>&gt;</span>Increment<span>&lt;/button&gt;</span>\n<span>&lt;button</span> <span>(</span><span>click</span><span>)=\"</span><span>decrement</span><span>()\"</span> <span>class=</span><span>\"decrement\"</span><span>&gt;</span>Decrement<span>&lt;/button&gt;</span>\n\n<span>&lt;p</span> <span>class=</span><span>\"message\"</span><span>&gt;</span>\n  {{ message }}\n<span>&lt;/p&gt;</span>\n</code></pre>\n        </div>\n    </div>\n    <h3>The test suite</h3>\n    <p>Now here’s how the test suite for our component can look like:</p>\n    <p>app.component.spec.ts</p>\n    <pre><code>import { TestBed, async, ComponentFixture } from '@angular/core/testing';\nimport { By } from '@angular/platform-browser';\nimport { DebugElement } from '@angular/core';\n\nimport { AppComponent } from './app.component';\n\ndescribe('AppComponent', () =&gt; {\n  let fixture: ComponentFixture&lt;AppComponent&gt;;\n  let debugElement: DebugElement;\n\n  beforeEach(async(() =&gt; {\n    TestBed.configureTestingModule({\n      declarations: [\n        AppComponent\n      ],\n    }).compileComponents();\n\n    fixture = TestBed.createComponent(AppComponent);\n    debugElement = fixture.debugElement;\n  }));\n\n  it('should increment/decrement value', () =&gt; {\n    fixture.componentInstance.increment();\n    expect(fixture.componentInstance.value).toEqual(1);\n\n    fixture.componentInstance.decrement();\n    expect(fixture.componentInstance.value).toEqual(0);\n  });\n\n  it('should increment in template', () =&gt; {\n    debugElement\n      .query(By.css('button.increment'))\n      .triggerEventHandler('click', null);\n\n    fixture.detectChanges();\n    const value = debugElement.query(By.css('h1')).nativeElement.innerText;\n    expect(value).toEqual('1');\n  });\n\n  it('should stop at 0 and show minimum message', () =&gt; {\n    debugElement\n      .query(By.css('button.decrement'))\n      .triggerEventHandler('click', null);\n\n    fixture.detectChanges();\n    const message = debugElement.query(By.css('p.message')).nativeElement.innerText;\n\n    expect(fixture.componentInstance.value).toEqual(0);    \n    expect(message).toContain('Minimum');\n  });\n\n  it('should stop at 15 and show maximum message', () =&gt; {\n    fixture.componentInstance.value = 15;\n    debugElement\n      .query(By.css('button.increment'))\n      .triggerEventHandler('click', null);\n\n    fixture.detectChanges();\n    const message = debugElement.query(By.css('p.message')).nativeElement.innerText;\n\n    expect(fixture.componentInstance.value).toEqual(15);\n    expect(message).toContain('Maximum');\n  });\n});</code></pre>\n    <p>A few things to notice:</p>\n    <ul>\n        <li>We assign the fixture and debugElement directly in the <code>beforeEach</code>\n            block, because all of our tests need these. We also strongly type them by importing <em>ComponentFixture</em>\n            from <em>@angular/core/testing</em> and <em>DebugElement</em> from <em>@angular/core</em>.</li>\n        <li>In our first test we call methods on the component instance itself.</li>\n        <li>In the remaining tests, we use our <em>DebugElement</em> to trigger button clicks. Notice how the <strong>DebugElement</strong>\n            has a <em>query</em> method that takes a predicate. Here we use the <em>By</em> utility and its <em>css</em>\n            method to find a specific element in the template. <strong>DebugElement</strong> also has a <em>nativeElement</em>\n            method, for direct access to the DOM.</li>\n        <li>We used <code>fixture.detectChanges</code> in the last 3 tests to instruct\n            Angular to run change detection before doing our assertions with Jasmine’s <em>expect</em>.</li>\n    </ul>\n    <h2>Running Your Tests</h2>\n    <p>Running your test suite is as easy as calling the <code>ng test</code> command from\n        the terminal:</p>\n    <pre><code>$ ng test</code></pre>\n    <p>It’ll start Karma in watch mode, so your tests will recompile every time a file changes.</p>\n    <hr>\n    <div>\n        <p>Now you know about the main Angular testing utilities and can start writing tests for simple components.</p>\n        <p>⛏ This only scratches the surface and more will come for topics like testing components with dependencies,\n            testing services as well as using mocks, stubs and spies. You can also refer to the <a href=\"https://angular.io/docs/ts/latest/guide/testing\">official\n                documentation</a> for an in-depth Angular testing guide.</p>\n    </div>\n</div>","filePath":"pages/Angular/.md","_id":"U3N1Be5ZCHBCLrxo"}
{"title":"Understanding React Higher-Order Components by Example","sourceUrl":"https://levelup.gitconnected.com/understanding-react-higher-order-components-by-example-95e8c47c8006","path":"React/React/React/","category":"React","tags":["React"," HOC"],"excerpt":"Build a React higher-order component step-by-step to understand how to implement the HOC pattern","date":{"$$date":1542730996752},"coverImage":"","type":"Post","frontmatter":"---\npath: \"React/\"\ndate: \"2018-10-15\"\ntitle: \"Understanding React Higher-Order Components by Example\"\ntags: [\"React\",\"HOC\"]\ncategory: \"React\"\ncategoryColor: \"#F3C610\"\nexcerpt: \"Build a React higher-order component step-by-step to understand how to implement the HOC pattern\"\ncoverImage: \"\"\nsourceUrl: \"https://levelup.gitconnected.com/understanding-react-higher-order-components-by-example-95e8c47c8006\"\ntype: \"Post\"\n---\n    ","filePath":"pages/React/.md","_id":"ViCaT7Hot8Og0292","htmlCode":"<div>\n    <h1>Build a React higher-order component step-by-step to understand how to implement the HOC&nbsp;pattern<br></h1>\n    <p>In this tutorial we will cover the concepts needed to build your own higher-order components (HOC). We will\n        implement a HOC to save React state to <code>localStorage</code>, called <code>withStorage</code>, that will\n        allow you to inject the functionality into components without needing to duplicate the logic across your entire\n        application.</p>\n    <blockquote>If you’re interested in see the same example in render props, check out <a data-=\"\">this article</a></blockquote>\n</div>\n<div>\n    <h3>An introduction to&nbsp;HOC</h3>\n    <p>A higher-order component in React is a pattern used to share common functionality between components without\n        repeating code. A higher-order component is actually not a component though, <span data-creator-=\"\">it is a\n            function</span>. A HOC function takes a component as an argument and returns a component. It transforms a\n        component into another component and adds additional data or functionality. In short:</p>\n<pre><code>const NewComponent = (BaseComponent) =&gt; {<br>  // ... create new component from old one and update<br>  return UpdatedComponent<br>}</code></pre>\n    <p>Two HOC’s implementations that you may be familiar with in the React ecosystem are <code>connect</code> from\n        Redux and <code>withRouter</code> from React Router. The <code>connect</code> function from Redux is used to\n        give components access to the global state in the Redux store, and it passes these values to the component as\n        props. The <code>withRouter</code> function injects the router information and functionality into the\n        component, enabling the developer access or change the route.</p>\n</div>\n<div>\n    <h3>The higher-order component pattern</h3>\n    <p>A higher-order component is a function that takes a component as an argument and returns a component. This means\n        that a HOC will always have a form similar to the follow:</p>\n    <pre><code><span>import</span> React <span>from</span> <span>'react'</span>;<br><br><span>const</span> higherOrderComponent = <span>(<span>WrappedComponent</span>) =&gt;</span> {<br>  <span><span>class</span> <span>HOC</span> <span>extends</span> <span>React</span>.<span>Component</span> </span>{<br>    render() {<br>      <span>return</span> <span><span>&lt;<span>WrappedComponent</span> /&gt;</span>;</span><br><span>    }</span><br><span>  }</span><br><span>    </span><br><span>  return HOC;</span><br><span>};</span></code></pre>\n    <p>The <code>higherOrderComponent</code> is a function that takes a component called <code>WrappedComponent</code>\n        as an argument. We create a new component called <code>HOC</code> which returns the <code>&lt;WrappedComponent/&gt;</code>\n        from its <code>render</code> function. While this actually adds no functionality in the trivial example, it\n        depicts the common pattern that every HOC function will follow. We can invoke the HOC as follows:</p>\n    <pre><code>const SimpleHOC = <code>higherOrderComponent</code>(MyComponent);</code></pre>\n    <h3>A basic HOC by&nbsp;example</h3>\n    <p>Now we will extend our basic higher-order component pattern to inject data into our wrapped.</p>\n    <p>Our team has actually figured out the <code>secretToLife</code> which turns out to be the number <code>42</code>.\n        Some of our components need to share this information, and we can create a HOC called <code>withSecretToLife</code>\n        to pass it as a prop to our components.</p>\n    <pre><code><span>import</span> React <span>from</span> <span>'react'</span>;<br><br><span>const</span> withSecretToLife = <span>(<span>WrappedComponent</span>) =&gt;</span> {<br>  <span><span>class</span> <span>HOC</span> <span>extends</span> <span>React</span>.<span>Component</span> </span>{<br>    render() {<br>      <span>return</span> (<br>        <span><span>&lt;<span>WrappedComponent</span></span></span><br><span><span>          {<span>...this.props</span>}</span></span><br><span><span>          <span>secretToLife</span>=<span>{42}</span></span></span><br><span><span>        /&gt;</span></span><br><span>      );</span><br><span>    }</span><br><span>  }</span><br><span>    </span><br><span>  return HOC;</span><br><span>};</span><br><br><span>export default withSecretToLife;</span></code></pre>\n    <p>Notice that this HOC is almost identical to our basic pattern. All we have done is add a prop <code>secretToLife={42}</code>,\n        which allows the wrapped component to access the value by calling <code>this.props.secretToLife</code>.</p>\n    <p>The other addition is that we spread the props passed to the component. This ensures that any other props that\n        are passed to the wrapped component will be accessible via <code>this.props</code> in the same manner they\n        would be called if the component was not passed through our higher-order component function.</p>\n    <pre><code><span>import</span> React <span>from</span> <span>'react'</span>;<br><span>import</span> withSecretToLife <span>from</span> <span>'components/withSecretToLife'</span>;<br><br><span>const</span> DisplayTheSecret = <span><span>props</span> =&gt;</span> (<br>  <span><span>&lt;<span>div</span>&gt;</span></span><br><span>    The secret to life is {props.secretToLife}.</span><br><span>  <span>&lt;/<span>div</span>&gt;</span></span><br>);<br><br><span>const</span> WrappedComponent = withSecretToLife(DisplayTheSecret);<br><br><span>export</span> <span>default</span> WrappedComponent;</code></pre>\n    <p>Our <code>WrappedComponent</code>, which is just an enhanced version of <code>&lt;DisplayTheSecret/&gt;</code>,\n        will allow us to access <code>secretToLife</code> as a prop.</p>\n    <h3>A practical HOC by&nbsp;example</h3>\n    <p>Now that we have a solid grasp on the fundamental pattern for HOC, we can build one that is practical for a real\n        application. A higher-order component has access to all the default React API, including <code>state</code> and\n        the lifecycle methods.</p>\n    <p>The functionality of our <code>withStorage</code> HOC will be to save/load the state of a component, allowing us\n        to quickly access and render it on a page load.</p>\n    <pre><code><span>import</span> React <span>from</span> <span>'react'</span>;<br><br><span>const</span> withStorage = <span>(<span>WrappedComponent</span>) =&gt;</span> {<br>  <span><span>class</span> <span>HOC</span> <span>extends</span> <span>React</span>.<span>Component</span> </span>{<br>    state = {<br>      <span>localStorageAvailable</span>: <span>false</span>, <br>    };<br>  <br>    componentDidMount() {<br>       <span>this</span>.checkLocalStorageExists();<br>    }<br>  <br>    checkLocalStorageExists() {<br>      <span>const</span> testKey = <span>'test'</span>;<br><br>      <span>try</span> {<br>          localStorage.setItem(testKey, testKey);<br>          localStorage.removeItem(testKey);<br>          <span>this</span>.setState({ <span>localStorageAvailable</span>: <span>true</span> });<br>      } <span>catch</span>(e) {<br>          <span>this</span>.setState({ <span>localStorageAvailable</span>: <span>false</span> });<br>      } <br>    }<br>  <br>    load = <span>(<span>key</span>) =&gt;</span> {<br>      <span>if</span> (<span>this</span>.state.localStorageAvailable) {<br>        <span>return</span> localStorage.getItem(key); <br>      }<br>      <br>      <span>return</span> <span>null</span>;<br>    }<br>    <br>    save = <span>(<span>key, data</span>) =&gt;</span> {<br>      <span>if</span> (<span>this</span>.state.localStorageAvailable) {<br>        localStorage.setItem(key, data);<br>      }<br>    }<br>    <br>    remove = <span>(<span>key</span>) =&gt;</span> {<br>      <span>if</span> (<span>this</span>.state.localStorageAvailable) {<br>        localStorage.removeItem(key);<br>      }<br>    }<br>    <br>    render() {<br>      <span>return</span> (<br>        <span><span>&lt;<span>WrappedComponent</span></span></span><br><span><span>          <span>load</span>=<span>{this.load}</span></span></span><br><span><span>          <span>save</span>=<span>{this.save}</span></span></span><br><span><span>          <span>remove</span>=<span>{this.remove}</span></span></span><br><span><span>          {<span>...this.props</span>}</span></span><br><span><span>        /&gt;</span></span><br><span>      );</span><br><span>    }</span><br><span>  }</span><br><span>    </span><br><span>  return HOC; </span><br><span>}</span><br><br><span>export default withStorage;</span></code></pre>\n    <p>At the top of <code>withStorage</code> we have a single item in the component’s state which tracks if <code>localStorage</code>\n        is available in the given browser. We use the <code>componentDidMount</code> lifecycle hook which will check if\n        localStorage exists in the <code>checkLocalStorageExists</code> function. Here it will test saving an item and\n        set the state to true if it succeeds.</p>\n    <p>We also add three functions to our HOC — <code>load</code>, <code>save</code>, and <code>remove</code>. These\n        are used to directly access the <code>localStorage</code> API if it is available. Our three functions on the\n        HOC are passed to our wrapped component to be consumed there.</p>\n    <p>Now we will create a new component to be wrapped in our <code>withStorage</code> HOC. It will be used to display\n        a user’s username and favorite movie. However, the API call to get this information takes a very long time. We\n        can also assume that these values will never change once set.</p>\n    <p>To ensure we have a great user experience, we will make this API call only if the values haven’t been saved.\n        Then every time the user returns to the page, they can access the data immediately instead of waiting for our\n        API to return.</p>\n    <pre><code><span>import</span> React <span>from</span> <span>'react'</span>;<br><span>import</span> withStorage <span>from</span> <span>'components/withStorage'</span>;<br><br><span><span>class</span> <span>ComponentNeedingStorage</span> <span>extends</span> <span>React</span>.<span>Component</span> </span>{<br>  state = {<br>    <span>username</span>: <span>''</span>,<br>    <span>favoriteMovie</span>: <span>''</span>,<br>  }<br><br>  componentDidMount() {<br>    <span>const</span> username = <span>this</span>.props.load(<span>'username'</span>);<br>    <span>const</span> favoriteMovie = <span>this</span>.props.load(<span>'favoriteMovie'</span>);<br>    <br>    <span>if</span> (!username || !favoriteMovie) {<br>      <span>// This will come from the parent component</span><br><span>      // and would be passed when we spread props {...this.props}</span><br><span>      this.props.reallyLongApiCall()</span><br><span>        .then((user) =&gt; {</span><br><span>          this.props.save('username', user.username) || '';</span><br><span>          this.props.save('favoriteMovie', user.favoriteMovie) || '';</span><br><span>          this.setState({</span><br><span>            username: user.username,</span><br><span>            favoriteMovie: user.favoriteMovie,</span><br><span>          });</span><br><span>        }); </span><br><span>    } else {</span><br><span>      this.setState({ username, favoriteMovie })</span><br><span>    }</span><br><span>  }</span><br><br><span>  render() {</span><br><span>    const { username, favoriteMovie } = this.state;</span><br><span>    </span><br><span>    if (!username || !favoriteMovie) {</span><br><span>      return &lt;div&gt;Loading...&lt;/div&gt;; </span><br><span>    }</span><br><span>    </span><br><span>    return (</span><br><span>      &lt;div&gt;</span><br><span>        My username is {username}, and I love to watch {favoriteMovie}.</span><br><span>      &lt;/div&gt;</span><br><span>    )</span><br><span>  }</span><br><span>}</span><br><br><span>const WrappedComponent = withStorage(ComponentNeedingStorage);</span><br><br><span>export default WrappedComponent;</span></code></pre>\n    <p>Inside the <code>componentDidMount</code> of our wrapped component, we first try to access the <code>username</code>\n        and <code>favoriteMovie</code> from <code>localStorage</code>. If the values do not exist, we make our\n        expensive API call named <code>this.props.reallyLongApiCall</code>. Once this function returns, we save the\n        username and favorite to <code>localStorage</code> and update the component’s state to display them on the\n        screen.</p>\n    <h3>Higher-order component considerations</h3>\n    <ul>\n        <li>A HOC should be a pure function with no side-effects. It should not make any modifications and just compose\n            the original component by wrapping it in another component.</li>\n        <li>Do not use HOC’s in the render method of a component. Access the HOC outside the component definition.</li>\n        <li>Static methods must be copied over to still have access to them. A simple way to do this is the <code>hoist-non-react-statics</code>\n            package.</li>\n        <li>Refs are not passed through.</li>\n    </ul>\n</div>","author":"","dateUpdated":1542730996752}
{"date":"2018-11-14T14:59:40.122Z","title":"From JavaScript to TypeScript Pt. I: Types & Variables","sourceUrl":"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-boolean","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"," ES6"],"author":"Peleke Sengstacke (@PelekeS)","excerpt":"","dateCreated":1542204079230,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Wed Nov 14 2018 20:29:40 GMT+0530 (India Standard Time)'\ntitle: 'From JavaScript to TypeScript Pt. I: Types & Variables'\ntags: ['JavaScript','ES6']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-boolean'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Object-oriented programming (OOP) has been one of the most influential paradigms in the development of modern programming practices. If you've ever thought in terms of classes or inheritance, you prove the point: Those ideas have their origins in classical OOP.</p><blockquote><p><span>TypeScript</span>&nbsp;is a language that adds object-oriented syntactical sugar to JavaScript</p></blockquote><p>Object-oriented programming has been&nbsp;<em>so</em>&nbsp;influential that many can't imagine doing things any other way. TypeScript's very existence is testament to this fact: It provides classically object-oriented syntax for a language that supports almost no classical object-oriented features.</p><div><h3>Table of Contents</h3><ul><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-setting-up\">Setting Up</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-types\">Types</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-the-purpose-of-types\">The Purpose of Types</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-typescript-s-basic-types\">TypeScript's Basic Types</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-boolean\">Boolean</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-number\">Number</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-string\">String</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-array\">Array</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-tuples\">Tuples</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-enum\">Enum</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-any\">Any</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-void\">Void</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-return-types\">Return Types</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-the-last-type-functions\">The Last Type: Functions</a></li><li><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-conclusion\">Conclusion</a></li></ul></div><p><span>Make no mistake: TypeScript does not add true classes, interfaces, or generics.</span>&nbsp;Just some sugar to make it easier if you think that way. Regardless, it's a good introduction to the concepts of OOP for people whose background is mostly in JavaScript.</p><div><div></div></div><p>This series has two goals:</p><ol><li>Cover the essentials of TypeScript, for JavaScripters with an OOP background; and</li><li>Cover the essentials of OOP, in the context of TypeScript, for JavaScripters with no formal exposure to it.</li></ol><p>Those in the first group should find it easy to map the concepts we discuss to the syntax we'll see. Those in the latter group should find it easy to focus on the concepts without getting distracted by substantially different syntax.</p><p>We'll ease into it, and start in familiar territory. After reading this article, you'll be able to:</p><ol><li>Define&nbsp;<em>type</em>, as it relates to the JavaScript environment;</li><li>List TypeScript's built-in types, and identify where they differ from JavaScript's;</li><li>Declare variables with the proper types and access modifiers; and</li><li>Annotate functions with the proper argument and return types.</li></ol><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-setting-up\">Setting Up</a></h2><p>To get started, you'll need to install TypeScript (TS). In this article, we'll be using&nbsp;<a href=\"https://nodejs.org/en/\">Node.js</a>, v5.11.0, and NPM, v3.8.6. You can also get TS bundled with&nbsp;<a href=\"https://www.visualstudio.com/en-us/visual-studio-homepage-vs.aspx\">Visual Studio 2015</a>, if you prefer.</p><p>To install TypeScript, run:</p><pre data-title=\"bash\"><code><span>npm</span> <span>install</span> --global typescript</code></pre><p>This installs a command-line tool,&nbsp;<code>tsc</code>, which you use to transpile TS to JavaScript.</p><p>Create a new directory somewhere: We'll save and compile our TS examples here.</p><pre data-title=\"bash\"><code><span># This creates a new directory in your home folder.</span>\n<span># Feel free to do this somewhere else.</span>\n<span>cd</span> <span>&amp;&amp;</span> <span>mkdir</span> ts_examples</code></pre><p>While simple, I've collected all of the examples in a&nbsp;<a href=\"https://github.com/Peleke/oop_in_typescript\">GitHub repo</a>. If you don't want to type, run:</p><div><div></div></div><pre data-title=\"javascript\"><code>git clone https<span>:</span><span>/</span><span>/</span>github<span>.</span>com<span>/</span>Peleke<span>/</span>oop_in_typescript\ngit checkout Part_1<span>-</span>Types</code></pre><p>. . . And you're good to go.</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-types\">Types</a></h2><p>The word&nbsp;<span>type</span>&nbsp;means different things in different contexts. In general,&nbsp;<em>types</em>&nbsp;are a way of classifying data structures based on the kind of information they can contain, and what you can do with it.</p><h3>Types in JavaScript</h3><p>In JavaScript,&nbsp;<a href=\"https://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-data-types-and-values\">clause 6 of the ECMAScript specification</a>&nbsp;defines the following types:</p><ul><li>Undefined;</li><li>Null;</li><li>Boolean;</li><li>String;</li><li>Symbol;</li><li>Number; and</li><li>Object.</li></ul><p>To say a variable is of a certain type is to say two things:</p><ol><li>That it supports all the operations of that type; and</li><li>That its internal representation is distinct from that of the other types.</li></ol><p>At the level of applications programming, we're only concerned with the first point.</p><pre data-title=\"javascript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>const</span> name     <span>=</span> <span>\"Peleke\"</span><span>;</span>      <span>// name has type string</span>\n<span>const</span> nothing <span>=</span> <span>null</span><span>;</span>              <span>// nothing has type null -- kind of*</span>\n<span>const</span> nemo     <span>=</span> undefined<span>;</span>   <span>// nemo has type undefined</span>\n<span>const</span> obj          <span>=</span> <span>{</span> <span>}</span><span>;</span>                <span>// obj has type object</span>\n\n<span>// * Brendan Eich made a mistake in the 10-day whirlwind of putting together JavaScript.</span>\n<span>//      typeof null returns \"object\", but it's not an object, and this is a bug.</span>\n<span>//      Under the hood, null /is/ its own primitive type -- Null. You just can't tell.</span>\n<span>//      For more: http://www.2ality.com/2013/10/typeof-null.html</span></code></pre><p>Of course, if you've spent more than a few minutes writing JavaScript, you'll know that this is mostly trivia. We don't annotate types in JavaScript, and we can assign values of different types to the same variables through the lifetime of our program.</p><div><div><div><div><h3>Scotch Newsletter</h3><p>Join 100,000 subscribers. Get weekly dev news and tutorials.</p><form action=\"https://app.mailerlite.com/webforms/submit/c7r3j6\" data-code=\"c7r3j6\" method=\"post\" target=\"_blank\"><div aria-label=\"Please leave the following field empty\"><input type=\"text\" tabindex=\"-1\" value=\"\" placeholder=\"Message\" autocomplete=\"off\" title=\"message\">&nbsp;<input type=\"text\" tabindex=\"-1\" value=\"\" placeholder=\"Email\" autocomplete=\"off\" title=\"email\">&nbsp;<input type=\"text\" tabindex=\"-1\" value=\"\" placeholder=\"Name\" autocomplete=\"off\" title=\"name\"></div><div><div><input type=\"email\" data-inputmask=\"\" value=\"\" placeholder=\"Email\" aria-label=\"Your Email\"><div>📧</div></div><div><button type=\"submit\">SUBSCRIBE</button></div></div></form></div></div></div></div><p>As far as we're concerned, if an object has the properties and methods we need it to, we don't&nbsp;<em>care</em>&nbsp;what the underlying type is. If it behaves properly, it's good enough. The rest is an implementation detail.</p><p>This is sometimes called&nbsp;<span><a href=\"https://en.wikipedia.org/wiki/Duck_typing#Overview\">duck-typing</a></span>: If it walks like a duck, and it quacks like a duck, it's probably okay if we eat it treat it like a duck.</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-the-purpose-of-types\">The Purpose of Types</a></h2><p>Languages like Java and Haskell are&nbsp;<span>statically typed</span>. That means that, before they run your program, they'll check to make sure that you get strings where you expect strings, numbers where you expect numbers, and mongeese where you expect mongeese. If you pass a mongoose to a function that expects a string, it'll complain, and you'll have to fix it before your program will compile.</p><p>The point of all that trouble is to let you know when you've written code that might break&nbsp;<em>before</em>&nbsp;you run it. After all, if you write a function that expects a string, and you give it a mongoose, chances are good it's not going to know what to do with it.</p><pre data-title=\"java\"><code>\n<span>private</span> <span>boolean</span> <span>screamName</span><span>(</span>String name<span>)</span> <span>{</span>\n    <span>return</span> name<span>.</span><span>toUpperCase</span><span>(</span><span>)</span><span>;</span>\n<span>}</span>\n\n<span>// Mongeese don't like to be capitalized.</span>\n<span>//   Fortunately, the compiler prevents this from building.</span>\n<span>tameMongoose</span><span>(</span><span>new</span> <span>Mongoose</span><span>(</span><span>)</span><span>)</span><span>;</span> </code></pre><p>In JavaScript, we'd just go ahead and pass the mongoose along and cross our fingers. If it's got a&nbsp;<code>toUpperCase</code>, it works. If not, our program dies. Devil's gambit.</p><pre data-title=\"javascript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>const</span> sweet_mongoose <span>=</span> <span>{</span> <span>}</span><span>;</span>\n<span>const</span> savage_mongoose <span>=</span> <span>{</span><span>}</span><span>;</span>\n\nsweet_mongoose<span>.</span>name <span>=</span> <span>\"sweetheart\"</span><span>;</span>\nsavage_mongoose<span>.</span>name <span>=</span> <span>\"savage\"</span><span>;</span>\n\nsweet_mongoose<span>.</span><span>toUpperCase</span> <span>=</span> <span>function</span> <span>(</span><span>)</span> <span>{</span> <span>return</span> <span>this</span><span>.</span>name<span>.</span><span>toUpperCase</span><span>(</span><span>)</span><span>;</span> <span>}</span>\n\n<span>function</span> <span>screamName</span> <span>(</span>name<span>)</span> <span>{</span>\n  <span>return</span> name<span>.</span><span>toUpperCase</span><span>(</span><span>)</span><span>;</span>\n<span>}</span>\n\n<span>screamName</span><span>(</span>sweet_mongoose<span>)</span><span>;</span> <span>// What a SWEETHEART.</span>\n<span>screamName</span><span>(</span>savage_mongoose<span>)</span><span>;</span> <span>// Kills program with a TypeError. Cold-blooded.</span></code></pre><p>The idea behind all this is that a value's type can be conceived of as a sort of&nbsp;<em>interface</em>. In other words, a object's type reveals what you can and cannot do with it. Attempting to do something with an object that doesn't make sense for its type -- like capitalizing a number -- is a programmer error that a type-aware compiler can catch ahead of time.</p><p>Therein lies one of the benefits: We trade runtime errors for compile-time warnings. By contrast, dynamic languages eschew compile-time safety checks in favor of greater flexibility and programmer productivity.</p><p>Obviously, neither system is perfect:</p><ol><li>In our Java function, what if the mongoose&nbsp;<em>did</em>&nbsp;have a&nbsp;<code>toUpperCase</code>&nbsp;method that behaved as desired? Then we'd have to do some finaggling just to get our program to compile.</li><li>In Javascript, what if we get an object with the function we expect, but different behavior? An Observable and an RSS feed have very different&nbsp;<code>subscribe</code>&nbsp;methods. We'll obviously notice an error, but there's a substantial chance the program would&nbsp;<em>execute</em>&nbsp;-- just not&nbsp;<em>correctly</em>.</li></ol><p>That said:</p><ol><li>Types are a form of&nbsp;<a href=\"https://en.wikipedia.org/wiki/Self-documenting_code\">self-documenting code</a>.</li><li>Certain type errors are easy to catch at compile time, but nonobvious at runtime.</li><li>Types help with the design of function compositions and complex reactive streams.</li></ol><p>Do we&nbsp;<em>need</em>&nbsp;static typing? Obviously not. JavaScript doesn't have it, and the Internet works fine.</p><p>Do we&nbsp;<em>benefit</em>&nbsp;from it? Maybe. It's powerful in languages like Java. It's&nbsp;<em>exceedingly</em>powerful in certain statically-typed functional languages, like ML, Haskell, and Scala.</p><blockquote><p>TypeScript takes the stance that we unequivocally&nbsp;<em>do</em>&nbsp;benefit from static typing, allowing you to declare your variables with any of a handful of built-in types.</p></blockquote><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-typescript-s-basic-types\">TypeScript's Basic Types</a></h2><p>TypeScript exposes nine types for us to work with. Whether you use them or not is up to you:&nbsp;<span>Type annotations are always optional in TypeScript</span>.</p><ol><li>Boolean;</li><li>Number;</li><li>String;</li><li>Array;</li><li>Tuple;</li><li>Enum;</li><li>Any;</li><li>Void;</li><li>Function.</li></ol><p>We'll start with the first eight, and circle back to the last one a bit later.</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-boolean\">Boolean</a></h2><p>In TypeScript, you declare variables as in JavaScript, with a colon and type after the variable name. Booleans behave as usual.</p><p><span>Type Keyword</span>&nbsp;:&nbsp;<code>boolean</code></p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>const</span> lie <span>:</span> <span>boolean</span> <span>=</span> <span>false</span><span>,</span>\n       truth <span>:</span> <span>boolean</span> <span>=</span> <span>true</span><span>;</span></code></pre><p>Save that in a file called&nbsp;<code>boolean.ts</code>, then run&nbsp;<code>tsc boolean.ts</code>. It'll create a file called&nbsp;<code>boolean.js</code>, Open it up to see some sweet, sweet vanilla JavaScript:</p><pre data-title=\"javascript\"><code><span>\"use strict\"</span><span>;</span>\n<span>var</span> lie <span>=</span> <span>false</span><span>,</span> truth <span>=</span> <span>true</span><span>;</span></code></pre><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-number\">Number</a></h2><p>TypeScript's Number type is synonymous with JavaScript's Number type. If youre curious, JavaScript numbers are an&nbsp;<a href=\"https://en.wikipedia.org/wiki/Double-precision_floating-point_format#IEEE_754_double-precision_binary_floating-point_format:_binary64\">IEEE 64-bit binary format double precision floating point values</a>. Or, you know, just numbers.</p><p><span>Type Keyword</span>&nbsp;:&nbsp;<code>number</code></p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>const</span> pi <span>:</span> <span>number</span> <span>=</span> <span>3.14159</span><span>;</span></code></pre><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-string\">String</a></h2><p>As with Number, TypeScript's String is synonymous with JavaScript's underlying String type.</p><p><span>Type Keyword</span>&nbsp;:&nbsp;<code>string</code></p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>const</span> tree_of_knowledge <span>:</span> <span>string</span> <span>=</span> <span>\"Yggdrasil\"</span><span>;</span></code></pre><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-array\">Array</a></h2><p>TypeScript treats arrays as their own type, and requires that you declare the type of what's inside of them, as well.</p><p>** Type Keywords **</p><ol><li>Array&lt;[ Item Type]&gt;</li><li>[]</li></ol><p>There are two syntaxes for arrays.</p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>// The item type, T, followed by brackets means, \"an array whose items are of type T.\"</span>\n<span>const</span> divine_lovers <span>:</span> <span>string</span><span>[</span><span>]</span> <span>=</span> <span>[</span><span>\"Zeus\"</span><span>,</span> <span>\"Aphrodite\"</span><span>]</span><span>;</span>\n\n<span>// Writing Array&lt;[Item Type]&gt; means the same thing.</span>\n<span>const</span> digits <span>:</span> <span>Array</span><span>&lt;</span><span>number</span><span>&gt;</span> <span>=</span> <span>[</span><span>143219876</span><span>,</span> <span>112347890</span><span>]</span><span>;</span>\n\n<span>// But this doesn't work. Hm. . . </span>\n<span>const</span> only_strings <span>:</span> <span>string</span><span>[</span><span>]</span> <span>=</span> <span>[</span><span>]</span><span>;</span>\nonly_strings<span>.</span><span>push</span><span>(</span><span>\"This Works!\"</span><span>)</span>\nonly_strings<span>.</span><span>push</span><span>(</span><span>42</span><span>)</span><span>;</span> <span>// This doesn't.</span></code></pre><p>Well. That's annoying.</p><p>We can't put&nbsp;<code>42</code>&nbsp;into&nbsp;<code>only_strings</code>&nbsp;because we declared that it can only contain items of type&nbsp;<code>string</code>. This is an example of TypeScript's compile-time complaints in action.</p><p>We'll see how to fix this shortly. But first -- tuples!</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-tuples\">Tuples</a></h2><p>Tuples are another collection data type. They're useful for collecting a known number of items into an array-like structure. You can declare each item to be of a specific type.</p><p>** Type Keyword ** : [(Item Type), . . . , (Item Type)]</p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>// [Date, Month, Year] :: Triplet of numbers</span>\n<span>let</span> date_triplet <span>:</span> <span>[</span><span>number</span><span>,</span> <span>number</span><span>,</span> <span>number</span><span>]</span><span>;</span>\ndate_triplet <span>=</span> <span>[</span><span>31</span><span>,</span> <span>6</span><span>,</span> <span>2016</span><span>]</span><span>;</span>\n\n<span>// [Name, Age]</span>\n<span>let</span> athena <span>:</span> <span>[</span><span>string</span><span>,</span> <span>number</span><span>]</span><span>;</span>\nathena <span>=</span> <span>[</span><span>'Athena'</span><span>,</span> <span>9386</span><span>]</span><span>;</span>\n\n<span>// You retrieve items with indexes, as with arrays. </span>\n<span>//  TS remembers the type for you.</span>\n<span>var</span> name <span>:</span> <span>string</span> <span>=</span> athena<span>[</span><span>0</span><span>]</span><span>;</span>\n<span>const</span> age <span>:</span> <span>number</span> <span>=</span> athena<span>[</span><span>1</span><span>]</span><span>;</span>\n\n<span>// But:</span>\nname  <span>=</span> athena<span>[</span><span>1</span><span>]</span><span>;</span> <span>// No dice. We're writing TypeScript now.</span></code></pre><p>So . . . What are tuples useful for?</p><p>Good question. JavaScript is the only language I write without native tuples, but I rarely use them elsewhere. Occasionally, I use them to group related data that isn't liable to change:</p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>//The Big Three of Powerlifting</span>\n<span>let</span> big_three <span>:</span> <span>[</span><span>string</span><span>,</span> <span>string</span><span>,</span> <span>string</span><span>]</span><span>;</span>\nbig_three <span>=</span> <span>[</span><span>'Squat'</span><span>,</span> <span>'Deadlift'</span><span>,</span> <span>'Bench Press'</span><span>]</span></code></pre><p>. . . But in general, I use a Map or Set instead.</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-enum\">Enum</a></h2><p>Enums allow you to associate names with intever values. The name comes from the fact that they're&nbsp;<span>*enum</span>erable*.</p><p>Creating a enum effectively creates a new type keyword, which you use like any other type.</p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>// This is an example from the TypeScript docs.</span>\n<span>//    http://bit.ly/1XQjl2Y</span>\n<span>enum</span> Color <span>{</span> Red<span>,</span> Green<span>,</span> Blue <span>}</span><span>;</span>\n<span>const</span> red <span>:</span> Color <span>=</span> Color<span>.</span>Red<span>;</span>\n\n<span>// Enums are like associative arrays. Each enum constant is associated with an index, starting at 0.</span>\n<span>console</span><span>.</span><span>log</span><span>(</span>Color<span>[</span><span>0</span><span>]</span><span>)</span><span>;</span> <span>// 'Red'</span>\n\n<span>// You can start from any number instead of zero, if you want.</span>\n<span>//    Note that indexing a non-existent enum constant returns undefined,</span>\n<span>//    but doesn't throw an error.</span>\n<span>enum</span> RomanceLanguages <span>{</span> Spanish <span>=</span> <span>1</span><span>,</span> French<span>,</span> Italian<span>,</span> Romanian<span>,</span> Portuguese <span>}</span><span>;</span>\n<span>console</span><span>.</span><span>log</span><span>(</span>RomanceLanguages<span>[</span><span>4</span><span>]</span><span>)</span><span>;</span> <span>// 'Romanian'</span>\n<span>console</span><span>.</span><span>log</span><span>(</span>RomanceLanguages<span>[</span><span>0</span><span>]</span><span>)</span><span>;</span> <span>// undefined </span></code></pre><p><a href=\"http://www.2ality.com/2014/12/es6-symbols.html\">Symbols provide an interesting alternative to enums</a>.</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-any\">Any</a></h2><p>Any is more or less what it sounds like: A type that accepts&nbsp;<em>any</em>&nbsp;value. In some sense, it's a way to opt out of type checking. It also allows us to declare mixed collections.</p><p>** Type Keyword ** :&nbsp;<code>any</code></p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>let</span> mystery <span>:</span> <span>any</span> <span>=</span> <span>4</span><span>;</span> <span>// number</span>\nmystery <span>=</span> <span>\"four\"</span><span>;</span> <span>// string -- no error</span>\n\n<span>const</span> not_only_strings <span>:</span> <span>any</span><span>[</span><span>]</span> <span>=</span> <span>[</span><span>]</span><span>;</span>\nnot_only_strings<span>.</span><span>push</span><span>(</span><span>\"This Works!\"</span><span>)</span>\nnot_only_strings<span>.</span><span>push</span><span>(</span><span>42</span><span>)</span><span>;</span> <span>// This does too.</span></code></pre><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-void\">Void</a></h2><p>Finally, we have Void. This is the typeclass associated with the values&nbsp;<code>undefined</code>&nbsp;or&nbsp;<code>null</code>. Unlike the other types, you won't use this to declare variables.</p><p>It's not that you&nbsp;<em>can't</em>. Just that, if you do, you can only set that varible to&nbsp;<code>null</code>&nbsp;or&nbsp;<code>undefined</code>.</p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>let</span> the_void <span>:</span> <span>void</span> <span>=</span> undefined<span>;</span>\nthe_void <span>=</span> <span>null</span><span>;</span>\n\nthe_void <span>=</span> <span>\"nothing\"</span><span>;</span> <span>// Error.</span></code></pre><p>The main reason&nbsp;<code>void</code>&nbsp;exists is to mark functions without return statements.</p><p>Speaking of which, it's about time we talk about functions.</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-return-types\">Return Types</a></h2><p>TypeScript allows you to mark the type of the value that a function returns.</p><p>Just as a variable's type indicates what sort of data the variable contains, a function's return type indicates what sort of data it returns.</p><p>All the types we've seen so far are valid return types. In particuar, you'll use&nbsp;<code>void</code>almost exclusively as the return type of a function with no&nbsp;<code>return</code>&nbsp;statement.</p><p>You denote a return type the same way you denote a variable type: With a colon and a type keyword, this time after the arguments list.</p><pre data-title=\"javascript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>function</span> <span>capitalizeName</span> <span>(</span>name <span>:</span> string<span>)</span> <span>:</span> string <span>{</span>\n  <span>return</span> name<span>.</span><span>toUpperCase</span><span>(</span><span>)</span><span>;</span>\n<span>}</span>\n\n<span>// Shoutout to @achm4m0 (Alberto) for notifying me of an error here!</span>\nconsole<span>.</span><span>log</span><span>(</span><span>capitalizeName</span><span>(</span><span>'geronimo'</span><span>)</span><span>)</span><span>;</span> <span>// 'GERONIMO'</span>\n\n<span>// But:</span>\nconsole<span>.</span><span>log</span><span>(</span><span>capitalizeName</span><span>(</span><span>42</span><span>)</span><span>)</span><span>;</span> <span>// Error; 42 isn't a string.</span>\n\n<span>// TypeScript checks at compile-time if you're returning the right type.</span>\n<span>function</span> <span>even_broken</span> <span>(</span>num <span>:</span> number<span>)</span> <span>:</span> boolean <span>{</span>\n   <span>return</span> <span>(</span>num <span>%</span> <span>2</span><span>)</span><span>;</span> <span>// WRONG. This will cause a compile-time error.</span>\n<span>}</span>\n\n<span>function</span> <span>even</span> <span>(</span>num <span>:</span> number<span>)</span> <span>:</span> boolean <span>{</span>\n   <span>return</span> <span>(</span>num <span>%</span> <span>2</span> <span>==</span> <span>0</span><span>)</span><span>;</span> <span>// Much better; this works.</span>\n<span>}</span></code></pre><p>Note that you can also mark argument types as you would that of normal variables.</p><p>Notifications like the one we get for&nbsp;<code>even_broken</code>&nbsp;are pretty helpful during development.</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-the-last-type-functions\">The Last Type: Functions</a></h2><p>One of JavaScript's greatest strengths is that it treats functions as first class citizens. This means we can pass them as arguments and return them from functions ike any other value. How does TypeScript handle that?</p><p>Simple. Function name; parenthetical list of typed arguments; fat arrow; return type.</p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>let</span> multiply <span>:</span> <span>(</span>first <span>:</span> <span>number</span><span>,</span> second <span>:</span> <span>number</span><span>)</span> <span>=&gt;</span> <span>number</span><span>;</span>\n<span>multiply</span> <span>=</span> <span>function</span> <span>(</span>first<span>,</span> second<span>)</span> <span>{</span>\n  <span>return</span> first <span>*</span> second<span>;</span>\n<span>}</span></code></pre><p>This example illustrates that you can annotate your functions types before defining them.</p><p>The same pattern applies if you're returning a function. In that case, though, you wrap the type of the function you return -- that is, everything after the fat arrow -- in parentheses.</p><pre data-title=\"typescript\"><code><span>\"use strict\"</span><span>;</span>\n\n<span>let</span> multiplyFirst <span>:</span> <span>(</span> first <span>:</span> <span>number</span><span>)</span> <span>=&gt;</span> <span>(</span><span>(</span>second <span>:</span> <span>number</span><span>)</span> <span>=&gt;</span> <span>number</span><span>)</span><span>;</span>\n<span>multiplyFirst</span> <span>=</span> <span>function</span> <span>(</span>first<span>)</span> <span>{</span>\n  <span>return</span> <span>function</span> <span>(</span>num<span>)</span> <span>{</span>\n    <span>return</span> first <span>*</span> num<span>;</span>\n  <span>}</span>\n<span>}</span> \n\n<span>console</span><span>.</span><span>log</span><span>(</span><span>multiply</span><span>(</span><span>5</span><span>,</span> <span>2</span><span>)</span><span>)</span><span>;</span> <span>// '10'</span>\n<span>console</span><span>.</span><span>log</span><span>(</span><span>multiplyFirst</span><span>(</span><span>9</span><span>)</span><span>(</span><span>2</span><span>)</span><span>)</span><span>;</span> <span>// '18'</span></code></pre><p>Newcomers to static typing often find variable types annoying. Function types are where they start to get nauseated.</p><p>This is actually the typing feature I use most in TypeScript. Somewhat ironically, that's because of my background in functional programming, not OOP, and that remains the context in which I find it most useful.</p><p>Annotating functions that return&nbsp;<code>string</code>&nbsp;or&nbsp;<code>number</code>&nbsp;is easy, and beneficial largely for the purpose of self-documentation.</p><p>On the other hand, writing function type annotations is an integral, active part of my design process when I work with&nbsp;<a href=\"http://reactivex.io/\">Rx streams</a>&nbsp;and complex [function compositions](<a href=\"https://en.wikipedia.org/wiki/Function_composition_(computer_science)\">https://en.wikipedia.org/wiki/Function_composition_(computer_science)</a>.</p><h2><a href=\"https://scotch.io/tutorials/from-javascript-to-typescript-pt-i-types-variables#toc-conclusion\">Conclusion</a></h2><p>By now, you should feel like you've started getting your hands dirty with TypeScript. You've seen:</p><ol><li>How to transpile TS files on the command line;</li><li>How types in TS compare to JavaScript's;</li><li>All of the types TS has to offer; and</li><li>How to annotate function types.</li></ol><p>You should also feel pretty confident that you can article&nbsp;<em>why</em>&nbsp;we might benefit from all this in the first place.</p><p>Next time, we'll stray a little farther from familiar territory, and explore classes; interfaces; enums; and how to get the most out of them by adapting classical obect-oriented design to our more dynamic environment.</p><p><img data-src=\"https://track.mailerlite.com/webforms/o/1112154/c7r3j6?vaa4d608450783acdc64d5338ff94f6d5\" width=\"1\" height=\"1\" border=\"0\" src=\"https://track.mailerlite.com/webforms/o/1112154/c7r3j6?vaa4d608450783acdc64d5338ff94f6d5\" data-was-processed=\"true\"></p><p>Until then, feel free to drop questions in the comments below, or shoot them to me on Twitter (<a href=\"https://twitter.com/PelekeS\">@PelekeS</a>).</p>","filePath":"pages/JavaScript/.md","_id":"YCEGEz9jziLUA2SW"}
{"date":"2018-12-26T16:03:25.624Z","title":"How to test if an element is in the viewport with vanilla JavaScript","sourceUrl":"https://gomakethings.com/how-to-test-if-an-element-is-in-the-viewport-with-vanilla-javascript/","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"," Viewport"],"author":"","excerpt":"","dateCreated":1545840138095,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Wed Dec 26 2018 21:33:25 GMT+0530 (India Standard Time)'\ntitle: 'How to test if an element is in the viewport with vanilla JavaScript'\ntags: ['JavaScript','Viewport']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://gomakethings.com/how-to-test-if-an-element-is-in-the-viewport-with-vanilla-javascript/'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Today, I want to show you how to write a small vanilla JS helper function to check if an element is in the viewport.</p><p>“In the viewport” means in the visible part of the screen, as opposed to above or below the visible area. This is useful when doing things like creating lazy loading scripts.</p><h2>Getting the bounding coordinates&nbsp;<a href=\"https://gomakethings.com/how-to-test-if-an-element-is-in-the-viewport-with-vanilla-javascript/#getting-the-bounding-coordinates\">#</a></h2><p>At the heart of our function is&nbsp;<code>Element.getBoundingClientRect()</code>, which provides an element’s position within the viewport. It returns an object with an element’s height and width, as well as it’s distance from the top, bottom, left, and right of the viewport.</p><div><pre><code data-lang=\"javascript\"><span>// Get the H1 heading\n</span><span></span><span>var</span> <span>h1</span> <span>=</span> <span>document</span><span>.</span><span>querySelector</span><span>(</span><span>'h1'</span><span>);</span>\n\n<span>// Get it's position in the viewport\n</span><span></span><span>var</span> <span>bounding</span> <span>=</span> <span>h1</span><span>.</span><span>getBoundingClientRect</span><span>();</span>\n\n<span>// Log the results\n</span><span></span><span>console</span><span>.</span><span>log</span><span>(</span><span>bounding</span><span>);</span>\n<span>// {\n</span><span>// \theight: 118,\n</span><span>// \twidth: 591.359375,\n</span><span>// \ttop: 137,\n</span><span>// \tbottom: 255,\n</span><span>// \tleft: 40.3125,\n</span><span>// \tright: 631.671875\n</span><span>// }\n</span><span></span></code></pre></div><h2>Determining if the element is in the viewport&nbsp;<a href=\"https://gomakethings.com/how-to-test-if-an-element-is-in-the-viewport-with-vanilla-javascript/#determining-if-the-element-is-in-the-viewport\">#</a></h2><p>If an element is in the viewport, it’s position from the&nbsp;<code>top</code>&nbsp;and&nbsp;<code>left</code>&nbsp;will always be greater than or equal to&nbsp;<code>0</code>. It’s distance from the&nbsp;<code>right</code>&nbsp;will be less than or equal to the total width of the viewport, and it’s distance from the&nbsp;<code>bottom</code>&nbsp;will be less than or equal to the height of the viewport.</p><p>There are two ways to check the viewport’s width. Some browsers support&nbsp;<code>window.innerWidth</code>, other’s support&nbsp;<code>document.documentElement.clientWidth</code>, and some support both. We can try one and fallback to the other by doing something like this:</p><div><pre><code data-lang=\"javascript\"><span>(</span><span>window</span><span>.</span><span>innerWidth</span> <span>||</span> <span>document</span><span>.</span><span>documentElement</span><span>.</span><span>clientWidth</span><span>)</span>\n</code></pre></div><p>Similarly, to get the viewport height, we can use&nbsp;<code>window.innerHeight</code>&nbsp;in some browsers and&nbsp;<code>document.documentElement.clientHeight</code>&nbsp;in others. Like with width, we can try one and fallback to the other:</p><div><pre><code data-lang=\"javascript\"><span>(</span><span>window</span><span>.</span><span>innerHeight</span> <span>||</span> <span>document</span><span>.</span><span>documentElement</span><span>.</span><span>clientHeight</span><span>)</span>\n</code></pre></div><h2>Putting it all together&nbsp;<a href=\"https://gomakethings.com/how-to-test-if-an-element-is-in-the-viewport-with-vanilla-javascript/#putting-it-all-together\">#</a></h2><p>Let’s use that heading from earlier as an example.</p><div><pre><code data-lang=\"javascript\"><span>// Get the H1 heading\n</span><span></span><span>var</span> <span>h1</span> <span>=</span> <span>document</span><span>.</span><span>querySelector</span><span>(</span><span>'h1'</span><span>);</span>\n\n<span>// Get it's position in the viewport\n</span><span></span><span>var</span> <span>bounding</span> <span>=</span> <span>h1</span><span>.</span><span>getBoundingClientRect</span><span>();</span>\n\n<span>// Log the results\n</span><span></span><span>console</span><span>.</span><span>log</span><span>(</span><span>bounding</span><span>);</span>\n<span>// {\n</span><span>// \theight: 118,\n</span><span>// \twidth: 591.359375,\n</span><span>// \ttop: 137,\n</span><span>// \tbottom: 255,\n</span><span>// \tleft: 40.3125,\n</span><span>// \tright: 631.671875\n</span><span>// }\n</span><span></span></code></pre></div><p>We can check if the element is in the viewport like this.</p><div><pre><code data-lang=\"javascript\"><span>if</span> <span>(</span>\n\t<span>bounding</span><span>.</span><span>top</span> <span>&gt;=</span> <span>0</span> <span>&amp;&amp;</span>\n\t<span>bounding</span><span>.</span><span>left</span> <span>&gt;=</span> <span>0</span> <span>&amp;&amp;</span>\n\t<span>bounding</span><span>.</span><span>right</span> <span>&lt;=</span> <span>(</span><span>window</span><span>.</span><span>innerWidth</span> <span>||</span> <span>document</span><span>.</span><span>documentElement</span><span>.</span><span>clientWidth</span><span>)</span> <span>&amp;&amp;</span>\n\t<span>bounding</span><span>.</span><span>bottom</span> <span>&lt;=</span> <span>(</span><span>window</span><span>.</span><span>innerHeight</span> <span>||</span> <span>document</span><span>.</span><span>documentElement</span><span>.</span><span>clientHeight</span><span>)</span>\n<span>)</span> <span>{</span>\n\t<span>console</span><span>.</span><span>log</span><span>(</span><span>'In the viewport!'</span><span>);</span>\n<span>}</span> <span>else</span> <span>{</span>\n\t<span>console</span><span>.</span><span>log</span><span>(</span><span>'Not in the viewport... whomp whomp'</span><span>);</span>\n<span>}</span>\n</code></pre></div><p>That’s super clunky to have to write out each time though, so this kind of thing deserves it’s own helper function.</p><div><pre><code data-lang=\"javascript\"><span>var</span> <span>isInViewport</span> <span>=</span> <span>function</span> <span>(</span><span>elem</span><span>)</span> <span>{</span>\n    <span>var</span> <span>bounding</span> <span>=</span> <span>elem</span><span>.</span><span>getBoundingClientRect</span><span>();</span>\n    <span>return</span> <span>(</span>\n        <span>bounding</span><span>.</span><span>top</span> <span>&gt;=</span> <span>0</span> <span>&amp;&amp;</span>\n        <span>bounding</span><span>.</span><span>left</span> <span>&gt;=</span> <span>0</span> <span>&amp;&amp;</span>\n        <span>bounding</span><span>.</span><span>bottom</span> <span>&lt;=</span> <span>(</span><span>window</span><span>.</span><span>innerHeight</span> <span>||</span> <span>document</span><span>.</span><span>documentElement</span><span>.</span><span>clientHeight</span><span>)</span> <span>&amp;&amp;</span>\n        <span>bounding</span><span>.</span><span>right</span> <span>&lt;=</span> <span>(</span><span>window</span><span>.</span><span>innerWidth</span> <span>||</span> <span>document</span><span>.</span><span>documentElement</span><span>.</span><span>clientWidth</span><span>)</span>\n    <span>);</span>\n<span>};</span>\n</code></pre></div><p>We can pass in our element, and&nbsp;<code>isInViewport()</code>&nbsp;will get the bounding coordinates and run our check. It returns&nbsp;<code>true</code>&nbsp;if it’s in the viewport, and&nbsp;<code>false</code>&nbsp;if it’s not.</p><div><pre><code data-lang=\"javascript\"><span>var</span> <span>h1</span> <span>=</span> <span>document</span><span>.</span><span>querySelector</span><span>(</span><span>'h1'</span><span>);</span>\n<span>if</span> <span>(</span><span>isInViewport</span><span>(</span><span>h1</span><span>))</span> <span>{</span>\n    <span>// Do something...\n</span><span></span><span>}</span>\n</code></pre></div><h2>Using the helper method&nbsp;<a href=\"https://gomakethings.com/how-to-test-if-an-element-is-in-the-viewport-with-vanilla-javascript/#using-the-helper-method\">#</a></h2><p>So how would you use it?</p><p>One way I’ve put this to use is in a lazy loading script. I listen for scroll events, and check if my image is in the viewport on scroll. If it is, I load it.</p><p>Here’s a really simplified version…</p><div><pre><code data-lang=\"markup\">&lt;figure data-image=\"url/to/my/image.jpg\"&gt;My image will go here...&lt;/figure&gt;</code></pre></div><div><pre><code data-lang=\"javascript\"><span>var</span> <span>image</span> <span>=</span> <span>document</span><span>.</span><span>querySelector</span><span>(</span><span>'[data-image]'</span><span>);</span>\n<span>window</span><span>.</span><span>addEventListener</span><span>(</span><span>'scroll'</span><span>,</span> <span>function</span> <span>(</span><span>event</span><span>)</span> <span>{</span>\n\t<span>if</span> <span>(</span><span>isInViewport</span><span>(</span><span>image</span><span>))</span> <span>{</span>\n\t\t<span>image</span><span>.</span><span>innerHTML</span> <span>=</span> <span>'&lt;img src=\"'</span> <span>+</span> <span>image</span><span>.</span><span>getAttribute</span><span>(</span><span>'data-image'</span><span>)</span> <span>+</span> <span>'\"&gt;'</span><span>;</span>\n\t<span>}</span>\n<span>},</span> <span>false</span><span>);</span></code></pre></div>","filePath":"pages/JavaScript/.md","_id":"YJ7qLCJeqCOoB5FJ"}
{"date":"2018-11-21T16:34:29.113Z","title":"Angular security best practices","sourceUrl":"https://ordina-jworks.github.io/angular/2018/03/30/angular-security-best-practices.html","path":"Angular/","category":"Angular","tags":["Angular"," Security"," XSS"],"author":"Frédéric Ghijselinck","excerpt":"","dateCreated":1542818000913,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Angular/'\ndate: 'Wed Nov 21 2018 22:04:29 GMT+0530 (India Standard Time)'\ntitle: 'Angular security best practices'\ntags: ['Angular','Security','XSS']\ncategory: 'Angular'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://ordina-jworks.github.io/angular/2018/03/30/angular-security-best-practices.html'\ntype: 'Post'\n---\n    ","htmlCode":"<h1>ANGULAR SECURITY BEST PRACTICES</h1><blockquote><p>Software security is a hot topic nowadays. We, web developers, need to be up-to-date with all latest security issues that we could encounter when developing a web application. In this blog we’ll check what kind of best practices we should have in mind when building an Angular app so we limit the amount of security issues we could have.</p></blockquote><h2>UP-TO-DATE ANGULAR LIBRARIES</h2><p>The angular team is doing releases at regular intervals for feature enhancements, bug fixes and security patches as appropriate. So, it is recommended to update the Angular libraries at regular intervals. Not doing so may allow attackers to attack the app using known security vulnerabilities present within older releases.</p><h2>1. PREVENTING CROSS-SITE SCRIPTING (XSS)</h2><p>XSS enables attackers to inject client-side scripts into web pages viewed by other users. Such code can then, for example, steal user data or perform actions to impersonate the user. This is one of the&nbsp;<span>most common attacks</span>&nbsp;on the web.</p><h3>1.1. SANITIZATION AND SECURITY CONTEXTS</h3><p>To systematically block XSS bugs, Angular treats all values as&nbsp;<span>untrusted by default</span>. When a value is inserted into the DOM from a template, via property, attribute, style, class binding, or interpolation, Angular&nbsp;<em>sanitizes</em>&nbsp;and&nbsp;<em>escapes</em>&nbsp;untrusted values.</p><p>This is the declaration of the sanitization providers in the BrowserModule:</p><figure><pre><code data-lang=\"typescript\"><span>export</span> <span>const</span> <span>BROWSER_SANITIZATION_PROVIDERS</span><span>:</span> <span>Array</span><span>&lt;</span><span>any</span><span>&gt;</span> <span>=</span> <span>[</span>\n  <span>{</span><span>provide</span><span>:</span> <span>Sanitizer</span><span>,</span> <span>useExisting</span><span>:</span> <span>DomSanitizer</span><span>},</span>\n  <span>{</span><span>provide</span><span>:</span> <span>DomSanitizer</span><span>,</span> <span>useClass</span><span>:</span> <span>DomSanitizerImpl</span><span>},</span>\n<span>];</span>\n\n<span>@</span><span>NgModule</span><span>({</span>\n  <span>providers</span><span>:</span> <span>[</span>\n    <span>BROWSER_SANITIZATION_PROVIDERS</span>\n    <span>...</span>\n  <span>],</span>\n  <span>exports</span><span>:</span> <span>[</span><span>CommonModule</span><span>,</span> <span>ApplicationModule</span><span>]</span>\n<span>})</span>\n<span>export</span> <span>class</span> <span>BrowserModule</span> <span>{}</span></code></pre></figure><h3>THE DOM SANITIZATION SERVICE</h3><p>The goal of the DomSanitizer is to clean untrusted parts of values.</p><p>The skeleton of the class looks like this:</p><figure><pre><code data-lang=\"typescript\"><span>export</span> <span>enum</span> <span>SecurityContext</span> <span>{</span> <span>NONE</span><span>,</span> <span>HTML</span><span>,</span> <span>STYLE</span><span>,</span> <span>SCRIPT</span><span>,</span> <span>URL</span><span>,</span> <span>RESOURCE_URL</span> <span>}</span>\n\n<span>export</span> <span>abstract</span> <span>class</span> <span>DomSanitizer</span> <span>implements</span> <span>Sanitizer</span> <span>{</span>\n  <span>abstract</span> <span>sanitize</span><span>(</span><span>context</span><span>:</span> <span>SecurityContext</span><span>,</span> <span>value</span><span>:</span> <span>SafeValue</span><span>|</span><span>string</span><span>|</span><span>null</span><span>):</span> <span>string</span><span>|</span><span>null</span><span>;</span>\n  <span>abstract</span> <span>bypassSecurityTrustHtml</span><span>(</span><span>value</span><span>:</span> <span>string</span><span>):</span> <span>SafeHtml</span><span>;</span>\n  <span>abstract</span> <span>bypassSecurityTrustStyle</span><span>(</span><span>value</span><span>:</span> <span>string</span><span>):</span> <span>SafeStyle</span><span>;</span>\n  <span>abstract</span> <span>bypassSecurityTrustScript</span><span>(</span><span>value</span><span>:</span> <span>string</span><span>):</span> <span>SafeScript</span><span>;</span>\n  <span>abstract</span> <span>bypassSecurityTrustUrl</span><span>(</span><span>value</span><span>:</span> <span>string</span><span>):</span> <span>SafeUrl</span><span>;</span>\n  <span>abstract</span> <span>bypassSecurityTrustResourceUrl</span><span>(</span><span>value</span><span>:</span> <span>string</span><span>):</span> <span>SafeResourceUrl</span><span>;</span>\n<span>}</span></code></pre></figure><p>As you can see, there are two kinds of method patterns. The first one is the&nbsp;<code>sanitize</code>&nbsp;method, which gets the&nbsp;<em>context</em>and an&nbsp;<em>untrusted value</em>&nbsp;and returns a trusted value. The other ones are the&nbsp;<code>bypassSecurityTrustX</code>&nbsp;methods which are getting the&nbsp;<em>untrusted value</em>&nbsp;according to the value usage and are returning a trusted object.</p><h4>THE SANITIZE METHOD</h4><p>If a value is trusted for the context, this sanitize method will (in case of a&nbsp;<code>SafeValue</code>) unwrap the contained safe value and use it directly. Otherwise, the value will be sanitized to be safe according to the security context.</p><p>There are three main helper functions for sanitizing the values. The&nbsp;<code>sanitizeHtml</code>&nbsp;function sanitizes the untrusted HTML value by parsing the value and checks its tokens. The&nbsp;<code>sanitizeStyle</code>&nbsp;and&nbsp;<code>sanitizeUrl</code>&nbsp;functions sanitize the untrusted style or URL value by regular expressions.</p><h4>HOW CAN WE DISABLE THE SANITIZATION LOGIC?</h4><p>In specific situations, it might be necessary to disable sanitization. Users can bypass security by constructing a value with one of the&nbsp;<code>bypassSecurityTrustX</code>&nbsp;methods, and then binding to that value from the template.</p><p>An example:</p><figure><pre><code data-lang=\"typescript\"><span>import</span> <span>{</span><span>BrowserModule</span><span>,</span> <span>DomSanitizer</span><span>}</span> <span>from</span> <span>'@angular/platform-browser'</span>\n\n<span>@</span><span>Component</span><span>({</span>\n  <span>selector</span><span>:</span> <span>'my-app'</span><span>,</span>\n  <span>template</span><span>:</span> <span>`\n    &lt;div [innerHtml]=\"html\"&gt;&lt;/div&gt;\n  `</span><span>,</span>\n<span>})</span>\n<span>export</span> <span>class</span> <span>App</span> <span>{</span>\n  <span>constructor</span><span>(</span><span>private</span> <span>sanitizer</span><span>:</span> <span>DomSanitizer</span><span>)</span> <span>{</span>\n    <span>this</span><span>.</span><span>html</span> <span>=</span> <span>sanitizer</span><span>.</span><span>bypassSecurityTrustHtml</span><span>(</span><span>'&lt;h1&gt;DomSanitizer&lt;/h1&gt;&lt;script&gt;ourSuperSafeCode()&lt;/script&gt;'</span><span>)</span> <span>;</span>\n  <span>}</span>\n<span>}</span></code></pre></figure><blockquote><p>Be careful: If you trust a value that might be malicious, you are introducing a security vulnerability into your application!</p></blockquote><h3>1.2. CONTENT SECURITY POLICY (CSP)</h3><p>Content Security Policy (CSP) is an added layer of security that helps to detect and mitigate certain types of attacks, including Cross Site Scripting (XSS) and data injection attacks. These attacks are used for everything from data theft to site defacement or distribution of malware.</p><p>To enable CSP, configure your web server to return an appropriate&nbsp;<code>Content-Security-Policy</code>&nbsp;HTTP header. You can find a very detailed manual how to enable CSP on the&nbsp;<a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP\" target=\"blank\" rel=\"noopener noreferrer\">MDN website</a>. To check if your CSP is valid you can use the&nbsp;<a href=\"https://csp-evaluator.withgoogle.com/\" target=\"blank\" rel=\"noopener noreferrer\">CSP evaluator from google</a>.</p><h3>1.3. USE THE OFFLINE TEMPLATE COMPILER (AKA AOT-COMPILER)</h3><p><em>Angular templates</em>&nbsp;are the same as executable code: HTML, attributes, and binding expressions (but not the values bound) in templates are trusted to be safe. This means that if an attacker can control a value that is being parsed by the template we have a security leak. Never generate template source code by concatenating user input and templates. To prevent these vulnerabilities, use the&nbsp;<span>offline template compiler</span>, also known as&nbsp;<em>template injection</em>.</p><p>If you use the Angular CLI, it’s easy to enable AOT:</p><figure><pre><code data-lang=\"bash\">ng build <span>--aot</span>\nng serve <span>--aot</span></code></pre></figure><p>More info can be found on the&nbsp;<a href=\"https://angular.io/guide/aot-compiler\" target=\"blank\" rel=\"noopener noreferrer\">Angular Guide website</a>.</p><h3>1.4. AVOID DIRECT USE OF THE DOM APIS</h3><p>The built-in browser DOM APIs don’t automatically protect you from security vulnerabilities. For example,&nbsp;<em>document</em>, the node available through&nbsp;<em>ElementRef</em>, and many&nbsp;<em>third-party APIs</em>&nbsp;contain unsafe methods. Avoid interacting with the DOM directly and instead use&nbsp;<span>Angular templates</span>&nbsp;where possible.</p><h3>1.5. SERVER-SIDE XSS PROTECTION</h3><p>Injecting template code into an Angular application is the same as injecting executable code into the application. So, validate all data on server-side code and escape appropriately to prevent XSS vulnerabilities on the server. Also, Angular recommends&nbsp;<em>not to generate Angular templates on the server side</em>&nbsp;using a templating language.</p><h2>2. HTTP-LEVEL VULNERABILITIES</h2><p>Angular has built-in support to help prevent two common HTTP vulnerabilities, cross-site request forgery (CSRF or XSRF) and cross-site script inclusion (XSSI). Both of these must be mitigated primarily on the server side, but Angular provides helpers to make integration on the client side easier.</p><h3>2.1. CROSS-SITE REQUEST FORGERY (XSRF)</h3><p>Cross-site request forgery (also known as&nbsp;<em>one-click attack</em>&nbsp;or&nbsp;<em>session riding</em>) is abbreviated as CSRF or XSRF. It is a type of malicious exploit of a website where unauthorized commands are transmitted from a user that the web application trusts.</p><p>In a common anti-XSRF technique, the application server sends a randomly generated authentication token in a cookie. The client code reads the cookie and adds a custom request header with the token in all subsequent requests. The server compares the received cookie value to the request header value and rejects the request if the values are missing or don’t match.</p><p>This technique is effective because all browsers implement the same origin policy. Only code from the website on which cookies are set can read the cookies from that site and set custom headers on requests to that site. That means only your application can read this cookie token and set the custom header.</p><p>Angular HttpClient provides built-in support for doing checks on the client side. Read further details on&nbsp;<a href=\"https://angular.io/guide/http#security-xsrf-protection\" target=\"blank\" rel=\"noopener noreferrer\">Angular XSRF Support</a>.</p><h3>2.2. CROSS-SITE SCRIPT INCLUSION (XSSI)</h3><p>Cross-site script inclusion (also known as&nbsp;<span>JSON vulnerability</span>) can allow an attacker’s website to read data from a JSON API. The attack works on older browsers by overriding native JavaScript object constructors, and then including an API URL using a&nbsp;<code>&lt;script&gt;</code>&nbsp;tag. This attack is only successful if the returned JSON is executable as JavaScript.</p><p>Servers can prevent an attack by prefixing all JSON responses to make them non-executable, by convention, using the well-known string&nbsp;<code>\")]}',\\n\"</code>. Angular’s HttpClient library recognizes this convention and automatically strips the string&nbsp;<code>\")]}',\\n\"</code>&nbsp;from all responses before further parsing.</p>","filePath":"pages/Angular/.md","_id":"YrHWDpU6YV3xzdMy"}
{"date":"2019-03-01T15:30:24.643Z","title":"JS By Example: 8 Distinct Uses Of JavaScript Array Slice","sourceUrl":"https://zendev.com/2018/08/29/uses-for-javascript-slice.html","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"],"author":"KBall, President, ZenDev LLC","excerpt":"","dateCreated":1551454062367,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Fri Mar 01 2019 21:00:24 GMT+0530 (India Standard Time)'\ntitle: 'JS By Example: 8 Distinct Uses Of JavaScript Array Slice'\ntags: ['JavaScript']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://zendev.com/2018/08/29/uses-for-javascript-slice.html'\ntype: 'Post'\n---\n    ","htmlCode":"<p>The JavaScript array&nbsp;<code>slice</code>&nbsp;method is one of the most powerful and commonly used built-ins in the JavaScript language.</p><p>And with the rise of React and other functionally oriented JavaScript practices, it is becoming even more important, for 2 key reasons:</p><ol><li>Functional programming, particularly higher level functions, works heavily with lists of data</li><li>Functional programming requires&nbsp;<a target=\"_blank\" href=\"https://www.sitepoint.com/functional-programming-pure-functions/\">pure functions</a>, functions that do not cause side effects or modify their input data.</li></ol><p>The JavaScript array&nbsp;<code>slice</code>&nbsp;method fits both of these criteria.</p><p>The&nbsp;<code>slice</code>&nbsp;method provides a mechanism for creating a shallow copy of a subset of a list, without modifying the original list. Thus it provides a key building block for writing functional JavaScript.</p><p>In this post we'll master the&nbsp;<code>slice</code>&nbsp;method by example, exploring 8 different ways it can be used.</p><p><i>Caution:</i>&nbsp;The&nbsp;<code>slice</code>&nbsp;method is not to be confused with the&nbsp;<code>splice</code>method, which modifies an array&nbsp;<i>in place</i>.</p><p>Slice leaves the original array intact and returns a shallow copy of selected items, splice modifies the original array.</p><h2>How Javascript Array Slice Works</h2><p>Before we dive into some of the more advanced uses, lets look at the basics of the&nbsp;<code>slice</code>&nbsp;method.</p><p>As shown in the&nbsp;<a target=\"_blank\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice\">MDN documentation</a>,&nbsp;<code>slice</code>&nbsp;is a method on an array that takes up to 2 arguments:</p><figure><pre><code data-lang=\"javascript\"><span>arr</span><span>.</span><span>slice</span><span>([</span><span>begin</span><span>[,</span> <span>end</span><span>]])</span></code></pre></figure><p>The&nbsp;<code>begin</code>&nbsp;argument is a 0-based index identifying where to begin extraction, while the&nbsp;<code>end</code>&nbsp;argument is a 0-based index identifying where to end.</p><p>The&nbsp;<code>slice</code>&nbsp;method creates a copy of the array starting at&nbsp;<code>begin</code>&nbsp;up to but not including&nbsp;<code>end</code>.</p><p>It also accepts negative indices, which indicate counts back from the end of the array.</p><h2>Basic Uses</h2><p>Our first 4 uses highlight the core functionality of&nbsp;<code>slice</code>.</p><h3>Use 1: Simple copy</h3><figure><pre><code data-lang=\"javascript\"><span>const</span> <span>arr2</span> <span>=</span> <span>arr</span><span>.</span><span>slice</span><span>();</span></code></pre></figure><p>Slice without any arguments performs a simple shallow copy. In modern JavaScript it is more idiomatic to use the&nbsp;<a target=\"_blank\" href=\"https://zendev.com/2018/05/09/understanding-spread-operator-in-javascript.html\">spread operator</a>&nbsp;for this functionality, but if working in older codebases or without a build step that uses babel you may still want to use&nbsp;<code>slice</code>.</p><h3>Use 2: Subarray starting at N</h3><p>The simplest way to use the&nbsp;<code>slice</code>&nbsp;method is simply to grab all elements of an array starting at N.</p><p>An example use case might be you want to pop off the first element of an array and use it, returning the remaining array, but you want to do it without modifying the original array.</p><figure><pre><code data-lang=\"javascript\"><span>function</span> <span>useOne</span><span>(</span><span>arr</span><span>)</span> <span>{</span>\n  <span>const</span> <span>usedItem</span> <span>=</span> <span>arr</span><span>[</span><span>0</span><span>];</span>\n  <span>// do something with usedItem</span>\n  <span>return</span> <span>arr</span><span>.</span><span>slice</span><span>(</span><span>1</span><span>);</span>\n<span>}</span></code></pre></figure><h3>Use 3: last N of an array</h3><p>Another way that&nbsp;<code>slice</code>&nbsp;can be used is to grab the end of an array, taking advantage of the fact that negative indexes count back from the end.</p><p>This negative indexing makes it super simple to strip off however many elements you want. For example, if you want to grab just 3:</p><figure><pre><code data-lang=\"javascript\"><span>const</span> <span>last3</span> <span>=</span> <span>arr</span><span>.</span><span>slice</span><span>(</span><span>-</span><span>3</span><span>)</span></code></pre></figure><h3>Use 4: first n of an array</h3><p>The pull off the front of an array, we need to start using the second argument to the method as well:&nbsp;<code>end</code>.</p><p>When both arguments are passed, the&nbsp;<code>slice</code>&nbsp;method returns a set starting at&nbsp;<code>begin</code>&nbsp;up to but not including&nbsp;<code>end</code>.</p><p>Since JavaScript arrays are zero-based (index starts at 0), this makes it super simple to pull off the first N elements:</p><figure><pre><code data-lang=\"javascript\"><span>const</span> <span>first4</span> <span>=</span> <span>arr</span><span>.</span><span>slice</span><span>(</span><span>0</span><span>,</span> <span>4</span><span>)</span></code></pre></figure><h3>Use 5: inner segment of n, starting at m</h3><p>Generalizing use 5, what if we want to use&nbsp;<code>slice</code>&nbsp;to pull off a segment of the array starting at any index?</p><p>To do this, we need to translate from&nbsp;<code>(begin, length)</code>, to&nbsp;<code>(begin, end)</code>. Luckily, the math is straightforward and we can define a simple function to do this:</p><figure><pre><code data-lang=\"javascript\"><span>function</span> <span>pullSegment</span><span>(</span><span>arr</span><span>,</span> <span>begin</span><span>,</span> <span>length</span><span>)</span> <span>{</span>\n  <span>return</span> <span>arr</span><span>.</span><span>slice</span><span>(</span><span>begin</span><span>,</span> <span>begin</span> <span>+</span> <span>length</span><span>);</span>\n<span>}</span></code></pre></figure><h2>Working With Array-like Objects</h2><p>The&nbsp;<code>slice</code>&nbsp;method can also be used on array-like objects. These are objects that behave&nbsp;<i>mostly</i>&nbsp;like arrays, but are not actually arrays. These are essentially any object that includes a&nbsp;<code>length</code>&nbsp;value and can be accessed via numerical indexes, but do not include Array methods.</p><p>Some examples include&nbsp;<code>arguments</code>&nbsp;(keyword for accessing all arguments passed to a function),&nbsp;<code>NodeLists</code>&nbsp;(returned from any DOM API method that returns a list of nodes), and even raw objects that use numerical indices and add a&nbsp;<code>length</code>&nbsp;attribute.</p><p>To use the&nbsp;<code>slice</code>&nbsp;method on an array-like object, you need to reference it directly from&nbsp;<code>Array.prototype</code>, like this:</p><figure><pre><code data-lang=\"javascript\"><span>Array</span><span>.</span><span>prototype</span><span>.</span><span>slice</span><span>.</span><span>call</span><span>(</span><span>arguments</span><span>);</span></code></pre></figure><p>This leads to a couple valuable uses:</p><h3>Use 6: Convert array-like objects into arrays</h3><p>One common use for the Slice operator on array-like objects is to convert them into actual arrays. For example:</p><figure><pre><code data-lang=\"javascript\"><span>const</span> <span>args</span> <span>=</span> <span>Array</span><span>.</span><span>prototype</span><span>.</span><span>slice</span><span>.</span><span>call</span><span>(</span><span>arguments</span><span>);</span></code></pre></figure><p>Why would you want to do this? To get access to array methods. For example, imagine a function that looks like this:</p><figure><pre><code data-lang=\"javascript\"><span>function</span> <span>addOne</span><span>()</span> <span>{</span>\n  <span>return</span> <span>arguments</span><span>.</span><span>map</span><span>(</span><span>i</span> <span>=&gt;</span> <span>i</span><span>+</span><span>1</span><span>);</span>\n<span>}</span></code></pre></figure><p>Seems like it would work, but if you try to do this you get:</p><figure><pre><code data-lang=\"shell\"><span>&gt; </span>addOne<span>(</span>1, 2, 3<span>)</span>\nTypeError: arguments.map is not a <span>function\n    </span>at <span>test</span> <span>(</span>repl:2:18<span>)</span>\n    at repl:1:1\n    at ContextifyScript.Script.runInThisContext <span>(</span>vm.js:44:33<span>)</span>\n    at REPLServer.defaultEval <span>(</span>repl.js:239:29<span>)</span>\n    at bound <span>(</span>domain.js:301:14<span>)</span>\n    at REPLServer.runBound <span>[</span>as <span>eval</span><span>]</span> <span>(</span>domain.js:314:12<span>)</span>\n    at REPLServer.onLine <span>(</span>repl.js:440:10<span>)</span>\n    at emitOne <span>(</span>events.js:120:20<span>)</span>\n    at REPLServer.emit <span>(</span>events.js:210:7<span>)</span>\n    at REPLServer.Interface._onLine <span>(</span>readline.js:279:10<span>)</span></code></pre></figure><p>This is because&nbsp;<code>arguments</code>&nbsp;is not actually an array, but an array-like object. You can implement this function using&nbsp;<code>slice</code>&nbsp;as follows:</p><figure><pre><code data-lang=\"javascript\"><span>function</span> <span>addOne</span><span>()</span> <span>{</span>\n  <span>return</span> <span>Array</span><span>.</span><span>prototype</span><span>.</span><span>slice</span><span>.</span><span>call</span><span>(</span><span>arguments</span><span>).</span><span>map</span><span>(</span><span>i</span> <span>=&gt;</span> <span>i</span><span>+</span><span>1</span><span>);</span>\n<span>}</span></code></pre></figure><p>and now you get what you'd expect:</p><figure><pre><code data-lang=\"shell\"><span>&gt; </span>addOne<span>(</span>1, 2, 3<span>)</span>\n<span>[</span> 2, 3, 4 <span>]</span></code></pre></figure><h3>Use 7: Coerce arbitrary length extra arguments into an array</h3><p>Sometimes you want to allow for arbitrary numbers of arguments to a function.</p><p>Newer versions of JavaScript have introduced what is known as&nbsp;<a target=\"_blank\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters\">rest syntax</a>to handle this, but if you are stuck supporting older browsers without a transpilation system, you can do this with&nbsp;<code>slice</code>:</p><figure><pre><code data-lang=\"javascript\"><span>function</span> <span>myFunc</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>\n  <span>const</span> <span>extraArgs</span> <span>=</span> <span>Array</span><span>.</span><span>prototype</span><span>.</span><span>slice</span><span>.</span><span>call</span><span>(</span><span>arguments</span><span>,</span> <span>2</span><span>);</span>\n<span>}</span></code></pre></figure><p>This allows calling myFunc with arbitrary numbers of args. e.g.:</p><figure><pre><code data-lang=\"javascript\"><span>myFunc</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>,</span> <span>5</span><span>,</span> <span>6</span><span>,</span> <span>7</span><span>,</span> <span>8</span><span>)</span></code></pre></figure><p>And inside you'll end up with&nbsp;<code>a === 1</code>,&nbsp;<code>b === 2</code>, and&nbsp;<code>extraArgs === [3, 4, 5, 6, 7, 8]</code></p><h2>Functional Array Manipulation</h2><p>Another huge area of use for&nbsp;<code>slice</code>&nbsp;is to manipulate arrays in a functional/pure way, without modifying the original array.</p><h3>Use 8: modifying a particular index in an array</h3><p>A powerful and common use of&nbsp;<code>slice</code>&nbsp;in a functional context is to replace the value of a particular item in an array.</p><p>Imperatively this is simple, you just assign the new value, but in a functional world you can't modify the original array.</p><p>Instead, you can combine&nbsp;<code>slice</code>&nbsp;with the new&nbsp;<a target=\"_blank\" href=\"https://zendev.com/2018/05/09/understanding-spread-operator-in-javascript.html\">JavaScript spread operator</a>to return a new array that is identical but for the index you want to update:</p><figure><pre><code data-lang=\"javascript\"><span>function</span> <span>replaceIdx</span><span>(</span><span>arr</span><span>,</span> <span>index</span><span>,</span> <span>newVal</span><span>)</span> <span>{</span>\n  <span>return</span> <span>[</span>\n    <span>...</span><span>arr</span><span>.</span><span>slice</span><span>(</span> <span>0</span><span>,</span> <span>index</span> <span>),</span>\n    <span>newVal</span><span>,</span>\n    <span>...</span><span>arr</span><span>.</span><span>slice</span><span>(</span> <span>index</span> <span>+</span> <span>1</span><span>)</span>\n  <span>],</span>\n<span>}</span></code></pre></figure><h3>Partial Function Application</h3><p>Another common pattern in functional programming is what is known as&nbsp;<a target=\"_blank\" href=\"https://jrsinclair.com/articles/2016/gentle-introduction-to-functional-javascript-functions/#partialapplication\">partial function application</a>: pre-applying parameters to a function, and then returning a new function.</p><p>This pattern allows you to compose functions, creating greater reusability by letting you use the same core functions with different pre-applied parameters.</p><p>While more pure functional languages like Haskell&nbsp;<a target=\"_blank\" href=\"https://wiki.haskell.org/Partial_application\">support partial function application natively</a>, in JavaScript we can implement a function to do it using&nbsp;<code>slice</code>:</p><figure><pre><code data-lang=\"javascript\"><span>var</span> <span>partial</span> <span>=</span> <span>function</span><span>()</span> <span>{</span>\n  <span>const</span> <span>fn</span> <span>=</span> <span>arguments</span><span>[</span><span>0</span><span>];</span>\n  <span>const</span> <span>args</span> <span>=</span> <span>Array</span><span>.</span><span>prototype</span><span>.</span><span>slice</span><span>.</span><span>call</span><span>(</span><span>arguments</span><span>,</span> <span>1</span><span>);</span>\n\n  <span>// Return a function that calls fn</span>\n  <span>return</span> <span>function</span><span>()</span> <span>{</span>\n    <span>var</span> <span>remainingArgs</span> <span>=</span> <span>Array</span><span>.</span><span>prototype</span><span>.</span><span>slice</span><span>.</span><span>call</span><span>(</span><span>arguments</span><span>);</span>\n    <span>return</span> <span>fn</span><span>.</span><span>apply</span><span>(</span><span>this</span><span>,</span> <span>args</span><span>.</span><span>concat</span><span>(</span><span>remainingArgs</span><span>));</span>\n  <span>}</span>\n<span>}</span></code></pre></figure><h2>Wrapping Up</h2><p>As you can see by this point, the Array&nbsp;<code>slice</code>&nbsp;method is an incredibly useful tool in your JavaScript toolchest, especially as you start moving towards more functional ways of programming.</p><p>I'm confident there are many more great examples of using&nbsp;<code>slice</code>&nbsp;- if you have a good one, share it in the comments below! I'll happily update the post.</p>","filePath":"pages/JavaScript/.md","_id":"Zi779VKjBBKFn4MN"}
{"date":"2018-11-01T16:02:37.852Z","title":"Delay scroll (and resize) handlers in JavaScript","sourceUrl":"https://dannyvankooten.com/delay-scroll-handlers-javascript/","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"," ES6"],"author":"","excerpt":"","dateCreated":1541088124766,"coverImage":"","type":"Snippet","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Thu Nov 01 2018 21:32:37 GMT+0530 (India Standard Time)'\ntitle: 'Delay scroll (and resize) handlers in JavaScript'\ntags: ['JavaScript','ES6']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://dannyvankooten.com/delay-scroll-handlers-javascript/'\ntype: 'Snippet'\n---\n    ","htmlCode":"<p>While working on my newest plugin (<a href=\"http://dannyvankooten.com/wordpress-plugins/scroll-triggered-boxes/\">Scroll Triggered Boxes</a>) I had to attach a handler to the scroll event of the browser window to determine whether a user scrolled down far enough. While the logic for this is pretty simple, I had to put some thought into handling this the correct way.</p><p>Directly attaching a handler to the scroll event is considered bad practice because (depending on the browser) this event can fire&nbsp;<span>many times within a few milliseconds</span>. I did some testing and just logging a message in the scroll handler caused my debugger to crash in Internet Explorer. The sames goes for other events like mousemove, keypress and resize.</p><div><pre><code><span>$</span><span>(</span><span>window</span><span>).</span><span>scroll</span><span>(</span><span>function</span><span>()</span> <span>{</span>\n\t<span>console</span><span>.</span><span>log</span><span>(</span> <span>\"Firing!\"</span> <span>);</span>\n<span>});</span>\n</code></pre></div><p>Even the developers at&nbsp;<a href=\"http://ejohn.org/blog/learning-from-twitter/\">Twitter had an issue with scroll event handlers</a>&nbsp;in the past. They were using infinite scroll and attached their handler directly to the scroll event using jQuery. On top of that, they were running jQuery selector queries&nbsp;<em>every time</em>&nbsp;the event handler fired (without caching them). Enough to make the scrolling experience extremely slow and the site to be unresponsive.</p><h3>The solution: delaying (or polling) your handlers</h3><p>There is a simple solution to this problem: just run your event handlers with a slight delay. This will dramatically cut down on the times your actual callback function is fired. There are multiple ways to go about this but I find a simple timeout the simplest as it requires minimal extra code.</p><div><pre><code><span>var</span> <span>timer</span><span>;</span>\n\n<span>$</span><span>(</span><span>window</span><span>).</span><span>scroll</span><span>(</span><span>function</span><span>()</span> <span>{</span>\n\t<span>if</span><span>(</span><span>timer</span><span>)</span> <span>{</span>\n\t\t<span>window</span><span>.</span><span>clearTimeout</span><span>(</span><span>timer</span><span>);</span>\n\t<span>}</span>\n\n\t<span>timer</span> <span>=</span> <span>window</span><span>.</span><span>setTimeout</span><span>(</span><span>function</span><span>()</span> <span>{</span>\n\t\t<span>// actual callback</span>\n\t\t<span>console</span><span>.</span><span>log</span><span>(</span> <span>\"Firing!\"</span> <span>);</span>\n\t<span>},</span> <span>100</span><span>);</span>\n<span>});</span>\n</code></pre></div><p>This will set a timeout of 100 ms and only then run the actual callback function. If the scroll event is fired again and the 100 ms have not passed yet, it will clear the pending timeout and set a new one. This increased my script performance by about 100% in IE, as my handler was called 10 times less. The same logic can be applied to other events like&nbsp;<em>resize</em>&nbsp;as well.</p><h3>Cache your variables</h3><p>Another optimization you can do is to move as many code outside the callback function as possible. For the scroll triggered boxes plugin, I had to calculate the window height and the height at which a box should be triggered. These heights do not change between firing handlers so I moved it outside the callback.</p><div><pre><code><span>var</span> <span>timer</span><span>;</span>\n<span>var</span> <span>windowHeight</span> <span>=</span> <span>$</span><span>(</span><span>window</span><span>).</span><span>height</span><span>();</span>\n<span>var</span> <span>triggerHeight</span> <span>=</span> <span>0.5</span> <span>*</span> <span>windowHeight</span><span>;</span>\n\n<span>$</span><span>(</span><span>window</span><span>).</span><span>scroll</span><span>(</span><span>function</span><span>()</span> <span>{</span>\n\t<span>if</span><span>(</span><span>timer</span><span>)</span> <span>{</span>\n\t\t<span>window</span><span>.</span><span>clearTimeout</span><span>(</span><span>timer</span><span>);</span>\n\t<span>}</span>\n\n\t<span>timer</span> <span>=</span> <span>window</span><span>.</span><span>setTimeout</span><span>(</span><span>function</span><span>()</span> <span>{</span>\n\n\t\t<span>// this variable changes between callbacks, so we can't cache it</span>\n\t\t<span>var</span> <span>y</span> <span>=</span> <span>$</span><span>(</span><span>window</span><span>).</span><span>scrollTop</span><span>()</span> <span>+</span> <span>windowHeight</span><span>;</span>\n \n\t    <span>if</span><span>(</span><span>y</span> <span>&gt;</span> <span>triggerHeight</span><span>)</span> <span>{</span>\n\t        <span>// ...</span>\n\t    <span>}</span>\n\n\t\t\n\t<span>},</span> <span>100</span><span>);</span>\n<span>});</span>\n</code></pre></div><p>Hope this saves someone a headache! There are various throttle or debounce plugins available for jQuery that do the same thing but in my opinion you don’t really need another dependency for a simple thing as this. As you can see from my code examples, we just added throttling with just 3 or 4 lines of code.</p>","filePath":"pages/JavaScript/.md","_id":"a6x3h5ccMSCKCA1S"}
{"date":"2018-11-22T11:40:09.344Z","title":"Getting your git on: A beginner's guide to git","sourceUrl":"http://selfteach.me/getting-your-git-on/","path":"Github/","category":"Github","tags":["Github"],"author":"","excerpt":"","dateCreated":1542886687407,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Github/'\ndate: 'Thu Nov 22 2018 17:10:09 GMT+0530 (India Standard Time)'\ntitle: 'Getting your git on: A beginner's guide to git'\ntags: ['Github']\ncategory: 'Github'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'http://selfteach.me/getting-your-git-on/'\ntype: 'Post'\n---\n    ","htmlCode":"<p><span>What is git anyway? Short answer: version control.</span>&nbsp;Long answer: Think of it as having unlimited undos on your code. Or better yet, if you’re collaborating with another developer, it allows you to both work on the same project without overwriting each other’s code. Awesome!</p><p>This has saved my butt on more than one occasion. I’ve vowed to always use source control, regardless of how big or small the project is.</p><p><img src=\"http://selfteach.me/wp-content/uploads/2016/06/header-git.png\" alt=\"git\"></p><p>So, now that you’re interested in git, where do you begin? To get started, you’ll need to install git on your local machine (don’t worry, I’ll explain). Eventually, you’ll want to use an online service to store your code, like&nbsp;<a href=\"http://www.github.com/\" title=\"GitHub\" target=\"_blank\">GitHub</a>,&nbsp;<a href=\"http://www.bitbucket.com/\" title=\"BitBucket\" target=\"_blank\">BitBucket</a>, or&nbsp;<a href=\"http://beanstalkapp.com/\" title=\"Beanstalk App\" target=\"_blank\">Beanstalk</a>&nbsp;(more on that below, too).</p><hr><h2>INSTALLING GIT LOCALLY</h2><div><h4>NOTE:</h4><p></p><p>I use a Mac, so unfortunately, I can only speak to that. However, if you’re using another operating system try&nbsp;<a href=\"http://git-scm.com/book/en/v2/Getting-Started-Installing-Git\" title=\"Installing git\">looking here.</a></p><p></p></div><p>The easiest way to to install Git on your Mac (if you’re on Mavericks or older) is to install the XCode Command Line Tools. This is as simple as trying to run&nbsp;<em>git</em>&nbsp;from the Terminal.</p><div><h4>NOTE:</h4><p></p><p>Remember, when you’re working in the Command Line, the dollar sign ($) is the prompt and signifies a new line. No need to copy it.</p><p></p></div><pre><code>$ git</code></pre><p>If you don’t have git installed already, it will prompt you to do so.</p><p>If you want a more up to date version, or would rather run the binary installer, you can grab that&nbsp;<a href=\"http://git-scm.com/download/mac\" title=\"Binary git installer\">here</a>.</p><p><img src=\"http://selfteach.me/wp-content/uploads/2016/06/git-osx-installer.png\" alt=\"git OS Installer\"></p><p><a></a></p><p>The first thing you’ll want to do is configure your git settings.</p><pre><code>$ git config --global user.name \"John Doe\"\n$ git config --global user.email \"john@doe.org\"\n$ git config --global color.ui auto</code></pre><hr><p>Git is typically run from the Terminal. However, as a designer, I tend to be a little leary of the Terminal. Granted I’ve&nbsp;<a href=\"http://selfteach.me/getting-started-with-the-terminal/\" title=\"Getting Started with the Terminal\">gotten more comfortable</a>, but I still prefer a GUI (Graphical User Interface) when I can get one.</p><p>I think the easiest thing to do is learn the vocabulary. Then, it doesn’t matter whether it’s the Terminal or GUI, the same concepts apply no matter what.</p><hr><h2>LEARNING THE VOCABULARY</h2><div><h4>NOTE:</h4><p></p><p><a href=\"http://www.git-tower.com/blog/git-cheat-sheet/\" title=\"Git Cheat Sheet\">Here’s a cheat sheet</a>&nbsp;you can print out and keep handy.</p><p></p></div><p>Let’s walk through this as you would for a real project.</p><p>You’ll want to create a folder on your computer for your project. In my user folder, I have a folder called&nbsp;<span>Code</span>. Then, a subfolder called&nbsp;<span>GIT</span>. I keep all my project folders there.</p><div><img src=\"http://www.amyhaywood.com/wp-content/uploads/2015/02/folder-structure.png\" alt=\"Code > Git folder structure\"></div><p>If you’re trying to do everything from the command line, these commands create a new folder and then navigates inside:</p><pre><code>$ mkdir new_project\n$ cd new_project</code></pre><p>Let’s&nbsp;<span>init</span>iatize our git repository. (All your git projects are called repositories.)</p><pre><code>$ git init</code></pre><p>So what does initializing really do? It creates an&nbsp;<em>empty</em>&nbsp;repository in a hidden folder,&nbsp;<span>.git</span>.</p><div><h4>NOTE:</h4><p></p><p>If you ever wanted to remove the repository, all you’d need to do is delete that .git subdirectory:</p><pre><code>$ git rm -rf .git</code></pre><p></p></div><p>Notice, I said&nbsp;<em>empty</em>. It did&nbsp;<em>not</em>&nbsp;add the current content within your folder. You have to tell it to do that yourself.</p><p>All the content within your project folder is considered the&nbsp;<span>working copy</span>. Once you get to a place where you want to save those files, you’ll&nbsp;<span>stage</span>&nbsp;your changes and then&nbsp;<span>commit</span>&nbsp;them to your local repository.</p><hr><p><img src=\"http://selfteach.me/wp-content/uploads/2016/06/git-workflow.png\" alt=\"Working Copy, Staging, Local Repository\"></p><hr><p>The advantage here is not all of the files you’ve modified since your last commit have to be staged and committed.</p><h3>STATUS</h3><p>Let’s get an overview of everything that has changed since we last committed:</p><pre><code>git status</code></pre><p><img src=\"http://selfteach.me/wp-content/uploads/2016/06/git_status.png\" alt=\"git Status\"></p><p>Git will put your changes into three main categories:</p><ul><li>Changes not staged for commit</li><li>Changes to be committed</li><li>Untracked files</li></ul><hr><h3>ADD</h3><p>You can add all these changes by using:</p><pre><code>git add .</code></pre><p>If you don’t want to add the changes you’ve made, but cherry pick files, you can list them out:</p><pre><code>git add assets/dist/css/main.css assets/dist/js/production.js</code></pre><hr><h3>REMOVE</h3><p>If we removed a file, we’d need to confirm that too:</p><pre><code>git rm something.html</code></pre><hr><h3>COMMIT</h3><p>Now, let’s commit our updates:</p><pre><code>git commit -m \"Initial commit\"\n</code></pre><p>The first commit, I usually title as “Initial commit” but as you continue to make changes and commit your code, you’ll want these messages to be meaningful. This will make it easier for you (or your teammates) to understand the changes you made later down the road.</p><p>Your message should include information like, “What was the motivation for the change? How does this differ from the previous version?”</p><p>If you need a commit message longer than 50 characters, you can leave out the “-m” parameter and Git will open an editor application for you to write a longer message.</p><p>Here are a few guidelines from&nbsp;<a href=\"http://www.git-tower.com/learn/ebook/command-line/basics/working-on-your-project#start\">Tower’s eBook,&nbsp;<em>Learn Version Control with Git</em></a>:</p><ol><li><span>Related Changes</span>&nbsp;A commit should only contain changes from a single topic. Don’t mix up contents from different topics. This will make it harder to understand what happened.</li><li><span>Completed Work</span>&nbsp;Never commit something that is half-done. If you need to save your current work temporarily in something like a clipboard, you can use Git’s “Stash” feature. But don’t eternalize it in a commit.</li><li><span>Tested Work</span>&nbsp;You shouldn’t commit code that you&nbsp;<em>think</em>&nbsp;is working. Test it well — and before you commit it to the repository.</li><li><span>Short and Descriptive Messages</span>&nbsp;A good commit also needs a good message.</li></ol><hr><h3>LOG</h3><p>If you want to review a history of all the commits that have been made to a project:</p><pre><code>git log</code></pre><p>You’ll see a list in chronological order, beginning with the newest item.</p><p><img src=\"http://selfteach.me/wp-content/uploads/2016/06/git_log.png\" alt=\"git log\"></p><p>If there are more items than what can be displayed on one page, you’ll see a : at the bottom of the screen. You can go to the next page by hitting the &lt;SPACE&gt; key and quit with “q”.</p><p>You’ll notice from the log, every commit has:</p><ul><li><span>Commit Hash</span>&nbsp;This is that crazy long string of letters and numbers (i.e. aa093b890c78e9d0869a3f267b2530cf2cbeb83f)</li><li><span>Author Name and Email</span>&nbsp;Remember when we set our name and email address within the&nbsp;<a href=\"http://selfteach.me/getting-your-git-on/#git-settings\">git configurations above</a>? This is where it gets used.</li><li><span>Date</span></li><li><span>Commit Message</span></li></ul><hr><h3>REMOTE</h3><p>Now that we’ve made a bunch of commits, let’s publish (or push) them online. First we need to tell Git where our&nbsp;<span>remote</span>&nbsp;repository is.</p><p>There’s several services you can use, three of the most popular ones are:</p><ul><li><a href=\"http://www.github.com/\" target=\"_blank\">GitHub</a></li><li><a href=\"http://www.bitbucket.com/\" target=\"_blank\">BitBucket</a></li><li><a href=\"http://beanstalk.com/\" target=\"_blank\">Beanstalk</a></li></ul><p>I go into&nbsp;<a href=\"http://selfteach.me/getting-your-git-on/#remote-repositories\">a little more detail on each service’s features below.</a></p><p>Regardless of the service you use, when you create a repository, they will give you an SSH address and HTTPS address.</p><p>You can use either:</p><pre><code>$ git remote add origin git@bitbucket.org:ahhacreative/git_blog_post.git\n</code></pre><p>OR</p><pre><code>$ git remote add origin https://ahhacreative@bitbucket.org/ahhacreative/git_blog_post.git\n</code></pre><p>In this case, we named our remote repository “origin.” This is the default within Git. However, I could just as easily name it something else. I usually name mine based on where the remote repository is. This makes it easy within Tower (my GUI of choice) to tell where it’s being saved:</p><p><img src=\"http://selfteach.me/wp-content/uploads/2016/06/tower_remote.png\" alt=\"Tower for Remotes\"></p><p>From the command line:</p><pre><code>$ git remote add BITBUCKET git@bitbucket.org:ahhacreative/git_blog_post.git</code></pre><p>You can see a list of all your remotes:</p><pre><code>git remote -v</code></pre><p><img src=\"http://selfteach.me/wp-content/uploads/2016/06/git_remote.png\" alt=\"git remote\"></p><p>You’ll notice there are two URLs listed (fetch and push). One is for read access (fetch) and the other is for write (push). Usually, the two URLs are the same, but you could use different URLs for security and performance issues.</p><hr><h3>PUSH</h3><p>Now, we need to&nbsp;<span>push</span>&nbsp;our code up to our remote:</p><pre><code>$ git push origin master</code></pre><p>Hopefully, some of these things are starting to look familiar.&nbsp;<span>Origin</span>&nbsp;is the name of the remote repository and&nbsp;<span>master</span>&nbsp;is the name of our branch. (We haven’t talked about branching yet. It’s OK, just trust me for now, but&nbsp;<a href=\"http://selfteach.me/getting-your-git-on/#branching\">it’s coming</a>.)</p><p><img src=\"http://selfteach.me/wp-content/uploads/2016/06/git_push.png\" alt=\"git push\"></p><p>Let’s pause for a moment. I just want to take a moment to point out: you’re more than halfway there! It wasn’t that hard, was it?! You know everything you need to know to save, commit, and publish your files online! There’s still more topics to cover, but you already know the basics. That’s worth celebrating!</p><hr><h3>PULL</h3><p>OK. So far, we’ve just published our changes online. But, what if we’re collaborating with another developer? They’re publishing their changes too. How do we&nbsp;<span>pull</span>&nbsp;down there code?</p><p>First you may want to see what you’re pulling:</p><pre><code>$ git fetch origin\n$ git log origin/master</code></pre><p>If you want to integrate these changes into your local working copy:</p><pre><code>$ git pull</code></pre><p>If you have multiple remotes and branches, you may need to specify:</p><pre><code>$ git pull origin master</code></pre><hr><a></a><p></p><h3>BRANCHING</h3><p>OK, so let’s (finally) talk about branching.</p><p>When you’re coding, there are usually several different contexts or “topics” you’re working with:</p><ul><li>features</li><li>bug fixes</li><li>experiments</li></ul><p>In the real world, these all happen simultaneously. You’re trying to fix a bug while a teammate is working on the new about page design.</p><p>If branching didn’t exist, how would you integrate some of these changes, but not all of them? You need to post the code for the bug fix, but your teammate isn’t ready to launch the new about page. You find out the new “members only” code you’ve been working on is going in a different direction, but you’ve already integrated that code in with everything else. How do you separate it out?</p><hr><p><img src=\"http://selfteach.me/wp-content/uploads/2016/06/no_branches.jpg\" alt=\"No branches\"></p><hr><p>Branching!</p><p>You can create a branch to handle each of these topics. It stays separate from all the other contexts. When you make changes, they only apply to the current active branch.</p><hr><p><img src=\"http://selfteach.me/wp-content/uploads/2016/06/branching.png\" alt=\"Branching\"></p><hr><p>Your current branch can be referred to as the&nbsp;<span>active</span>&nbsp;branch,&nbsp;<span>checked out</span>&nbsp;branch, or&nbsp;<span>HEAD</span>&nbsp;branch. They all mean the same thing.</p><p>Whenever you run&nbsp;<code>git status</code>, it will tell you what branch you’re currently on.</p><p><img src=\"http://selfteach.me/wp-content/uploads/2016/06/current_branch.png\" alt=\"current branch\"></p><div><h4>NOTE:</h4><p></p><p>You may have noticed from my screenshots, that my Terminal shows me what branch I’m in and changes color based on whether there are uncommitted files or not.</p><p><img src=\"http://www.amyhaywood.com/wp-content/uploads/2015/02/git_ohmyzsh.png\" alt=\"git inside iTerms2 and oh my zsh\"></p><p>I’m running&nbsp;<a href=\"https://github.com/robbyrussell/oh-my-zsh\" title=\"Oh My Zsh\">Oh My Zsh</a>&nbsp;within&nbsp;<a href=\"http://iterm2.com/\" title=\"iTerm2\">iTerm2</a>. I have more details in&nbsp;<a href=\"http://selfteach.me/getting-your-git-on/\">a blog post.</a></p><p></p></div><p>To create a new branch:</p><pre><code>$ git branch feature/about-page</code></pre><p></p><div><h4>NOTE:</h4><p></p><p>I like to name my branches my contexts. So, you’ll notice, I prepended my branch name (about-page) with “feature.” This is nice because within Tower, it treats these contexts as folders:</p><p><img src=\"http://www.amyhaywood.com/wp-content/uploads/2015/02/branches_in_tower.png\" alt=\"branches within Tower\"><br></p></div><p>We’ve created a branch, but it’s still not our current branch. To change branches, you’ll need to&nbsp;<span>checkout</span>:</p><pre><code>$ git checkout -b feature/about-page</code></pre><p>To view a list of all our branches:</p><pre><code>$ git branch -v</code></pre><p>The&nbsp;<code>-v</code>&nbsp;(verbose) flag, provides more information, than just&nbsp;<code>git branch</code>.</p><p><img src=\"http://selfteach.me/wp-content/uploads/2016/06/git_list_branches.png\" alt=\"git list branches\"></p><p>Now, that you know how to create and change branches. What happens when you’re ready to commit that code to your main (master) branch?</p><p>First, you’ll want to navigate to your master branch. Then, merge in your new branch:</p><pre><code>$ git checkout master\n$ git merge feature/about-page</code></pre><p>Once a branch is merged and deployed, you no longer need it. To delete a local branch:</p><pre><code>$ git branch -d feature/about-page </code></pre><hr><h3>STASHING</h3><p>Remember when we talked about not committing half done work? How do you get around that?</p><p>Stashing.</p><p><a href=\"http://www.git-tower.com/learn/ebook/command-line/branching-merging/stashing#start\" title=\"Stash on git-tower.com\">git-tower.com</a>&nbsp;explains it well:</p><div><p><em>Think of the Stash as a clipboard on steroids: it takes all the changes in your working copy and saves them for you on a new clipboard. You’re left with a clean working copy, i.e. you have no more local changes.</em></p></div><p>To stash your local changes:</p><pre><code>$ git stash</code></pre><p>To see an overview of all your current stashes:</p><pre><code>$ git stash list</code></pre><p>The most recent Stashes will always be listed first.</p><p>When you want to apply a Stash, you can run:</p><pre><code>$ git stash pop</code></pre><p>This will pull the latest Stash and clear it from your clipboard. Or</p><pre><code>$ git stash apply &lt;StashName&gt;</code></pre><p>This pulls the specified Stash, but unlike&nbsp;<code>pop</code>, it remains saved. To delete it, you’ll need to run&nbsp;<code>git stash drop &lt;StashName&gt;</code></p><hr><h3>CLONE</h3><p>These things are all great, but what if you’re not starting from scratch? What if you’re joining a project that already exists?</p><p>Then, you’ll want to use&nbsp;<code>clone</code>.</p><pre><code>$ git clone https://ahhacreative@bitbucket.org/ahhacreative/git_blog_post.git</code></pre><p>This will automatically set the remote to the “origin.” Anytime you&nbsp;<code>pull</code>, it will grab any updates made to the repository.</p><p>Sometimes, you’ll want to grab the code from a repository, but start with a clean history. To do so, simply add the flag&nbsp;<code>--bare</code>:</p><pre><code>$ git clone --bare https://ahhacreative@bitbucket.org/ahhacreative/git_blog_post.git</code></pre><hr><h3>.GITIGNORE</h3><p>There will be times when you don’t want to put all your code within your repository. For example, if you’re using bower, you probably don’t want the&nbsp;<span>bower_components</span>&nbsp;folder. Or, if you’re running grunt or gulp, you don’t need&nbsp;<span>node_modules</span>. A teammate only needs to run&nbsp;<code>bower init</code>&nbsp;or&nbsp;<code>npm install</code>&nbsp;to get those files. Committing them would only bloat your repository.</p><p>You can create a file called&nbsp;<code>.gitignore</code>&nbsp;and list all the files or folders to exclude. For example, here’s my .gitignore file for a WordPress project:</p><p></p><hr><p><a></a></p><h2>REMOTE REPOSITORIES</h2><p>There are several services that you can use to host your remote repositories.</p><hr><h3>GITHUB</h3><p><img src=\"http://selfteach.me/wp-content/uploads/2016/06/github.png\" alt=\"GitHub\"></p><p><a href=\"http://github.com/\">GitHub</a>&nbsp;is probably the most popular. If you make your repositories public, then you can create an unlimited number of repositories for free. You start paying when you create private repositories.</p><p>GitHub also has an excellent&nbsp;<a href=\"https://github.com/features\">issue tracker built in</a>&nbsp;among several other great resources.</p><p>Even if you don’t plan on paying for a GitHub account, I would highly recommend signing up for an account anyway. GitHub has practically become a standard for developers. Meaning, if you’re applying for a programming job, your potential employer might ask to see examples on GitHub.</p><hr><h3>BITBUCKET</h3><p><img src=\"http://selfteach.me/wp-content/uploads/2016/06/bitbucket.png\" alt=\"Bitbucket\"></p><p><a href=\"http://www.bitbucket.com/\" target=\"_blank\">BitBucket</a>&nbsp;does everything that GitHub does, but is missing the community that surrounds GitHub.</p><p>The advantage to using BitBucket is that it allows you to have an unlimited number of private repositories and 5 collaborators for&nbsp;<span>free</span>.</p><hr><h3>BEANSTALK</h3><div><img src=\"http://www.amyhaywood.com/wp-content/uploads/2015/02/beanstalk.png\" alt=\"Beanstalk App\"></div><p><a href=\"http://beanstalkapp.com/\" title=\"Beanstalk\">BeanStalk</a>&nbsp;is another great service. Like GitHub, you’re paying based on the number of repositories you use.</p><p>It’s missing a lot of the features that the other two services provide, but the biggest benefit it has is built in deployment. Meaning, you can push changes to your repository and it will automatically send those updates to your server via FTP (or however you specify). That’s almost enough to make me switch.</p><p>In the meantime, I’m using&nbsp;<a href=\"http://dploy.io/\" title=\"dploy.io\">dploy.io</a>&nbsp;instead. It’s made by the same company (WildBit) that makes Beanstalk. Dploy.io allows you to deploy commits from BitBucket or GitHub. Pricing is based on the number of repositories you’ve connected.</p><hr><h2>THE APPS</h2><p>OK, now that you know the correct terminology, I want to introduce a few GUIs:</p><hr><h3>TOWER</h3><p><img src=\"http://selfteach.me/wp-content/uploads/2016/06/towerapp.png\" alt=\"Tower app\"></p><p>I use&nbsp;<a href=\"http://www.git-tower.com/\" title=\"Tower App\" target=\"_blank\">Tower</a>. IMHO, it’s the best. Just from glancing at the screenshot, you can see the buttons along the top for most of the vocabulary terms covered in this post. If you want a little more information, check out this screencast (from the Tower app team):</p><div><div><iframe src=\"http://www.youtube.com/embed/cyyuqf1m-2E\" frameborder=\"0\" allowfullscreen=\"\"></iframe></div></div><hr><h3>GITHUB</h3><p><img src=\"http://selfteach.me/wp-content/uploads/2016/06/github_app.png\" alt=\"GitHub App\"></p><p><a href=\"https://mac.github.com/\" title=\"GitHub for the mac\">GitHub has their own GUI.</a>&nbsp;Unlike Tower, it’s free. I’ve downloaded it, but I rarely use it since I have Tower.</p><p>At the end of the day, it’s whatever you’re the most comfortable with. They all accomplish the same thing. My thing is don’t let the tools get in the way of making cool stuff.</p><hr><h2>ADDITIONAL RESOURCES</h2><p>Granted, we’ve covered the basics, it should be enough to get you up and going. However, if you want to dig a little deeper, here are a few additional resources to check out:</p><ul><li><a href=\"http://www.git-tower.com/learn/\">Learn Git from the people that make Tower</a></li><li><a href=\"https://try.github.io/levels/1/challenges/1\">Try Git</a>&nbsp;– This is a resource created by&nbsp;<a href=\"https://www.codeschool.com/\" title=\"Code School\">CodeSchool</a>. It’s pretty great since it’s interactive. You can type commands into their web interface for feedback.</li></ul>","filePath":"pages/Github/.md","_id":"bQ5U7tKBHLmmebmI"}
{"date":{"$$date":1542817570102},"title":"Syncing your fork to the original repository via the browser","sourceUrl":"https://github.com/KirstieJane/STEMMRoleModels/wiki/Syncing-your-fork-to-the-original-repository-via-the-browser","path":"Github/Github/Github/","category":"Github","tags":["Github"],"author":"Kirstie Whitaker","excerpt":"","dateCreated":1542815754659,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Github/'\ndate: 'Wed Nov 21 2018 21:31:49 GMT+0530 (India Standard Time)'\ntitle: 'Syncing your fork to the original repository via the browser'\ntags: ['Github']\ncategory: 'Github'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://github.com/KirstieJane/STEMMRoleModels/wiki/Syncing-your-fork-to-the-original-repository-via-the-browser'\ntype: 'Post'\n---\n    ","htmlCode":"\n        <div>\n          <p>When you create a <a href=\"https://help.github.com/articles/github-glossary/#fork\">fork</a> of a <a href=\"https://help.github.com/articles/github-glossary/#repository\">repository</a> (<a href=\"https://help.github.com/articles/fork-a-repo/\">here are some instructions</a>)\n you only have the versions of the files that are in the repository at \nthat time. So if there are any changes in the original repository you \nmay find that your version (your fork) is out of sync.</p>\n<p>This can lead to problems when you try to create a <a href=\"https://help.github.com/articles/github-glossary/#pull-request\">pull request</a>.</p>\n<p>While GitHub has instructions for <a href=\"https://help.github.com/articles/merging-an-upstream-repository-into-your-fork/\">merging an upstream repository into your fork</a> they require you to have git installed on your local machine.</p>\n<p>Fortunately, when Kirstie reached out to the cool kids from the <a href=\"https://www.mozillascience.org/working-open-workshop-february-2016\" rel=\"nofollow\">Mozilla Science Working Open Workshop</a> they gave her the answer. And it turns out there was an answer on the interwebs already: you <strong>can update your fork in the browser</strong> by following the easy steps laid out in <a href=\"http://stackoverflow.com/questions/20984802/how-can-i-keep-my-fork-in-sync-without-adding-a-separate-remote/21131381#21131381\" rel=\"nofollow\">this Stack Overflow answer</a>.</p>\n<p>The Stack Overflow <a href=\"http://stackoverflow.com/questions/20984802/how-can-i-keep-my-fork-in-sync-without-adding-a-separate-remote/21131381#21131381\" rel=\"nofollow\">link</a> has pictures which are really helpful, but briefly, here's what you do:</p>\n<ol>\n<li>\n<p>Open <strong>your</strong> fork of the repository.</p>\n</li>\n<li>\n<p>Click the compare button.</p>\n<p>This will open a page titled <strong>Comparing Changes</strong> and \nif you look carefully you'll have jumped to the upstream version of the \nrepository. If you were to do a regular pull request then this makes \nsense as you'd be bringing your changes into the upstream version. But \nin this case we want to <strong>flip the direction</strong> and pull changes <em>from</em> the original version <em>to</em> our fork.</p>\n</li>\n<li>\n<p>Change the <strong>base fork</strong> to your repository</p>\n</li>\n<li>\n<p>You're now back to your fork but you've also asked to compare two identical repositories so GitHub thinks you care about <a href=\"https://help.github.com/articles/github-glossary/#branch\">branches</a> not <a href=\"https://help.github.com/articles/github-glossary/#fork\">forks</a>. Click on <strong>compare across forks</strong> to get back your base fork option.</p>\n</li>\n<li>\n<p>Change the <strong>head fork</strong> to the upstream (original) repository</p>\n<p>Note at this point that if you were in control of everything at \nGitHub you would probably just have put a little button in between the \nbase for and head fork that would have flipped them for you rather than \ndoing all these clicks. You might even had added in a separate button to\n check for upstream changes! But <a href=\"https://github.com/isaacs/github/issues/121\">they do know that this is a bit of a silly hack</a> and they're working hard on a bunch of other cool stuff so we'll let them off this one.</p>\n</li>\n<li>\n<p>You'll see one of two options:</p>\n</li>\n</ol>\n<ul>\n<li>\"There isn’t anything to compare\"\nThis means you're up to date and you don't have to do anything. Phew. <img title=\":relieved:\" alt=\":relieved:\" src=\"https://camo.githubusercontent.com/6755afc29aef1aa70effa5620d71c96fc7161834/68747470733a2f2f6173736574732d63646e2e6769746875622e636f6d2f696d616765732f69636f6e732f656d6f6a692f756e69636f64652f31663630632e706e67\" data-canonical-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f60c.png\" width=\"20\" height=\"20\" align=\"absmiddle\">\n</li>\n<li>A list of commits.\nThese are the changes that have happened in the repository since you forked your version. Go to step 7.</li>\n</ul>\n<ol start=\"7\">\n<li>\n<p>Create a <a href=\"https://help.github.com/articles/github-glossary/#pull-request\">pull request</a></p>\n<p>Note that this pull request is <strong>to you</strong>! So you can \nconfirm that it's ok and merge it when necessary. And if there are any \nmerge conflicts then it's up to you to figure out what's gone wrong and \nsort them out.</p>\n</li>\n</ol>\n<p>And now you're ready to continue working on your fork <img title=\":smiley:\" alt=\":smiley:\" src=\"https://camo.githubusercontent.com/11be4fdc31bbe050d5341c53d075a3bf846310f0/68747470733a2f2f6173736574732d63646e2e6769746875622e636f6d2f696d616765732f69636f6e732f656d6f6a692f756e69636f64652f31663630332e706e67\" data-canonical-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f603.png\" width=\"20\" height=\"20\" align=\"absmiddle\"> <img title=\":boom:\" alt=\":boom:\" src=\"https://camo.githubusercontent.com/bf24482d8b24bf9debc85dfe79f9058440749541/68747470733a2f2f6173736574732d63646e2e6769746875622e636f6d2f696d616765732f69636f6e732f656d6f6a692f756e69636f64652f31663461352e706e67\" data-canonical-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f4a5.png\" width=\"20\" height=\"20\" align=\"absmiddle\"> <img title=\":tada:\" alt=\":tada:\" src=\"https://camo.githubusercontent.com/ce30a052daa7777afd0c1cd589dfbbde03862d56/68747470733a2f2f6173736574732d63646e2e6769746875622e636f6d2f696d616765732f69636f6e732f656d6f6a692f756e69636f64652f31663338392e706e67\" data-canonical-src=\"https://assets-cdn.github.com/images/icons/emoji/unicode/1f389.png\" width=\"20\" height=\"20\" align=\"absmiddle\"></p>\n<p>Well done!</p>\n\n<h2>Example 2:</h2>\n\n<p>Refrance URL :&nbsp;<a href=\"https://gist.github.com/CristinaSolana/1885435\" target=\"_blank\">https://gist.github.com/CristinaSolana/1885435</a></p>\n\n<pre><code>### 1. Clone your fork:\n\n    git clone git@github.com:YOUR-USERNAME/YOUR-FORKED-REPO.git\n\n### 2. Add remote from original repository in your forked repository: \n\n    cd into/cloned/fork-repo\n    git remote add upstream git://github.com/ORIGINAL-DEV-USERNAME/REPO-YOU-FORKED-FROM.git\n    git fetch upstream\n\n### 3. Updating your fork from original repo to keep up with their changes:\n\n    git pull upstream master</code></pre>\n\n        </div>","filePath":"pages/Github/.md","_id":"cVCwtlOm7S2dVklJ","dateUpdated":1542817570102}
{"date":{"$$date":1553094949002},"title":"On The Subject Of Subjects (in RxJS)","sourceUrl":"https://medium.com/@benlesh/on-the-subject-of-subjects-in-rxjs-2b08b7198b93","path":"RxJs/RxJs/","category":"RxJs","tags":["RxJs"],"author":"Ben Lesh","excerpt":"","dateCreated":1551456086078,"coverImage":"","type":"Post","frontmatter":"---\npath: 'RxJs/'\ndate: 'Fri Mar 01 2019 21:32:22 GMT+0530 (India Standard Time)'\ntitle: 'On The Subject Of Subjects (in RxJS)'\ntags: ['RxJs']\ncategory: 'RxJs'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://medium.com/@benlesh/on-the-subject-of-subjects-in-rxjs-2b08b7198b93'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Subjects in RxJS are often misunderstood. Because they allow you to imperatively push values into an observable stream, people tend to abuse Subjects when they’re not quite sure how to make an Observable out of something. The pattern looks a little like this…</p><pre><code>// What people usually first do with Subjects when they find them// (TRY NOT TO DO THIS)</code></pre><pre><code>const subject = new Subject();button.addEventListener(‘click’, () =&gt; subject.next('click');subject.subscribe(x =&gt; console.log(x));</code></pre><p>While this is helpful for people new to RxJS (and in that capacity&nbsp;<em>totally</em>&nbsp;fine), it’s not really the “Rx way” to handle things like this. Ideally you’d wrap your event registration in an Observable that can set it up and tear it down. Which looks more like this:</p><pre><code>// This is better, but use Observable.fromEvent(button, 'click')// instead, please.</code></pre><pre><code>const clicks = new Observable(observer =&gt; {  const handler = (e) =&gt; observer.next(e);  button.addEventListener('click', handler);  return () =&gt; button.removeEventListener('click', handler);});</code></pre><p>Why show this when it has nothing to do with Subjects? Well, for one thing, it shows why you don’t always need to use a Subject, and for another thing, there’s a subject hidden in here… sort of. The thing to note here, is that the Observable is wrapping the registering of the handler on the button via addEventListener, which itself is a subject.&nbsp;…at least per the “<a href=\"https://en.wikipedia.org/wiki/Design_Patterns\" data-href=\"https://en.wikipedia.org/wiki/Design_Patterns\" rel=\"nofollow noopener\" target=\"_blank\">Gang Of Four</a>”&nbsp;<a href=\"https://en.wikipedia.org/wiki/Observer_pattern\" data-href=\"https://en.wikipedia.org/wiki/Observer_pattern\" rel=\"nofollow noopener\" target=\"_blank\">Observer Pattern</a>.</p><h4>The Observer&nbsp;Pattern</h4><p>As you may know, RxJS is mostly about Observables and Observers… but it’s also about Subjects. While observables aren’t something you’ll find in the GoF’s&nbsp;<a href=\"https://en.wikipedia.org/wiki/Design_Patterns\" data-href=\"https://en.wikipedia.org/wiki/Design_Patterns\" rel=\"nofollow noopener\" target=\"_blank\">Design Patterns</a>, Subjects and Observers are the meat-and-potatoes of the&nbsp;<a href=\"https://en.wikipedia.org/wiki/Observer_pattern\" data-href=\"https://en.wikipedia.org/wiki/Observer_pattern\" rel=\"nofollow noopener\" target=\"_blank\">Observer Pattern</a>.</p><figure><div><div></div><div data-image-id=\"1*isWKTKNBoQrE5av1FZr6wQ.png\" data-width=\"500\" data-height=\"207\" data-scroll=\"native\"><canvas width=\"75\" height=\"30\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/800/1*isWKTKNBoQrE5av1FZr6wQ.png\" src=\"https://cdn-images-1.medium.com/max/800/1*isWKTKNBoQrE5av1FZr6wQ.png\"></div></div><figcaption>(Source: Wikipedia)</figcaption></figure><p>The pattern is pretty straight forward. Observers are a class with a notification method on it, and Subject is a class with a means to add or remove an observer to/from a list of internal observers, and a method to notify that list of observers.</p><p>Subjects in RxJS aren’t much different. When you call&nbsp;<code>subscribe</code>&nbsp;with an observer on an Rx Subject, it will add that observer to an internal list of observers. Likewise, if you call&nbsp;<code>subscribe</code>&nbsp;with one to three functions, it wraps them in an observer, and adds it to its list of observers. When you call&nbsp;<code>next(value)</code>&nbsp;on the Subject, it will loop through its list of observers and forward that value along to their&nbsp;<code>next</code>&nbsp;methods. It does the same thing for&nbsp;<code>error</code>&nbsp;and&nbsp;<code>complete</code>. To remove your observer from the subject’s list of observers, you simply call&nbsp;<code>unsubscribe</code>&nbsp;on the subscription returned when you added the observer to the list.</p><pre><code>const subject = new Subject();</code></pre><pre><code>// add observer1 to the list of observersconst sub1 = subject.subscribe(observer1);</code></pre><pre><code>// add observer2 to the list of observersconst sub2 = subject.subscribe(observer2);</code></pre><pre><code>// notify all observers in the list with \"hi there\"subject.next('hi there');</code></pre><pre><code>// remove observer1 from the listsub1.unsubscribe();</code></pre><h4>Subject Compared To Observable</h4><p>Effectively, RxJS Subjects different take on the GoF Observer Pattern Subjects, but their API duck-types as an Observable. In fact, in RxJS, Subjects even inherit from Observable. The advantage here is that all Subjects then have the same operators and methods available to them as Observables do.</p><p><span data-creator-ids=\"anon\">Probably a more important distinction between Subject and Observable is that a Subject has state, it keeps a list of observers. On the other hand, an<a href=\"https://medium.com/@benlesh/learning-observable-by-building-observable-d5da57405d87\" data-href=\"https://medium.com/@benlesh/learning-observable-by-building-observable-d5da57405d87\" target=\"_blank\">Observable is really just a function</a>&nbsp;that sets up observation.</span></p><p>While Subjects are Observables, Subjects also implement an Observer interface. That is to say, they have&nbsp;<code>next</code>,&nbsp;<code>error</code>, and&nbsp;<code>complete</code>&nbsp;methods. These methods are used to notify their counterparts on observers in the subject’s internal observers list. This means a subject can be used as an observer to subscribe to any observable.</p><pre><code>// To \"share\" the observable tick$ with two observers,// observer1 and observer2, we can pipe all notifications// through a Subject, like so</code></pre><pre><code>const tick$ = Observable.interval(1000);const subject = new Subject();</code></pre><pre><code>subject.subscribe(observer1);subject.subscribe(observer2);</code></pre><pre><code>tick$.subscribe(subject);</code></pre><p>The example above is “multicasting” the observable&nbsp;<code>tick$</code>&nbsp;to two observers:&nbsp;<code>observer1</code>&nbsp;and&nbsp;<code>observer2</code>. This is actually what almost all multicasting operators in RxJS do internally. For example&nbsp;<code>publish</code>,&nbsp;<code>publishReplay</code>,&nbsp;<code>multicast</code>,&nbsp;<code>share</code>, etc. Really, this is the primary use case for Subjects in RxJS.</p><h4>Subjects Are Not&nbsp;Reusable</h4><p>In RxJS, Subjects cannot be reused. That is to say, when a Subject completes or errors, it can no longer be used. If you try to&nbsp;<code>next</code>&nbsp;on a Subject that is&nbsp;<code>closed</code>&nbsp;due to it’s&nbsp;<code>complete</code>&nbsp;or&nbsp;<code>error</code>&nbsp;method being called, it will silently ignore the notification. If you want the Subject to loudly and angrily error when you next to it after it’s done being useful, you can call&nbsp;<code>unsubscribe</code>directly on the subject instance itself.</p><pre><code>// The death of a Subjectconst subject = new Subject();</code></pre><pre><code>subject.subscribe(x =&gt; console.log(x));</code></pre><pre><code>subject.next(1);    // 1subject.next(2);    // 2subject.complete();subject.next(3);    // silently ignored</code></pre><pre><code>subject.unsubscribe();subject.next(4);    // Unhandled ObjectUnsubscribedError</code></pre><h4>Gotchas in&nbsp;RxJS</h4><p>But it comes with some confusing pain points in current versions of RxJS. Since Rx observables do not “trap” errors, we can run into some strange behavior here. Error “trapping” is a behavior I myself have derided Promises for implementing, but in multicast scenarios it may be the right move. What I mean when I say Rx observable does not “trap” errors is basically that when an error percolates to the end of the observer chain, if the error is unhandled, it will be re-thrown.</p><pre><code>// Demonstrating re-throwing for lack of an error handler</code></pre><pre><code>const badObservable = Observable.throw(new Error('haha'));</code></pre><pre><code>try {  badObservable.subscribe({    next: x =&gt; console.log(x),    error: null,    complete: () =&gt; console.log('done')  });} catch (err) {  console.error(err); // logs our Error: \"haha\"}</code></pre><p>Now let’s think of that behavior in terms of what happens when you’re looping over a list of observers and notifying them (as subject does)</p><pre><code>for (let observer of observers) {  observer.next('notify'); // What happens if this call throws??}</code></pre><pre><code>// HINT: It's going to error and break the loop// NOTE: Okay, that was more than a HINT.</code></pre><p>Given that a number of operators are processed synchronously, (<code>map</code>,&nbsp;<code>filter</code>,&nbsp;<code>scan</code>&nbsp;et al), if you have an error thrown in one of those, or any other synchronous operation, downstream from a multicast (which is using a Subject to loop over a list of observers and notify them), you can get some spooky behavior:</p><pre><code>// This is going to behave strangely</code></pre><pre><code>const source$ = Observable.interval(1000).share();</code></pre><pre><code>const mapped$ = source$.map(x =&gt; {  if (x === 1) {    throw new Error('oops');  }  return x;});</code></pre><pre><code>source$.subscribe(x =&gt; console.log('A', x));mapped$.subscribe(x =&gt; console.log('B', x));source$.subscribe(x =&gt; console.log('C', x));</code></pre><pre><code>// \"A\" 0// \"B\" 0// \"C\" 0// \"A\" 1// Uncaught Error: \"oops\"</code></pre><p>In the example above, most users would expect A’s and C’s to keep notifying. It’s understandable that the second B’s observable dies, it had an error, but it’s rather confusing that the other streams and the source stream die. It shouldn’t be the case that an arbitrary third party can kill your shared observable stream and therefor unknown numbers of sibling streams. This is a leaky abstraction, and we need to fix it in upcoming versions of RxJS.</p><p>Working around the above scenario in the interim is easy thanks to schedulers. You can use&nbsp;<code>observeOn</code>&nbsp;after your multicast and you’ll get around this problem because errors will no longer be thrown synchronously.</p><pre><code>const source$ = Observable.interval(1000)  .share()  .observeOn(Rx.Scheduler.asap); // magic here</code></pre><pre><code>const mapped$ = source$.map(x =&gt; {  if (x === 1) {    throw new Error('oops');  }  return x;});</code></pre><pre><code>source$.subscribe(x =&gt; console.log('A', x));mapped$.subscribe(x =&gt; console.log('B', x));source$.subscribe(x =&gt; console.log('C', x));</code></pre><pre><code>// \"A\" 0// \"B\" 0// \"C\" 0// \"A\" 1// Uncaught Error: \"oops\"// \"C\" 1// \"A\" 2// \"C\" 2 // \"A\" 3// \"C\" 3// ... etc</code></pre><p>Another workaround, that’s a little more performant if you can manage it, is to simply add an error handler to all of your subscriptions.</p><pre><code>const source$ = Observable.interval(1000)  .share()  .observeOn(Rx.Scheduler.asap); // magic here</code></pre><pre><code>const mapped$ = source$.map(x =&gt; {  if (x === 1) {    throw new Error('oops');  }  return x;});</code></pre><pre><code>source$.subscribe(x =&gt; console.log('A', x));mapped$.subscribe(  x =&gt; console.log('B', x),  err =&gt; console.log('Error handled: ' + err.message));source$.subscribe(x =&gt; console.log('C', x));</code></pre><pre><code>// \"A\" 0// \"B\" 0// \"C\" 0// \"A\" 1// \"Error handled: oops\"// \"C\" 1// \"A\" 2// \"C\" 2 // \"A\" 3// \"C\" 3// ... etc</code></pre><h4>The Future Of Observable</h4><p>The newer incarnation of the&nbsp;<a href=\"https://github.com/tc39/proposal-observable\" data-href=\"https://github.com/tc39/proposal-observable\" rel=\"nofollow noopener\" target=\"_blank\">TC39 Observable proposal</a>, not including the&nbsp;<code>CancelToken</code>&nbsp;business, which is an entire article by itself, is likely going to get around this behavior by “trapping” the error if there is no error handler. That is to say, it’s not going to re-throw errors that make it to the end of the observer chain. In future versions of RxJS I think we’re going to do the same thing, because it’s the right thing to do. The issue is open for debate, of course, but it’s unlikely to meet much resistance in my opinion.</p><h4>Summary</h4><ol><li>Subjects are both observer and observable</li><li>Subjects “multicast” to an internal list of observers</li><li><a href=\"https://medium.com/@benlesh/learning-observable-by-building-observable-d5da57405d87\" data-href=\"https://medium.com/@benlesh/learning-observable-by-building-observable-d5da57405d87\" target=\"_blank\">Observables are just functions</a>&nbsp;that set up observation</li><li>Observables currently don’t trap errors but they should</li><li>Errors thrown synchronously downstream from a Subject can kill the Subject</li><li>You can use an error handler or&nbsp;<code>observeOn</code>&nbsp;to fix the problem in #4</li><li>I was wrong about Promise error trapping. It’s a good idea, because promises are multicast.*</li><li>Future versions of RxJS are likely to trap errors.</li></ol><ul><li>Although maybe not totally necessary, as promises are always async. (shrug)</li></ul><blockquote>A little about me: I am the lead author of RxJS 5 and I run workshops on reactive programming with RxJS at&nbsp;<a href=\"http://rxworkshop.com/\" data-href=\"http://rxworkshop.com\" rel=\"noopener nofollow\" target=\"_blank\">RxWorkshop.com</a></blockquote>","filePath":"pages/RxJs/.md","_id":"e2tvHAZIbDF7RDyX","dateUpdated":1553094949002}
{"date":"2018-12-14T15:01:32.762Z","title":"Intro to Firebase and React design","sourceUrl":"https://css-tricks.com/intro-firebase-react/","path":"React/","category":"React","tags":["React"," firebase"],"author":"Simon Bloom","excerpt":"","dateCreated":1544799537015,"coverImage":"","type":"Post","frontmatter":"---\npath: 'React/'\ndate: 'Fri Dec 14 2018 20:31:32 GMT+0530 (India Standard Time)'\ntitle: 'Intro to Firebase and React design'\ntags: ['React','firebase']\ncategory: 'React'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://css-tricks.com/intro-firebase-react/'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Let's take a look at building something using Firebase and React. We'll be building something called <strong>Fun Food Friends</strong>,\n a web application for planning your next potluck, which hopefully feels\n like something rather \"real world\", in that you can imagine using these\n technologies in your own production projects. The big idea in this app \nis that you and your friends will be able to log in and be able to see \nand post information about what you're planning to bring to the potlock.\n </p>\n<p><span></span></p>\n<div>\n<h4><a href=\"https://css-tricks.com/intro-firebase-react/#article-header-id-0\">#</a>Article Series:</h4>\n<ol>\n<li>Intro to Firebase and React (You are here!)</li>\n<li><a href=\"https://css-tricks.com/firebase-react-part-2-user-authentication/\">User Authentication</a></li>\n</ol>\n</div>\n<p>When we're finished, it will look like this:</p>\n<figure><img src=\"https://css-tricks.com/wp-content/uploads/2017/05/fun-food-friends.png\" srcset=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1496406197/fun-food-friends_rnbdcc.png 1000w, https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_200,f_auto,q_auto/v1496406197/fun-food-friends_rnbdcc.png 200w\" sizes=\"(min-width: 1850px) calc( (100vw - 555px) / 3 )\n       (min-width: 1251px) calc( (100vw - 530px) / 2 )\n       (min-width: 1086px) calc(100vw - 480px)\n       (min-width: 626px)  calc(100vw - 335px)\n                           calc(100vw - 30px)\" alt=\"\"><figcaption>Our example app: Fun Food Friends</figcaption></figure>\n<p>This article assumes you already have some basic knowledge of how \nReact works and maybe built a few small apps with React. If you haven't,\n I would recommend checking out a series like Wes Bos' <a href=\"https://reactforbeginners.com/friend/CODEPEN\">React for Beginners</a> first before continuing on.</p>\n<h3><a href=\"https://css-tricks.com/intro-firebase-react/#article-header-id-1\">#</a>What is Firebase?</h3>\n<p>Google's <a href=\"https://firebase.google.com/\">Firebase</a> is a \ncloud-based database hosting service that will set up a database for you\n and host it, as well as offer you the tools to interact with it. You \ncan use it to store and retrieve data in real time. That's not all \nFirebase does, it can do more things like handle user authentication and\n store files, but we'll be mainly focusing on data storage.</p>\n<p>The data storage ability of Firebase make it a perfect fit for React.\n A persistent, real-time backend for your application to plug in to!</p>\n<h3><a href=\"https://css-tricks.com/intro-firebase-react/#article-header-id-2\">#</a>How does Firebase store data?</h3>\n<p>Firebase stores data as a giant object with key-value pairs. Unlike JSON or JavaScript objects, there are no arrays in Firebase.</p>\n<p>A Firebase database might look something like this:</p>\n<pre rel=\"Firebase Data\"><code><span>{</span>\n      <span>\"groceries\"</span><span>:</span> <span>{</span>\n        <span>\"-KjQTqG3R2dPT8s2jylW\"</span><span>:</span> <span>\"tomato\"</span><span>,</span>\n        <span>\"-KjQTrds1feHT3GH_29o\"</span><span>:</span> <span>\"pasta\"</span><span>,</span>\n        <span>\"-KjQTsmfBR8zN1SwPPT8\"</span><span>:</span> <span>\"milk\"</span><span>,</span>\n        <span>\"-KjQTtnzt_jJZPoCHWUM\"</span><span>:</span> <span>\"sugar\"</span>\n      <span>}</span><span>,</span>\n      <span>\"users\"</span><span>:</span> <span>{</span>\n        <span>\"name\"</span><span>:</span> <span>{</span>\n          <span>\"-KjQTyIfKFEVMYJRZ09X\"</span><span>:</span> <span>\"simon\"</span><span>,</span>\n          <span>\"-KjQU-Xuy5s7I-On9rYP\"</span><span>:</span> <span>\"ryan\"</span><span>,</span>\n          <span>\"-KjQU0MYVeKRsLuIQCYX\"</span><span>:</span> <span>\"sylvia\"</span>\n        <span>}</span>\n      <span>}</span>\n<span>}</span></code></pre>\n<p>For more information on the nuances of structuring data in Firebase, <a href=\"https://firebase.google.com/docs/database/web/structure-data\">you can read the amazing Firebase documentation</a>.</p>\n<p>Ready to start? Let's dig in!</p>\n<h3><a href=\"https://css-tricks.com/intro-firebase-react/#article-header-id-3\">#</a>Getting Started: Setting up Our App</h3>\n<p>We'll start by using the incredibly handy `create-react-app` package \nin order to quickly set up a new React project without having to worry \nabout any build configuration. Open up your command line, and type the \nfollowing:</p>\n<pre rel=\"Command Line\"><code>npm install -g create-react-app\n    \ncreate-react-app fun-food-friends\ncd fun-food-friends\nyarn add firebase --dev\nyarn start</code></pre>\n<p>This will boot up your app in the browser, and start a watch task in \nyour terminal so that we can begin hacking away at the project. We're \nalso installing the `firebase` package here as we'll need it for the \nnext step.</p>\n<h3><a href=\"https://css-tricks.com/intro-firebase-react/#article-header-id-4\">#</a>Creating our Firebase Database</h3>\n<p>Now that our app is set up, we'll need to create an account and \ndatabase on Firebase so that we can link up our application to it.</p>\n<p><a href=\"https://firebase.google.com/\">Head on over to Firebase's website</a>, and click <b>Get Started.</b></p>\n<figure><img src=\"https://css-tricks.com/wp-content/uploads/2017/05/firebase-splash.png\" srcset=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1496406385/firebase-splash_um19ev.png 1000w, https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_200,f_auto,q_auto/v1496406385/firebase-splash_um19ev.png 200w\" sizes=\"(min-width: 1850px) calc( (100vw - 555px) / 3 )\n       (min-width: 1251px) calc( (100vw - 530px) / 2 )\n       (min-width: 1086px) calc(100vw - 480px)\n       (min-width: 626px)  calc(100vw - 335px)\n                           calc(100vw - 30px)\" alt=\"\"></figure>\n<p>This will take you to a page where you’ll be asked to authenticate \nwith your Google account. Select the account that you’d like this \nproject to be affiliated with, and press <b>OK</b>.</p>\n<p>This should take you to the Firebase console, which looks something like this:</p>\n<figure><img src=\"https://css-tricks.com/wp-content/uploads/2017/05/firebase-dashboard.png\" srcset=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1496406458/firebase-dashboard_gigmqp.png 1000w, https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_868,f_auto,q_auto/v1496406458/firebase-dashboard_gigmqp.png 868w, https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_200,f_auto,q_auto/v1496406458/firebase-dashboard_gigmqp.png 200w\" sizes=\"(min-width: 1850px) calc( (100vw - 555px) / 3 )\n       (min-width: 1251px) calc( (100vw - 530px) / 2 )\n       (min-width: 1086px) calc(100vw - 480px)\n       (min-width: 626px)  calc(100vw - 335px)\n                           calc(100vw - 30px)\" alt=\"\"></figure>\n<p>Now let's create our project's database. Click <b>Add Project</b>. Let's call it \"fun-food-friends\" and press <b>OK</b>. </p>\n<p>This will take you to your app's dashboard, which looks like this:</p>\n<figure><img src=\"https://css-tricks.com/wp-content/uploads/2017/05/firebase-overview.png\" srcset=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1496406510/firebase-overview_xa2kp0.png 1000w, https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_200,f_auto,q_auto/v1496406510/firebase-overview_xa2kp0.png 200w\" sizes=\"(min-width: 1850px) calc( (100vw - 555px) / 3 )\n       (min-width: 1251px) calc( (100vw - 530px) / 2 )\n       (min-width: 1086px) calc(100vw - 480px)\n       (min-width: 626px)  calc(100vw - 335px)\n                           calc(100vw - 30px)\" alt=\"\"></figure>\n<p>Since we'll be building a web app, select <b>Add Firebase to your web app</b>. This will trigger a popup with some code that looks like this:</p>\n<pre rel=\"HTML\"><code><span><span><span>&lt;</span>script</span> <span>src</span><span><span>=</span><span>\"</span>https://www.gstatic.com/firebasejs/3.9.0/firebase.js<span>\"</span></span><span>&gt;</span></span><span></span><span><span><span>&lt;/</span>script</span><span>&gt;</span></span>\n<span><span><span>&lt;</span>script</span><span>&gt;</span></span><span>\n  <span spellcheck=\"true\">// Initialize Firebase</span>\n  <span>var</span> config <span>=</span> <span>{</span>\n     apiKey<span>:</span> <span>\"AIzaSyDblTESEB1SbAVkpy2q39DI2OHphL2-Jxw\"</span><span>,</span>\n    authDomain<span>:</span> <span>\"fun-food-friends-eeec7.firebaseapp.com\"</span><span>,</span>\n    databaseURL<span>:</span> <span>\"https://fun-food-friends-eeec7.firebaseio.com\"</span><span>,</span>\n    projectId<span>:</span> <span>\"fun-food-friends-eeec7\"</span><span>,</span>\n    storageBucket<span>:</span> <span>\"fun-food-friends-eeec7.appspot.com\"</span><span>,</span>\n    messagingSenderId<span>:</span> <span>\"144750278413\"</span>\n  <span>}</span><span>;</span>\n  firebase<span>.</span><span>initializeApp</span><span>(</span>config<span>)</span><span>;</span>\n</span><span><span><span>&lt;/</span>script</span><span>&gt;</span></span></code></pre>\n<p>Since we'll be importing Firebase into our project using ES6 modules, we won't need those script tags. That <code>config</code> object is important though: it's how we authenticate our React application with our Firebase database. </p>\n<h3><a href=\"https://css-tricks.com/intro-firebase-react/#article-header-id-5\">#</a>Hooking up our App to Firebase</h3>\n<p>Copy that whole config object, and head back over to your React \nproject. Find your `src` folder, and create a file called `firebase.js`.\n  Inside of it, let's import firebase, our config, and initialize our \napp:</p>\n<pre rel=\"JavaScript\"><code><span spellcheck=\"true\">// src/firebase.js</span>\n<span>import</span> firebase <span>from</span> <span>'firebase'</span>\n<span>const</span> config <span>=</span> <span>{</span>\n    apiKey<span>:</span> <span>\"AIzaSyDblTESEB1SbAVkpy2q39DI2OHphL2-Jxw\"</span><span>,</span>\n    authDomain<span>:</span> <span>\"fun-food-friends-eeec7.firebaseapp.com\"</span><span>,</span>\n    databaseURL<span>:</span> <span>\"https://fun-food-friends-eeec7.firebaseio.com\"</span><span>,</span>\n    projectId<span>:</span> <span>\"fun-food-friends-eeec7\"</span><span>,</span>\n    storageBucket<span>:</span> <span>\"fun-food-friends-eeec7.appspot.com\"</span><span>,</span>\n    messagingSenderId<span>:</span> <span>\"144750278413\"</span>\n<span>}</span><span>;</span>\nfirebase<span>.</span><span>initializeApp</span><span>(</span>config<span>)</span><span>;</span>\n<span>export</span> <span>default</span> firebase<span>;</span></code></pre>\n<p>One last thing we'll need to do before we can dive into roughing out \nour App. We need to temporarily disable authentication requirements on \nour app so that we can add and remove items without needing to have any \nkind of user authentication flow. </p>\n<p>From the Firebase Dashboard, on the left-hand side of the screen, \nyou'll notice that there is a Database tab. Click on it. Then, on the \nright-hand side, under the subheading <b>Realtime Database</b>, you'll see a <b>Rules</b> tab. This will cause an object to appear that looks something like this:</p>\n<pre rel=\"JavaScript\"><code><span>{</span>\n    <span>\"rules\"</span><span>:</span> <span>{</span>\n      <span>\".read\"</span><span>:</span> <span>\"auth != null\"</span><span>,</span>\n      <span>\".write\"</span><span>:</span> <span>\"auth != null\"</span>\n    <span>}</span>\n<span>}</span></code></pre>\n<p>We need to set <code>.read</code> and <code>.write</code> to both be equal to <code>true</code>,\n otherwise later, when we try to add data to our database from our \napplication, Firebase won't let us. When you're finished, it should look\n something like this:</p>\n<figure><img src=\"https://css-tricks.com/wp-content/uploads/2017/05/firebase-rules.png\" srcset=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1496406627/firebase-rules_sjfzyy.png 1000w, https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_200,f_auto,q_auto/v1496406627/firebase-rules_sjfzyy.png 200w\" sizes=\"(min-width: 1850px) calc( (100vw - 555px) / 3 )\n       (min-width: 1251px) calc( (100vw - 530px) / 2 )\n       (min-width: 1086px) calc(100vw - 480px)\n       (min-width: 626px)  calc(100vw - 335px)\n                           calc(100vw - 30px)\" alt=\"\"></figure>\n<p>Make sure to click the <b>Publish</b> button.</p>\n<p>And that's all there is to hooking up our database! Anytime we need a\n component of our application to connect with our Firebase database, we \nsimply need to import our firebase module and we'll have direct \nreference to it.</p>\n<h3><a href=\"https://css-tricks.com/intro-firebase-react/#article-header-id-6\">#</a>Building out our App's Rough Skeleton</h3>\n<p>Let's build out a rough HTML skeleton for our application. We'll build a simple form with two inputs:</p>\n<ol>\n<li>A field where the user can submit their name</li>\n<li>A field where the user can enter what food they're bringing to the potluck.</li>\n</ol>\n<p>Since our app is quite simple, we'll keep everything inside of one \nmain component, `App.js`. Open up `src/App.js`, and remove the `App` \ncomponent, replacing it with this basic skeleton:</p>\n<pre rel=\"JavaScript\"><code><span>import</span> React<span>,</span> <span>{</span> Component <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n<span>import</span> logo <span>from</span> <span>'./logo.svg'</span><span>;</span>\n<span>import</span> <span>'./App.css'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span>div className<span>=</span><span>'app'</span><span>&gt;</span>\n        <span>&lt;</span>header<span>&gt;</span>\n            <span>&lt;</span>div className<span>=</span><span>'wrapper'</span><span>&gt;</span>\n              <span>&lt;</span>h1<span>&gt;</span>Fun Food Friends<span>&lt;</span><span>/</span>h1<span>&gt;</span>\n              \n            <span>&lt;</span><span>/</span>div<span>&gt;</span>\n        <span>&lt;</span><span>/</span>header<span>&gt;</span>\n        <span>&lt;</span>div className<span>=</span><span>'container'</span><span>&gt;</span>\n          <span>&lt;</span>section className<span>=</span><span>'add-item'</span><span>&gt;</span>\n              <span>&lt;</span>form<span>&gt;</span>\n                <span>&lt;</span>input type<span>=</span><span>\"text\"</span> name<span>=</span><span>\"username\"</span> placeholder<span>=</span><span>\"What's your name?\"</span> <span>/</span><span>&gt;</span>\n                <span>&lt;</span>input type<span>=</span><span>\"text\"</span> name<span>=</span><span>\"currentItem\"</span> placeholder<span>=</span><span>\"What are you bringing?\"</span> <span>/</span><span>&gt;</span>\n                <span>&lt;</span>button<span>&gt;</span>Add Item<span>&lt;</span><span>/</span>button<span>&gt;</span>\n              <span>&lt;</span><span>/</span>form<span>&gt;</span>\n          <span>&lt;</span><span>/</span>section<span>&gt;</span>\n          <span>&lt;</span>section className<span>=</span><span>'display-item'</span><span>&gt;</span>\n            <span>&lt;</span>div className<span>=</span><span>'wrapper'</span><span>&gt;</span>\n              <span>&lt;</span>ul<span>&gt;</span>\n              <span>&lt;</span><span>/</span>ul<span>&gt;</span>\n            <span>&lt;</span><span>/</span>div<span>&gt;</span>\n          <span>&lt;</span><span>/</span>section<span>&gt;</span>\n        <span>&lt;</span><span>/</span>div<span>&gt;</span>\n      <span>&lt;</span><span>/</span>div<span>&gt;</span>\n    <span>)</span><span>;</span>\n  <span>}</span>\n<span>}</span>\n<span>export</span> <span>default</span> App<span>;</span></code></pre>\n<h3><a href=\"https://css-tricks.com/intro-firebase-react/#article-header-id-7\">#</a>Get the CSS</h3>\n<p>I've prepared a little bit of CSS for you to paste into the `App.css`\n file, just so that our app doesn't look totally bland. If you want to \ngrab it, just <a href=\"https://raw.githubusercontent.com/swbloom/fun-food-friends/master/src/App.css\">go here</a> and copy and paste the raw contents you find there into your `src/App.css` file!</p>\n<p>We'll also need to embed a link to Google Fonts and Font Awesome, so \ngo ahead and open up `public/index.html` and add the following lines \nbelow the favicon:</p>\n<pre rel=\"HTML\"><code><span><span><span>&lt;</span>link</span> <span>rel</span><span><span>=</span><span>\"</span>shortcut icon<span>\"</span></span> <span>href</span><span><span>=</span><span>\"</span>%PUBLIC_URL%/favicon.ico<span>\"</span></span><span>&gt;</span></span>\n\n<span spellcheck=\"true\">&lt;!-- add the lines below --&gt;</span>\n\n<span><span><span>&lt;</span>link</span> <span>rel</span><span><span>=</span><span>\"</span>stylesheet<span>\"</span></span> <span>href</span><span><span>=</span><span>\"</span>https://fonts.googleapis.com/css?family<span>=</span>Open+Sans<span>\"</span></span><span>&gt;</span></span>\n<span><span><span>&lt;</span>link</span> <span>rel</span><span><span>=</span><span>\"</span>stylesheet<span>\"</span></span> <span>href</span><span><span>=</span><span>\"</span>https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css<span>\"</span></span><span>&gt;</span></span>  </code></pre>\n<p>At this point, your app should look like this:</p>\n<figure><img src=\"https://css-tricks.com/wp-content/uploads/2017/05/app-1.png\" srcset=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1496406685/app-1_cx83ld.png 1000w, https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_200,f_auto,q_auto/v1496406685/app-1_cx83ld.png 200w\" sizes=\"(min-width: 1850px) calc( (100vw - 555px) / 3 )\n       (min-width: 1251px) calc( (100vw - 530px) / 2 )\n       (min-width: 1086px) calc(100vw - 480px)\n       (min-width: 626px)  calc(100vw - 335px)\n                           calc(100vw - 30px)\" alt=\"\"></figure>\n<h3><a href=\"https://css-tricks.com/intro-firebase-react/#article-header-id-8\">#</a>Connecting our Form to Component State</h3>\n<p>Before we can start adding data into our Firebase database, we need \nto connect our inputs to our component’s state, so that React can keep \ntrack of them. </p>\n<p>First, let's carve out some space in our component's state - a space to keep track of the user using our app (<code>username</code>) and the item they intend to bring (<code>currentItem</code>). We'll do this by creating a <code>constructor()</code> hook for our app and setting a default value for our input's state there:</p>\n<pre rel=\"JavaScript\"><code><span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>constructor</span><span>(</span><span>)</span> <span>{</span>\n    <span>super</span><span>(</span><span>)</span><span>;</span>\n    <span>this</span><span>.</span>state <span>=</span> <span>{</span>\n      currentItem<span>:</span> <span>''</span><span>,</span>\n      username<span>:</span> <span>''</span>\n    <span>}</span>\n  <span>}</span>\n  <span spellcheck=\"true\">// ....</span></code></pre>\n<p>We'll add a  <code>onChange</code> event handlers to our inputs, as \nwell as providing them with a value derived from our state (this is \ncalled a \"controlled input\"), like this:</p>\n<pre rel=\"JSX\"><code><span>&lt;</span>section className<span>=</span><span>\"add-item\"</span><span>&gt;</span>\n  <span>&lt;</span>form<span>&gt;</span>\n    <span>&lt;</span>input type<span>=</span><span>\"text\"</span> name<span>=</span><span>\"username\"</span> placeholder<span>=</span><span>\"What's your name?\"</span> onChange<span>=</span><span>{</span><span>this</span><span>.</span>handleChange<span>}</span> value<span>=</span><span>{</span><span>this</span><span>.</span>state<span>.</span>username<span>}</span> <span>/</span><span>&gt;</span>\n    <span>&lt;</span>input type<span>=</span><span>\"text\"</span> name<span>=</span><span>\"currentItem\"</span> placeholder<span>=</span><span>\"What are you bringing?\"</span> onChange<span>=</span><span>{</span><span>this</span><span>.</span>handleChange<span>}</span> value<span>=</span><span>{</span><span>this</span><span>.</span>state<span>.</span>currentItem<span>}</span> <span>/</span><span>&gt;</span>\n    <span>&lt;</span>button<span>&gt;</span>Add Item<span>&lt;</span><span>/</span>button<span>&gt;</span>\n  <span>&lt;</span><span>/</span>form<span>&gt;</span>\n<span>&lt;</span><span>/</span>section<span>&gt;</span></code></pre>\n<p>And finally, we'll create a catch-all <code>handleChange</code> method that receives the event from our inputs, and updates that input's corresponding piece of state:</p>\n<pre rel=\"JavaScript\"><code><span>handleChange</span><span>(</span>e<span>)</span> <span>{</span>\n  <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span>\n    <span>[</span>e<span>.</span>target<span>.</span>name<span>]</span><span>:</span> e<span>.</span>target<span>.</span>value\n  <span>}</span><span>)</span><span>;</span>\n<span>}</span></code></pre>\n<p>If you aren't familiar with using brackets to dynamically determine key name in an object literal, check out the <a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Object_initializer#Computed_property_names\">MDN docs on computed properties</a>.</p>\n<p>Since we're using ES6 classes and need access to <code>this</code> in our <code>handleChange</code> method, we'll also need to bind it back in our <code>constructor()</code> component like this:</p>\n<pre rel=\"JavaScript\"><code><span>constructor</span><span>(</span><span>)</span> <span>{</span>\n  <span>super</span><span>(</span><span>)</span><span>;</span>\n  <span>this</span><span>.</span>state <span>=</span> <span>{</span>\n    username<span>:</span> <span>''</span><span>,</span>\n    currentItem<span>:</span> <span>''</span>\n  <span>}</span>\n  <span>this</span><span>.</span>handleChange <span>=</span> <span>this</span><span>.</span>handleChange<span>.</span><span>bind</span><span>(</span><span>this</span><span>)</span><span>;</span>\n<span>}</span></code></pre>\n<p>If you now use the <a href=\"https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en\">React Dev</a><a href=\"https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en\">Tools</a>\n to inspect your App component's state, you'll see that both of your \ninputs are now successfully hooked up and being tracked in your \ncomponent's state:</p>\n<figure><img src=\"https://css-tricks.com/wp-content/uploads/2017/05/app-state.png\" srcset=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1496406789/app-state_s1rxyr.png 1000w, https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_200,f_auto,q_auto/v1496406789/app-state_s1rxyr.png 200w\" sizes=\"(min-width: 1850px) calc( (100vw - 555px) / 3 )\n       (min-width: 1251px) calc( (100vw - 530px) / 2 )\n       (min-width: 1086px) calc(100vw - 480px)\n       (min-width: 626px)  calc(100vw - 335px)\n                           calc(100vw - 30px)\" alt=\"\"></figure>\n<h3><a href=\"https://css-tricks.com/intro-firebase-react/#article-header-id-9\">#</a>Adding a new Potluck Item to your Database</h3>\n<p>Now that we're tracking our inputs, let's make it so that we can add a\n new item to our database so that Firebase can keep track of it.</p>\n<p>First we'll need to connect to Firebase in order to do this, we'll start by importing our <code>firebase</code> module that we created earlier. We'll also delete the <code>logo.svg</code> import, since it's just an unneeded part of the create-react-app boiler plate and will cause warnings if we don't:</p>\n<pre rel=\"JavaScript\"><code><span>import</span> React<span>,</span> <span>{</span> Component <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n<span>import</span> logo <span>from</span> <span>'./logo.svg'</span><span>;</span> <span spellcheck=\"true\">// &lt;--- remove this line</span>\n<span>import</span> <span>'./App.css'</span><span>;</span>\n<span>import</span> firebase <span>from</span> <span>'./firebase.js'</span><span>;</span> <span spellcheck=\"true\">// &lt;--- add this line</span></code></pre>\n<p>Once that's done, we'll need to make our 'Add Item' button let \nFirebase know what we'd like to add to our database and where we'd like \nto put it.</p>\n<p>First we'll attach a submit event listener for our form, and have it call a <code>handleSubmit</code> method we'll write in a minute:</p>\n<pre rel=\"JSX\"><code><span>&lt;</span>form onSubmit<span>=</span><span>{</span><span>this</span><span>.</span>handleSubmit<span>}</span><span>&gt;</span>\n  <span>&lt;</span>input type<span>=</span><span>\"text\"</span> name<span>=</span><span>\"username\"</span> placeholder<span>=</span><span>\"What's your name?\"</span> onChange<span>=</span><span>{</span><span>this</span><span>.</span>handleChange<span>}</span> value<span>=</span><span>{</span><span>this</span><span>.</span>state<span>.</span>username<span>}</span> <span>/</span><span>&gt;</span>\n  <span>&lt;</span>input type<span>=</span><span>\"text\"</span> name<span>=</span><span>\"currentItem\"</span> placeholder<span>=</span><span>\"What are you bringing ?\"</span> onChange<span>=</span><span>{</span><span>this</span><span>.</span>handleChange<span>}</span> value<span>=</span><span>{</span><span>this</span><span>.</span>state<span>.</span>currentItem<span>}</span> <span>/</span><span>&gt;</span>\n  <span>&lt;</span>button<span>&gt;</span>Add Item<span>&lt;</span><span>/</span>button<span>&gt;</span>\n<span>&lt;</span><span>/</span>form<span>&gt;</span></code></pre>\n<p>Don't forget to bind it in the constructor!</p>\n<pre rel=\"JavaScript\" data-line=\"9\"><code><span>constructor</span><span>(</span><span>)</span> <span>{</span>\n  <span>super</span><span>(</span><span>)</span><span>;</span>\n  <span>this</span><span>.</span>state <span>=</span> <span>{</span>\n    currentItem<span>:</span> <span>''</span><span>,</span>\n    username<span>:</span> <span>''</span>\n  <span>}</span>\n  <span>this</span><span>.</span>handleChange <span>=</span> <span>this</span><span>.</span>handleChange<span>.</span><span>bind</span><span>(</span><span>this</span><span>)</span><span>;</span>\n  <span>this</span><span>.</span>handleSubmit <span>=</span> <span>this</span><span>.</span>handleSubmit<span>.</span><span>bind</span><span>(</span><span>this</span><span>)</span><span>;</span> <span spellcheck=\"true\">// &lt;-- add this line</span>\n<span>}</span><div data-start=\"9\"> \n</div></code></pre>\n<p>And now add the <code>handleSubmit</code> method to your component:</p>\n<pre rel=\"JavaScript\"><code><span>handleSubmit</span><span>(</span>e<span>)</span> <span>{</span>\n  e<span>.</span><span>preventDefault</span><span>(</span><span>)</span><span>;</span>\n  <span>const</span> itemsRef <span>=</span> firebase<span>.</span><span>database</span><span>(</span><span>)</span><span>.</span><span>ref</span><span>(</span><span>'items'</span><span>)</span><span>;</span>\n  <span>const</span> item <span>=</span> <span>{</span>\n    title<span>:</span> <span>this</span><span>.</span>state<span>.</span>currentItem<span>,</span>\n    user<span>:</span> <span>this</span><span>.</span>state<span>.</span>username\n  <span>}</span>\n  itemsRef<span>.</span><span>push</span><span>(</span>item<span>)</span><span>;</span>\n  <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span>\n    currentItem<span>:</span> <span>''</span><span>,</span>\n    username<span>:</span> <span>''</span>\n  <span>}</span><span>)</span><span>;</span>\n<span>}</span></code></pre>\n<p>Let's break down what's going here:</p>\n<ul>\n<li><code>e.preventDefault()</code> - we need to prevent the default \nbehavior of the form, which if we don't will cause the page to refresh \nwhen you hit the submit button.</li>\n<li><code>const itemsRef = firebase.database().ref(</code><code>'</code><code>items</code><code>'</code><code>);</code>\n  - we need to carve out a space in our Firebase database where we'd \nlike to store all of the items that people are bringing to the potluck. \nWe do this by calling the <code>ref</code> method and passing in the destination we'd like them to be stored (<code>items</code>).</li>\n<li><code>const item = { /* .. */ }</code> here we grab the item the \nuser typed in (as well as their username) from the state, and package it\n into an object so we ship it off to our Firebase database.</li>\n<li><code>itemsRef.push(item)</code> similar to the <code>Array.push</code> method, this sends a copy of our object so that it can be stored in Firebase.</li>\n<li>Finally <code>this.setState({ currentItem: '', username:</code> <code>''</code> <code>});</code> is just so that we can clear out the inputs so that an additional item can be added.</li>\n</ul>\n<p>Now try adding a new item, and hitting submit! If you don't have any \nerrors in your console, you should be able to head on over to the \nFirebase dashboard, where you'll see something like this inside your \nDatabase tab:</p>\n<figure><img src=\"https://css-tricks.com/wp-content/uploads/2017/05/firebas-db-tab.png\" srcset=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_964,f_auto,q_auto/v1496406861/firebas-db-tab_huher5.png 964w, https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_200,f_auto,q_auto/v1496406861/firebas-db-tab_huher5.png 200w\" sizes=\"(min-width: 1850px) calc( (100vw - 555px) / 3 )\n       (min-width: 1251px) calc( (100vw - 530px) / 2 )\n       (min-width: 1086px) calc(100vw - 480px)\n       (min-width: 626px)  calc(100vw - 335px)\n                           calc(100vw - 30px)\" alt=\"\"></figure>\n<p>If you click the little + next to <code>items</code> you'll be able to look inside, like this:</p>\n<figure><img src=\"https://css-tricks.com/wp-content/uploads/2017/05/firebase-items-1.png\" srcset=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1496406987/firebase-items-1_la44l9.png 1000w, https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_200,f_auto,q_auto/v1496406987/firebase-items-1_la44l9.png 200w\" sizes=\"(min-width: 1850px) calc( (100vw - 555px) / 3 )\n       (min-width: 1251px) calc( (100vw - 530px) / 2 )\n       (min-width: 1086px) calc(100vw - 480px)\n       (min-width: 626px)  calc(100vw - 335px)\n                           calc(100vw - 30px)\" alt=\"\"></figure>\n<p>That strange looking <code>-Kk8lHSMqC5oP6Qai0Vx</code> key you see is a programmatically generated key created by Firebase when we called the <code>push</code> method, but inside you'll find whatever item you added to the Potluck.</p>\n<p>You'll notice that all of our records are stored as objects with \nproperties that have the generated names you see above - just another \nquick reminder that there are no arrays in Firebase! </p>\n<p>Try adding more items and see what happens.</p>\n<p>Way to go! We're almost there, but we still have one more step: getting our potluck items to appear on the page.</p>\n<h3><a href=\"https://css-tricks.com/intro-firebase-react/#article-header-id-10\">#</a>Retrieving our Potluck Items from the database</h3>\n<p>Just like in a traditional React app, we need to find some way to \nkeep track of all of the potluck dishes so that we can display what \npeople are planning to bring on to the page.</p>\n<p>Without a database, this poses an issue, since every time we refresh \nthe page any new dishes that were added to the potluck would get lost. \nBut with Firebase, this is a snap to fix!</p>\n<p>First, let's create a variable called <code>items</code> inside of \ndefault state. This will eventually hold all of the potluck items that \nare currently being tracked inside of our Firebase database.</p>\n<pre rel=\"JavaScript\"><code><span>constructor</span><span>(</span><span>)</span> <span>{</span>\n  <span>super</span><span>(</span><span>)</span><span>;</span>\n  <span>this</span><span>.</span>state <span>=</span> <span>{</span>\n    currentItem<span>:</span> <span>''</span><span>,</span>\n    username<span>:</span> <span>''</span><span>,</span>\n    items<span>:</span> <span>[</span><span>]</span>\n  <span>}</span>\n  <span>this</span><span>.</span>handleChange <span>=</span> <span>this</span><span>.</span>handleChange<span>.</span><span>bind</span><span>(</span><span>this</span><span>)</span><span>;</span>\n  <span>this</span><span>.</span>handleSubmit <span>=</span> <span>this</span><span>.</span>handleSubmit<span>.</span><span>bind</span><span>(</span><span>this</span><span>)</span><span>;</span>\n<span>}</span></code></pre>\n<p>Next, we need to actually grab those items from our Firebase database so that we can store them into our state.</p>\n<p>The Firebase API offers us an incredibly easy way to not only grab \nthis kind information from our database, but also to update us when new \nvalues get added to our database. It accomplishes this using the <code>value</code> custom event listener. </p>\n<p>It looks like this:</p>\n<pre rel=\"JavaScript\"><code>itemsRef<span>.</span><span>on</span><span>(</span><span>'value'</span><span>,</span> <span>(</span>snapshot<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n  console<span>.</span><span>log</span><span>(</span>snapshot<span>.</span><span>val</span><span>(</span><span>)</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre>\n<p>The callback here, which we've called <code>snapshot</code>, provides you with a bird's eye overview of the <code>items</code> ref inside of your database. From here, you can easily grab a list of all of the properties inside of that <code>items</code> ref, using the <code>.val()</code> method which you can call on the snapshot.</p>\n<p>This value automatically fires on two occassions:</p>\n<ol>\n<li>Any time a new item is added or removed from our <code>items</code> reference inside of our database</li>\n<li>The first time the event listener is attached</li>\n</ol>\n<p>This makes it especially useful for initially grabbing a list of all \nof the items inside of our database, and then subsequently tracking when\n new items get added and removed.</p>\n<p>We'll attach this event listener inside of our <code>componentDidMount</code>, so that we start tracking our Potluck items as soon as our component loads on to the page:</p>\n<pre rel=\"JavaScript\"><code><span>componentDidMount</span><span>(</span><span>)</span> <span>{</span>\n  <span>const</span> itemsRef <span>=</span> firebase<span>.</span><span>database</span><span>(</span><span>)</span><span>.</span><span>ref</span><span>(</span><span>'items'</span><span>)</span><span>;</span>\n  itemsRef<span>.</span><span>on</span><span>(</span><span>'value'</span><span>,</span> <span>(</span>snapshot<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n    <span>let</span> items <span>=</span> snapshot<span>.</span><span>val</span><span>(</span><span>)</span><span>;</span>\n    <span>let</span> newState <span>=</span> <span>[</span><span>]</span><span>;</span>\n    <span>for</span> <span>(</span><span>let</span> item <span>in</span> items<span>)</span> <span>{</span>\n      newState<span>.</span><span>push</span><span>(</span><span>{</span>\n        id<span>:</span> item<span>,</span>\n        title<span>:</span> items<span>[</span>item<span>]</span><span>.</span>title<span>,</span>\n        user<span>:</span> items<span>[</span>item<span>]</span><span>.</span>user\n      <span>}</span><span>)</span><span>;</span>\n    <span>}</span>\n    <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span>\n      items<span>:</span> newState\n    <span>}</span><span>)</span><span>;</span>\n  <span>}</span><span>)</span><span>;</span>\n<span>}</span></code></pre>\n<p>Here, we instantiate a new array and populate it with the results that come back from our <code>value</code> listener. We <code>for…in</code> over each key, and push the result into an object inside our <code>newState</code>\n array. Finally, once all the keys are iterated over (and therefore all \nitems are grabbed from our database), we update the state with this list\n of items from our database.</p>\n<p>Inspect your App using the React Dev Tools - you'll notice that you now have an <code>items</code> property inside of your state with all of the items people have submitted for your potluck!</p>\n<h3><a href=\"https://css-tricks.com/intro-firebase-react/#article-header-id-11\">#</a>Displaying Potluck Items on the Page</h3>\n<p>Now let's get these potluck items to actually display on the page. \nThis is relatively easy, now that we have a list of all of our items \nbeing grabbed from Firebase and stored inside of our state. We just map \nover it and print the results on to the page, like so:</p>\n<pre rel=\"JSX\"><code><span>&lt;</span>section className<span>=</span><span>'display-item'</span><span>&gt;</span>\n  <span>&lt;</span>div className<span>=</span><span>\"wrapper\"</span><span>&gt;</span>\n    <span>&lt;</span>ul<span>&gt;</span>\n      <span>{</span><span>this</span><span>.</span>state<span>.</span>items<span>.</span><span>map</span><span>(</span><span>(</span>item<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n        <span>return</span> <span>(</span>\n          <span>&lt;</span>li key<span>=</span><span>{</span>item<span>.</span>id<span>}</span><span>&gt;</span>\n            <span>&lt;</span>h3<span>&gt;</span><span>{</span>item<span>.</span>title<span>}</span><span>&lt;</span><span>/</span>h3<span>&gt;</span>\n            <span>&lt;</span>p<span>&gt;</span>brought by<span>:</span> <span>{</span>item<span>.</span>user<span>}</span><span>&lt;</span><span>/</span>p<span>&gt;</span>\n          <span>&lt;</span><span>/</span>li<span>&gt;</span>\n        <span>)</span>\n      <span>}</span><span>)</span><span>}</span>\n    <span>&lt;</span><span>/</span>ul<span>&gt;</span>\n  <span>&lt;</span><span>/</span>div<span>&gt;</span>\n<span>&lt;</span><span>/</span>section<span>&gt;</span></code></pre>\n<p>Try adding a new item through your form. You'll notice that it automatically causes a new list item to appear on the page! </p>\n<p>It's not magic, Firebase's <code>value</code> event is firing when you <code>push</code> the new item into your database, and sending back a new <code>snapshot</code> with a list of all of the items currently in your database, which ultimate updates your component through a <code>setState</code> which triggers a re-render and displays the new item on the page. </p>\n<p>But we digress. There's still one more step! We need to make it so that we can remove an item from the page.</p>\n<h3><a href=\"https://css-tricks.com/intro-firebase-react/#article-header-id-12\">#</a>Removing Items from the Page</h3>\n<p>We'll need to create a new method on our component for this: <code>removeItem</code>.\n This method will need to be passed that unique key which serves as the \nidentifier for each one of the items inside of our Firebase database.</p>\n<p>It's very simple, and looks like this:</p>\n<pre rel=\"JavaScript\"><code><span>removeItem</span><span>(</span>itemId<span>)</span> <span>{</span>\n  <span>const</span> itemRef <span>=</span> firebase<span>.</span><span>database</span><span>(</span><span>)</span><span>.</span><span>ref</span><span>(</span><span><span>`/items/</span><span><span>${</span>itemId<span>}</span></span><span>`</span></span><span>)</span><span>;</span>\n  itemRef<span>.</span><span>remove</span><span>(</span><span>)</span><span>;</span>\n<span>}</span></code></pre>\n<p>Here, instead of grabbing all of the items as we did before when \nadding a new item, we instead look up a specific item by its key (that \nstrange -<code>Kk8lHSMqC5oP6Qai0Vx</code> key from before). We can then call <code>firebase.database()</code>'s remove method, which strips it from the page.</p>\n<p>Finally, we'll need to add a button to our UI with an <code>onClick</code> that calls our <code>removeItem</code> method and passes it the item's key, like follows:</p>\n<pre rel=\"JSX\"><code><span>{</span><span>this</span><span>.</span>state<span>.</span>items<span>.</span><span>map</span><span>(</span><span>(</span>item<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span>li key<span>=</span><span>{</span>item<span>.</span>id<span>}</span><span>&gt;</span>\n        <span>&lt;</span>h3<span>&gt;</span><span>{</span>item<span>.</span>title<span>}</span><span>&lt;</span><span>/</span>h3<span>&gt;</span>\n        <span>&lt;</span>p<span>&gt;</span>brought by<span>:</span> <span>{</span>item<span>.</span>user<span>}</span><span>&lt;</span><span>/</span>p<span>&gt;</span>\n        <span>&lt;</span>button onClick<span>=</span><span>{</span><span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>this</span><span>.</span><span>removeItem</span><span>(</span>item<span>.</span>id<span>)</span><span>}</span><span>&gt;</span>Remove Item<span>&lt;</span><span>/</span>button<span>&gt;</span>\n      <span>&lt;</span><span>/</span>li<span>&gt;</span>\n    <span>)</span>\n  <span>}</span><span>)</span>\n<span>}</span></code></pre>\n<p>And that's all there is to it! Just like our <code>addItem</code> method, our UI and component state automatically update when an item is removed from the database.</p>\n<p>Here's what our completed `App.js` should look like:</p>\n<pre rel=\"JavaScript\"><code><span>import</span> React<span>,</span> <span>{</span> Component <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n<span>import</span> logo <span>from</span> <span>'./logo.svg'</span><span>;</span>\n<span>import</span> <span>'./App.css'</span><span>;</span>\n<span>import</span> firebase <span>from</span> <span>'./firebase.js'</span><span>;</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>constructor</span><span>(</span><span>)</span> <span>{</span>\n    <span>super</span><span>(</span><span>)</span><span>;</span>\n    <span>this</span><span>.</span>state <span>=</span> <span>{</span>\n      currentItem<span>:</span> <span>''</span><span>,</span>\n      username<span>:</span> <span>''</span><span>,</span>\n      items<span>:</span> <span>[</span><span>]</span>\n    <span>}</span>\n    <span>this</span><span>.</span>handleChange <span>=</span> <span>this</span><span>.</span>handleChange<span>.</span><span>bind</span><span>(</span><span>this</span><span>)</span><span>;</span>\n    <span>this</span><span>.</span>handleSubmit <span>=</span> <span>this</span><span>.</span>handleSubmit<span>.</span><span>bind</span><span>(</span><span>this</span><span>)</span><span>;</span>\n  <span>}</span>\n  <span>handleChange</span><span>(</span>e<span>)</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span>\n      <span>[</span>e<span>.</span>target<span>.</span>name<span>]</span><span>:</span> e<span>.</span>target<span>.</span>value\n    <span>}</span><span>)</span><span>;</span>\n  <span>}</span>\n  <span>handleSubmit</span><span>(</span>e<span>)</span> <span>{</span>\n    e<span>.</span><span>preventDefault</span><span>(</span><span>)</span><span>;</span>\n    <span>const</span> itemsRef <span>=</span> firebase<span>.</span><span>database</span><span>(</span><span>)</span><span>.</span><span>ref</span><span>(</span><span>'items'</span><span>)</span><span>;</span>\n    <span>const</span> item <span>=</span> <span>{</span>\n      title<span>:</span> <span>this</span><span>.</span>state<span>.</span>currentItem<span>,</span>\n      user<span>:</span> <span>this</span><span>.</span>state<span>.</span>username\n    <span>}</span>\n    itemsRef<span>.</span><span>push</span><span>(</span>item<span>)</span><span>;</span>\n    <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span>\n      currentItem<span>:</span> <span>''</span><span>,</span>\n      username<span>:</span> <span>''</span>\n    <span>}</span><span>)</span><span>;</span>\n  <span>}</span>\n  <span>componentDidMount</span><span>(</span><span>)</span> <span>{</span>\n    <span>const</span> itemsRef <span>=</span> firebase<span>.</span><span>database</span><span>(</span><span>)</span><span>.</span><span>ref</span><span>(</span><span>'items'</span><span>)</span><span>;</span>\n    itemsRef<span>.</span><span>on</span><span>(</span><span>'value'</span><span>,</span> <span>(</span>snapshot<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n      <span>let</span> items <span>=</span> snapshot<span>.</span><span>val</span><span>(</span><span>)</span><span>;</span>\n      <span>let</span> newState <span>=</span> <span>[</span><span>]</span><span>;</span>\n      <span>for</span> <span>(</span><span>let</span> item <span>in</span> items<span>)</span> <span>{</span>\n        newState<span>.</span><span>push</span><span>(</span><span>{</span>\n          id<span>:</span> item<span>,</span>\n          title<span>:</span> items<span>[</span>item<span>]</span><span>.</span>title<span>,</span>\n          user<span>:</span> items<span>[</span>item<span>]</span><span>.</span>user\n        <span>}</span><span>)</span><span>;</span>\n      <span>}</span>\n      <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span>\n        items<span>:</span> newState\n      <span>}</span><span>)</span><span>;</span>\n    <span>}</span><span>)</span><span>;</span>\n  <span>}</span>\n  <span>removeItem</span><span>(</span>itemId<span>)</span> <span>{</span>\n    <span>const</span> itemRef <span>=</span> firebase<span>.</span><span>database</span><span>(</span><span>)</span><span>.</span><span>ref</span><span>(</span><span><span>`/items/</span><span><span>${</span>itemId<span>}</span></span><span>`</span></span><span>)</span><span>;</span>\n    itemRef<span>.</span><span>remove</span><span>(</span><span>)</span><span>;</span>\n  <span>}</span>\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span>div className<span>=</span><span>'app'</span><span>&gt;</span>\n        <span>&lt;</span>header<span>&gt;</span>\n            <span>&lt;</span>div className<span>=</span><span>\"wrapper\"</span><span>&gt;</span>\n              <span>&lt;</span>h1<span>&gt;</span>Fun Food Friends<span>&lt;</span><span>/</span>h1<span>&gt;</span>\n                             \n            <span>&lt;</span><span>/</span>div<span>&gt;</span>\n        <span>&lt;</span><span>/</span>header<span>&gt;</span>\n        <span>&lt;</span>div className<span>=</span><span>'container'</span><span>&gt;</span>\n          <span>&lt;</span>section className<span>=</span><span>'add-item'</span><span>&gt;</span>\n                <span>&lt;</span>form onSubmit<span>=</span><span>{</span><span>this</span><span>.</span>handleSubmit<span>}</span><span>&gt;</span>\n                  <span>&lt;</span>input type<span>=</span><span>\"text\"</span> name<span>=</span><span>\"username\"</span> placeholder<span>=</span><span>\"What's your name?\"</span> onChange<span>=</span><span>{</span><span>this</span><span>.</span>handleChange<span>}</span> value<span>=</span><span>{</span><span>this</span><span>.</span>state<span>.</span>username<span>}</span> <span>/</span><span>&gt;</span>\n                  <span>&lt;</span>input type<span>=</span><span>\"text\"</span> name<span>=</span><span>\"currentItem\"</span> placeholder<span>=</span><span>\"What are you bringing?\"</span> onChange<span>=</span><span>{</span><span>this</span><span>.</span>handleChange<span>}</span> value<span>=</span><span>{</span><span>this</span><span>.</span>state<span>.</span>currentItem<span>}</span> <span>/</span><span>&gt;</span>\n                  <span>&lt;</span>button<span>&gt;</span>Add Item<span>&lt;</span><span>/</span>button<span>&gt;</span>\n                <span>&lt;</span><span>/</span>form<span>&gt;</span>\n          <span>&lt;</span><span>/</span>section<span>&gt;</span>\n          <span>&lt;</span>section className<span>=</span><span>'display-item'</span><span>&gt;</span>\n              <span>&lt;</span>div className<span>=</span><span>\"wrapper\"</span><span>&gt;</span>\n                <span>&lt;</span>ul<span>&gt;</span>\n                  <span>{</span><span>this</span><span>.</span>state<span>.</span>items<span>.</span><span>map</span><span>(</span><span>(</span>item<span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n                    <span>return</span> <span>(</span>\n                      <span>&lt;</span>li key<span>=</span><span>{</span>item<span>.</span>id<span>}</span><span>&gt;</span>\n                        <span>&lt;</span>h3<span>&gt;</span><span>{</span>item<span>.</span>title<span>}</span><span>&lt;</span><span>/</span>h3<span>&gt;</span>\n                        <span>&lt;</span>p<span>&gt;</span>brought by<span>:</span> <span>{</span>item<span>.</span>user<span>}</span>\n                          <span>&lt;</span>button onClick<span>=</span><span>{</span><span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>this</span><span>.</span><span>removeItem</span><span>(</span>item<span>.</span>id<span>)</span><span>}</span><span>&gt;</span>Remove Item<span>&lt;</span><span>/</span>button<span>&gt;</span>\n                        <span>&lt;</span><span>/</span>p<span>&gt;</span>\n                      <span>&lt;</span><span>/</span>li<span>&gt;</span>\n                    <span>)</span>\n                  <span>}</span><span>)</span><span>}</span>\n                <span>&lt;</span><span>/</span>ul<span>&gt;</span>\n              <span>&lt;</span><span>/</span>div<span>&gt;</span>\n          <span>&lt;</span><span>/</span>section<span>&gt;</span>\n        <span>&lt;</span><span>/</span>div<span>&gt;</span>\n      <span>&lt;</span><span>/</span>div<span>&gt;</span>\n    <span>)</span><span>;</span>\n  <span>}</span>\n<span>}</span>\n<span>export</span> <span>default</span> App<span>;</span></code></pre>\n<h3><a href=\"https://css-tricks.com/intro-firebase-react/#article-header-id-13\">#</a>Conclusion</h3>\n<p>Now you can truly see how Firebase and React play beautifully \ntogether. Firebase's ability to persist data on the fly, coupled with \nReact's component life cycle, makes for an incredibly simple and \npowerful way to quickly build up simple applications.</p>\n<p>This article just scratches the surface of what the Firebase API can \nprovide us. For example, with just a few more steps (and perhaps we will\n go over this in a future article), it would be incredibly easy to \nexpand this application so that users could log in and out, be able to \nhave a display photo next to the item that they are bringing, and only \nbe able to remove their own items. </p>\n<p>Happy Firebasing!</p>\n<div>\n<h4><a href=\"https://css-tricks.com/intro-firebase-react/#article-header-id-14\">#</a>Article Series:</h4>\n<ol>\n<li>Intro to Firebase and React (You are here!)</li>\n<li><a href=\"https://css-tricks.com/firebase-react-part-2-user-authentication/\">User Authentication</a></li>\n</ol></div>","filePath":"pages/React/.md","_id":"eYJC21VvtqTR9fJg"}
{"date":"2019-01-30T16:09:17.949Z","title":"Pretty JSON Output","sourceUrl":"https://www.samanthaming.com/tidbits/45-pretty-json-output","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"," Tips & Tricks"],"author":"Samantha Ming","excerpt":"","dateCreated":1548864471392,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Wed Jan 30 2019 21:39:17 GMT+0530 (India Standard Time)'\ntitle: 'Pretty JSON Output'\ntags: ['JavaScript','Tips & Tricks']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://www.samanthaming.com/tidbits/45-pretty-json-output'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Tired of the one-liner JSON output, well no more! Utilize&nbsp;<code>JSON.stringify</code>&nbsp;built-in pretty printing. Set the 3rd parameter with your desired spacing level 👍 Bam, instant GLAM✨</p><pre><code><span>const</span> protein = {<span>steak</span>: <span>'🥩'</span>, <span>bacon</span>: <span>'🥓'</span>};\n\n<span>JSON</span>.stringify(protein);\n<span>// {\"steak\":\"🥩\",\"bacon\":\"🥓\"}</span>\n\n<span>JSON</span>.stringify(protein, <span>null</span>, <span>2</span>);\n<span>/*\n{\n  \"steak\": \"🥩\",\n  \"bacon\": \"🥓\"\n}\n*/</span>\n</code></pre><h2>Tab Spacing 😉</h2><p>But the Tab folks are like how about us?? Don’t worry, you can also pass&nbsp;<code>\"\\t\"</code>&nbsp;for tab level spacing 😄</p><pre><code><span>const</span> protein = {<span>steak</span>: <span>'🥩'</span>, <span>bacon</span>: <span>'🥓'</span>};\n\n<span>JSON</span>.stringify(protein, <span>null</span>, <span>\"\\t\"</span>);\n\n<span>/*\n{\n\t\"steak\": \"🥩\",\n\t\"bacon\": \"🥓\"\n}\n*/</span>\n</code></pre><h2>Understanding the \"Space\" argument</h2><p>The 3rd parameter of the&nbsp;<code>JSON.stringify</code>&nbsp;is used to control the spacing. It's what gives you that pretty string output.</p><p>It allows 2 types of arguments: Number and String.</p><h3>a. Number</h3><p>You can use any number from 0 to 10 as your indentation.</p><pre><code><span>const</span> protein = {<span>steak</span>: <span>'🥩'</span>, <span>bacon</span>: <span>'🥓'</span>};\n\n<span>JSON</span>.stringify(protein, <span>null</span>, <span>1</span>);\n<span>/*\n{\n \"steak\": \"🥩\",\n \"bacon\": \"🥓\"\n}\n*/</span>\n</code></pre><h3>b. String</h3><p>Alternatively, you can use a string as your indentation. It allows a maximum of 10 characters. If you try to pass more than 10, it will just use the first 10 characters. So don't try to beat the system 😝</p><pre><code><span>const</span> protein = {<span>steak</span>: <span>'🥩'</span>, <span>bacon</span>: <span>'🥓'</span>};\n\n<span>JSON</span>.stringify(protein, <span>null</span>, <span>\"I 💛\"</span>);\n<span>/*\n{\nI 💛\"steak\": \"🥩\",\nI 💛\"bacon\": \"🥓\"\n}\n*/</span>\n</code></pre><h2>What is the 2nd parameter 🤔</h2><p>The 2nd parameter is also called the&nbsp;<span>replacer</span>&nbsp;parameter. You can use it to transform the result.</p><p>It allows 2 types of arguments: Array and Function.</p><h3>a. Array</h3><p>I want to show you something really interesting when you pass in an&nbsp;<code>array</code>. You can use it to cherry pick the key-value pair that you want to output.</p><pre><code><span>const</span> protein = {\n  <span>steak</span>: <span>'🥩'</span>, \n  <span>bacon</span>: <span>'🥓'</span>,\n  <span>pop</span>: <span>'🥤'</span>,\n  <span>tea</span>: <span>'🍵'</span>,\n  <span>shrimp</span>: <span>'🍤'</span>,\n};\n\n<span>JSON</span>.stringify(protein, [<span>'steak'</span>, <span>'pop'</span>], <span>2</span>);\n<span>/*\n{\n  \"steak\": \"🥩\",\n  \"pop\": \"🥤\"\n}\n*/</span>\n</code></pre><h3>b. Function</h3><p>The&nbsp;<span>replacer</span>&nbsp;is called for each item. So you can also pass in a&nbsp;<code>function</code>. This means you can loop over each item and with each pass, manipulate with the logic defined in your function.</p><p>Here's an example, where I skip over the properties where the value is not a string. In other words, I only want to show the items where the value is a number.</p><pre><code><span>const</span> protein = {\n  <span>steak</span>: <span>'🥩'</span>, \n  <span>calorie</span>: <span>271</span>,\n  <span>bacon</span>: <span>'🥓'</span>,\n  <span>sodium</span>: <span>58</span>,\n};\n\n<span>const</span> replacer = <span><span>function</span>(<span>key, value</span>) </span>{\n  <span>if</span>(<span>typeof</span> value !== <span>\"string\"</span>) {\n    <span>return</span> value\n  }\n  <span>return</span> <span>undefined</span>;\n}\n\n\n<span>JSON</span>.stringify(protein, replacer, <span>2</span>);\n<span>/*\n{\n  \"calorie\": 271,\n  \"sodium\": 58\n}\n*/</span></code></pre>","filePath":"pages/JavaScript/.md","_id":"ejA1Ts8qxfUB1WV7"}
{"date":"2018-11-01T14:01:36.718Z","title":"Getting Started with React Hooks","sourceUrl":"https://scotch.io/tutorials/getting-started-with-react-hooks","path":"React/","category":"React","tags":["React"," Hooks"],"author":"Chris Sevilleja (@chrisoncode)","excerpt":"","dateCreated":1541079399436,"coverImage":"","type":"Post","frontmatter":"---\npath: 'React/'\ndate: 'Thu Nov 01 2018 19:31:36 GMT+0530 (India Standard Time)'\ntitle: 'Getting Started with React Hooks'\ntags: ['React','Hooks']\ncategory: 'React'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://scotch.io/tutorials/getting-started-with-react-hooks'\ntype: 'Post'\n---\n    ","htmlCode":"<p><a href=\"https://reactjs.org/docs/hooks-intro.html\">React Hooks</a>&nbsp;are a great new feature coming in React 16.7.&nbsp;<a href=\"https://scotch.io/bar-talk/whats-new-in-react-166\">React 16.6</a>&nbsp;brought some awesome new things like&nbsp;<a href=\"https://scotch.io/tutorials/react-166-reactmemo-for-functional-components-rendering-control\">React.memo()</a>&nbsp;and React.lazy and Suspense. The React team isn't stopping there.</p><p>Hooks are a feature that you'll end up using every single day of your React development. You can give them a try&nbsp;<span>in React 16.7.0-alpha right now</span>&nbsp;and are being discussed in&nbsp;<a href=\"https://github.com/reactjs/rfcs/pull/68\">an open RFC</a>. Hooks are great because we get more tools as React developers.</p><p>If you want to use&nbsp;<span>state or lifecycle methods</span>&nbsp;you would normally have to change to using&nbsp;<code>React.Component</code>&nbsp;and classes. Hooks let us use these features&nbsp;<span>in functional components</span>!</p><div><ul><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-are-hooks-\">What are Hooks?</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-react-s-state-hook\">React's State Hook</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-is-this-usestate-syntax-\">What is this useState() syntax?</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-does-usestate-give-us-\">What does useState() give us?</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-s-wrong-with-classes-\">What's wrong with classes?</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-using-multiple-state-hooks\">Using Multiple State Hooks</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-react-s-effect-hook\">React's Effect Hook</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-running-an-effect-hook-only-when-something-changes\">Running an Effect Hook only when something changes</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-about-componentwillunmount-\">What about componentWillUnmount()</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-using-state-and-effects-together\">Using State and Effects Together</a></li><li><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-conclusion\">Conclusion</a></li></ul></div><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-are-hooks-\">What are Hooks?</a></h2><p><a href=\"https://reactjs.org/docs/hooks-overview.html\">React Hooks</a>&nbsp;are a way to add&nbsp;<code>React.Component</code>&nbsp;features to&nbsp;<span>functional components</span>. Features like:</p><div><div></div></div><ul><li>State</li><li>Lifecycle</li></ul><blockquote><p>Hooks let you use React's features without classes.</p></blockquote><p>Don't worry though,&nbsp;<span>classes aren't being removed or discouraged</span>. We're being given more ways to code!</p><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-react-s-state-hook\">React's State Hook</a></h2><p>Let's say we have a component like this:</p><h4>State in Components</h4><pre data-title=\"javascript\"><code><span>import</span> React<span>,</span> <span>{</span> Component <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>JustAnotherCounter</span> <span>extends</span> <span>Component</span> <span>{</span>\n  state <span>=</span> <span>{</span>\n    count<span>:</span> <span>0</span>\n  <span>}</span><span>;</span>\n\n  <span>setCount</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span> count<span>:</span> <span>this</span><span>.</span>state<span>.</span>count <span>+</span> <span>1</span> <span>}</span><span>)</span><span>;</span>\n  <span>}</span><span>;</span>\n\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span>return</span> <span>(</span>\n      <span>&lt;</span>div<span>&gt;</span>\n        <span>&lt;</span>h1<span>&gt;</span><span>{</span><span>this</span><span>.</span>state<span>.</span>count<span>}</span><span>&lt;</span><span>/</span>h1<span>&gt;</span>\n\n        <span>&lt;</span>button onClick<span>=</span><span>{</span><span>this</span><span>.</span>setCount<span>}</span><span>&gt;</span>Count Up To The Moon<span>&lt;</span><span>/</span>button<span>&gt;</span>\n      <span>&lt;</span><span>/</span>div<span>&gt;</span>\n    <span>)</span><span>;</span>\n  <span>}</span>\n<span>}</span></code></pre><p>With React Hooks, we are a able to condense that class into this functional component:</p><h4>State with Functional Components and useState</h4><pre data-title=\"javascript\"><code><span>import</span> React<span>,</span> <span>{</span> useState <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>function</span> <span>JustAnotherCounter</span><span>(</span><span>)</span> <span>{</span>\n  <span>const</span> <span>[</span>count<span>,</span> setCount<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>0</span><span>)</span><span>;</span>\n\n  <span>return</span> <span>(</span>\n    <span>&lt;</span>div<span>&gt;</span>\n      <span>&lt;</span>h1<span>&gt;</span><span>{</span>count<span>}</span><span>&lt;</span><span>/</span>h1<span>&gt;</span>\n      <span>&lt;</span>button onClick<span>=</span><span>{</span><span>(</span><span>)</span> <span>=&gt;</span> <span>setCount</span><span>(</span>count <span>+</span> <span>1</span><span>)</span><span>}</span><span>&gt;</span>Count Up To The Moon<span>&lt;</span><span>/</span>button<span>&gt;</span>\n    <span>&lt;</span><span>/</span>div<span>&gt;</span>\n  <span>)</span><span>;</span>\n<span>}</span></code></pre><p>Here's a CodeSandbox for the above example:</p><p></p><div><iframe src=\"https://codesandbox.io/embed/6vmryp2k9z?runonclick=1&amp;codemirror=1\" allowfullscreen=\"\"></iframe></div><p></p><p>Notice how much easier the functional component would be for beginners just learning React.</p><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-is-this-usestate-syntax-\">What is this useState() syntax?</a></h2><p>You may be unfamiliar with the line with the&nbsp;<code>useState()</code>&nbsp;syntax. This uses&nbsp;<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment\">destructuring assignment</a>&nbsp;for arrays. This is similar to how we would pull props out an object with&nbsp;<code>object destructuring</code>.</p><p>Let's compare object destructuring vs array destructuring to see why the array way is helpful.&nbsp;<span>Object destructuring requires more writing to grab a variable and rename it.</span></p><h4>Object Destructuring</h4><pre data-title=\"javascript\"><code><span>// object destructuring. lots of writing!</span>\n<span>const</span> users <span>=</span> <span>{</span> admin<span>:</span> <span>'chris'</span><span>,</span> user<span>:</span> <span>'nick'</span> <span>}</span><span>;</span>\n\n<span>// grab the admin and user but rename them to SuperAdmin and SuperUser</span>\n<span>const</span> <span>{</span> admin<span>:</span> SuperAdmin<span>,</span> user<span>:</span> SuperUser <span>}</span> <span>=</span> users<span>;</span></code></pre><p>That bottom line can be a bit difficult to read. With array destructuring we just name variables as we get them out of the array.&nbsp;<span>First variable is the first item in the array.</span></p><h4>Array Destructuring</h4><pre data-title=\"javascript\"><code><span>// array destructuring</span>\n<span>const</span> users <span>=</span> <span>[</span><span>'chris'</span><span>,</span> <span>'nick'</span><span>]</span><span>;</span>\n\n<span>// grab in order and rename at the same time</span>\n<span>const</span> <span>[</span>SuperAdmin<span>,</span> SuperUser<span>]</span> <span>=</span> users<span>;</span></code></pre><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-does-usestate-give-us-\">What does useState() give us?</a></h2><p><code>useState</code>&nbsp;gives us two variables and we can name our two variables whatever we want. Just know that:</p><div><div></div></div><ol><li>The first variable is the&nbsp;<span>value</span>. Similar to&nbsp;<code>this.state</code></li><li>The second variable is a&nbsp;<span>function to update</span>&nbsp;that value. Similar to&nbsp;<code>this.setState</code></li></ol><p>The final part to useState is the argument that we pass to it.&nbsp;<span>The useState argument is the initial state value.</span>&nbsp;In the case of our counter, we started at 0.</p><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-s-wrong-with-classes-\">What's wrong with classes?</a></h2><p>The React Hooks intro gives a good section on this:&nbsp;<a href=\"https://reactjs.org/docs/hooks-intro.html#classes-confuse-both-people-and-machines\">Classes confuse both people and machines</a>. The gist is classes can sometimes be confusing and can be written any number of ways. Dive into somebody else's project and you could be in for a world of different syntax and style choices.</p><blockquote><p>There are no plans to remove classes support. We just have another way to code</p></blockquote><p>By allowing classes to be converted into smaller functional components, we can even further break out parts of our application into&nbsp;<span>smaller and more focused components</span>.</p><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-using-multiple-state-hooks\">Using Multiple State Hooks</a></h2><p>We can even use&nbsp;<code>useState()</code>&nbsp;multiple times in the same function.</p><pre data-title=\"javascript\"><code><span>import</span> React<span>,</span> <span>{</span> useState <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>function</span> <span>AllTheThings</span><span>(</span><span>)</span> <span>{</span>\n  <span>const</span> <span>[</span>count<span>,</span> setCount<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>0</span><span>)</span><span>;</span>\n  <span>const</span> <span>[</span>products<span>,</span> setProducts<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>[</span><span>{</span> name<span>:</span> <span>'Surfboard'</span><span>,</span> price<span>:</span> <span>100</span> <span>}</span><span>]</span><span>)</span><span>;</span>\n  <span>const</span> <span>[</span>coupon<span>,</span> setCoupon<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>null</span><span>)</span><span>;</span>\n\n  <span>return</span> <span>&lt;</span>div<span>&gt;</span><span>{</span><span>/_ use all those things here _/</span><span>}</span><span>&lt;</span><span>/</span>div<span>&gt;</span><span>;</span>\n<span>}</span></code></pre><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-react-s-effect-hook\">React's Effect Hook</a></h2><p>The State Hook allows us to use&nbsp;<code>state</code>&nbsp;in React functional components. This gets us a step closer to using functional components over class components. The next part of moving to functional components is lifecycle methods.</p><blockquote><p>Effects are similar to componentDidMount, componentDidUpdate, and componentWillUnmount</p></blockquote><p>This is what the Effect Hook is for. Side-effects are things you want your application to make like:</p><ul><li>Fetching data</li><li>Manually changing the DOM (document title)</li><li>Setting up a subscription</li></ul><blockquote><p>Effects will run after every render, including the first render.</p></blockquote><p>Let's compare a class to a functional component:</p><pre data-title=\"javascript\"><code><span>import</span> React<span>,</span> <span>{</span> Component <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>class</span> <span>DoSomethingCrazy</span> <span>extends</span> <span>Component</span> <span>{</span>\n  <span>componentDidMount</span><span>(</span><span>)</span> <span>{</span>\n    console<span>.</span><span>log</span><span>(</span><span>'i have arrived at the party!'</span><span>)</span><span>;</span>\n    document<span>.</span>title <span>=</span> <span>'preesent'</span><span>;</span>\n  <span>}</span>\n\n  <span>render</span><span>(</span><span>)</span> <span>{</span>\n    <span>return</span> <span>&lt;</span>div<span>&gt;</span>stuff goes here<span>&lt;</span><span>/</span>div<span>&gt;</span><span>;</span>\n  <span>}</span>\n<span>}</span></code></pre><p>When using the the Effect Hook, we use&nbsp;<code>useEffect()</code>:</p><pre data-title=\"javascript\"><code><span>function</span> <span>DoSomethingCrazy</span><span>(</span><span>)</span> <span>{</span>\n  <span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    console<span>.</span><span>log</span><span>(</span><span>'i have arrived at the party!'</span><span>)</span><span>;</span>\n    document<span>.</span>title <span>=</span> <span>'preesent'</span><span>;</span>\n  <span>}</span><span>)</span><span>;</span>\n\n  <span>return</span> <span>&lt;</span>div<span>&gt;</span>stuff goes here<span>&lt;</span><span>/</span>div<span>&gt;</span><span>;</span>\n<span>}</span></code></pre><p>And the CodeSandbox for this example:</p><p></p><div><iframe src=\"https://codesandbox.io/embed/43mv317k7x?runonclick=1&amp;codemirror=1\" allowfullscreen=\"\"></iframe></div><p></p><p><code>useEffect()</code>&nbsp;is... effectively 😏... similar to&nbsp;<code>componentDidMount</code>&nbsp;and&nbsp;<code>componentDidUpdate</code></p><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-running-an-effect-hook-only-when-something-changes\">Running an Effect Hook only when something changes</a></h2><p>Since&nbsp;<code>useEffect()</code>&nbsp;runs every time a component renders, how do we get it to only run once, on mount? The Effect Hook can&nbsp;<span>take a second argument</span>, an array. It will look through the array and&nbsp;<span>only run the effect if one of those values has changed</span>.</p><h4>componentDidMount: Runs once</h4><pre data-title=\"javascript\"><code><span>// only run on mount. pass an empty array</span>\n<span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  <span>// only runs once</span>\n<span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span></code></pre><h4>componentDidUpdate: Runs on changes</h4><pre data-title=\"javascript\"><code><span>// only run if count changes</span>\n<span>useEffect</span><span>(</span>\n  <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>// run here if count changes</span>\n  <span>}</span><span>,</span>\n  <span>[</span>count<span>]</span>\n<span>)</span><span>;</span></code></pre><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-what-about-componentwillunmount-\">What about componentWillUnmount()</a></h2><p>To run something before a component unmounts, we just have to&nbsp;<span>return a function</span>&nbsp;from&nbsp;<code>useEffect()</code></p><pre data-title=\"javascript\"><code><span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n  UsersAPI<span>.</span><span>subscribeToUserLikes</span><span>(</span><span>)</span><span>;</span>\n\n  <span>// unsubscribe</span>\n  <span>return</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    UsersAPI<span>.</span><span>unsubscribeFromUserLikes</span><span>(</span><span>)</span><span>;</span>\n  <span>}</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-using-state-and-effects-together\">Using State and Effects Together</a></h2><p>There's no problem using them together! Together they can create functional components that work the same as your class components!</p><p>Here's a more real-world example of a component that fetches a list of users from&nbsp;<a href=\"https://developer.github.com/v3/users/\">GitHub API</a>&nbsp;with&nbsp;<code>useEffect()</code>&nbsp;and keeps them using&nbsp;<code>useState()</code>. We'll start by using&nbsp;<code>useState()</code>&nbsp;for users:</p><h4>Using State</h4><pre data-title=\"javascript\"><code><span>import</span> React<span>,</span> <span>{</span> useState <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>function</span> <span>GitHubUsers</span><span>(</span><span>)</span> <span>{</span>\n  <span>const</span> <span>[</span>users<span>,</span> setUsers<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>[</span><span>]</span><span>)</span><span>;</span>\n<span>}</span></code></pre><p>We are setting users as an empty array to start in&nbsp;<code>useState([])</code>. Next, we will bring in the&nbsp;<code>useEffect()</code>&nbsp;hook and use&nbsp;<a href=\"https://scotch.io/tutorials/how-to-use-the-javascript-fetch-api-to-get-data\">fetch</a>&nbsp;to grab data from the GitHub API:</p><h4>Using Effect</h4><pre data-title=\"javascript\"><code><span>import</span> React<span>,</span> <span>{</span> useState <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n\n<span>function</span> <span>GitHubUsers</span><span>(</span><span>)</span> <span>{</span>\n  <span>const</span> <span>[</span>users<span>,</span> setUsers<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>[</span><span>]</span><span>)</span><span>;</span>\n\n  <span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    <span>fetch</span><span>(</span><span>'https://api.github.com/users'</span><span>)</span>\n      <span>.</span><span>then</span><span>(</span>response <span>=&gt;</span> response<span>.</span><span>json</span><span>(</span><span>)</span><span>)</span>\n      <span>.</span><span>then</span><span>(</span>data <span>=&gt;</span> <span>{</span>\n        <span>setUsers</span><span>(</span>data<span>)</span><span>;</span> <span>// set users in state</span>\n      <span>}</span><span>)</span><span>;</span>\n  <span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span> <span>// empty array because we only run once</span>\n<span>}</span></code></pre><p>Notice we are setting the second argument for&nbsp;<code>useEffect</code>&nbsp;as an empty array so&nbsp;<span>it only runs once</span>. Finally, we will show the list!</p><h4>Displaying Users</h4><pre data-title=\"javascript\"><code><span>import</span> React<span>,</span> <span>{</span> useState<span>,</span> useEffect <span>}</span> <span>from</span> <span>'react'</span><span>;</span>\n<span>import</span> ReactDOM <span>from</span> <span>'react-dom'</span><span>;</span>\n\n<span>function</span> <span>GitHubUsers</span><span>(</span><span>)</span> <span>{</span>\n  <span>// ...other stuff here...</span>\n\n  <span>return</span> <span>(</span>\n    <span>&lt;</span>div className<span>=</span><span>\"section\"</span><span>&gt;</span>\n      <span>{</span>users<span>.</span><span>map</span><span>(</span>user <span>=&gt;</span> <span>(</span>\n        <span>&lt;</span>div key<span>=</span><span>{</span>user<span>.</span>id<span>}</span> className<span>=</span><span>\"card\"</span><span>&gt;</span>\n          <span>&lt;</span>h5<span>&gt;</span><span>{</span>user<span>.</span>login<span>}</span><span>&lt;</span><span>/</span>h5<span>&gt;</span>\n        <span>&lt;</span><span>/</span>div<span>&gt;</span>\n      <span>)</span><span>)</span><span>}</span>\n    <span>&lt;</span><span>/</span>div<span>&gt;</span>\n  <span>)</span><span>;</span>\n<span>}</span></code></pre><p>Not the prettiest but it gets the job done! I've also added&nbsp;<a href=\"https://scotch.io/bar-talk/get-to-know-bulma-my-current-favorite-css-framework\">Bulma</a>&nbsp;so it's somewhat better looking than default. That's what the&nbsp;<code>section</code>&nbsp;and&nbsp;<code>card</code>&nbsp;classes are for:<img alt=\"\" data-src=\"https://scotch-res.cloudinary.com/image/upload/w_auto,q_auto:good,f_auto/v1540658246/giir8zbb1rco8pyzndfb.png\" src=\"https://scotch-res.cloudinary.com/image/upload/w_auto,q_auto:good,f_auto/v1540658246/giir8zbb1rco8pyzndfb.png\" data-was-processed=\"true\"></p><p>Here's the CodeSandbox:</p><p></p><div><iframe src=\"https://codesandbox.io/embed/yq5qowzrvz?runonclick=1&amp;codemirror=1\" allowfullscreen=\"\"></iframe></div><p></p><h2><a href=\"https://scotch.io/tutorials/getting-started-with-react-hooks#toc-conclusion\">Conclusion</a></h2><p>React State and Effect Hooks are wonderful additions to the library and will be tools to make it easier to learn React for new developers. A lot of Vue's success is in its simplicity in creating components. It's just an object.</p><p>Now with React, you don't have to differentiate between \"is it a class?\" or \"should I use a functional component?\"</p>","filePath":"pages/React/.md","_id":"f0fgjHxI6nHUWUEe"}
{"date":{"$$date":1553095375132},"title":"Breaking or continuing loop in functional programming","sourceUrl":"http://www.jstips.co/en/javascript/break-continue-loop-functional/","path":"JavaScript/JavaScript/JavaScript/JavaScript/JavaScript/JavaScript/JavaScript/JavaScript/JavaScript/JavaScript/","category":"JavaScript","tags":["JavaScript"," loop"],"author":"@vamshisuram","excerpt":"","dateCreated":1553091863230,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Wed Mar 20 2019 19:55:15 GMT+0530 (India Standard Time)'\ntitle: 'test'\ntags: ['JavaScript','ES6']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://css-tricks.com/snippets/jquery/horz-scroll-with-mouse-wheel/'\ntype: 'Post'\n---\n    ","htmlCode":"<p>A common requirement of iteration is cancelation. Using&nbsp;<code>for</code>&nbsp;loops we can&nbsp;<code>break</code>&nbsp;to end iteration early.</p><div><div><pre><code>const a = [0, 1, 2, 3, 4];\nfor (var i = 0; i &lt; a.length; i++) {\n  if (a[i] === 2) {\n    break; // stop the loop\n  }\n  console.log(a[i]);\n}\n//&gt; 0, 1\n</code></pre></div></div><p>Another common requirement is to close over our variables.</p><p>A quick approach is to use&nbsp;<code>.forEach</code>&nbsp;but then we lack the ability to&nbsp;<code>break</code>. In this situation the closest we get is&nbsp;<code>continue</code>&nbsp;functionality through&nbsp;<code>return</code>.</p><div><div><pre><code>[0, 1, 2, 3, 4].forEach(function(val, i) {\n  if (val === 2) {\n    // how do we stop?\n    return true;\n  }\n  console.log(val); // your code\n});\n//&gt; 0, 1, 3, 4\n</code></pre></div></div><p>The&nbsp;<code>.some</code>&nbsp;is a method on Array prototype. It tests whether some element in the array passes the test implemented by the provided function. If any value is returning true, then it stops executing. Here is a&nbsp;<a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/some\">MDN link</a>&nbsp;for more details.</p><p>An example quoted from that link</p><div><div><pre><code>const isBiggerThan10 = numb =&gt; numb &gt; 10;\n\n[2, 5, 8, 1, 4].some(isBiggerThan10);  // false\n[12, 5, 8, 1, 4].some(isBiggerThan10); // true\n</code></pre></div></div><p>Using&nbsp;<code>.some</code>&nbsp;we get iteration functionally similar to&nbsp;<code>.forEach</code>&nbsp;but with the ability to&nbsp;<code>break</code>through&nbsp;<code>return</code>&nbsp;instead.</p><div><div><pre><code>[0, 1, 2, 3, 4].some(function(val, i) {\n  if (val === 2) {\n    return true;\n  }\n  console.log(val); // your code\n});\n//&gt; 0, 1\n</code></pre></div></div><p>You keep returning&nbsp;<code>false</code>&nbsp;to make it&nbsp;<code>continue</code>&nbsp;to next item. When you return&nbsp;<code>true</code>, the loop will&nbsp;<code>break</code>&nbsp;and&nbsp;<code>a.some(..)</code>&nbsp;will&nbsp;<code>return</code>&nbsp;<code>true</code>.</p><div><div><pre><code>// Array contains 2\nconst isTwoPresent = [0, 1, 2, 3, 4].some(function(val, i) {\n  if (val === 2) {\n    return true; // break\n  }\n});\nconsole.log(isTwoPresent);\n//&gt; true\n</code></pre></div></div><p>Also there is&nbsp;<code>.every</code>, which can be used. We have to return the opposite boolean compared to&nbsp;<code>.some</code>.</p>","filePath":"pages/JavaScript/.md","_id":"fT5m0sVCdHKbKf95","dateUpdated":1553095375132}
{"title":"Javascript shorthand for cleaner code","sourceUrl":"http://www.punkchip.com/javascript-shorthand/","path":"JavaScript/JavaScript/JavaScript/JavaScript/","category":"JavaScript","tags":["JavaScript"," ES6"],"author":"","excerpt":"","dateCreated":1540823022753,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'undefined'\ntitle: 'Javascript shorthand for cleaner code'\ntags: ['JavaScript','ES6']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'http://www.punkchip.com/javascript-shorthand/'\ntype: 'Post'\n---\n    ","htmlCode":"<div><div><p>A few ways to save on some bytes in your Javascript code, as well as making it more readable and quicker to write:<span></span></p><h3>Variable increment/decrement/multiply/divide</h3><p>When you want to increase or decrease a number variable by one; instead of this:</p><pre><code>growCount = growCount + 1;\nshrinkCount = shrinkCount - 1;</code></pre><p>You can simply do the following:</p><pre><code>growCount ++;\nshrinkCount --;</code></pre><p>Or to add/subtract/multiply/divide a number to/from/by itself you can do:</p><pre><code>growCout += 100;\nshrinkCount -= 2;\n\nmoreSweets *= 5; // multiply moreSweets by 5\nlessApple /= 2; // divide lessApple by 2\n</code></pre><h3>Ternary operator (conditional)</h3><p>This is a great code saver for when you want to do something if the test is true, else do something else:</p><pre><code>if(myAge &gt; legalAge) {\n    canDrink = true;\n}\nelse {\n    canDrink = false;\n}</code></pre><p>Instead, put the condition before the question mark then the if true statement and false statement after that separated by a colon:</p><pre><code>var canDrink = (myAge &gt; legalAge) ? true : false;</code></pre><div><time>29-05-2010&nbsp;</time>As pointed out in the comments, the above example can be further simplified to&nbsp;<code>var canDrink = myAge &gt; legalAge</code>&nbsp;because it’s returning a boolean.</div><h3>Associative array notation</h3><p>The old school way of setting up an array was to create a named array and then add each named element one by one:</p><pre><code>var skillSet = new Array();\nskillSet['Document language'] = 'HTML5';\nskillSet['Styling language'] = 'CSS3';\nskillSet['Javascript library'] = 'jQuery';\nskillSet['Other'] = 'Usability and accessibility';\n</code></pre><p>A quicker and more readable way is to add the elements at the same time using the object literal notation to become:</p><pre><code>var skillSet = {\n    'Document language' : 'HTML5', \n    'Styling language' : 'CSS3', \n    'Javascript library' : 'jQuery', \n    'Other' : 'Usability and accessibility'\n};</code></pre><p>Don’t forget to omit the final comma otherwise certain browsers will complain.</p><h3>Default assignments</h3><p>The following is useful if you are testing if a variable has previously been set and if not to try something else:</p><pre><code>function displayValues(limit) {\n    var length;\n    if(limit) {\n        length = limit;\n    } else {\n        length = 10;\n    }\n    for(var i = 0; i++; i &lt; = length) {\n        ...\n}</code></pre><p>A shorter way is to use the double pipe. If&nbsp;<code>limit</code>&nbsp;has not been passed to the function then&nbsp;<code>length</code>&nbsp;will be set to the default of 10:</p><pre><code>function displayValues(limit) {\n    var length = limit || 10;\n    for(var i = 0; i &lt; = length; i++) {\n        ...\n}</code></pre><div><time>02-07-2010&nbsp;</time>The variable&nbsp;<code>length</code>&nbsp;will be set to the value of the left operand if it evaluates to true, therefore anything other than the following:<p></p><ul><li>false</li><li>0</li><li>null</li><li>undefined</li><li>empty string</li></ul><p>Otherwise it will be set to the value of the right operand. So this isn’t the right thing to use if you need to explicitly set the length to zero.</p></div></div></div>","filePath":"pages/JavaScript/.md","_id":"fTS4ML697g1E3nkO","date":{"$$date":1541515191445},"dateUpdated":1541515191445}
{"date":"2018-11-21T15:47:32.775Z","title":"How to Use Sass Mixins","sourceUrl":"https://scotch.io/tutorials/how-to-use-sass-mixins","path":"SCSS/","category":"SCSS","tags":["SCSS"],"author":"Samuel Oloruntoba","excerpt":"","dateCreated":1542815054052,"coverImage":"","type":"Post","frontmatter":"---\npath: 'SCSS/'\ndate: 'Wed Nov 21 2018 21:17:32 GMT+0530 (India Standard Time)'\ntitle: 'How to Use Sass Mixins'\ntags: ['SCSS']\ncategory: 'SCSS'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://scotch.io/tutorials/how-to-use-sass-mixins'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Sass is incredible. Whether using it as Sass or SCSS, it improves productivity and makes complex CSS tasks easy. Sass is easy to debug and lets us do more with CSS.</p><p>Today's article is about Sass Mixins, it answers the question of What? Why? and How to use a Mixin?</p><p>If you are new to Sass, you check out this&nbsp;<a href=\"https://scotch.io/tutorials/getting-started-with-sass\">Getting Started with Sass</a>.</p><div><h3>Table of Contents</h3><ul><li><a href=\"https://scotch.io/tutorials/how-to-use-sass-mixins#toc-what-is-a-mixin-\">What is a Mixin?</a></li><li><a href=\"https://scotch.io/tutorials/how-to-use-sass-mixins#toc-creating-a-mixin\">Creating a Mixin</a></li><li><a href=\"https://scotch.io/tutorials/how-to-use-sass-mixins#toc-use-a-mixin\">Use a Mixin</a></li><li><a href=\"https://scotch.io/tutorials/how-to-use-sass-mixins#toc-passing-arguments-to-mixins\">Passing Arguments to Mixins</a></li><li><a href=\"https://scotch.io/tutorials/how-to-use-sass-mixins#toc--content\">@content</a></li><li><a href=\"https://scotch.io/tutorials/how-to-use-sass-mixins#toc-conclusion\">Conclusion</a></li></ul></div><h2><a href=\"https://scotch.io/tutorials/how-to-use-sass-mixins#toc-what-is-a-mixin-\">What is a Mixin?</a></h2><blockquote><p>A Mixin is a block of code that lets us group CSS declarations we may reuse throughout our site.</p><div><div></div></div></blockquote><p>Take for example, displaying an HTML element as a Flex element.</p><pre data-title=\"scss\"><code><span>.row </span><span>{</span>\n    <span>display</span><span>:</span> -webkit-flex<span>;</span>\n    <span>display</span><span>:</span> flex<span>;</span>\n<span>}</span></code></pre><p>There are many elements we want displayed flex, and typing this declaration above over and over gets boring pretty fast. This is where Sass Mixins come in.</p><h2><a href=\"https://scotch.io/tutorials/how-to-use-sass-mixins#toc-creating-a-mixin\">Creating a Mixin</a></h2><p>Creating a Mixin is very simple, all we have to do is use&nbsp;<code>@mixin</code>&nbsp;command followed by a space and our Mixin name, then we open and close our curly brackets. Something like this.</p><pre data-title=\"scss\"><code><span>@mixin</span> <span>flex </span><span>{</span>\n    <span>// write the css here</span>\n    <span>display</span><span>:</span> -webkit-flex<span>;</span>\n    <span>display</span><span>:</span> flex<span>;</span>\n<span>}</span></code></pre><p>Now we can add our flex declaration and use the Mixin anywhere in our code.</p><h2><a href=\"https://scotch.io/tutorials/how-to-use-sass-mixins#toc-use-a-mixin\">Use a Mixin</a></h2><p>Now that we know how to declare Mixins, we can now learn how to use them in our SCSS code.</p><p>To use a Mixin, we simply use&nbsp;<code>@include</code>&nbsp;followed by the name of the Mixin and a semi-colon.</p><pre data-title=\"scss\"><code><span>.row </span><span>{</span>\n    <span>@include</span> flex<span>;</span>\n<span>}</span></code></pre><p>After compiling this SCSS code into CSS, our CSS file should look like this.</p><pre data-title=\"css\"><code><span><span>.row</span> </span><span>{</span>\n    <span>display</span><span>:</span> -webkit-flex<span>;</span>\n    <span>display</span><span>:</span> flex<span>;</span>\n<span>}</span></code></pre><h2><a href=\"https://scotch.io/tutorials/how-to-use-sass-mixins#toc-passing-arguments-to-mixins\">Passing Arguments to Mixins</a></h2><p>Mixins can also take in arguments to make the output more dynamic. For example, let's assume we are building a grid system, and we can choose the whether to use flexbox for our layout or floats.</p><p>We can create a Mixin, pass an argument to tell it to alternate between flex or floats.</p><p>To pass arguments to a Mixin, we simply do this.</p><pre data-title=\"scss\"><code><span>@mixin</span> <span>grid</span><span>(</span><span>$flex</span><span>)</span> <span>{</span>\n    <span>@if</span> <span><span>$flex</span> </span><span>{</span>\n        <span>@include</span> flex<span>;</span>\n    <span>}</span> <span>@else</span> <span>{</span>\n        <span>display</span><span>:</span> block<span>;</span>\n    <span>}</span>\n<span>}</span></code></pre><p>Now, when we call the&nbsp;<code>grid</code>&nbsp;Mixin, we must pass a truthy argument to the Mixin. Just as you'd expect, pass an argument to an invoked Mixin like this.</p><pre data-title=\"scss\"><code><span>@include</span> <span>grid</span><span>(</span><span>true</span><span>)</span><span>;</span></code></pre><p>To let a Mixin receive multiple arguments, we comma-separate the arguments like this.</p><div><div></div></div><pre data-title=\"scss\"><code><span>@mixin</span> <span>grid</span><span>(</span><span>$flex</span>, <span>$full-width</span><span>)</span> <span>{</span>\n    <span>// code goes in here</span>\n<span>}</span></code></pre><h3>Default Mixin Arguments</h3><p>Functions in programming languages (SASS included) allow default arguments, it only makes sense for mixins too.</p><p>The syntax for passing a default argument to a Mixin looks like this.</p><pre data-title=\"scss\"><code><span>@mixin</span> <span>grid</span><span>(</span><span><span>$flex</span></span><span>:</span> <span>true</span><span>)</span> <span>{</span>\n    <span>// code here</span>\n<span>}</span></code></pre><p>We can pass as many variables as we want. But, any variable that has a default/optional argument needs to be at the end of the argument list.</p><p>Meaning, you can't do this.</p><pre data-title=\"scss\"><code><span>@mixin</span> <span>grid</span><span>(</span><span><span>$flex</span></span><span>:</span> <span>true</span>, <span>$max-width</span><span>)</span> <span>{</span>\n    <span>// code here</span>\n<span>}</span></code></pre><p>SCSS will throw an error that states&nbsp;<code>Required argument $max-width must come before any optional arguments.</code>.</p><p><span>Note:</span>&nbsp;Default arguments can be variables, keywords etc.</p><h3>Variable Arguments</h3><p>In CSS, we have properties like padding and margin that can take anywhere from one to four values for their property arguments.</p><p>Like this.</p><pre data-title=\"css\"><code><span>a </span><span>{</span>\n    <span>padding</span><span>:</span> <span>10</span>px<span>;</span>\n    <span>padding</span><span>:</span> <span>10</span>px <span>20</span>px<span>;</span>\n    <span>padding</span><span>:</span> <span>10</span>px <span>20</span>px <span>50</span>px<span>;</span>\n    <span>padding</span><span>:</span> <span>10</span>px <span>20</span>px <span>50</span>px <span>20</span>px<span>;</span>\n<span>}</span></code></pre><p>As you know all values above are valid.</p><div><div><div><div><h3>Scotch Newsletter</h3><p>Join 100,000 subscribers. Get weekly dev news and tutorials.</p><form action=\"https://app.mailerlite.com/webforms/submit/c7r3j6\" data-code=\"c7r3j6\" method=\"post\" target=\"_blank\"><div aria-label=\"Please leave the following field empty\"><input type=\"text\" tabindex=\"-1\" value=\"\" placeholder=\"Message\" autocomplete=\"off\" title=\"message\">&nbsp;<input type=\"text\" tabindex=\"-1\" value=\"\" placeholder=\"Email\" autocomplete=\"off\" title=\"email\">&nbsp;<input type=\"text\" tabindex=\"-1\" value=\"\" placeholder=\"Name\" autocomplete=\"off\" title=\"name\"></div><div><div><input type=\"email\" data-inputmask=\"\" value=\"\" placeholder=\"Email\" aria-label=\"Your Email\"><div>📧</div></div><div><button type=\"submit\">SUBSCRIBE</button></div></div></form></div></div></div></div><img data-src=\"https://track.mailerlite.com/webforms/o/1112154/c7r3j6?vaa4d608450783acdc64d5338ff94f6d5\" width=\"1\" height=\"1\" border=\"0\" src=\"https://track.mailerlite.com/webforms/o/1112154/c7r3j6?vaa4d608450783acdc64d5338ff94f6d5\" data-was-processed=\"true\"><p>In SCSS we also have lists. The padding values above is treated as lists in SCSS. But there is a way for us to tell Mixins to treat these values as variables instead of a list.</p><p>To illustrate, lets create a&nbsp;<code>padding</code>&nbsp;Mixin.</p><pre data-title=\"scss\"><code><span>@mixin</span> <span>padding</span><span>(</span><span>$values</span><span>)</span> <span>{</span>    \n    <span>@each</span> <span><span>$var</span> in <span>$values</span> </span><span>{</span>\n        <span>padding</span><span>:</span> <span>#{$var}</span><span>;</span>\n    <span>}</span>\n<span>}</span></code></pre><p>If we use this Mixin&nbsp;<code>@include padding(2px 4px 6px);</code>&nbsp;our result will be.</p><pre data-title=\"css\"><code><span>a </span><span>{</span>\n    <span>padding</span><span>:</span> <span>2</span>px<span>;</span>\n    <span>padding</span><span>:</span> <span>4</span>px<span>;</span>\n    <span>padding</span><span>:</span> <span>6</span>px<span>;</span>\n<span>}</span></code></pre><p>To treat this variable as a list, we add triple dots&nbsp;<code>...</code>&nbsp;after the variable name like this.</p><pre data-title=\"scss\"><code><span>@mixin</span> <span>padding</span><span>(</span><span>$values</span><span>...</span><span>)</span> <span>{</span>    \n    <span>@each</span> <span><span>$var</span> in <span>$values</span> </span><span>{</span>\n        <span>padding</span><span>:</span> <span>#{$var}</span><span>;</span>\n    <span>}</span>\n<span>}</span></code></pre><p>Now&nbsp;<code>$values</code>&nbsp;doesn't get treated as a list but rather a normal variable.</p><pre data-title=\"scss\"><code><span>a </span><span>{</span>\n    <span>@include</span> <span>padding</span><span>(</span><span>2</span>px <span>4</span>px <span>6</span>px<span>)</span><span>;</span>\n<span>}</span></code></pre><p>Now we get this.</p><pre data-title=\"css\"><code><span>a </span><span>{</span>\n    <span>padding</span><span>:</span> <span>2</span>px <span>4</span>px <span>6</span>px<span>;</span>\n<span>}</span></code></pre><h3>Variable Arguments (Continued)</h3><p>Another function of the&nbsp;<code>...</code>&nbsp;is that it is used to spread arguments.</p><p>Sounds weird, an example would better illustrate.</p><pre data-title=\"scss\"><code><span><span>$style1</span></span><span>:</span> <span>100%</span>, <span>70</span>px, #fo<span>6</span>d<span>06</span><span>;</span>\n<span><span>$style2</span></span><span>:</span> <span>(</span><span>background</span><span>:</span> <span>#bada55</span>, <span>width</span><span>:</span> <span>100%</span>, <span>height</span><span>:</span> <span>100</span>px<span>)</span><span>;</span>\n\n<span>@mixin</span> <span>box</span><span>(</span><span>$width</span>, <span>$height</span>, <span>$background</span><span>)</span> <span>{</span>\n    <span>width</span><span>:</span> <span>$width</span><span>;</span>\n    <span>height</span><span>:</span> <span>$height</span><span>;</span>\n    <span>background-color</span><span>:</span> <span>$background</span><span>;</span>\n<span>}</span>\n\n<span>.fogdog </span><span>{</span>\n    <span>@include</span> <span>box</span><span>(</span><span>$style1</span><span>...</span><span>)</span><span>;</span>\n<span>}</span>\n\n<span>.badass </span><span>{</span>\n    <span>@include</span> <span>box</span><span>(</span><span>$style2</span><span>...</span><span>)</span><span>;</span>\n<span>}</span></code></pre><p>The first thing we did is define two variables&nbsp;<code>$style1</code>&nbsp;and&nbsp;<code>$style2</code>, a list and map.</p><p>Then we define a&nbsp;<code>box</code>&nbsp;Mixin that takes 3 arguments. Then we call the Mixin twice, both times using the&nbsp;<code>...</code>&nbsp;(spread operator) to pass a list as the only argument in the first instance, and in the second instance, we passed the map.</p><p>For the list, since we have 3 list items and the Mixin has 3 arguments, each argument is passed in respectively.</p><p>If the list has a length less than 3 it throws an error, otherwise it takes only the first 3 list items. Meaning our list can be as 10 items and only the first 3 items will is passed to the list.</p><p>The map is also treated the same way as the list, the only exception is that the map is treated as keyword arguments (meaning the map key values has to match the variable name).</p><p>The above snippet compiles into this.</p><pre data-title=\"css\"><code><span><span>.fogdog</span> </span><span>{</span>\n    <span>width</span><span>:</span> <span>100%</span><span>;</span>\n    <span>height</span><span>:</span> <span>70</span>px<span>;</span>\n    <span>background-color</span><span>:</span> #fo<span>6</span>d<span>06</span><span>;</span>\n<span>}</span>\n\n<span><span>.badass</span> </span><span>{</span>\n    <span>width</span><span>:</span> <span>100%</span><span>;</span>\n    <span>height</span><span>:</span> <span>100</span>px<span>;</span>\n    <span>background-color</span><span>:</span> <span>#bada55</span><span>;</span>\n<span>}</span></code></pre><p><span>Note:</span>&nbsp;Any variable argument cannot be placed in front of a regular argument. Same as default/optional arguments.</p><h2><a href=\"https://scotch.io/tutorials/how-to-use-sass-mixins#toc--content\">@content</a></h2><p><code>@content</code>&nbsp;allows for Mixin extension. We can pass a block to Mixins with the use of&nbsp;<code>@content</code>.</p><p>In short,&nbsp;<code>@content</code>&nbsp;makes this possible.</p><pre data-title=\"scss\"><code><span>@include</span> <span>grid</span><span>(</span><span>)</span> <span>{</span>\n    <span>// css go here</span>\n<span>}</span></code></pre><p>To make allow Mixins receive a block, we simply do this.</p><pre data-title=\"scss\"><code><span>@mixin</span> <span>grid</span><span>(</span><span>)</span> <span>{</span>\n    <span>@content</span><span>;</span>\n<span>}</span></code></pre><p>And now, our grid Mixin can take in extra css. An example use case of this is media queries. Take this snippet for example.</p><pre data-title=\"scss\"><code><span>@mixin</span> <span>small</span><span>(</span><span>)</span> <span>{</span>\n    <span><span>@media</span> only screen <span>and</span> <span>(</span><span>max-width</span><span>:</span> <span>320</span>px<span>)</span></span> <span>{</span>\n        <span>@content</span><span>;</span>\n    <span>}</span>\n<span>}</span></code></pre><p>Instead of having to type the media query everytime, this feels like a much more stable way to handle media queries.</p><pre data-title=\"scss\"><code><span>@include</span> <span>small </span><span>{</span>\n    <span>// css code for small screens go here</span>\n<span>}</span></code></pre><p>This is just one example of&nbsp;<code>@content</code>&nbsp;in action, there are many open source projects that use it, and I'm sure you have quite a few ideas of your own.</p><h2><a href=\"https://scotch.io/tutorials/how-to-use-sass-mixins#toc-conclusion\">Conclusion</a></h2><p>Mixins are obviously very useful and speed up your workflow, and there is a lot we can do with them.</p><p>Here is an example of popular open source Mixins.</p><ul><li><a href=\"http://gillesbertaux.com/andy/\">Andy.scss</a>&nbsp;is a collection of SCSS Mixins.</li><li><a href=\"https://github.com/sass-mq/sass-mq\">SASS-MQ</a>&nbsp;a sass Mixin for handling media queries.</li><li><a href=\"http://bourbon.io/\">Bourbon</a>&nbsp;a collection of CSS Mixins.</li><li><a href=\"https://lukyvj.github.io/family.scss/\">Family.scss</a>&nbsp;made by Lucas Bonomi or&nbsp;<a href=\"http://lucasbonomi.com/\">LukyVJ</a>, this makes working with&nbsp;<code>nth-child</code>selectors manageable.</li><li><a href=\"http://themodernweb.co.uk/2017/02/scss-mixins-5-awesome-examples/\">Collection of Mixins</a>&nbsp;by TheModernWeb</li></ul><p>You can share your favorite Mixins in the comment.</p>","filePath":"pages/SCSS/.md","_id":"fZCJJstjTOsHIm0r"}
{"date":"2018-11-06T14:58:32.186Z","title":"A Better package.json for the Frontend","sourceUrl":"https://nystudio107.com/blog/a-better-package-json-for-the-frontend","path":"NPM/","category":"NPM","tags":["Node.js"," NPM"],"author":"Andrew Welch","excerpt":"Fron­tend work­flow tools like gulp are almost manda­to­ry for web­dev these days; here’s what I con­sid­er to be a bet­ter package.json setup","dateCreated":1541516206247,"coverImage":"","type":"Post","frontmatter":"---\npath: 'NPM/'\ndate: 'Tue Nov 06 2018 20:28:32 GMT+0530 (India Standard Time)'\ntitle: 'A Better package.json for the Frontend'\ntags: ['Node.js','NPM']\ncategory: 'NPM'\ncategoryColor: '#F3C610'\nexcerpt: 'Fron­tend work­flow tools like gulp are almost manda­to­ry for web­dev these days; here’s what I con­sid­er to be a bet­ter package.json setup'\ncoverImage: ''\nsourceUrl: 'https://nystudio107.com/blog/a-better-package-json-for-the-frontend'\ntype: 'Post'\n---\n    ","htmlCode":"<div><div><p>If you’re doing web­dev, odds are good you’re using a&nbsp;work­flow tool like&nbsp;<a href=\"http://gulpjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Gulp</a>&nbsp;to auto­mate your build process. Whether you’re using&nbsp;<a href=\"http://gulpjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Gulp</a>,&nbsp;<a href=\"http://gruntjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Grunt</a>,&nbsp;<a href=\"https://webpack.github.io/\" target=\"_blank\" rel=\"noreferrer noopener\">web­pack</a>, or&nbsp;<a href=\"https://medium.freecodecamp.com/why-i-left-gulp-and-grunt-for-npm-scripts-3d6853dd22b8#.o46xqh4pe\" target=\"_blank\" rel=\"noreferrer noopener\">npm scripts</a>,&nbsp;it doesn’t real­ly mat­ter. Use what­ev­er tool works for&nbsp;you.</p></div></div><div><div><blockquote>If you’re not using a workflow automation tool yet, you should be. It’s worth investing the upfront time to get it working, for the time it’ll save you on every project going forward.</blockquote></div></div><div><div><p>I’m cur­rent­ly using Gulp on most projects, so that’s what I’ll be pre­sent­ing here, but the method­olo­gies described&nbsp;work for any of the fron­tend work­flow tools. Check out the&nbsp;<a href=\"https://nystudio107.com/blog/a-gulp-workflow-for-frontend-development-automation\">A&nbsp;Gulp Work­flow for Fron­tend Devel­op­ment Automa­tion</a>&nbsp;arti­cle for more on Gulp, and how it can use the&nbsp;<kbd>package.json</kbd>described in this article.</p><p>The&nbsp;<kbd>package.json</kbd>&nbsp;file&nbsp;is&nbsp;the pack­ag­ing for­mat for&nbsp;<a href=\"https://nodejs.org/\" target=\"_blank\" rel=\"noreferrer noopener\">node.js</a>&nbsp;appli­ca­tions, and Gulp is a&nbsp;node.js appli­ca­tion. But we can also lever­age the&nbsp;<kbd>package.json</kbd>&nbsp;file to encom­pass our entire website.</p><p>In the past, peo­ple were using&nbsp;<a href=\"https://bower.io/\" target=\"_blank\" rel=\"noreferrer noopener\">Bow­er</a>&nbsp;as a&nbsp;fron­tend pack­age man­ag­er for the third par­ty Javscript/​CSS used on their web­sites. The advan­tage of using a&nbsp;pack­age man­ag­er is threefold:</p><ol><li>You&nbsp;have a&nbsp;cen­tral­ized man­i­fest of all of the third par­ty&nbsp;pack­ages&nbsp;your web­site&nbsp;uses</li><li>You can eas­i­ly update to more recent ver­sions of the third par­ty pack­ages your web­site&nbsp;uses</li><li>You are always obtain­ing the pack­ages from their canon­i­cal source</li></ol><p>In the bad old days before Bow­er, peo­ple man­u­al­ly down­loaded their fron­tend pack­ages, which made updat­ing them a&nbsp;pain. So most of the time, it nev­er happened.</p><p>I’ve used Bow­er in the past, but since we’re already using&nbsp;<a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">npm</a>&nbsp;as a&nbsp;pack­age man­ag­er for our node.js pack­ages used by Gulp, why not use it for the fron­tend pack­ages as&nbsp;well?</p></div></div><div><div><blockquote>Using more than one package manager for our website seems silly. I’ve never run into a case where a package is in Bower, but is not in NPM</blockquote></div></div><div><div><p><em>Tan­gent:</em>&nbsp;While I&nbsp;talk about npm through­out the rest of this arti­cle, I’m actu­al­ly using&nbsp;<a href=\"https://yarnpkg.com/\" target=\"_blank\" rel=\"noreferrer noopener\">yarn</a>&nbsp;these days to man­age my npm pack­ages. It uses the exact same&nbsp;<a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">npmjs​.com</a>&nbsp;pack­age reg­istry that npm uses, it just does it bet­ter and faster. And it uses a&nbsp;<kbd>yarn.lock</kbd>&nbsp;file to ensure that the pack­age installs are deter­min­is­tic.&nbsp;I&nbsp;urge you to check&nbsp;it!</p><p>Instead of hav­ing to do&nbsp;<kbd>npm install</kbd>&nbsp;and&nbsp;<kbd>bower install</kbd>&nbsp;to get our project boot­strapped, and then remem­ber­ing to do both&nbsp;<kbd>npm update</kbd>&nbsp;and&nbsp;<kbd>bower update</kbd>&nbsp;to update our pack­ages, we just do&nbsp;<kbd>npm install</kbd>or&nbsp;<kbd>npm update</kbd>. Or if we’re using yarn, we can just do&nbsp;<kbd>yarn</kbd>!&nbsp;Great!</p><p>If you’re not famil­iar with the&nbsp;<kbd>package.json</kbd>&nbsp;for­mat, check out this&nbsp;<a href=\"http://browsenpm.org/package.json\" target=\"_blank\" rel=\"noreferrer noopener\">package.json Inter­ac­tive Guide</a>. While there are many keys in the&nbsp;<kbd>package.json</kbd>&nbsp;that have spe­cial mean­ing, it’s instruc­tive to keep in mind that it’s just&nbsp;<span>JSON</span>. We can add what­ev­er we want to it. So we will! More on that&nbsp;later.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/a-better-package-json-for-the-frontend#package-all-the-things\"><i></i><span>LINK</span></a></span>PACKAGE ALL THE THINGS!</h3><p>For our web­sites, we’ll use the&nbsp;<kbd>devDependencies</kbd>&nbsp;key&nbsp;in our&nbsp;<kbd>package.json</kbd>&nbsp;for node.js pack­ages that Gulp uses&nbsp;via our&nbsp;<kbd>gulpfile.js</kbd>&nbsp;for automat­ing our fron­tend work­flow. Here are the&nbsp;<kbd>devDependencies</kbd>for this very web­site you’re read­ing&nbsp;now:</p></div></div><div><div><section><div><pre><code><span>\"devDependencies\"</span><span>:</span> <span>{</span>\n        <span>\"babel-plugin-transform-runtime\"</span><span>:</span> <span>\"^6.15.0\"</span><span>,</span>\n        <span>\"babel-preset-es2015\"</span><span>:</span> <span>\"^6.16.0\"</span><span>,</span>\n        <span>\"chalk\"</span><span>:</span> <span>\"^1.1.3\"</span><span>,</span>\n        <span>\"critical\"</span><span>:</span> <span>\"^1.1.0\"</span><span>,</span>\n        <span>\"fancy-log\"</span><span>:</span> <span>\"^1.2.0\"</span><span>,</span>\n        <span>\"git-rev-sync\"</span><span>:</span> <span>\"^1.7.1\"</span><span>,</span>\n        <span>\"gulp\"</span><span>:</span> <span>\"^3.9.0\"</span><span>,</span>\n        <span>\"gulp-autoprefixer\"</span><span>:</span> <span>\"^3.1.0\"</span><span>,</span>\n        <span>\"gulp-babel\"</span><span>:</span> <span>\"^6.1.2\"</span><span>,</span>\n        <span>\"gulp-cached\"</span><span>:</span> <span>\"^1.1.1\"</span><span>,</span>\n        <span>\"gulp-concat\"</span><span>:</span> <span>\"^2.6.0\"</span><span>,</span>\n        <span>\"gulp-cssnano\"</span><span>:</span> <span>\"^2.1.2\"</span><span>,</span>\n        <span>\"gulp-debug\"</span><span>:</span> <span>\"^2.1.2\"</span><span>,</span>\n        <span>\"gulp-download\"</span><span>:</span> <span>\"^0.0.1\"</span><span>,</span>\n        <span>\"gulp-favicons\"</span><span>:</span> <span>\"^2.2.6\"</span><span>,</span>\n        <span>\"gulp-filter\"</span><span>:</span> <span>\"^5.0.1\"</span><span>,</span>\n        <span>\"gulp-fontello\"</span><span>:</span> <span>\"^0.4.6\"</span><span>,</span>\n        <span>\"gulp-header\"</span><span>:</span> <span>\"^1.8.7\"</span><span>,</span>\n        <span>\"gulp-if\"</span><span>:</span> <span>\"^2.0.1\"</span><span>,</span>\n        <span>\"gulp-imagemin\"</span><span>:</span> <span>\"^3.1.1\"</span><span>,</span>\n        <span>\"gulp-livereload\"</span><span>:</span> <span>\"^3.8.1\"</span><span>,</span>\n        <span>\"gulp-load-plugins\"</span><span>:</span> <span>\"^1.3.0\"</span><span>,</span>\n        <span>\"gulp-newer\"</span><span>:</span> <span>\"^1.2.0\"</span><span>,</span>\n        <span>\"gulp-plumber\"</span><span>:</span> <span>\"^1.1.0\"</span><span>,</span>\n        <span>\"gulp-print\"</span><span>:</span> <span>\"^2.0.1\"</span><span>,</span>\n        <span>\"gulp-rename\"</span><span>:</span> <span>\"^1.2.2\"</span><span>,</span>\n        <span>\"gulp-replace\"</span><span>:</span> <span>\"0.5.4\"</span><span>,</span>\n        <span>\"gulp-rev\"</span><span>:</span> <span>\"^7.1.0\"</span><span>,</span>\n        <span>\"gulp-sass\"</span><span>:</span> <span>\"^2.1.0\"</span><span>,</span>\n        <span>\"gulp-size\"</span><span>:</span> <span>\"^2.1.0\"</span><span>,</span>\n        <span>\"gulp-sourcemaps\"</span><span>:</span> <span>\"^2.2.1\"</span><span>,</span>\n        <span>\"gulp-streamify\"</span><span>:</span> <span>\"1.0.2\"</span><span>,</span>\n        <span>\"gulp-uglify\"</span><span>:</span> <span>\"^1.5.4\"</span><span>,</span>\n        <span>\"moment\"</span><span>:</span> <span>\"^2.14.1\"</span><span>,</span>\n        <span>\"pa11y\"</span><span>:</span> <span>\"^4.11.0\"</span><span>,</span>\n        <span>\"vinyl-source-stream\"</span><span>:</span> <span>\"^1.1.0\"</span><span>,</span>\n        <span>\"vueify\"</span><span>:</span> <span>\"^8.7.0\"</span>\n    <span>}</span><span>,</span></code></pre><aside><h5><i></i>&nbsp;devDependencies</h5></aside></div></section></div></div><div><div><p>It’s not impor­tant that you know what all of these things are; rather just that you see they are all node.js pack­ages that we use for automat­ing our fron­tend workflow.</p><p>Since we con­sid­er the web­site we’re build­ing&nbsp;<span></span>​<span>“</span>the app”, we’ll use the&nbsp;<kbd>dependencies</kbd>&nbsp;key in our&nbsp;<kbd>package.json</kbd>&nbsp;for the fron­tend pack­ages (JavaScript/​CSS) that we use in-brows­er.&nbsp;Here are the&nbsp;<kbd>dependencies</kbd>&nbsp;for this very web­site you’re read­ing&nbsp;now:</p></div></div><div><div><section><div><pre><code><span>\"dependencies\"</span><span>:</span> <span>{</span>\n        <span>\"fg-loadcss\"</span><span>:</span> <span>\"^1.2.0\"</span><span>,</span>\n        <span>\"flexboxgrid\"</span><span>:</span> <span>\"^6.3.1\"</span><span>,</span>\n        <span>\"fontfaceobserver\"</span><span>:</span> <span>\"^2.0.5\"</span><span>,</span>\n        <span>\"lazysizes\"</span><span>:</span> <span>\"^2.0.6\"</span><span>,</span>\n        <span>\"loadjs\"</span><span>:</span> <span>\"^3.3.1\"</span><span>,</span>\n        <span>\"normalize.css\"</span><span>:</span> <span>\"^5.0.0\"</span><span>,</span>\n        <span>\"picturefill\"</span><span>:</span> <span>\"^3.0.2\"</span><span>,</span>\n        <span>\"prismjs\"</span><span>:</span> <span>\"^1.5.1\"</span><span>,</span>\n        <span>\"tiny-cookie\"</span><span>:</span> <span>\"^1.0.1\"</span><span>,</span>\n        <span>\"vue\"</span><span>:</span> <span>\"^2.2.0\"</span><span>,</span>\n        <span>\"vue-resource\"</span><span>:</span> <span>\"^1.0.3\"</span><span>,</span>\n        <span>\"vue2-autocomplete\"</span><span>:</span> <span>\"git://github.com/nystudio107/vue2-autocomplete.git#master\"</span>\n    <span>}</span><span>,</span></code></pre><aside><h5><i></i>&nbsp;dependencies</h5></aside></div></section></div></div><div><div><p>Boom, that’s it! We do an&nbsp;<kbd>npm install</kbd>&nbsp;or&nbsp;<kbd>yarn</kbd>&nbsp;and all of the third par­ty pack­ages we use to make our web­site — both in-brows­er and for our work­flow automa­tion — are installed!&nbsp;</p><p>You can find the pack­ages on&nbsp;<a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">npmjs​.com</a>, and install them as&nbsp;<kbd>dependencies</kbd>&nbsp;via&nbsp;<kbd>npm install -S &lt;package-name&gt;</kbd>, or install them as&nbsp;<kbd>devDependencies</kbd>&nbsp;via&nbsp;<kbd>npm install -D &lt;package-name&gt;</kbd>.</p><p>If you’re using yarn instead of npm (which you should be!), you can find the pack­ages on&nbsp;<a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">npmjs​.com</a>, and install them as&nbsp;<kbd>dependencies</kbd>&nbsp;via&nbsp;<kbd>yarn add &lt;package-name&gt;</kbd>, or install them as&nbsp;<kbd>devDependencies</kbd>&nbsp;via&nbsp;<kbd>yarn add --dev &lt;package-name&gt;</kbd>.</p><p>Or if you pre­fer, you can just edit your&nbsp;<kbd>package.json</kbd>&nbsp;file your­self, and then do&nbsp;<kbd>npm install</kbd>&nbsp;or&nbsp;<kbd>yarn</kbd>.</p><p>If for some crazy rea­son you run into a&nbsp;sit­u­a­tion where an npm pack­age doesn’t exist for some­thing you want to use, or you’re installing some­thing from a&nbsp;pri­vate git repo, you can always just do this in your&nbsp;<kbd>package.json</kbd>:</p></div></div><div><div><section><div><pre><code><span>\"private-package\"</span><span>:</span> <span>\"git+ssh://git@github.com/yourhandle/private-package.git#master\"</span><span>,</span></code></pre></div></section></div></div><div><div><p>One thing that’s fair­ly crit­i­cal to under­stand­ing how to use npm is the pack­age ver­sion, it’s what appears after the pack­age name in our&nbsp;<kbd>package.json</kbd>&nbsp;file. The ver­sion is expressed as a&nbsp;<a href=\"http://semver.org/\" target=\"_blank\" rel=\"noreferrer noopener\">semver</a>&nbsp;which is just a&nbsp;way to express the ver­sion you want installed, and the thresh­old for new­er ver­sion that it can be updat­ed&nbsp;to.</p><p>For instance, we might want all bug fix ver­sions of of a&nbsp;par­tic­u­lar pack­age, but we don’t want any break­ing changes. Using semver, we can rest easy that when we type&nbsp;<kbd>npm update</kbd>&nbsp;or&nbsp;<kbd>yarn</kbd>, we’ll get only the non-break­ing bug fix or patch ver­sions, and our project won’t blow&nbsp;up.</p><p>I typ­i­cal­ly do&nbsp;<kbd>'^1.0.0'</kbd>&nbsp;for the pack­ages I&nbsp;install, which says&nbsp;<span></span>​<span>“</span>I want all updates up to the next major ver­sion”,&nbsp;<kbd>2.0.0</kbd>&nbsp;in this case); a&nbsp;more com­mon pat­tern is to do&nbsp;<kbd>'~1.0.0'</kbd>&nbsp;(which will give you only patch updates, in this case up to&nbsp;<kbd>1.1.0</kbd>).&nbsp;A&nbsp;great way to learn semver is to check out the&nbsp;<a href=\"https://semver.npmjs.com/\" target=\"_blank\" rel=\"noreferrer noopener\">npm semver cal­cu­la­tor</a>&nbsp;and play around with it a&nbsp;bit. It’s real­ly not hard to learn, and it’s time well-spent.</p><p><em>Tan­gent:</em>&nbsp;We should con­sid­er any­thing we’ve got­ten from a&nbsp;pack­age man­ag­er (whether it is Bow­er or npm or what­ev­er) as&nbsp;<em>read-only.</em>&nbsp;Use your&nbsp;<kbd>gulpfile.js</kbd>&nbsp;to copy or trans­form things from these third-par­ty pack­ages into your web­site. Don’t use them direct­ly, or — gasp — mod­i­fy&nbsp;them.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/a-better-package-json-for-the-frontend#cleaning-up-our-gulpfile-js\"><i></i><span>LINK</span></a></span>CLEANING UP OUR GULPFILE.JS</h3></div></div><div><div><p>With all of these npm pack­ages (aka&nbsp;<em>node mod­ules</em>), our gulp­files tend to end up with a&nbsp;ton of cruft at the top, where we can’t even see our code until we scroll down past&nbsp;a&nbsp;few pages of things like&nbsp;this:</p></div></div><div><div><section><div><pre><code><span>var</span> gulp        <span>=</span> <span>require</span><span>(</span><span>'gulp'</span><span>)</span><span>,</span>\n    sass        <span>=</span> <span>require</span><span>(</span><span>'gulp-sass'</span><span>)</span><span>,</span>\n    rename      <span>=</span> <span>require</span><span>(</span><span>'gulp-rename'</span><span>)</span><span>,</span>\n    cssmin      <span>=</span> <span>require</span><span>(</span><span>'gulp-minify-css'</span><span>)</span><span>,</span>\n    concat      <span>=</span> <span>require</span><span>(</span><span>'gulp-concat'</span><span>)</span><span>,</span>\n    uglify      <span>=</span> <span>require</span><span>(</span><span>'gulp-uglify'</span><span>)</span><span>,</span>\n    jshint      <span>=</span> <span>require</span><span>(</span><span>'gulp-jshint'</span><span>)</span><span>,</span>\n    scsslint    <span>=</span> <span>require</span><span>(</span><span>'gulp-scss-lint'</span><span>)</span><span>,</span>\n    cache       <span>=</span> <span>require</span><span>(</span><span>'gulp-cached'</span><span>)</span><span>,</span>\n    prefix      <span>=</span> <span>require</span><span>(</span><span>'gulp-autoprefixer'</span><span>)</span><span>,</span>\n    browserSync <span>=</span> <span>require</span><span>(</span><span>'browser-sync'</span><span>)</span><span>,</span>\n    reload      <span>=</span> browserSync<span>.</span>reload<span>,</span>\n    size        <span>=</span> <span>require</span><span>(</span><span>'gulp-size'</span><span>)</span><span>,</span>\n    imagemin    <span>=</span> <span>require</span><span>(</span><span>'gulp-imagemin'</span><span>)</span><span>,</span>\n    pngquant    <span>=</span> <span>require</span><span>(</span><span>'imagemin-pngquant'</span><span>)</span><span>,</span>\n    plumber     <span>=</span> <span>require</span><span>(</span><span>'gulp-plumber'</span><span>)</span><span>,</span>\n    deploy      <span>=</span> <span>require</span><span>(</span><span>'gulp-gh-pages'</span><span>)</span><span>,</span>\n    notify      <span>=</span> <span>require</span><span>(</span><span>'gulp-notify'</span><span>)</span><span>,</span>\n    changed     <span>=</span> <span>require</span><span>(</span><span>'gulp-changed'</span><span>)</span><span>,</span>\n    favicons    <span>=</span> <span>require</span><span>(</span><span>'gulp-favicons'</span><span>)</span><span>,</span>\n    fontello    <span>=</span> <span>require</span><span>(</span><span>'gulp-fontello'</span><span>)</span><span>,</span>\n    print       <span>=</span> <span>require</span><span>(</span><span>'gulp-print'</span><span>)</span><span>,</span>\n    replace     <span>=</span> <span>require</span><span>(</span><span>'gulp-replace'</span><span>)</span><span>,</span>\n    csslint     <span>=</span> <span>require</span><span>(</span><span>'gulp-csslint'</span><span>)</span><span>,</span>\n    newer       <span>=</span> <span>require</span><span>(</span><span>'gulp-newer'</span><span>)</span><span>,</span>\n    log         <span>=</span> <span>require</span><span>(</span><span>'fancy-log'</span><span>)</span><span>,</span>\n    chalk       <span>=</span> <span>require</span><span>(</span><span>'chalk'</span><span>)</span><span>,</span>\n    jsonminify <span>=</span> <span>require</span><span>(</span><span>'gulp-jsonminify'</span><span>)</span><span>,</span>\n    critical    <span>=</span> <span>require</span><span>(</span><span>'critical'</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;gulpfile.js require()'s</h5></aside></div></section></div></div><div><div><p>This real­ly is fair­ly point­less, we’re already declar­ing what we want in our&nbsp;<kbd>devDependencies</kbd>.</p><p>Instead, let’s clean it up a&nbsp;bit by using the&nbsp;<a href=\"https://www.npmjs.com/package/gulp-load-plugins\" target=\"_blank\" rel=\"noreferrer noopener\">gulp-load-plu­g­ins</a>&nbsp;Gulp plu­g­in. What it does is it’ll load in your node.js mod­ules name­spaced under the&nbsp;<kbd>$</kbd>&nbsp;vari­able (hel­lo, jQuery!). Since we know we’re using every­thing in&nbsp;<kbd>devDependencies</kbd>&nbsp;for our work­flow automa­tion via Gulp, we can change that raft of&nbsp;<kbd>require()</kbd><span></span>​<span>‘</span>s above into&nbsp;just:</p></div></div><div><div><section><div><pre><code><span>// load all plugins in 'devDependencies' into the variable $</span>\n<span>const</span> $ <span>=</span> <span>require</span><span>(</span><span>'gulp-load-plugins'</span><span>)</span><span>(</span><span>{</span>\n        pattern<span>:</span> <span>[</span><span>'*'</span><span>]</span><span>,</span>\n        scope<span>:</span> <span>[</span><span>'devDependencies'</span><span>]</span>\n    <span>}</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;Using gulp-load-plugins</h5></aside></div></section></div></div><div><div><p>Then to use our node.js mod­ules in our&nbsp;<kbd>gulpfile.js</kbd>, we just access them via the&nbsp;<kbd>$</kbd>&nbsp;vari­able (well, real­ly a&nbsp;<kbd>const</kbd>&nbsp;in this case, but what­ev­er) like&nbsp;this:</p></div></div><div><div><section><div><pre><code>$<span>.</span><span>fancyLog</span><span>(</span><span>\"-&gt; Compiling scss\"</span><span>)</span><span>;</span></code></pre></div></section></div></div><div><div><p>Ahhh, so neat and tidy! Now let’s keep on a&nbsp;roll clean­ing things up!</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/a-better-package-json-for-the-frontend#separating-your-data-from-your-code\"><i></i><span>LINK</span></a></span>SEPARATING YOUR DATA FROM YOUR CODE</h3><p>A term all of the cool kids are using these days is&nbsp;<kbd>DRY</kbd>. They don’t mean that your code is bor­ing, they mean that you&nbsp;<strong>D</strong>on’t&nbsp;<strong>R</strong>epeat&nbsp;<strong>Y</strong>our­self. Back in the day, when we’d walk&nbsp;<span>2</span>&nbsp;miles uphill in the snow to get to our bus stop, we just called this mod­u­lar­i­ty or reusability.</p><p>What­ev­er you call it, it’s a&nbsp;good thing. Essen­tial­ly, we want to take the bits of code we write, and re-use them as much as pos­si­ble from project to project. As a&nbsp;step towards this when build­ing web­sites, there’s what I&nbsp;do in my&nbsp;<kbd>gulpfile.js</kbd>:</p></div></div><div><div><section><div><pre><code><span>// package vars</span>\n<span>const</span> pkg <span>=</span> <span>require</span><span>(</span><span>'./package.json'</span><span>)</span><span>;</span></code></pre></div></section></div></div><div><div><p>Now we have access to the entire&nbsp;<kbd>package.json</kbd>&nbsp;data struc­ture in our&nbsp;<kbd>gulpfile.js</kbd>.&nbsp;So what we can do is we can sep­a­rate the code in our&nbsp;<kbd>gulpfile.js</kbd>&nbsp;from the data that it oper­ates&nbsp;on.</p><p>Want to start a&nbsp;new project? Great! All you will have to change is your&nbsp;<kbd>package.json</kbd>&nbsp;to reflect what’s dif­fer­ent about this project… since your&nbsp;<kbd>gulpfile.js</kbd>&nbsp;just oper­ates on the data that’s fed into it via the&nbsp;<kbd>package.json</kbd>, this all just works. And you end up with clean­er, more read­able code,&nbsp;too.</p><p>For instance, we change this:</p></div></div><div><div><section><div><pre><code><span>// scss - build the scss to the build folder, including the required paths, and writing out a sourcemap</span>\ngulp<span>.</span><span>task</span><span>(</span><span>'scss'</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    $<span>.</span><span>fancyLog</span><span>(</span><span>\"-&gt; Compiling scss:\"</span><span>)</span><span>;</span>\n    <span>return</span> gulp<span>.</span><span>src</span><span>(</span><span>\"./src/scss/style.scss\"</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>plumber</span><span>(</span><span>{</span> errorHandler<span>:</span> onError <span>}</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span>sourcemaps<span>.</span><span>init</span><span>(</span><span>{</span>loadMaps<span>:</span> <span>true</span><span>}</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>sass</span><span>(</span><span>{</span>\n                includePaths<span>:</span> <span>\"./src/scss/\"</span>\n            <span>}</span><span>)</span>\n            <span>.</span><span>on</span><span>(</span><span>'error'</span><span>,</span> $<span>.</span>sass<span>.</span>logError<span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>cached</span><span>(</span><span>'sass_compile'</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>autoprefixer</span><span>(</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span>sourcemaps<span>.</span><span>write</span><span>(</span><span>'./'</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>size</span><span>(</span><span>{</span> gzip<span>:</span> <span>true</span><span>,</span> showFiles<span>:</span> <span>true</span> <span>}</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>gulp<span>.</span><span>dest</span><span>(</span><span>\"./build/css/\"</span><span>)</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;old-skool</h5></aside></div></section></div></div><div><div><p>Into this:</p></div></div><div><div><section><div><pre><code><span>// scss - build the scss to the build folder, including the required paths, and writing out a sourcemap</span>\ngulp<span>.</span><span>task</span><span>(</span><span>'scss'</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>\n    $<span>.</span><span>fancyLog</span><span>(</span><span>\"-&gt; Compiling scss: \"</span> <span>+</span> pkg<span>.</span>paths<span>.</span>build<span>.</span>css <span>+</span> pkg<span>.</span>vars<span>.</span>scssName<span>)</span><span>;</span>\n    <span>return</span> gulp<span>.</span><span>src</span><span>(</span>pkg<span>.</span>paths<span>.</span>src<span>.</span>scss <span>+</span> pkg<span>.</span>vars<span>.</span>scssName<span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>plumber</span><span>(</span><span>{</span> errorHandler<span>:</span> onError <span>}</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span>sourcemaps<span>.</span><span>init</span><span>(</span><span>{</span>loadMaps<span>:</span> <span>true</span><span>}</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>sass</span><span>(</span><span>{</span>\n                includePaths<span>:</span> pkg<span>.</span>paths<span>.</span>scss\n            <span>}</span><span>)</span>\n            <span>.</span><span>on</span><span>(</span><span>'error'</span><span>,</span> $<span>.</span>sass<span>.</span>logError<span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>cached</span><span>(</span><span>'sass_compile'</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>autoprefixer</span><span>(</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span>sourcemaps<span>.</span><span>write</span><span>(</span><span>'./'</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>$<span>.</span><span>size</span><span>(</span><span>{</span> gzip<span>:</span> <span>true</span><span>,</span> showFiles<span>:</span> <span>true</span> <span>}</span><span>)</span><span>)</span>\n        <span>.</span><span>pipe</span><span>(</span>gulp<span>.</span><span>dest</span><span>(</span>pkg<span>.</span>paths<span>.</span>build<span>.</span>css<span>)</span><span>)</span><span>;</span>\n<span>}</span><span>)</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;nu-skool</h5></aside></div></section></div></div><div><div><p>Not only are we not hard-cod­ing the file names and paths inline in our&nbsp;<kbd>gulpfile.js</kbd>, we’re not even includ­ing them in our&nbsp;<kbd>gulpfile.js</kbd>&nbsp;at all — they are pulled from our&nbsp;<kbd>package.json</kbd>&nbsp;which defines every­thing that’s unique about this par­tic­u­lar project.</p><p>Pret­ty cool, right? While this isn’t the be-all and end-all of how to do things, it’s worked out well for me. The code is more reusable, and it’s clean­er and eas­i­er to&nbsp;read.</p><p>That’s it folks, hope you found some of this useful!</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/a-better-package-json-for-the-frontend#the-full-monty\"><i></i><span>LINK</span></a></span>THE FULL MONTY</h3><p>I’ll include the full&nbsp;<kbd>package.json</kbd>&nbsp;used for this web­site here, to help you get a&nbsp;bet­ter idea how things work under the&nbsp;hood:</p></div></div><div><div><section><div><pre><code><span>{</span>\n    <span>\"name\"</span><span>:</span> <span>\"nystudio107\"</span><span>,</span>\n    <span>\"version\"</span><span>:</span> <span>\"1.0.0\"</span><span>,</span>\n    <span>\"description\"</span><span>:</span> <span>\"Website for nystudio107.com\"</span><span>,</span>\n    <span>\"main\"</span><span>:</span> <span>\"gulpfile.js\"</span><span>,</span>\n    <span>\"author\"</span><span>:</span> <span>\"Andrew Welch, nystudio107 &lt;andrew@nystudio107.com&gt;\"</span><span>,</span>\n    <span>\"copyright\"</span><span>:</span> <span>\"nystudio107\"</span><span>,</span>\n    <span>\"license\"</span><span>:</span> <span>\"UNLICENSED\"</span><span>,</span>\n    <span>\"private\"</span><span>:</span> <span>true</span><span>,</span>\n    <span>\"paths\"</span><span>:</span> <span>{</span>\n        <span>\"src\"</span><span>:</span> <span>{</span>\n            <span>\"base\"</span><span>:</span> <span>\"./src/\"</span><span>,</span>\n            <span>\"css\"</span><span>:</span> <span>\"./src/css/\"</span><span>,</span>\n            <span>\"fontello\"</span><span>:</span> <span>\"./src/fontello/\"</span><span>,</span>\n            <span>\"fonts\"</span><span>:</span> <span>\"./src/fonts/\"</span><span>,</span>\n            <span>\"json\"</span><span>:</span> <span>\"./src/json/\"</span><span>,</span>\n            <span>\"js\"</span><span>:</span> <span>\"./src/js/\"</span><span>,</span>\n            <span>\"img\"</span><span>:</span> <span>\"./src/img/\"</span><span>,</span>\n            <span>\"scss\"</span><span>:</span> <span>\"./src/scss/\"</span>\n        <span>}</span><span>,</span>\n        <span>\"dist\"</span><span>:</span> <span>{</span>\n            <span>\"base\"</span><span>:</span> <span>\"./public/\"</span><span>,</span>\n            <span>\"css\"</span><span>:</span> <span>\"./public/css/\"</span><span>,</span>\n            <span>\"js\"</span><span>:</span> <span>\"./public/js/\"</span><span>,</span>\n            <span>\"fonts\"</span><span>:</span> <span>\"./public/fonts/\"</span><span>,</span>\n            <span>\"img\"</span><span>:</span> <span>\"./public/img/\"</span>\n        <span>}</span><span>,</span>\n        <span>\"build\"</span><span>:</span> <span>{</span>\n            <span>\"base\"</span><span>:</span> <span>\"./build/\"</span><span>,</span>\n            <span>\"css\"</span><span>:</span> <span>\"./build/css/\"</span><span>,</span>\n            <span>\"fontello\"</span><span>:</span> <span>\"./build/fonts/fontello/\"</span><span>,</span>\n            <span>\"fonts\"</span><span>:</span> <span>\"./build/fonts/\"</span><span>,</span>\n            <span>\"js\"</span><span>:</span> <span>\"./build/js/\"</span><span>,</span>\n            <span>\"html\"</span><span>:</span> <span>\"./build/html/\"</span><span>,</span>\n            <span>\"img\"</span><span>:</span> <span>\"./build/img/\"</span>\n        <span>}</span><span>,</span>\n        <span>\"favicon\"</span><span>:</span> <span>{</span>\n            <span>\"src\"</span><span>:</span> <span>\"./src/img/favicon_src.png\"</span><span>,</span>\n            <span>\"dest\"</span><span>:</span> <span>\"./public/img/site/\"</span><span>,</span>\n            <span>\"path\"</span><span>:</span> <span>\"/img/site/\"</span>\n        <span>}</span><span>,</span>\n        <span>\"scss\"</span><span>:</span> <span>[</span><span>]</span><span>,</span>\n        <span>\"templates\"</span><span>:</span> <span>\"./craft/templates/\"</span>\n    <span>}</span><span>,</span>\n    <span>\"urls\"</span><span>:</span> <span>{</span>\n        <span>\"live\"</span><span>:</span> <span>\"https://nystudio107.com/\"</span><span>,</span>\n        <span>\"local\"</span><span>:</span> <span>\"https://nystudio107.dev/\"</span><span>,</span>\n        <span>\"critical\"</span><span>:</span> <span>\"https://nystudio107.com/\"</span>\n    <span>}</span><span>,</span>\n    <span>\"vars\"</span><span>:</span> <span>{</span>\n        <span>\"siteCssName\"</span><span>:</span> <span>\"site.combined.min.css\"</span><span>,</span>\n        <span>\"scssName\"</span><span>:</span> <span>\"style.scss\"</span><span>,</span>\n        <span>\"cssName\"</span><span>:</span> <span>\"style.css\"</span>\n    <span>}</span><span>,</span>\n    <span>\"globs\"</span><span>:</span> <span>{</span>\n        <span>\"distCss\"</span><span>:</span> <span>[</span>\n            <span>\"./node_modules/normalize.css/normalize.css\"</span><span>,</span>\n            <span>\"./node_modules/flexboxgrid/dist/flexboxgrid.min.css\"</span><span>,</span>\n            <span>\"./node_modules/vue2-autocomplete/dist/style/vue2-autocomplete.css\"</span><span>,</span>\n            <span>\"./src/css/prism-theme.css\"</span><span>,</span>\n            <span>\"./build/fonts/fontello/css/fontello-codes.css\"</span><span>,</span>\n            <span>\"./build/css/*.css\"</span><span>,</span>\n            <span>\"./src/css/*.css\"</span>\n        <span>]</span><span>,</span>\n        <span>\"img\"</span><span>:</span> <span>[</span>\n            <span>\"./public/img/\"</span>\n        <span>]</span><span>,</span>\n        <span>\"components\"</span><span>:</span> <span>[</span>\n            <span>\"./src/components/**/*.vue\"</span>\n        <span>]</span><span>,</span>\n        <span>\"fonts\"</span><span>:</span> <span>[</span>\n            <span>\"./build/fonts/fontello/font/*.{eot,ttf,woff,woff2}\"</span><span>,</span>\n            <span>\"./src/fonts/*.{eot,ttf,woff,woff2}\"</span>\n        <span>]</span><span>,</span>\n        <span>\"critical\"</span><span>:</span> <span>[</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"\"</span><span>,</span>\n                <span>\"template\"</span><span>:</span> <span>\"index\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"blog/stop-using-htaccess-files-no-really\"</span><span>,</span>\n                <span>\"template\"</span><span>:</span> <span>\"blog/_entry\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"blog/stop-using-htaccess-files-no-really\"</span><span>,</span>\n                <span>\"template\"</span><span>:</span> <span>\"blog/_amp_entry\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"blog\"</span><span>,</span>\n                <span>\"template\"</span><span>:</span> <span>\"blog/index\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"blog\"</span><span>,</span>\n                <span>\"template\"</span><span>:</span> <span>\"blog/amp_index\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"offline\"</span><span>,</span>\n                <span>\"template\"</span><span>:</span> <span>\"offline\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"wordpress\"</span><span>,</span>\n                <span>\"template\"</span><span>:</span> <span>\"wordpress\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"404\"</span><span>,</span>\n                <span>\"template\"</span><span>:</span> <span>\"404\"</span>\n            <span>}</span>\n        <span>]</span><span>,</span>\n        <span>\"download\"</span><span>:</span> <span>[</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"https://www.google-analytics.com/analytics.js\"</span><span>,</span>\n                <span>\"dest\"</span><span>:</span> <span>\"./public/js/\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"https://static.small.chat/messenger.css\"</span><span>,</span>\n                <span>\"dest\"</span><span>:</span> <span>\"./public/css/\"</span>\n            <span>}</span><span>,</span>\n            <span>{</span>\n                <span>\"url\"</span><span>:</span> <span>\"https://static.small.chat/messenger.js\"</span><span>,</span>\n                <span>\"dest\"</span><span>:</span> <span>\"./public/js/\"</span>\n            <span>}</span>\n        <span>]</span><span>,</span>\n        <span>\"distJs\"</span><span>:</span> <span>[</span>\n            <span>\"./build/js/*.js\"</span><span>,</span>\n            <span>\"./node_modules/lazysizes/lazysizes.min.js\"</span><span>,</span>\n            <span>\"./node_modules/lazysizes/plugins/bgset/ls.bgset.min.js\"</span><span>,</span>\n            <span>\"./node_modules/picturefill/dist/picturefill.min.js\"</span><span>,</span>\n            <span>\"./node_modules/vue/dist/vue.min.js\"</span><span>,</span>\n            <span>\"./node_modules/vue2-autocomplete/dist/vue2-autocomplete.js\"</span><span>,</span>\n            <span>\"./node_modules/vue-resource/dist/vue-resource.min.js\"</span>\n        <span>]</span><span>,</span>\n        <span>\"prismJs\"</span><span>:</span> <span>[</span>\n            <span>\"./node_modules/prismjs/prism.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/components/prism-markup.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/components/prism-apacheconf.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/components/prism-css.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/components/prism-json.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/components/prism-twig.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/components/prism-php.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/components/prism-bash.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/components/prism-javascript.js\"</span><span>,</span>\n            <span>\"./node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.js\"</span>\n        <span>]</span><span>,</span>\n        <span>\"babelJs\"</span><span>:</span> <span>[</span>\n            <span>\"./src/js/*.js\"</span>\n        <span>]</span><span>,</span>\n        <span>\"inlineJs\"</span><span>:</span> <span>[</span>\n            <span>\"./node_modules/fg-loadcss/src/loadCSS.js\"</span><span>,</span>\n            <span>\"./node_modules/fg-loadcss/src/cssrelpreload.js\"</span><span>,</span>\n            <span>\"./node_modules/fontfaceobserver/fontfaceobserver.js\"</span><span>,</span>\n            <span>\"./node_modules/loadjs/dist/loadjs.min.js\"</span><span>,</span>\n            <span>\"./node_modules/tiny-cookie/tiny-cookie.min.js\"</span><span>,</span>\n            <span>\"./src/js/register-service-worker.js\"</span><span>,</span>\n            <span>\"./src/js/asyncload-blog-fonts.js\"</span><span>,</span>\n            <span>\"./src/js/asyncload-site-fonts.js\"</span>\n        <span>]</span><span>,</span>\n        <span>\"siteIcon\"</span><span>:</span> <span>\"./public/img/site/favicon.*\"</span>\n    <span>}</span><span>,</span>\n    <span>\"dependencies\"</span><span>:</span> <span>{</span>\n        <span>\"fg-loadcss\"</span><span>:</span> <span>\"^1.2.0\"</span><span>,</span>\n        <span>\"flexboxgrid\"</span><span>:</span> <span>\"^6.3.1\"</span><span>,</span>\n        <span>\"fontfaceobserver\"</span><span>:</span> <span>\"^2.0.5\"</span><span>,</span>\n        <span>\"lazysizes\"</span><span>:</span> <span>\"^2.0.6\"</span><span>,</span>\n        <span>\"loadjs\"</span><span>:</span> <span>\"^3.3.1\"</span><span>,</span>\n        <span>\"normalize.css\"</span><span>:</span> <span>\"^5.0.0\"</span><span>,</span>\n        <span>\"picturefill\"</span><span>:</span> <span>\"^3.0.2\"</span><span>,</span>\n        <span>\"prismjs\"</span><span>:</span> <span>\"^1.5.1\"</span><span>,</span>\n        <span>\"tiny-cookie\"</span><span>:</span> <span>\"^1.0.1\"</span><span>,</span>\n        <span>\"vue\"</span><span>:</span> <span>\"^2.2.0\"</span><span>,</span>\n        <span>\"vue-resource\"</span><span>:</span> <span>\"^1.0.3\"</span><span>,</span>\n        <span>\"vue2-autocomplete\"</span><span>:</span> <span>\"git://github.com/nystudio107/vue2-autocomplete.git#master\"</span>\n    <span>}</span><span>,</span>\n    <span>\"devDependencies\"</span><span>:</span> <span>{</span>\n        <span>\"babel-plugin-transform-runtime\"</span><span>:</span> <span>\"^6.15.0\"</span><span>,</span>\n        <span>\"babel-preset-es2015\"</span><span>:</span> <span>\"^6.16.0\"</span><span>,</span>\n        <span>\"chalk\"</span><span>:</span> <span>\"^1.1.3\"</span><span>,</span>\n        <span>\"critical\"</span><span>:</span> <span>\"^1.1.0\"</span><span>,</span>\n        <span>\"fancy-log\"</span><span>:</span> <span>\"^1.2.0\"</span><span>,</span>\n        <span>\"git-rev-sync\"</span><span>:</span> <span>\"^1.7.1\"</span><span>,</span>\n        <span>\"gulp\"</span><span>:</span> <span>\"^3.9.0\"</span><span>,</span>\n        <span>\"gulp-autoprefixer\"</span><span>:</span> <span>\"^3.1.0\"</span><span>,</span>\n        <span>\"gulp-babel\"</span><span>:</span> <span>\"^6.1.2\"</span><span>,</span>\n        <span>\"gulp-cached\"</span><span>:</span> <span>\"^1.1.1\"</span><span>,</span>\n        <span>\"gulp-concat\"</span><span>:</span> <span>\"^2.6.0\"</span><span>,</span>\n        <span>\"gulp-cssnano\"</span><span>:</span> <span>\"^2.1.2\"</span><span>,</span>\n        <span>\"gulp-debug\"</span><span>:</span> <span>\"^2.1.2\"</span><span>,</span>\n        <span>\"gulp-download\"</span><span>:</span> <span>\"^0.0.1\"</span><span>,</span>\n        <span>\"gulp-favicons\"</span><span>:</span> <span>\"^2.2.6\"</span><span>,</span>\n        <span>\"gulp-filter\"</span><span>:</span> <span>\"^5.0.1\"</span><span>,</span>\n        <span>\"gulp-fontello\"</span><span>:</span> <span>\"^0.4.6\"</span><span>,</span>\n        <span>\"gulp-header\"</span><span>:</span> <span>\"^1.8.7\"</span><span>,</span>\n        <span>\"gulp-if\"</span><span>:</span> <span>\"^2.0.1\"</span><span>,</span>\n        <span>\"gulp-imagemin\"</span><span>:</span> <span>\"^3.1.1\"</span><span>,</span>\n        <span>\"gulp-livereload\"</span><span>:</span> <span>\"^3.8.1\"</span><span>,</span>\n        <span>\"gulp-load-plugins\"</span><span>:</span> <span>\"^1.3.0\"</span><span>,</span>\n        <span>\"gulp-newer\"</span><span>:</span> <span>\"^1.2.0\"</span><span>,</span>\n        <span>\"gulp-plumber\"</span><span>:</span> <span>\"^1.1.0\"</span><span>,</span>\n        <span>\"gulp-print\"</span><span>:</span> <span>\"^2.0.1\"</span><span>,</span>\n        <span>\"gulp-rename\"</span><span>:</span> <span>\"^1.2.2\"</span><span>,</span>\n        <span>\"gulp-replace\"</span><span>:</span> <span>\"0.5.4\"</span><span>,</span>\n        <span>\"gulp-rev\"</span><span>:</span> <span>\"^7.1.0\"</span><span>,</span>\n        <span>\"gulp-sass\"</span><span>:</span> <span>\"^2.1.0\"</span><span>,</span>\n        <span>\"gulp-size\"</span><span>:</span> <span>\"^2.1.0\"</span><span>,</span>\n        <span>\"gulp-sourcemaps\"</span><span>:</span> <span>\"^2.2.1\"</span><span>,</span>\n        <span>\"gulp-streamify\"</span><span>:</span> <span>\"1.0.2\"</span><span>,</span>\n        <span>\"gulp-uglify\"</span><span>:</span> <span>\"^1.5.4\"</span><span>,</span>\n        <span>\"moment\"</span><span>:</span> <span>\"^2.14.1\"</span><span>,</span>\n        <span>\"pa11y\"</span><span>:</span> <span>\"^4.11.0\"</span><span>,</span>\n        <span>\"vinyl-source-stream\"</span><span>:</span> <span>\"^1.1.0\"</span><span>,</span>\n        <span>\"vueify\"</span><span>:</span> <span>\"^8.7.0\"</span>\n    <span>}</span><span>,</span>\n    <span>\"scripts\"</span><span>:</span> <span>{</span>\n        <span>\"start\"</span><span>:</span> <span>\"gulp\"</span><span>,</span>\n        <span>\"build\"</span><span>:</span> <span>\"gulp build\"</span>\n    <span>}</span><span>,</span>\n    <span>\"repository\"</span><span>:</span> <span>{</span>\n        <span>\"type\"</span><span>:</span> <span>\"git\"</span><span>,</span>\n        <span>\"url\"</span><span>:</span> <span>\"git@codewhore.com:nystudio107.git\"</span>\n    <span>}</span><span>,</span>\n    <span>\"bugs\"</span><span>:</span> <span>{</span>\n        <span>\"email\"</span><span>:</span> <span>\"andrew@nystudio107.com\"</span>\n    <span>}</span>\n<span>}</span></code></pre><aside><h5><i></i>&nbsp;nystudio107.com package.json</h5></aside></div></section></div></div><aside><div><div><h3>FURTHER READING</h3><ul><li><a href=\"https://nystudio107.com/blog/a-gulp-workflow-for-frontend-development-automation\">A Gulp Workflow for Frontend Development Automation</a></li><li><a href=\"https://nystudio107.com/blog/image-optimization-project-results\">Post-Mortem: Applied Image Optimization</a></li><li><a href=\"https://nystudio107.com/blog/an-annotated-webpack-4-config-for-frontend-web-development\">An Annotated webpack 4 Config for Frontend Web Development</a></li></ul></div></div></aside>","filePath":"pages/NPM/.md","_id":"hmtwJy1n9cN8p5Md"}
{"date":{"$$date":1542370302377},"title":"A Guide to Custom Elements for React Developers","sourceUrl":"https://css-tricks.com/a-guide-to-custom-elements-for-react-developers/","path":"JavaScript/JavaScript/JavaScript/JavaScript/JavaScript/JavaScript/JavaScript/JavaScript/","category":"JavaScript","tags":["React"," Web Components"," Custom HTML Elements"],"author":"CHARLES PETERS","excerpt":"","dateCreated":1542367747071,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Fri Nov 16 2018 17:18:39 GMT+0530 (India Standard Time)'\ntitle: 'A Guide to Custom Elements for React Developers'\ntags: ['React','Web Components','Custom HTML Elements']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://css-tricks.com/a-guide-to-custom-elements-for-react-developers/'\ntype: 'Post'\n---\n    ","htmlCode":"<p>I had to build a UI recently and (for the first time in a long while) I didn't have the option of using React.js, which is my preferred solution for UI these days. So, I looked at what the built-in browser APIs had to offer and saw that using <a href=\"https://css-tricks.com/modular-future-web-components/\">custom elements</a> (<abbr title=\"also known as\">aka</abbr> Web Components) may just be the remedy that this React developer needed.</p>\n<p>Custom elements can offer the same general benefits of React components without being tied to a specific framework implementation. A custom element gives us a new HTML tag that we can programmatically control through a native browser API.</p>\n<p><span></span></p>\n<p>Let's talk about the benefits of component-based UI:</p>\n<ul>\n<li><strong>Encapsulation</strong> - concerns scoped to that component remain in that component's implementation</li>\n<li><strong>Reusability</strong> - when the UI is separated into more generic pieces, they're easier to break into patterns that you're more likely to repeat</li>\n<li><strong>Isolation</strong> - because components are designed to be encapsulated and with that, you get the added benefit of isolation, which allows you scope bugs and changes to a particular part of your application easier</li>\n</ul>\n<h3>Use cases</h3>\n<p>You might be wondering who is using custom elements in production. Notably:</p>\n<ul>\n<li><a href=\"https://githubengineering.com/removing-jquery-from-github-frontend/#custom-elements\">GitHub</a> is using custom elements for their modal dialogs, autocomplete and display time.</li>\n<li>YouTube's <a href=\"https://youtube.googleblog.com/2017/05/a-sneak-peek-at-youtubes-new-look-and.html\">new web app</a> is built with <a href=\"https://www.polymer-project.org/\">Polymer</a> and web components.</li>\n</ul>\n<h3>Similarities to the Component API</h3>\n<p>When trying to compare React Components versus custom elements, I found the APIs really similar:</p>\n<ul>\n<li>They're both classes that aren't \"new\" and are able that extend a base class</li>\n<li>They both inherit a mounting or rendering lifecycle</li>\n<li>They both take static or dynamic input via props or attributes</li>\n</ul>\n<h3>Demo</h3>\n<p>So, let's build a tiny application that lists details about a GitHub repository.</p>\n<figure><img src=\"https://css-tricks.com/wp-content/uploads/2018/10/screenshot-demo.png\" srcset=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1540488956/screenshot-demo_md6o3w.png 1000w, https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_713,f_auto,q_auto/v1540488956/screenshot-demo_md6o3w.png 713w, https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_200,f_auto,q_auto/v1540488956/screenshot-demo_md6o3w.png 200w\" sizes=\"(min-width: 1850px) calc( (100vw - 555px) / 3 )\n       (min-width: 1251px) calc( (100vw - 530px) / 2 )\n       (min-width: 1086px) calc(100vw - 480px)\n       (min-width: 626px)  calc(100vw - 335px)\n                           calc(100vw - 30px)\" alt=\"Screenshot of end result\"></figure>\n<p>If I were going to approach this with React, I would define a simple component like this:</p>\n<pre rel=\"JavaScript\"><code>&lt;Repository name=\"charliewilco/obsidian\" /&gt;</code></pre>\n<p>This component takes a single prop — the name of the repository — and we implement it like this:</p>\n<pre rel=\"JavaScript\"><code>class Repository extends React.Component {\n  state = {\n    repo: null\n  };\n\n  async getDetails(name) {\n    return await fetch(`https://api.github.com/repos/${name}`, {\n      mode: 'cors'\n    }).then(res =&gt; res.json());\n  }\n\n  async componentDidMount() {\n    const { name } = this.props;\n    const repo = await this.getDetails(name);\n    this.setState({ repo });\n  }\n\n  render() {\n    const { repo } = this.state;\n\n    if (!repo) {\n      return &lt;h1&gt;Loading&lt;/h1&gt;;\n    }\n\n    if (repo.message) {\n      return &lt;div className=\"Card Card--error\"&gt;Error: {repo.message}&lt;/div&gt;;\n    }\n\n    return (\n      &lt;div class=\"Card\"&gt;\n        &lt;aside&gt;\n          &lt;img\n            width=\"48\"\n            height=\"48\"\n            class=\"Avatar\"\n            src={repo.owner.avatar_url}\n            alt=\"Profile picture for ${repo.owner.login}\"\n          /&gt;\n        &lt;/aside&gt;\n        &lt;header&gt;\n          &lt;h2 class=\"Card__title\"&gt;{repo.full_name}&lt;/h2&gt;\n          &lt;span class=\"Card__meta\"&gt;{repo.description}&lt;/span&gt;\n        &lt;/header&gt;\n      &lt;/div&gt;\n    );\n  }\n}</code></pre>\n<p data-height=\"525\" data-theme-id=\"1\" data-slug-hash=\"jeVMvK\" data-default-tab=\"result\" data-user=\"charliewilco\" data-pen-title=\"React Demo - GitHub\">See the Pen <a href=\"https://codepen.io/charliewilco/pen/jeVMvK/\">React Demo - GitHub</a> by Charles (<a href=\"https://codepen.io/charliewilco\">@charliewilco</a>) on <a href=\"https://codepen.io\">CodePen</a>.</p>\n<p>To break this down further, we have a component that has its own state, which is the repo details. Initially, we set it to be <code>null</code> because we don't have any of that data yet, so we'll have a loading indicator while the data is fetched. </p>\n<p>During the React lifecycle, we'll use fetch to go get the data from GitHub, set up the card, and trigger a re-render with <code>setState()</code> after we get the data back. All of these different states the UI takes are represented in the <code>render()</code> method.</p>\n<h3>Defining / Using a Custom Element</h3>\n<p>Doing this with custom elements is a little different. Like the React component, our custom element will take a single attribute — again, the name of the repository — and manage its own state.</p>\n<p>Our element will look like this:</p>\n<pre rel=\"JavaScript\"><code>&lt;github-repo name=\"charliewilco/obsidian\"&gt;&lt;/github-repo&gt;\n&lt;github-repo name=\"charliewilco/level.css\"&gt;&lt;/github-repo&gt;\n&lt;github-repo name=\"charliewilco/react-branches\"&gt;&lt;/github-repo&gt;\n&lt;github-repo name=\"charliewilco/react-gluejar\"&gt;&lt;/github-repo&gt;\n&lt;github-repo name=\"charliewilco/dotfiles\"&gt;&lt;/github-repo&gt;</code></pre>\n<p data-height=\"500\" data-theme-id=\"1\" data-slug-hash=\"MPbeBv\" data-default-tab=\"html,result\" data-user=\"charliewilco\" data-pen-title=\"Custom Elements Demo - GitHub\">See the Pen <a href=\"https://codepen.io/charliewilco/pen/MPbeBv/\">Custom Elements Demo - GitHub</a> by Charles (<a href=\"https://codepen.io/charliewilco\">@charliewilco</a>) on <a href=\"https://codepen.io\">CodePen</a>.</p>\n<p>To start, all we need to do to define and register a custom element is create a class that extends the <code>HTMLElement</code> class and then register the name of the element with <code>customElements.define()</code>.</p>\n<pre rel=\"JavaScript\"><code>class OurCustomElement extends HTMLElement {}\nwindow.customElements.define('our-element', OurCustomElement);</code></pre>\n<p>And we can call it:</p>\n<pre rel=\"JavaScript\"><code>&lt;our-element&gt;&lt;/our-element&gt;</code></pre>\n<p>This new element isn't very useful, but with custom elements, we get three methods to expand the functionality of this element. These are almost analogous to React’s <a href=\"https://reactjs.org/docs/state-and-lifecycle.html#adding-lifecycle-methods-to-a-class\">lifecycle methods</a> for their Component API. The two lifecycle-like methods most relevant to us are the <code>disconnectedCallBack</code> and the <code>connectedCallback</code> and since this is a class, it comes with a constructor.</p>\n<table>\n<thead>\n<tr><th>Name</th>\n<th>Called when</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>constructor</code></td>\n<td>An instance of the element is created or upgraded. Useful for initializing state, settings up event listeners, or creating Shadow DOM. See the spec for restrictions on what you can do in the <code>constructor</code>.</td>\n</tr>\n<tr>\n<td><code>connectedCallback</code></td>\n<td>The element is inserted into the DOM. Useful for running setup code, such as fetching resources or rendering UI. Generally, you should try to delay work until this time</td>\n</tr>\n<tr>\n<td><code>disconnectedCallback</code></td>\n<td>\nWhen the element is removed from the DOM. Useful for running clean-up code.\n</td>\n</tr>\n</tbody>\n</table>\n<p>To implement our custom element, we'll create the class and set up some attributes related to that UI:</p>\n<pre rel=\"JavaScript\"><code>class Repository extends HTMLElement {\n  constructor() {\n    super();\n\n    this.repoDetails = null;\n\n    this.name = this.getAttribute(\"name\");\n    this.endpoint = `https://api.github.com/repos/${this.name}`    \n    this.innerHTML = `&lt;h1&gt;Loading&lt;/h1&gt;`\n  }\n}</code></pre>\n<p>By calling <code>super()</code> in our constructor, the context of this is the element itself and all the DOM manipulation APIs can be used. So far, we've set the default repository details to <code>null</code>, gotten the repo name from element's attribute, created an endpoint to call so we don't have to define it later and, most importantly, set the initial HTML to be a loading indicator.</p>\n<p>In order to get the details about that element’s repository, we’re going to need to make a request to GitHub’s API. We’ll use <code>fetch</code> and, <a href=\"https://css-tricks.com/using-data-in-react-with-the-fetch-api-and-axios/\">since that's Promise-based</a>, we'll use <code>async</code> and <code>await</code> to make our code more readable. You can learn more about the <code>async</code>/<code>await</code> keywords <a href=\"https://davidwalsh.name/async-await\">here</a> and more about the browser's fetch API <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\">here</a>. You can also <a href=\"https://twitter.com/charlespeters\">tweet at me</a> to find out whether I prefer it to the <a href=\"https://www.axios.com/\">Axios</a> library. (Hint, it depends if I had tea or coffee with my breakfast.)</p>\n<p>Now, let's add a method to this class to ask GitHub for details about the repository.</p>\n<pre rel=\"JavaScript\"><code>class Repository extends HTMLElement {\n  constructor() {\n    // ...\n  }\n\n  async getDetails() {\n    return await fetch(this.endpoint, { mode: \"cors\" }).then(res =&gt; res.json());\n  }\n}</code></pre>\n<p>Next, let's use the <code>connectedCallback</code> method and the Shadow DOM to use the return value from this method. Using this method will do something similar as when we called <code>Repository.componentDidMount()</code> in the React example. Instead, we'll override the <code>null</code> value we initially gave <code>this.repoDetails</code> — we'll use this later when we start to call the template to create the HTML.</p>\n<pre rel=\"JavaScript\"><code>class Repository extends HTMLElement {\n  constructor() {\n    // ...\n  }\n\n  async getDetails() {\n    // ...\n  }\n\n  async connectedCallback() {\n    let repo = await this.getDetails();\n    this.repoDetails = repo;\n    this.initShadowDOM();\n  }\n\n  initShadowDOM() {\n    let shadowRoot = this.attachShadow({ mode: \"open\" });\n    shadowRoot.innerHTML = this.template;\n  }\n}</code></pre>\n<p>You'll notice that we're calling methods related to the Shadow DOM. Besides being a rejected title for a Marvel movie, the Shadow DOM has its own <a href=\"https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM\">rich API</a> worth looking into. For our purposes, though, it's going to abstract the implementation of adding <code>innerHTML</code> to the element.</p>\n<p>Now we're assigning the <code>innerHTML</code> to be equal to the value of <code>this.template</code>. Let's define that now:</p>\n<pre rel=\"JavaScript\"><code>class Repository extends HTMLElement {\n  get template() {\n    const repo = this.repoDetails;\n  \n    // if we get an error message let's show that back to the user\n    if (repo.message) {\n      return `&lt;div class=\"Card Card--error\"&gt;Error: ${repo.message}&lt;/div&gt;`\n    } else {\n      return `\n      &lt;div class=\"Card\"&gt;\n        &lt;aside&gt;\n          &lt;img width=\"48\" height=\"48\" class=\"Avatar\" src=\"${repo.owner.avatar_url}\" alt=\"Profile picture for ${repo.owner.login}\" /&gt;\n        &lt;/aside&gt;\n        &lt;header&gt;\n          &lt;h2 class=\"Card__title\"&gt;${repo.full_name}&lt;/h2&gt;\n          &lt;span class=\"Card__meta\"&gt;${repo.description}&lt;/span&gt;\n        &lt;/header&gt;\n      &lt;/div&gt;\n      `\n    }\n  }\n}</code></pre>\n<p>That's pretty much it. We've defined a custom element that manages its own state, fetches its own data, and reflects that state back to the user while giving us an HTML element to use in our application.</p>\n<p>After going through this exercise, I found that the only required dependency for custom elements is the browser's native APIs rather than a framework to additionally parse and execute. This makes for a more portable and reusable solution with similar APIs to the frameworks you already love and use to make your living.</p>\n<p>There are drawbacks of using this approach, of course. We're talking about various browser support issues and some lack of consistency. Plus, working with DOM manipulation APIs can be very confusing. Sometimes they are assignments. Sometimes they are functions. Sometimes those functions take a callback and sometimes they don't. If you don't believe me, take a look at adding a class to an HTML element created via <code>document.createElement()</code>, which is one of the top five reasons to use React. The basic implementation isn’t that complicated but it is inconsistent with other similar <code>document</code> methods.</p>\n<p>The real question is: does it even out in the wash? Maybe. React is still pretty good at the things it's designed to be very very good at: the virtual DOM, managing application state, encapsulation, and passing data down the tree. There's next to no incentive to use custom elements inside that framework. Custom elements, on the other hand, are simply available by virtue of building an application for the browser.</p>\n\n<h2>React Component Example</h2>\n<pre><code>\n// HTML Code\n// ===========================\n&lt;div id=\"root\"&gt;\n\n// JavaScript\nfunction App() {\n  return (\n    &lt;div className=\"App Wrapper\"&gt;\n      &lt;Repository name=\"charliewilco/obsidian\" /&gt;\n      &lt;Repository name=\"charliewilco/level.css\" /&gt;\n      &lt;Repository name=\"charliewilco/react-branches\" /&gt;\n      &lt;Repository name=\"charliewilco/dotfiles\" /&gt;\n      &lt;Repository name=\"charliewilco/react-gluejar\" /&gt;\n    &lt;/div&gt;\n  );\n}\n\nclass Repository extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: null\n    };\n  }\n\n  getDetails(name) {\n    return fetch(`https://api.github.com/repos/${name}`, {\n      mode: \"cors\"\n    }).then(res =&gt; res.json());\n  }\n\n  componentDidMount() {\n    const { name } = this.props;\n    this.getDetails(name).then(repo =&gt; this.setState({ repo }));\n  }\n\n  render() {\n    const { repo } = this.state;\n\n    if (!repo) {\n      return &lt;h1&gt;Loading&lt;/h1&gt;;\n    }\n\n    if (repo.message) {\n      return &lt;div className=\"Card Card--error\"&gt;{repo.message}&lt;/div&gt;;\n    }\n    return (\n      &lt;div class=\"Card\"&gt;\n        &lt;aside&gt;\n          &lt;img\n            width=\"48\"\n            height=\"48\"\n            class=\"Avatar\"\n            src={repo.owner.avatar_url}\n            alt=\"Profile picture for ${repo.owner.login}\"\n          /&gt;\n        &lt;/aside&gt;\n        &lt;header&gt;\n          &lt;h2 class=\"Card__title\"&gt;{repo.full_name}&lt;/h2&gt;\n          &lt;span class=\"Card__meta\"&gt;{repo.description}&lt;/span&gt;\n        &lt;/header&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(&lt;App /&gt;, rootElement);\n</code></pre>\n\n<h2>Web Component Example</h2>\n<pre><code>\n// HTML Code\n// ===========================\n&lt;div class='Wrapper'&gt;\n  &lt;github-repo name=\"charliewilco/obsidian\"&gt;&lt;/github-repo&gt;\n  &lt;github-repo name=\"charliewilco/level.css\"&gt;&lt;/github-repo&gt;\n  &lt;github-repo name=\"charliewilco/react-branches\"&gt;&lt;/github-repo&gt;\n  &lt;github-repo name=\"charliewilco/react-gluejar\"&gt;&lt;/github-repo&gt;\n  &lt;github-repo name=\"charliewilco/dotfiles\"&gt;&lt;/github-repo&gt;\n&lt;/div&gt;\n\n// JavaScript\nclass Repository extends HTMLElement {\n  constructor() {\n    super();\n\n    this.repoDetails = null;\n\n    this.name = this.getAttribute(\"name\");\n    this.endpoint = `https://api.github.com/repos/${this.name}`;\n    this.getDetails = this.getDetails.bind(this);\n\n    this.innerHTML = `&lt;h1&gt;Loading&lt;/h1&gt;`;\n  }\n\n  async connectedCallback() {\n    let repo = await this.getDetails();\n    this.repoDetails = repo;\n    this.initShadowDom();\n  }\n\n  initShadowDom() {\n    let shadowRoot = this.attachShadow({ mode: \"open\" });\n    shadowRoot.innerHTML = this.template;\n  }\n\n  get style() {\n    return `\n      &lt;style&gt;\n        *,\n        *::before,\n        *::after {\n          box-sizing: border-box;\n          margin: 0;\n          padding: 0;\n          font-family: system-ui;\n        }\n\n        .Card {\n          margin: 0 0 8px;\n          padding: 16px;\n          border: 1px solid #c5c5c5;\n        }\n\n        .Card::after {\n          content: \"\";\n          clear: both;\n          display: table;\n        }\n\n        .Card aside {\n          float: left;\n        }\n\n        .Card header {\n          float: left;\n        }\n\n        .Card__title {\n          margin-bottom: 4px;\n          font-weight: 400;\n          font-size: 16px;\n        }\n\n        .Card__meta {\n          color: #4F4F4F;\n          font-size: 12px;\n        }\n\n        .Card--error {\n          background: #D23923;\n          color: white;\n          font-weight: 700;\n          border: 0;\n        }\n\n        .Avatar {\n          display: block;\n          margin-right: 16px;\n          border-radius: 50%;\n        }\n      &lt;/style&gt;\n    `;\n  }\n\n  get template() {\n    let repo = this.repoDetails;\n\n    if (repo.message) {\n      return this.style + this.cardError(repo);\n    } else {\n      return this.style + this.cardTemplate(repo);\n    }\n  }\n\n  async getDetails() {\n    return await fetch(this.endpoint, { mode: \"cors\" }).then(res =&gt; res.json());\n  }\n\n  cardError({ message }) {\n    return `&lt;div class=\"Card Card--error\"&gt;Error: ${message}&lt;/div&gt;`;\n  }\n\n  cardTemplate({ owner, full_name, description }) {\n    return `\n      &lt;div class=\"Card\"&gt;\n        &lt;aside&gt;\n          &lt;img width=\"48\" height=\"48\" class=\"Avatar\" src=\"${\n            owner.avatar_url\n          }\" alt=\"Profile picture for ${owner.login}\" /&gt;\n        &lt;/aside&gt;\n        &lt;header&gt;\n          &lt;h2 class=\"Card__title\"&gt;${full_name}&lt;/h2&gt;\n          &lt;span class=\"Card__meta\"&gt;${description}&lt;/span&gt;\n        &lt;/header&gt;\n      &lt;/div&gt;\n    `;\n  }\n}\n\nwindow.customElements.define(\"github-repo\", Repository);\n</code></pre>\n\n<h3>Learn more</h3>\n<ul>\n<li><a href=\"https://developers.google.com/web/fundamentals/web-components/customelements\">Custom Elements v1: Reusable Web Components</a></li>\n<li><a href=\"https://bendyworks.com/blog/native-web-components\">Make a Native Web Component with Custom Elements v1 and Shadow DOM v1</a></li>\n</ul>","filePath":"pages/JavaScript/.md","_id":"hoAxUdawNc5QZJgf","dateUpdated":1542370302377}
{"date":{"$$date":1542210284727},"title":"Angular Pipes: Integrated Unit Testing","sourceUrl":"https://www.amadousall.com/angular-pipes-integrated-unit-testing/","path":"Angular/","category":"Angular","tags":["Angular"," TDD"," Unit Testing"],"author":"Amadou Sall","excerpt":"In my previous blog post, we learned that there were two ways to unit test Angular pipes:","dateCreated":1542209950663,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Angular/'\ndate: 'Wed Nov 14 2018 21:13:12 GMT+0530 (India Standard Time)'\ntitle: 'Angular Pipes: Integrated Unit Testing'\ntags: ['Angular','TDD','Unit Testing']\ncategory: 'Angular'\ncategoryColor: '#F3C610'\nexcerpt: 'In my previous blog post, we learned that there were two ways to unit test Angular pipes:'\ncoverImage: ''\nsourceUrl: 'https://www.amadousall.com/angular-pipes-integrated-unit-testing/'\ntype: 'Post'\n---\n    ","htmlCode":"<ul><li>Isolated tests (without TestBed)</li><li>Integrated tests (with TestBed)</li></ul><p>But we put the focus on isolated tests. I this article, we are going to switch our focus on how to write integrated unit tests for Angular pipes.</p><p>We talk about integrated unit testing when we are testing the pipe in the same condition that it will be used at runtime. This means that we will test it when used inside an Angular component's template.</p><h2>The Pipe Under Test</h2><p>In case, you didn't read my previous blog post, here is the code of the pipe we are going to test. It is a simple pipe that transforms an array to its mean.</p><p><img src=\"https://www.amadousall.com/content/images/2018/02/mean.pipe.ts-1.png\" alt=\"The Mean Pipe\"></p><ol><li>Implement the&nbsp;<code>PipeTransform</code>&nbsp;interface.</li><li>Return the mean of the array of numbers.</li></ol><p>The full source code of this pipe can be found at the&nbsp;<a href=\"https://www.amadousall.com/angular-pipes-integrated-unit-testing/#listing\">end</a>&nbsp;of the article or&nbsp;<a href=\"https://gist.github.com/amadousalldotcom/9bcbbc5ee1745bf10c890a5c423bd477\">here</a>.</p><h2>We Need a Host Component</h2><p>Because we want to write integrated tests for our pipe, we need a component that hosts our pipe. A host component is like any other Angular component. There is nothing specific about it. It is just a way to use the pipe in an Angular component's template.</p><p>The code for the host component is straightforward:</p><p><img src=\"https://www.amadousall.com/content/images/2018/02/host-component.png\" alt=\"The Host Component for the Test\"></p><ol><li>Define property that holds the values to be passed to the pipe</li><li>Display the result of the transformation of those values through the pipe.</li></ol><h2>Setting Up the Integrated Tests!</h2><p><img src=\"https://www.amadousall.com/content/images/2018/02/tests-setup.png\" alt=\"Tests Setup\"></p><ol><li><code>TestBed.configureTestingModule</code>, as its name implies, allows us to create a specific Angular module for testing purposes. It accepts pretty much the same parameters as the&nbsp;<code>NgModule</code>&nbsp;decorator.</li><li>Notice that we wrap the body of our first&nbsp;<code>beforeEach</code>&nbsp;inside a special Angular zone. We do so by calling the&nbsp;<code>async</code>&nbsp;function, one of the many Angular testing utilities. We need this because&nbsp;<code>TestBet.compileComponents</code>&nbsp;is asynchronous. So this ensures that our component's template is compiled beforehand (although technically this is not necessary in this example because our template is inlined).</li><li>A&nbsp;<code>ComponentFixture</code>&nbsp;is a wrapper around our host component. It allows us to interact with the environment of our component like its change detection or its injector.</li><li>The fixture is returned by&nbsp;<code>TestBed.createComponent</code>.</li><li>From the fixture, we can get the&nbsp;<code>DebugElement</code>. The&nbsp;<code>DebugElement</code>&nbsp;is a wrapper around our component's HTML element. It provides more functionality than the native&nbsp;<code>HTMLElement</code>.</li><li>We can also get the real instance of our component from the fixture.</li></ol><p>We made sure that our fixture can be properly instantiated. Now we can start writing real expectations.</p><h2>The Actual Tests</h2><p><img src=\"https://www.amadousall.com/content/images/2018/02/tests.png\" alt=\"The Actual Tests\"></p><ol><li>We start by updating the&nbsp;<code>values</code>&nbsp;property of our component and we call&nbsp;<code>fixture.detectChanges</code>.&nbsp;<code>fixture.detectChanges</code>&nbsp;kicks off change detection for our component. It is necessary if we want our template to reflect the changes we made to the component class.</li><li>Next, we use&nbsp;<code>debugElement.query</code>&nbsp;passing it a predicate&nbsp;<code>By.css('div')</code>. This allows us to target the div element by using its CSS selector.</li><li>From there, we can get the native&nbsp;<code>HTMLDivElement</code>.</li><li>Then we can write our expectations.</li></ol><p>The full source code of this pipe can be found at the&nbsp;<a href=\"https://www.amadousall.com/angular-pipes-integrated-unit-testing/#listing\">end</a>&nbsp;of the article or&nbsp;<a href=\"https://gist.github.com/amadousalldotcom/bcb219ccba19283c08e69198839aedac\">here</a></p><p>In this article, we learned how to write integrated unit tests for our Angular pipes. The setup for this kind of is more complicated than for isolated unit tests. There are also more concepts involved because we need to use Angular testing utilities. But the effort is forth it as integrated unit tests can help us detect bugs that isolated tests cannot reveal.</p><p>Thank you very much for reading!</p><hr><h2>Listing</h2>\n<h3>mean.pipe.ts</h3>\n<pre><code>\nimport { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'mean'\n})\nexport class MeanPipe implements PipeTransform {\n\n  transform(value: number[]): number {\n    if (!Array.isArray(value)) {\n      return value;\n    }\n    if (value.length === 0) {\n      return undefined;\n    }\n    const sum = value.reduce((n: number, m: number) =&gt; n + m, 0);\n    return  sum / value.length;\n  }\n\n}\n</code></pre>\n<h3>mean.pipe.integrated.spec.ts</h3>\n<pre><code>\nimport { MeanPipe } from './mean.pipe';\nimport { async, ComponentFixture, TestBed } from '@angular/core/testing';\nimport { Component, DebugElement } from '@angular/core';\nimport { By } from '@angular/platform-browser';\n\n\n@Component({\n  template: '<div> {{ values | mean }}</div>'\n})\nexport class MeanPipeHostComponent {\n  values: number[];\n}\n\ndescribe('MeanPipe inside a Component', () =&gt; {\n  beforeEach(async(() =&gt; {\n    TestBed\n      .configureTestingModule({\n        declarations: [MeanPipe, MeanPipeHostComponent]\n      })\n      .compileComponents();\n  }));\n\n  let fixture: ComponentFixture<meanpipehostcomponent>;\n  let debugElement: DebugElement;\n\n  let component: MeanPipeHostComponent;\n\n  beforeEach(() =&gt; {\n    fixture = TestBed.createComponent(MeanPipeHostComponent);\n    debugElement = fixture.debugElement;\n    component = fixture.componentInstance;\n  });\n\n  it('should create an instance', () =&gt; {\n    expect(fixture).toBeTruthy();\n  });\n\n  it('should display 1', () =&gt; {\n    component.values = [1, 1];\n    fixture.detectChanges();\n\n    const div: HTMLDivElement = debugElement\n      .query(By.css('div'))\n      .nativeElement;\n\n    expect(div.textContent.trim()).toEqual('1');\n  });\n\n  it('should display 0', () =&gt; {\n    component.values = [1, -1];\n    fixture.detectChanges();\n\n    const div: HTMLDivElement = debugElement\n      .query(By.css('div'))\n      .nativeElement;\n\n    expect(div.textContent.trim()).toEqual('0');\n  });\n\n  it('should display nothing', () =&gt; {\n    component.values = [];\n    fixture.detectChanges();\n\n    const div: HTMLDivElement = debugElement\n      .query(By.css('div'))\n      .nativeElement;\n\n    expect(div.textContent.trim()).toEqual('');\n  });\n});\n</meanpipehostcomponent></code></pre>","filePath":"pages/Angular/.md","_id":"i8rd2DGUSPm38QKv","dateUpdated":1542210284727}
{"date":"2018-11-12T16:52:47.811Z","title":"Creating Layouts with CSS Grid","sourceUrl":"https://www.sitepoint.com/creating-css-grid-layouts/","path":"CSS/","category":"CSS","tags":["css"," Grid"],"author":"","excerpt":"","dateCreated":1542041458708,"coverImage":"","type":"Post","frontmatter":"---\npath: 'CSS/'\ndate: 'Mon Nov 12 2018 22:22:47 GMT+0530 (India Standard Time)'\ntitle: 'Creating Layouts with CSS Grid'\ntags: ['css','Grid']\ncategory: 'CSS'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://www.sitepoint.com/creating-css-grid-layouts/'\ntype: 'Post'\n---\n    ","htmlCode":"<p><em>The following introduction to CSS Grid is an extract from Tiffany’s book, <a href=\"https://www.sitepoint.com/premium/l/css-master2\">CSS Master, 2nd Edition</a>.</em></p>\n<p><strong>CSS Grid is a relatively recent layout specification, shipping in most browsers as of October 2017. Grid allows us to create layouts that were previously impossible, or only possible with lots of DOM operations.</strong></p>\n<p>Keep in mind that the <a href=\"https://www.w3.org/TR/css-grid-1/\">CSS Grid specification</a> is dense, and introduces several new concepts that are quite complex. Consider this an overview rather than a comprehensive look at Grid. Don’t worry, we’ll point you to lots of resources for learning more.</p>\n<h2>The Grid Formatting Context</h2>\n<div><div><span>--ADVERTISEMENT--</span></div>\n\n\n<script src=\"https://play.aniview.com/5858ed930b8ee8851941a7bb/59627b0528a0616e231692a2/SitepointPMP.js\"></script><script>\nvar el = document.getElementById('aniBox');\nvar adBox = document.getElementById('adBox');\n// create an observer instance\nvar observer = new MutationObserver(function(mutations) {\n  mutations.forEach(function(mutation) {\n    if(mutation.attributeName == 'style'){\n      var s = el.getAttribute('style');\n      if(s.search('height: 360px') !=  -1) {\n        adBox.style = 'display: block';\n      }\n      else {\n        adBox.style = 'display: none';\n      }\n}\n  });    \n});\n\n// configuration of the observer:\nvar config = { attributes: true, attributeFilter: ['style']};\n \n// pass in the target node, as well as the observer options\nobserver.observe(el, config);\n</script></div><p>Adding <code>display: grid</code> to an element triggers a grid formatting context for that element and its children. In a grid formatting context, three things happen:</p>\n<ol><li>The element becomes a block-level element that participates in the normal flow.</li>\n<li>Its children—whether elements or text nodes—create block-like, grid-level boxes that can be arranged into rows and columns. Immediate children of a grid container are <strong>grid items</strong>.</li>\n<li>In a horizontal writing mode, each member in a grid row will have the same height as its tallest element (as determined by content), unless an explicit height value is set. When the document uses a vertical writing mode, it takes on the same length as its longest element (as determined by content).</li>\n</ol><div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538097963LayoutDisplayGridBoxes.png\" alt=\"Using display: grid creates a block-level container, and block boxes for its children\" width=\"826\" height=\"538\"><span>Using <code>display: grid</code> creates a block-level container, and block boxes for its children</span>\n</div>\n<p>Using <code>display: inline-grid</code> works similarly. Children of inline-level grid containers create grid-level boxes, but the container itself participates in an inline formatting context.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098019LayoutDisplayInlineGridBoxes.png\" alt=\"Using display: inline-grid creates an inline-level box for the container, but block boxes for its children\" width=\"826\" height=\"538\"><span>Using <code>display: inline-grid</code> creates an inline-level box for the container, but block boxes for its children</span>\n</div>\n<p>By themselves, <code>display: grid</code> and <code>display: inline-grid</code> won’t automatically arrange these boxes into rows and columns. We also need to tell the browser where and how to place things.</p>\n<p>Before creating your grid, determine whether you want a fixed number of columns and/or rows, whether you’d like the browser to calculate the number of columns and rows automatically, or whether you’d like a mix of the two. Knowing what kind of grid you want to create determines the approach you’ll take. Let’s look at a few techniques.</p>\n<h2>Defining a Grid Layout</h2>\n<p>After defining a grid container, we’ll need to tell the browser how many rows and columns our grid should contain. We can define the number of rows and columns using the <code>grid-template-rows</code> and <code>grid-template-columns</code> properties. They’re applied to the grid container.</p>\n<p>Both <code>grid-template-rows</code> and <code>grid-template-columns</code> accept what’s known as a <em>track list</em>. The <strong>track list</strong> is a space-separated string that specifies grid line names and sizes of each position in the row or column.</p>\n<p>Each value in a track list creates a new space—a <strong>track</strong>—within the row or column. You can use lengths, flexible length units (discussed later in this chapter), or percentages. You can also use <a href=\"https://www.w3.org/TR/css-sizing-3/#sizing-values\">sizing values</a> such as <code>auto</code>, <code>min-content</code> and <code>max-conent</code>.</p>\n<pre><code>.grid {\n    display: grid;\n    grid-template-columns: 25rem 25rem 25rem;\n    grid-template-rows: 10rem 10rem;\n}\n</code></pre>\n<p>In the code above, we’ve defined a grid with three columns, each <code>25rem</code> units wide and two rows, each <code>10rem</code> units tall. Let’s apply it to the following HTML. Yes, this is all the markup required:</p>\n<pre><code>&lt;div class=\"grid\"&gt;\n    &lt;div&gt;Grid item A&lt;/div&gt;\n    &lt;div&gt;Grid item B&lt;/div&gt;\n    &lt;div&gt;Grid item C&lt;/div&gt;\n    &lt;div&gt;Grid item D&lt;/div&gt;\n    &lt;div&gt;Grid item E&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n<p>Our grid items get organized into the columns and rows shown below.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098063LayoutGridFixed1.png\" alt=\"Creating an explicit grid with grid-template-columns and grid-template-rows\" width=\"826\" height=\"538\"><span>Creating an explicit grid with <code>grid-template-columns</code> and <code>grid-template-rows</code></span>\n</div>\n<p>Here, we’ve created a grid of evenly sized rows and columns, but that isn’t a requirement of Grid. Let’s tweak our CSS slightly. We’ll change the value of <code>grid-template-columns</code> to <code>25rem 15rem 25rem</code>:</p>\n<pre><code>.grid {\n    display: grid;\n    grid-template-columns: 25rem 15rem 25rem;\n    grid-template-rows: 10rem 10rem;\n}\n</code></pre>\n<p>Now the second column in our grid is narrower than the first and third.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098103LayoutGridFixed2.png\" alt=\"Grid columns and rows don’t have to be the same width\" width=\"826\" height=\"538\"><span>Grid columns and rows don’t have to be the same width</span>\n</div>\n<h2>Explicit Grid versus Implicit Grids</h2>\n<p>In the previous section, we explicitly stated that this grid should have six available grid cells formed by three columns and two rows. This is what’s known as an <strong>explicit grid</strong>. Here, our grid container only has five children. The remaining position is empty. Let’s see what happens when we add more children to the container.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098144LayoutGridFixed3.png\" alt=\"When grid items exceed the number of explicitly defined cells, the remaining items are arranged in an implicit grid\" width=\"826\" height=\"538\"><span>When grid items exceed the number of explicitly defined cells, the remaining items are arranged in an implicit grid</span>\n</div>\n<p>Now we have three rows. Notice, however, that our third row is only as tall as its contents and padding. It’s part of the grid because these items are the children of a grid container. Yet the row isn’t explicitly defined by <code>grid-template-rows</code>. What we have instead is an <strong>implicit grid</strong>—an explicit grid with additional grid items that exceed the defined number of explicit grid cells.</p>\n<p>Items within an implicit grid are <code>auto</code> sized by default. Grid items will expand to accommodate their contents, or fill the remaining vertical space in the container—whichever is taller. If, for example, we set the <code>height</code> property of our container to <code>50rem</code>, our implicit grid track will expand to be <code>30rem</code> tall.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098186LayoutGridImplicitAuto.png\" alt=\"Implicit grid rows expand to fill the available height of the container\" width=\"826\" height=\"641\"><span>Implicit grid rows expand to fill the available height of the container</span>\n</div>\n<p>If we add enough items to create a fourth row, the height of our implicit grid items will be distributed evenly across the remaining <code>30rem</code> of vertical space in the container. Their computed height will be <code>15rem</code> each.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098231LayoutGridImplicitAutoFourRows.png\" alt=\"The height of implicit grid rows will be evenly distributed based on the remaining space in the grid container\" width=\"826\" height=\"641\"><span>The height of implicit grid rows will be evenly distributed based on the remaining space in the grid container</span>\n</div>\n<p>In our original example, we’ve explicitly defined only two rows with a height of <code>10rem</code> each, so our third row defaults to <code>auto</code> sizing. Its height will adjust to the size of its contents and padding.</p>\n<h2>Specifying Track Size for an Implicit Grid</h2>\n<p>It is possible, however, to set a kind of explicit, default height or width for implicit grid items using the <code>grid-auto-rows</code> and <code>grid-auto-columns</code> properties. Let’s update our CSS with <code>grid-auto-rows</code>:</p>\n<pre><code>.grid {\n    display: grid;\n    grid-template-columns: 25rem 15rem 25rem;\n    grid-template-rows: 10rem 10rem;\n    grid-auto-rows: 30rem;\n}\n</code></pre>\n<p>Now items in our third row—and any subsequent rows—will be <code>30rem</code> in height.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098282LayoutGridImplicit.png\" alt=\"Using grid-auto-rows to specify the height of implicit grid items\" width=\"826\" height=\"641\"><span>Using <code>grid-auto-rows</code> to specify the height of implicit grid items</span>\n</div>\n<p>There’s one drawback to using the <code>grid-auto-*</code> properties: when the contents of a grid item exceed its dimensions, they will overflow the container (shown below), and may be clipped visually by elements in other rows.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098357LayoutGridOverflow.png\" alt=\"Contents of a grid container can overflow the container when using length or percentage units\" width=\"828\" height=\"650\"><span>Contents of a grid container can overflow the container when using length or percentage units</span>\n</div>\n<p>One way to avoid this is to use the <code>minmax()</code> function. Let’s rewrite our CSS to use <code>minmax()</code>:</p>\n<pre><code>.grid {\n    display: grid;\n    grid-template-columns: 25rem 15rem 25rem;\n    grid-template-rows: 10rem 10rem;\n    grid-auto-rows: minmax(30rem, auto);\n}\n</code></pre>\n<p>As you may have guessed from its name, <code>minmax()</code> lets us define the minimum and maximum size of a track. It requires two arguments, the first of which is the minimum desired track size. The second argument is the maximum desired size.</p>\n<p>In this case, our row will be at least <code>30rems</code> high. But since we’ve set our maximum size to <code>auto</code>, our track will expand to accommodate the content of that cell. Arguments for <code>minmax()</code> can be lengths or percentages, or one of the <code>auto</code>, <code>min-content</code>, and <code>max-content</code> keywords. Here, <code>minmax(30rem, max-content)</code> would achieve much the same effect. Flexible units, discussed in the next section, are also valid.</p>\n<p>Lengths and percentages can be used to define track sizes. Using them may mean that the grid items don’t fill the entire width or height of the container. For example, if our grid container is <code>70rem</code> wide, <code>grid-template-columns: 25rem 15rem 25rem;</code> will only fill about 90% of its horizontal space. On the other hand, if our grid container is only <code>50rem</code> wide, the total width of our columns will overflow the container’s bounds.</p>\n<p>One way to avoid this issue is by using <em>flexible length</em> units.</p>\n<h2>Creating Flexible Grids with Flex Units</h2>\n<p><strong>Flexible length</strong> or <strong>flex</strong> units are best understood as fractional units, and are expressed using <code>fr</code>. Flex units indicate to the browser what fraction or proportion of the leftover space in a grid container should be allocated to each grid item. They’re a ratio, not a true length value in the way <code>px</code>, <code>em</code>, or <code>cm</code> are.</p>\n<p>There’s a formula for calculating the used width of an item when using flexible units: <em>(flex × leftover space) &amp;div; sum of all flex factors</em>. If, for instance, our grid container is <code>1000px</code> wide, and the value of <code>grid-template-columns</code> is <code>3fr 2fr 1fr</code>, our columns will be <code>500px</code>, <code>333.33px</code> and <code>133.33px</code> wide. The width of each column is allocated proportionally from the space available, as shown below.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098398LayoutGridFlex-1024x661.png\" alt=\"Flexible length units maintain grid proportions, rather than absolute lengths\" width=\"1024\" height=\"661\"><span>Flexible length units maintain grid proportions, rather than absolute lengths</span>\n</div>\n<p>Because these units are ratios and not absolute lengths, <code>grid-template-columns: 2fr 2fr 2fr</code> is equivalent to <code>grid-template-columns: 1fr 1fr 1fr</code>. Both will result in columns of equal width for horizontal writing modes, and rows of equal height for vertical writing modes.</p>\n<p><em>Note: <code>fr</code> units are not true length values. This makes them incompatible with other length units, such as <code>px</code> and <code>rem</code> and width percentages. It also means that you can’t use <code>fr</code> units with the <code>calc()</code> function. For example, <code>calc(1fr - 1rem)</code> is an invalid length value.</em></p>\n<h2>Using the <code>grid-template</code> Shorthand Property</h2>\n<p>We can also indicate the number of rows and columns using the <code>grid-template</code> property. Its syntax is as follows:</p>\n<pre><code>grid-template: [row track list] / <div></div>\n</code></pre>\n<p>Consider this block of CSS:</p>\n<pre><code>.grid {\n    display: grid;\n    grid-template-columns: 25rem 25rem 25rem;\n    grid-template-rows: 10rem 10rem;\n}\n</code></pre>\n<p>We can combine the second and third lines using <code>grid-template</code>:</p>\n<pre><code>.grid {\n    display: grid;\n    grid-template: 10rem 10rem / 25rem 25rem 25rem;\n}\n</code></pre>\n<p>For clarity, however, you may still wish to use the longhand properties.</p>\n<h2>Repeating Rows and Columns</h2>\n<p>In many cases, you’ll want grid columns or rows that repeat automatically; think of a list of store items or recipe search results. Grid offers a syntax for that—the <code>repeat()</code> function:</p>\n<pre><code>.grid {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n}\n</code></pre>\n<p><code>repeat()</code> accepts two arguments:</p>\n<ol><li>the number of times to repeat the track list</li>\n<li>a track list to repeat</li>\n</ol><p>Arguments must be separated by a comma. The first argument may be a positive integer, or the <code>auto-fit</code> or <code>auto-fill</code> keywords. The above CSS produces the following grid. Our <code>1fr</code> track list is repeated three times.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098437LayoutGridRepeat1.png\" alt=\"A repeating grid with fr units\" width=\"828\" height=\"470\"><span>A repeating grid with <code>fr</code> units</span>\n</div>\n<p>We could also use a two-column pattern that repeats twice. For example, <code>grid-template-columns: repeat(2, 1fr 3fr);</code> produces a four-column grid. As the image below shows, the first and third columns are one third the width of the second and fourth. In both cases, the value of <code>grid-template-rows</code> is <code>auto</code>.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098476LayoutGridRepeat2.png\" alt=\"A repeating two-column grid pattern\" width=\"825\" height=\"591\"><span>A repeating two-column grid pattern</span>\n</div>\n<h3>Repeating Columns with <code>auto-fit</code> or <code>auto-fill</code></h3>\n<p>Both of the preceding examples tell the browser: <em>here’s a track list pattern; please repeat it X number of times</em>. What you may want to tell the browser instead, though, is: <em>please fit as many columns or rows as you can within this grid container</em>. For that, we can use <code>auto-fit</code> or <code>auto-fill</code> as the first argument for <code>repeat()</code>, in combination with <code>minmax()</code>.</p>\n<p>What’s the difference between <code>auto-fit</code> and <code>auto-fill</code>? It’s subtle, but significant.</p>\n<ul><li><code>auto-fill</code> fits as many grid items as it can within a track line, <em>adding anonymous grid tracks</em> if necessary.</li>\n<li><code>auto-fit</code> fits as many grid items as it can within a track line, <em>expanding or collapsing the dimensions of each track</em> if necessary.</li>\n</ul><p>This difference becomes apparent when the grid container’s width exceeds the maximum total width of its grid items. Let’s compare some CSS:</p>\n<pre><code>.grid {\n    display: grid;\n    width: 800px;\n}\n.autofill {\n    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));\n}\n.autofit {\n    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));\n}\n</code></pre>\n<p>And let’s apply this CSS to the HTML below:</p>\n<pre><code>&lt;div class=\"grid autofill\"&gt;\n    &lt;div&gt;Grid item A&lt;/div&gt;\n    &lt;div&gt;Grid item B&lt;/div&gt;\n    &lt;div&gt;Grid item C&lt;/div&gt;\n    &lt;div&gt;Grid item D &lt;/div&gt;\n    &lt;div&gt;Grid item E&lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"grid autofit\"&gt;\n    &lt;div&gt;Grid item A&lt;/div&gt;\n    &lt;div&gt;Grid item B&lt;/div&gt;\n    &lt;div&gt;Grid item C&lt;/div&gt;\n    &lt;div&gt;Grid item D &lt;/div&gt;\n    &lt;div&gt;Grid item E&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n<p>The only difference between these two grid layouts is that one uses <code>auto-fill</code> and the other uses <code>auto-fit</code>. But compare the two grids in the image below.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098521LayoutGridAutoFitVsFill.png\" alt=\"Comparing auto-fill with auto-fit\" width=\"895\" height=\"630\"><span>Comparing <code>auto-fill</code> with <code>auto-fit</code></span>\n</div>\n<p>In both grids, the total maximum width of the grid items is less than that of the grid container. However, in the top grid—our <code>auto-fill</code> grid—that excess space is <em>filled in</em> by anonymous grid items.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538098565LayoutGridAutoFitVsFillDevTools.png\" alt=\"Visualizing the difference between auto-fill to auto-fit with the Firefox grid inspector\" width=\"895\" height=\"630\"><span>Visualizing the difference between <code>auto-fill</code> to <code>auto-fit</code> with the Firefox grid inspector</span>\n</div>\n<p>Compare that to the bottom grid, in which each grid item has been stretched to fit the available space. The image above illustrates what those anonymous grid cells look like using Firefox’s developer tools.</p>\n<p><em>Note: If this still doesn’t make any sense, read Sara Soueidan’s “<a href=\"https://css-tricks.com/auto-sizing-columns-css-grid-auto-fill-vs-auto-fit/\">Auto-Sizing Columns in CSS Grid: <code>auto-fill</code> vs <code>auto-fit</code></a>”. It contains some video examples that illustrate the difference a little bit better than static images can.</em></p>\n<hr><p><em>This is an extract from the book <a href=\"https://www.sitepoint.com/premium/l/css-master2\">CSS Master, 2nd Edition</a>. Up to this point, we’ve covered simple grids that are neatly aligned rows and columns of boxes. The book goes on to explain the far more complex layouts Grid can handle, covering line-based grid placement, named grid areas, how to space grid items, and dealing with images within grids.</em></p>\n<h2>Conclusion</h2>\n<p>CSS Grid is a very dense topic. We’ve really just scratched the surface here. Luckily, there’s a wealth of resources that can help you learn more.</p>\n<p>I believe in reading specifications where possible. In my opinion, the <a href=\"https://www.w3.org/TR/css-grid-1/\">CSS Grid specification</a> is quite readable, and it’s a good place to begin your own explorations of grid layout. But specifications do tend to contain a lot of jargon, because they’re targeted not only at web developers, but also those tasked with implementing the specification in browsers.</p>\n<p>Rachel Andrew’s <a href=\"https://gridbyexample.com/\">Grid by Example</a> was created for a web developer audience. The site includes grid layout tutorials and a collection of common user interface patterns. Be sure to visit the site’s <em>Resources</em> section too. It’s a cornucopia of links that demonstrate what you can do with CSS Grid.</p>\n<p><a href=\"http://labs.jensimmons.com/\">Jen Simmons’</a> Experimental Layout Lab is also chock-full of examples that illustrate Grid’s possibilities. If video is more your style, Simmons’ <a href=\"https://www.youtube.com/channel/UC7TizprGknbDalbHplROtag\">Layout Land</a> YouTube channel includes video walkthroughs of grid and other layout topics.</p>\n<p>When you need more of a cheatsheet-style reference, try “<a href=\"https://css-tricks.com/snippets/css/complete-guide-grid/\">A Complete Guide to Grid</a>”, by CSS-Tricks.</p>","filePath":"pages/CSS/.md","_id":"iJFGYQk4UjfWBV0j"}
{"date":{"$$date":1551455820781},"title":"Create your design system, part 1: Typography","sourceUrl":"https://medium.com/codyhouse/create-your-design-system-part-1-typography-7c630d9092bd","path":"HTML5/HTML5/","category":"HTML5","tags":["HTML"," CSS"," Design"," Typography"],"author":"Sebastiano Guerriero","excerpt":"","dateCreated":1551455269494,"coverImage":"","type":"Post","frontmatter":"---\npath: 'HTML5/'\ndate: 'Fri Mar 01 2019 21:26:32 GMT+0530 (India Standard Time)'\ntitle: 'Create your design system, part 1: Typography'\ntags: ['HTML','CSS','Design']\ncategory: 'HTML5'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://medium.com/codyhouse/create-your-design-system-part-1-typography-7c630d9092bd'\ntype: 'Post'\n---\n    ","htmlCode":"<div><p>Typography is arguably the essential part of a website. When we think about the content of a web page, we think about words. In this article, we’ll take a look at how to set a typography system in CSS.</p></div><div><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*Qgd4g69ZISFKbWkJZh44PA.png\" data-width=\"2000\" data-height=\"1080\" data-action=\"zoom\" data-action-value=\"1*Qgd4g69ZISFKbWkJZh44PA.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"40\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1000/1*Qgd4g69ZISFKbWkJZh44PA.png\" src=\"https://cdn-images-1.medium.com/max/1000/1*Qgd4g69ZISFKbWkJZh44PA.png\"></div></div></figure></div><div><p>This article is part of a series on design systems inspired by our&nbsp;<a href=\"https://codyhouse.co/ds/components\" data-href=\"https://codyhouse.co/ds/components\" rel=\"nofollow noopener\" target=\"_blank\">library of web components</a>. The library relies on a solid system of CSS globals. So this is us sharing the things we’ve learned setting the global style of our library! ✌</p><p><span>Article Series:</span><br>- Part 1: Typography<br>- Part 2:&nbsp;<a href=\"https://medium.com/codyhouse/create-your-design-system-part-2-grid-layout-aa961d59b8d6\" data-href=\"https://medium.com/codyhouse/create-your-design-system-part-2-grid-layout-aa961d59b8d6\" target=\"_blank\">Grid &amp; Layout</a><br>- Part 3:&nbsp;<a href=\"https://medium.com/codyhouse/create-your-design-system-part-3-colors-798e4729921f\" data-href=\"https://medium.com/codyhouse/create-your-design-system-part-3-colors-798e4729921f\" target=\"_blank\">Colors</a><br>- Part 4:&nbsp;<a href=\"https://medium.com/codyhouse/create-your-design-system-part-4-spacing-895c9213e2b9\" data-href=\"https://medium.com/codyhouse/create-your-design-system-part-4-spacing-895c9213e2b9\" target=\"_blank\">Spacing</a><br>- Part 5:&nbsp;<a href=\"https://medium.com/codyhouse/create-your-design-system-part-5-icons-594f39cfb1b\" data-href=\"https://medium.com/codyhouse/create-your-design-system-part-5-icons-594f39cfb1b\" target=\"_blank\">Icons</a><br>- Part 6:&nbsp;<a href=\"https://medium.com/codyhouse/create-your-design-system-part-6-buttons-58e2eda2173e\" data-href=\"https://medium.com/codyhouse/create-your-design-system-part-6-buttons-58e2eda2173e\" target=\"_blank\">Buttons</a></p><div><a href=\"https://codyhouse.co/ds/components\" data-href=\"https://codyhouse.co/ds/components\" title=\"https://codyhouse.co/ds/components\" rel=\"nofollow\"><span>Components | CodyHouse</span><br><span>A library of customizable HTML, CSS, JS web components for designers and developers.</span>codyhouse.co</a><a href=\"https://codyhouse.co/ds/components\" data-media-id=\"dc39762c396e8bea5d7d4f9ccdaa16d7\" data-thumbnail-img-id=\"0*uakNqScC9wqxTRbY\"></a></div><p>🔥 📢&nbsp;<span>We’ve launched the&nbsp;</span><a href=\"https://codyhouse.co/ds/globals/typography\" data-href=\"https://codyhouse.co/ds/globals/typography\" rel=\"nofollow noopener\" target=\"_blank\"><span>Typography Editor</span></a>! A visual tool to set the typography of your web project based on the CodyHouse Framework. You can use it for font pairing, to generate the type scale and set responsive rules.</p><p>For those of you who prefer to skip the article entirely and take a look at the final CSS file, you can check it out&nbsp;<a href=\"https://gist.github.com/sebastiano-guerriero/2d05b319b9ae7618d99809797a67c0a0\" data-href=\"https://gist.github.com/sebastiano-guerriero/2d05b319b9ae7618d99809797a67c0a0\" rel=\"noopener nofollow\" target=\"_blank\">here</a>.</p><h3>Setting the Typography system using CSS Variables</h3><p>Designing a typography system means making decisions about:</p><ol><li>The typeface (font-family) you want to use.</li><li>Type (modular) scale.</li><li>Responsiveness of the text (size unit and breakpoints).</li><li>Spacing and vertical rhythm.</li><li>Colors (theming).</li></ol><p>Let’s start with point one and two. Picking the right typeface is probably one of the first steps when you create a design system. Let’s assume you’ve browsed hundreds of font families and found the one you love (for now!); in your global/_typography.scss file, you can set your font-families as variables.</p><pre><code>\t:root {<br>\t    --font-primary: sans-serif;<br>\t    --font-secondary: serif;<br>\t<br><br>\t    /* set base values */<br>\t    --text-base-size: 1em;<br>\t    --text-scale-ratio: 1.2;<br>\t}<br>\t<br><br>\tbody {<br>\t    font-size: var(--text-base-size);<br>\t    font-family: var(--font-primary);<br>\t    color: var(--color-text);<br>\t}</code></pre><p>The primary font, in this case, is the “most used” font; or the body font. The secondary font can be applied, for example, to a heading element. This approach is arbitrary, of course.</p><p>Along with the typeface, we’ve defined two variables: the — text-base-size and the — text-scale-ratio. The value of the text base size is 1em, while the — text-scale-ratio is used to generate the type scale.</p><p>When applied to the &lt;body&gt; (we’re assuming no font-size is applied to the &lt;html&gt; element), 1em equals to 16px in most modern browsers. Since our framework is mobile-first, we’re saying: on small devices, I want the body text size to be ~16px (the font-size of the body is equal to the — text-base-size).</p><p>And yes, after a long debate, we’ve opted for the&nbsp;<a href=\"https://developer.mozilla.org/en-US/docs/Learn/CSS/Introduction_to_CSS/Values_and_units\" data-href=\"https://developer.mozilla.org/en-US/docs/Learn/CSS/Introduction_to_CSS/Values_and_units\" rel=\"nofollow noopener\" target=\"_blank\">em unit</a>. The reasons behind this choice are explained later, in the Spacing section of the article.</p><p><span>The modular scale</span>&nbsp;is a set of values obtained from a base value (in our case, 1em) and a ratio, or multiplier ( — text-scale-ratio). You can apply the scale to any measurable element (margin, paddings, etc.). Here’s how you create a type scale taking advantage of the CSS calc() function*:</p><pre><code>\t:root {<br>\t    --font-primary: sans-serif;<br>\t    --font-secondary: serif;<br>\t<br><br>\t    /* set base values */<br>\t    --text-base-size: 1em;<br>\t    --text-scale-ratio: 1.2;<br>\t<br><br>\t    /* type scale */<br>\t    --text-xs: calc(1em / (var(--text-scale-ratio) * var(--text-scale-ratio)));<br>\t    --text-sm: calc(1em / var(--text-scale-ratio));<br>\t    --text-md: calc(1em * var(--text-scale-ratio));<br>\t    --text-lg: calc(1em * var(--text-scale-ratio) * var(--text-scale-ratio));<br>\t    --text-xl: calc(1em * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio));<br>\t    --text-xxl: calc(1em * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio));<br>\t    --text-xxxl: calc(1em * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio));<br>\t}<br>\t<br><br>\tbody {<br>\t    font-size: var(--text-base-size);<br>\t    font-family: var(--font-primary);<br>\t    color: var(--color-text);<br>\t}<br>\t<br><br>\th1, h2, h3, h4, form legend {<br>\t    color: var(--color-text-heading);<br>\t    margin-bottom: var(--space-xxs);<br>\t    line-height: var(--heading-line-height);<br>\t}<br>\t<br><br>\t/* text size */<br>\t.text--xxxl {<br>\t    font-size: var(--text-xxxl);<br>\t}<br>\t<br><br>\th1, .text--xxl {<br>\t    font-size: var(--text-xxl);<br>\t}<br>\t<br><br>\th2, .text--xl {<br>\t    font-size: var(--text-xl);<br>\t}<br>\t<br><br>\th3, .text--lg {<br>\t    font-size: var(--text-lg);<br>\t}<br>\t<br><br>\th4, .text--md {<br>\t    font-size: var(--text-md);<br>\t}<br>\t<br><br>\t.text--sm, small {<br>\t    font-size: var(--text-sm);<br>\t}<br>\t<br><br>\t.text--xs {<br>\t    font-size: var(--text-xs);<br>\t}<br>\t<br><br>\tp {<br>\t    line-height: var(--body-line-height);<br>\t}</code></pre><p>*We could have simplified the code by replacing the parts where we repeat — text-scale-ratio with variables (e.g., — text-lg: calc(1em * var( — text-md));), but we had issues with how the postcss-css-variables gulp plugin compiles nested calc() function and CSS Variables.</p><p>The reason why a modular scale is useful when applied to anything in a design system is that it generates a harmonious set of values, as opposed to setting each value independently (maybe obtaining them from a&nbsp;.sketch file).</p><p>Note that in defining each text size variable we multiply 1em by the — text-scale-ratio. That 1em is not the —text-base-size value. You could set a — text-base-size different from 1em (while you shouldn’t change the 1m in the calc() function).</p><p>Since the em unit is a relative unit equal to the current font size,&nbsp;<span>if we update the — text-base-size variable at a specific media query, we update the font-size of the body, and, as a result, all the text size variables</span>.&nbsp;<span>The whole typography is affected.</span></p><p>The paragraph element inherits the base font size, while we set a specific font size for each heading element. Besides, we create some utility classes in case, for example, we want to apply the — text-xxl font size to an element that is not an &lt;h1&gt;.</p><p><span>Why including the type scale in your CSS? In one word: control.</span></p><p>Say we want to increase the body font size at a specific media query; for example, we increase the — text-base-size to 1.25em past 1024px. The heading elements are all affected by the change (the 1em in the calc() function is no longer ~16px, but ~20px), therefore they all become bigger. Let’s suppose we feel like increasing the size of the &lt;h1&gt; element even more. How do we do that?</p><p>One option would be increasing the — text-base-size value, but it’s not ideal. The body text is big enough, I just want to target the &lt;h1&gt;. Here’s the advantage of storing the — text-scale-ratio in a variable. We can edit it and affect everything but the body text:</p><pre><code>\t:root {<br>\t    /* set base values */<br>\t    --text-base-size: 1em;<br>\t    --text-scale-ratio: 1.2;<br>\t<br><br>\t    /* type scale */<br>\t    --text-xs: calc(1em / (var(--text-scale-ratio) * var(--text-scale-ratio)));<br>\t    --text-sm: calc(1em / var(--text-scale-ratio));<br>\t    --text-md: calc(1em * var(--text-scale-ratio));<br>\t    --text-lg: calc(1em * var(--text-scale-ratio) * var(--text-scale-ratio));<br>\t    --text-xl: calc(1em * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio));<br>\t    --text-xxl: calc(1em * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio));<br>\t    --text-xxxl: calc(1em * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio));<br>\t}<br>\t<br><br>\t@include breakpoint(md) {<br>\t    :root {<br>\t        // you can manage typography editing only these 2 variables<br>\t        --text-base-size: 1.25em;<br>\t        --text-scale-ratio: 1.25;<br>\t    }<br>\t}</code></pre><p><span data-creator-ids=\"anon\"><span>With this technique, you can manage the size of all your text elements by editing only two variables</span></span>. Not just that, you can take advantage of the em unit and modify all margins, paddings, and spacing in general by editing the — text-base-size at a root level.</p><p>This method is not just a time-saver IMO, it’s a powerful approach to making text responsive. Both designers and developers can benefit from it. All we need is setting a demo-typography.html file with some text elements plus some components. The designer can jump in and tweak the typography directly in coding.</p></div><div><figure data-scroll=\"native\"><div><div></div><div data-image-id=\"1*azoT6zs5Sn6lZWyY8h-dug.gif\" data-width=\"1000\" data-height=\"600\" data-scroll=\"native\"><canvas width=\"75\" height=\"45\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/1000/1*azoT6zs5Sn6lZWyY8h-dug.gif\" src=\"https://cdn-images-1.medium.com/max/1000/1*azoT6zs5Sn6lZWyY8h-dug.gif\"></div></div></figure></div><div><p>So…what’s the catch? When you use the Developer Tools to inspect the font size, you won’t see numeric values, but variable names; which don’t provide much info. But does it matter? Is it critical to know that a font-size is 28px as opposed to 29.4560px? Your call! 😉</p><h3>Spacing</h3><p>Now that sizing is sorted out, we need to deal with spacing. What is the ideal margin-bottom of an &lt;h1&gt; element? What about paragraphs? One option to deal with spacing is setting another scale to manage the vertical rhythm.</p><p>This is how it works:</p><ol><li>Set a base value, or baseline -&gt; e.g., 24px</li><li>Generate a set of values that are multiples of the baseline</li><li>Use these values to generate consistent spacing between elements</li></ol><pre><code>\t:root {<br>\t    --baseline: 24px;<br>\t  <br>\t    /* spacing values */<br>\t    --space-sm:   calc(var(--baseline)/2);<br>\t    --space-md:   var(--baseline);<br>\t    --space-lg:   calc(var(--baseline)*2);<br>\t    --space-xl:   calc(var(--baseline)*3);<br>\t}<br>\t<br><br>\th1 {<br>\t  margin-bottom: var(--space-lg);<br>\t}<br>\t<br><br>\th2 {<br>\t  margin-bottom: var(--space-md);<br>\t}<br>\t<br><br>\tp {<br>\t  margin-bottom: var(--space-sm);<br>\t}</code></pre><p>The advantage of this method is that it creates a harmonious vertical spacing, that makes the user feels “safe”. Read more about why vertical rhythm is a good practice in&nbsp;<a href=\"https://zellwk.com/blog/why-vertical-rhythms/\" data-href=\"https://zellwk.com/blog/why-vertical-rhythms/\" rel=\"nofollow noopener\" target=\"_blank\">this great article by Zell Liew</a>.</p><p>That said, we opted for something different! Since we use the em unit for the font-size, we should set spacing in px or rem values if we want to preserve vertical rhythm (otherwise spacing would be affected by the em unit of the font size). As a result, if we change the font-size of the &lt;h1&gt;, we may want to tweak the margin-bottom as well (e.g., set a media query and increase the margin-bottom to — space-xl); otherwise the margin could look too small now that the &lt;h1&gt; is bigger than before.</p><p>Even though setting a media query to tweak the margin is not a big deal, we decided to rely entirely on the elasticity of em units.&nbsp;<span>If you set your margins in em, chances are you won’t need to edit them</span>.</p><p>Just my 2 cents: we often adopt in web design concepts originated in print design (e.g., vertical rhythm). We can break these rules, for the sake of simplicity, if doing so does not affect the user experience.</p><p>Here’s an example of how to set a spacing system using em units:</p><pre><code>\t:root {<br>\t    /* spacing values */<br>\t    --space-xxxs: 0.25em;<br>\t    --space-xxs:  0.375em;<br>\t    --space-xs:   0.5em;<br>\t    --space-sm:   0.75em;<br>\t    --space-md:   1.25em;<br>\t    --space-lg:   2em;<br>\t    --space-xl:   3.25em;<br>\t    --space-xxl:  5.25em;<br>\t    --space-xxxl: 8.5em;<br>\t}<br>\t<br><br>\th1, h2, h3, h4, form legend {<br>\t    margin-bottom: var(--space-xxs);<br>\t    line-height: var(--heading-line-height);<br>\t}<br>\t<br><br>\t.text-container {<br>\t    h2, h3, h4 {<br>\t        margin-top: var(--space-sm);<br>\t    }<br>\t    <br>\t    ul, ol, p {<br>\t        margin-bottom: var(--space-md);<br>\t    }<br>\t}</code></pre><p>I generally separate spacing (_spacing.scss) from typography (_typography.scss), but this is up to you.</p><p>The reason why margins of lists and paragraphs descend from the&nbsp;.text-container class is to separate blocks of text from all the other places where a paragraph or an unordered list can be used. Optionally, you can target the &lt;article&gt; element.</p><h3>Editing text size and spacing on a component level</h3><p>The system we’re exploring makes sense as long as all text elements change accordingly with the two main text variables ( — text-base-size and — text-scale-ratio). How do we edit text size on a component level?</p><p>Option 1 would be targeting the component:</p><pre><code>\t.component {<br>\t    font-size: 1.2em;<br>\t}</code></pre><p>This change will affect the whole component, in all media queries. It’s like saying: “I want all text elements of this component to be 120% of what they would normally be”.</p><p>If you want to target a specific element inside the component, you have the following options:</p><pre><code>\t.component h1 { <br>\t    font-size: 3em; // the size is no longer affected by the --text-scale-ratio<br>\t    font-size: calc(var(--text-base-size) * 3); // use base size to create new value - off scale<br>\t    font-size: calc(var(--text-xxl) - 0.8em); // use original font size to create new value - off scale<br>\t    font-size: var(--text-xl); // update the value of the font size using a different variable<br>\t}</code></pre><p>The first option allows you to set the size of the &lt;h1&gt; as multiple of the — text-base-size (in this example x3); probably not ideal, because the size of the &lt;h1&gt; is no longer affected by the — text-scale-ratio variable. The second option sets a new size based on the — text-base-size. Not a fan of this option either, because it generates a value that is most probably off the scale, and it’s not affected by the — text-scale-ratio.</p><p>Of the other two options, the last one is my favorite (reassigning the variable), because the new value obtained still belongs to the type scale.</p><h3>Colors</h3><p>Theming is part of a more complicated topic worth exploring in a different article. To complete our typography exploration though, let’s see how to set the primary colors*:</p><pre><code>\t:root {<br>\t    /* typography */<br>\t    --color-text: var(--gray-10);<br>\t    --color-text-heading: var(--black);<br>\t    --color-text-subtle: var(--gray-6);<br>\t    --color-link: var(--color-primary);<br>\t    --color-link-visited: var(--color-primary-dark);<br>\t}<br>\t<br><br>\tbody {<br>\t    color: var(--color-text);<br>\t}<br>\t<br><br>\th1, h2, h3, h4, form legend {<br>\t    color: var(--color-text-heading);<br>\t}<br>\t<br><br>\ta {<br>\t    color: var(--color-link);<br>\t<br><br>\t    &amp;:visited {<br>\t        color: var(--color-link-visited);<br>\t    }<br>\t}</code></pre><p>*I generally prefer to store all the color variables in a separate file (_colors.scss).</p><p>The style above can be used to set some basic rules. Chances are we need to create variations of these colors. Soon, we’ll be able to do so by updating the variable values. Unfortunately, updating a CSS Variable using a class is not supported in all modern browser (and gulp plugins). For the time being, we need to change the variable entirely!</p><pre><code>\t:root {<br>\t    /* typography */<br>\t    --color-text: var(--gray-10);<br>\t    --color-text-heading: var(--black);<br>\t    --color-text-subtle: var(--gray-6);<br>\t    --color-link: var(--color-primary);<br>\t    --color-link-visited: var(--color-primary-dark);<br>\t}<br>\t<br><br>\t.theme--dark {<br>\t    // not supported yet, but soon!<br>\t    --color-text: var(--gray-1);<br>\t    --color-text-heading: var(--white);<br>\t    --color-text-subtle: var(--gray-4);<br>\t    --color-link: var(--color-accent);<br>\t}<br>\t<br><br>\t.theme--dark {<br>\t    // what we can do for now<br>\t    color: var(--gray-1);<br>\t<br><br>\t    h1, h2, h3, h4 {<br>\t        color: var(--white);<br>\t    }<br>\t<br><br>\t    .text--subtle {<br>\t        color: var(--gray-4);<br>\t    }<br>\t<br><br>\t    a {<br>\t        color: var(--color-accent);<br>\t    }<br>\t}</code></pre><h3>Putting all&nbsp;together</h3><p>Let’s put all the pieces together! This is how we’ve set typography so far in our framework. It’s not necessarily the final version. We will review everything before publishing the library on Github. Oh and any feedback is welcome! Let us hear what you think and what could be done better.</p><pre><code>\t/* -------------------------------- <br>\t<br>\tTypography<br>\t<br>\t-------------------------------- */<br>\t<br><br>\t:root {<br>\t    --font-primary: sans-serif;<br>\t    --font-secondary: serif;<br>\t<br><br>\t    /* set base values */<br>\t    --text-base-size: 1em;<br>\t    --text-scale-ratio: 1.2;<br>\t<br><br>\t    /* type scale */<br>\t    --text-xs: calc(1em / (var(--text-scale-ratio) * var(--text-scale-ratio)));<br>\t    --text-sm: calc(1em / var(--text-scale-ratio));<br>\t    --text-md: calc(1em * var(--text-scale-ratio));<br>\t    --text-lg: calc(1em * var(--text-scale-ratio) * var(--text-scale-ratio));<br>\t    --text-xl: calc(1em * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio));<br>\t    --text-xxl: calc(1em * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio));<br>\t    --text-xxxl: calc(1em * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio) * var(--text-scale-ratio));<br>\t<br><br>\t    /* line-height */<br>\t    --heading-line-height: 1.2;<br>\t    --body-line-height: 1.4;<br>\t}<br>\t<br><br>\t@include breakpoint(md) {<br>\t    :root {<br>\t        --text-base-size: 1.25em;<br>\t        --text-scale-ratio: 1.25;<br>\t    }<br>\t}<br>\t<br><br>\tbody {<br>\t    font-size: var(--text-base-size);<br>\t    font-family: var(--font-primary);<br>\t    color: var(--color-text);<br>\t}<br>\t<br><br>\th1, h2, h3, h4, form legend {<br>\t    color: var(--color-text-heading);<br>\t    margin-bottom: var(--space-xxs);<br>\t    line-height: var(--heading-line-height);<br>\t}<br>\t<br><br>\t/* text size */<br>\t.text--xxxl {<br>\t    font-size: var(--text-xxxl);<br>\t}<br>\t<br><br>\th1, .text--xxl {<br>\t    font-size: var(--text-xxl);<br>\t}<br>\t<br><br>\th2, .text--xl {<br>\t    font-size: var(--text-xl);<br>\t}<br>\t<br><br>\th3, .text--lg {<br>\t    font-size: var(--text-lg);<br>\t}<br>\t<br><br>\th4, .text--md {<br>\t    font-size: var(--text-md);<br>\t}<br>\t<br><br>\t.text--sm, small {<br>\t    font-size: var(--text-sm);<br>\t}<br>\t<br><br>\t.text--xs {<br>\t    font-size: var(--text-xs);<br>\t}<br>\t<br><br>\tp {<br>\t    line-height: var(--body-line-height);<br>\t}<br>\t<br><br>\ta {<br>\t    color: var(--color-link);<br>\t<br><br>\t    &amp;:visited {<br>\t        color: var(--color-link-visited);<br>\t    }<br>\t}<br>\t<br><br>\tb, strong {<br>\t    font-weight: bold;<br>\t}<br>\t<br><br>\t.text-container {<br>\t    h2, h3, h4 {<br>\t        margin-top: var(--space-sm);<br>\t    }<br>\t    <br>\t    ul, ol, p {<br>\t        margin-bottom: var(--space-md);<br>\t    }<br>\t<br><br>\t    ul, ol {<br>\t\t\tlist-style-position: outside;<br>\t        padding-left: 24px;<br>\t\t}<br>\t<br><br>\t\tul {<br>\t\t\tlist-style-type: disc;<br>\t\t}<br>\t<br><br>\t\tol {<br>\t\t\tlist-style-type: decimal;<br>\t    }<br>\t<br><br>\t    ul li, ol li {<br>\t        line-height: var(--body-line-height);<br>\t    }<br>\t    <br>\t    em {<br>\t        font-style: italic;<br>\t    }<br>\t<br><br>\t    u {<br>\t        text-decoration: underline;<br>\t    }<br>\t}<br>\t<br><br>\t/* utility classes */<br>\t.truncate {<br>\t    // truncate text if it exceeds parent<br>\t    overflow: hidden;<br>\t    text-overflow: ellipsis;<br>\t    white-space: nowrap;<br>\t}</code></pre><p>I hope you enjoyed the article! For more web design nuggets, follow us here on Medium or&nbsp;<a href=\"https://twitter.com/CodyWebHouse\" data-href=\"https://twitter.com/CodyWebHouse\" rel=\"nofollow noopener\" target=\"_blank\">Twitter</a>. 🙌</p></div>","filePath":"pages/HTML5/.md","_id":"jXto1I65X6fHeuFO","dateUpdated":1551455820781}
{"date":"2018-11-27T11:22:24.803Z","title":"Angular — Unit Testing recipes (v2+)","sourceUrl":"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584","path":"Angular/","category":"Angular","tags":["Angular"," TDD"," Unit Testing"],"author":"Gerard Sans","excerpt":"Recipes for Angular Unit Testing using Jasmine","dateCreated":1543317552054,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Angular/'\ndate: 'Tue Nov 27 2018 16:52:24 GMT+0530 (India Standard Time)'\ntitle: 'Angular — Unit Testing recipes (v2+)'\ntags: ['Angular','TDD','Unit Testing']\ncategory: 'Angular'\ncategoryColor: '#F3C610'\nexcerpt: 'Recipes for Angular Unit Testing using Jasmine'\ncoverImage: ''\nsourceUrl: 'https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584'\ntype: 'Post'\n---\n    ","htmlCode":"<section><div><div><h3>Angular — Testing Guide&nbsp;(v4+)</h3><p>Up-to-date version of&nbsp;<span>Angular — Unit Testing recipes</span>. Read it to learn about the latest&nbsp;<span>Angular&nbsp;</span>APIs.</p><p><span>Keep reading to see the old versions of the testing API. The Jasmine section and custom matchers are still valid though.</span></p><p><span><br></span><span>Angular was designed with&nbsp;</span><span>testability</span><span>&nbsp;in mind as its predecessor and it provides multiple options to support&nbsp;</span><span>Unit Testing</span><span>. In this article we will show you how to setup&nbsp;</span><a href=\"http://jasmine.github.io/\" data-href=\"http://jasmine.github.io/\" rel=\"nofollow noopener nofollow noopener\" target=\"_blank\">Jasmine</a><span>&nbsp;and write some common unit tests for your Angular Applications. We will cover:</span></p></div></div></section><section><div><div><ul><li>Introducing Jasmine:&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584#e924\" data-href=\"#e924\">main concepts</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584#4250\" data-href=\"#4250\">features</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584#4880\" data-href=\"#4880\">setup and tear down</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584#14c4\" data-href=\"#14c4\">default matchers</a>&nbsp;and&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584#b334\" data-href=\"#b334\">custom matchers</a>.</li><li>Testing in Angular:&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584#479b\" data-href=\"#479b\">setup</a>&nbsp;and&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584#05b4\" data-href=\"#05b4\">dependency injection</a>.</li><li>Unit Testing recipes for Angular:&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584#8d61\" data-href=\"#8d61\">Components</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584#58b7\" data-href=\"#58b7\">Services</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584#45ef\" data-href=\"#45ef\">Http</a>&nbsp;and&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584#5ac2\" data-href=\"#5ac2\">MockBackend</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584#2e84\" data-href=\"#2e84\">Directives</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584#a937\" data-href=\"#a937\">Pipes</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584#0bc9\" data-href=\"#0bc9\">Routes</a>,&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584#59a4\" data-href=\"#59a4\">Observables</a>&nbsp;and&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584#3882\" data-href=\"#3882\">EventEmitter</a>.</li></ul><p>You can navigate to each recipe using the links above or skip to the&nbsp;<a href=\"https://medium.com/google-developer-experts/angular-2-unit-testing-with-jasmine-defe20421584#e264\" data-href=\"#e264\">second section</a>&nbsp;if you are already familiar with Jasmine.</p><p>A fully working example including all specs can be found&nbsp;<a href=\"http://plnkr.co/edit/N3Acjuk7g9sPs35Rchjg?p=preview\" data-href=\"http://plnkr.co/edit/N3Acjuk7g9sPs35Rchjg?p=preview\" rel=\"noopener nofollow\" target=\"_blank\">here</a>&nbsp;(Plunker). Find the latest Angular content following my feed at&nbsp;<a href=\"https://twitter.com/intent/user?screen_name=gerardsans\" data-href=\"https://twitter.com/intent/user?screen_name=gerardsans\" rel=\"noopener nofollow\" target=\"_blank\">@gerardsans</a>.</p><h3>Introduction to&nbsp;Jasmine</h3><p>Jasmine is an open source testing framework from&nbsp;<a href=\"http://pivotal.io/labs\" data-href=\"http://pivotal.io/labs\" rel=\"nofollow noopener\" target=\"_blank\">Pivotal Labs</a>&nbsp;that uses behaviour-driven notation resulting in a fluent and improved testing experience.</p><h4>Main concepts</h4><ul><li>Suites — <span><em>describe(string, function)</em></span><em>&nbsp;</em>functions, take a title and a function containing one or more specs.</li><li>Specs — <span><em>it(string, function)</em></span>&nbsp;functions, take a title and a function containing one or more expectations.</li><li>Expectations — are assertions that evaluate to&nbsp;<em>true</em>&nbsp;or&nbsp;<em>false</em>. Basic syntax reads&nbsp;<span><em>expect(actual).toBe(expected)</em></span></li><li>Matchers — are predefined helpers for common assertions. Eg:&nbsp;<span><em>toBe(expected)</em></span>,&nbsp;<span><em>toEqual(expected)</em></span>. Find a complete list&nbsp;<a href=\"https://github.com/JamieMason/Jasmine-Matchers\" data-href=\"https://github.com/JamieMason/Jasmine-Matchers\" rel=\"nofollow noopener\" target=\"_blank\">here</a>.</li></ul><blockquote>Note that&nbsp;<span>.toEqual()</span>&nbsp;does a deep comparison while&nbsp;<span>.toBe()</span>&nbsp;is just a reference equality.</blockquote><h4>Jasmine Features</h4><p>Since version 2.0 major upgrade (Dec 2013) there have been few releases. Jasmine 2.4.1, was released just last December. See below the main additions since 2.0:</p><ul><li><span><em>jasmine.stringMatching(string|regExp)</em></span>&nbsp;matcher — partial match for strings. It also accepts Regular Expressions as an argument.</li><li><span><em>jasmine.arrayContaining(array)</em></span>&nbsp;matcher — partial match when an expectation only requires some of the values in an array to be present</li><li><span><em>jasmine.anything()</em></span>&nbsp;matcher — matches any value that is neither null or undefined.</li><li><span><em>pending(string)</em></span>&nbsp;function — we can now pass in a reason as a text to be shown by the reporter.</li><li><span><em>fail(string|Error)</em></span>&nbsp;function — <em>fail</em>&nbsp;function will cause a spec to fail, taking a message or an Error object as a parameter.</li><li><span>focused specs/suites</span> — by using&nbsp;<em>fit&nbsp;</em>and&nbsp;<em>fdescribe&nbsp;</em>you can decide which specs or suites to be run.</li><li><span>one-time setup and teardown</span> — this can be used by calling&nbsp;<em>beforeAll&nbsp;</em>and&nbsp;<em>afterAll.</em></li><li><span><em>disabled specs/suites</em></span><em> — you can selectively disable specs or suites with xit and xdescribe</em>&nbsp;<em>(shown as pending).</em></li></ul><p>Find all release details&nbsp;<a href=\"https://github.com/jasmine/jasmine/releases\" data-href=\"https://github.com/jasmine/jasmine/releases\" rel=\"nofollow noopener\" target=\"_blank\">here</a>.</p><h4>Setup and&nbsp;teardown</h4><p>A good practice to avoid code duplication on our specs is to include setup code.</p><blockquote>use beforeEach and afterEach to do changes before and after each&nbsp;spec</blockquote><p>Jasmine offers four handlers to add our setup and teardown code:&nbsp;<span><em>beforeEach</em></span>,&nbsp;<span><em>afterEach</em></span>&nbsp;executed for each spec and&nbsp;<span><em>beforeAll</em></span>,&nbsp;<span><em>afterAll</em></span>executed once per suite.</p><h4>Default Matchers</h4><p>These are Jasmine’s default set of matchers.</p><pre><code>expect(fn).toThrow(e);<br>expect(instance).toBe(instance);<br>expect(mixed).toBeDefined();<br>expect(mixed).toBeFalsy();<br>expect(number).toBeGreaterThan(number);<br>expect(number).toBeLessThan(number);<br>expect(mixed).toBeNull();<br>expect(mixed).toBeTruthy();<br>expect(mixed).toBeUndefined();<br>expect(array).toContain(member);<br>expect(string).toContain(substring);<br>expect(mixed).toEqual(mixed);<br>expect(mixed).toMatch(pattern);</code></pre><blockquote>Check out&nbsp;<a href=\"https://github.com/JamieMason/Jasmine-Matchers\" data-href=\"https://github.com/JamieMason/Jasmine-Matchers\" rel=\"nofollow noopener\" target=\"_blank\">Jasmine-Matchers</a>&nbsp;for some additional matchers for Arrays, Booleans, Browser, Numbers, Exceptions, Strings, Objects and Dates.</blockquote><h4>Custom Matchers</h4><p>Sometimes you can improve your specs or failure messages using a custom matcher library. If you feel you are doing a lot of boilerplate in your tests this might help you.</p><p>Let’s see how to create a&nbsp;<em>myCustomMatchers</em>&nbsp;library containing only one simplified matcher:&nbsp;<span><em>toBeAllowedToDrive</em></span>. A matcher must be within a factory object containing a&nbsp;<em>compare</em>&nbsp;function. Its signature is&nbsp;<em>compare(actual, expected)&nbsp;</em>returning an object like&nbsp;<em>{ pass: boolean, message: string }.&nbsp;</em>This implementation will work both for&nbsp;<em>expect(age).toBeAllowedToDrive()</em>&nbsp;and&nbsp;<em>(age).not.toBeAllowedToDrive().</em></p><pre><code>export let myCustomMatchers = {<br>  // toBeAllowedToDrive matcher<br>  // Usage: expect(age).toBeAllowedToDrive();<br>  //        expect(age).not.toBeAllowedToDrive();<br>  toBeAllowedToDrive: () =&gt; ({<br>    compare: age =&gt; {<br>      let result = {};<br>      result.pass = age&gt;16;<br><br>      if (result.pass) {<br>        result.message = `Expected ${age} to be allowed to drive`;<br>      } else {<br>        result.message = `Expected ${age} to be allowed to drive, but it was not`;<br>      }<br>      return result;<br>    }<br>  }) <br>};</code></pre><p>We can see how we improved specs readability on the code below. Messages will also improve future maintenance and debugging experience.</p><pre><code>let John = 17, Mary = 16;<br><br>it(\"should allow John to drive\", () =&gt; {<br>  expect(John).toBeAllowedToDrive();<br>  // replaces <br>  expect(John).toBeGreaterThan(16);<br>});<br><br>it(\"should not allow Mary to drive\", () =&gt; {<br>  expect(Mary).not.toBeAllowedToDrive();<br>  // replaces <br>  expect(Mary).not.toBeGreaterThan(16);<br>});</code></pre><h3>Testing in&nbsp;Angular</h3><h4>Setup</h4><p>There are few options to&nbsp;<a href=\"https://angular.io/docs/ts/latest/testing/first-app-tests.html\" data-href=\"https://angular.io/docs/ts/latest/testing/first-app-tests.html\" rel=\"nofollow noopener\" target=\"_blank\">setup your environment</a>. You can use Jasmine’s&nbsp;<em>SpecRunner.html</em>&nbsp;from the&nbsp;<a href=\"https://github.com/pivotal/jasmine/releases\" data-href=\"https://github.com/pivotal/jasmine/releases\" rel=\"nofollow noopener\" target=\"_blank\">standalone distribution</a>&nbsp;to start or create your own. You can also integrate it with a test runner like&nbsp;<a href=\"https://karma-runner.github.io/\" data-href=\"https://karma-runner.github.io\" rel=\"nofollow noopener\" target=\"_blank\">Karma</a>. We are not going to cover all combinations as we are more interested on the actual tests.</p><blockquote>This setup is just for reference and will only work with Plunker.</blockquote><pre><code>&lt;!-- Jasmine dependencies --&gt;<br>&lt;link href=\"cdnjs.cloudflare.com/ajax/libs/jasmine/2.4.1/jasmine.css\" /&gt;<br>&lt;script src=\"cdnjs.cloudflare.com/ajax/libs/jasmine/2.4.1/jasmine.js\"&gt;&lt;/script&gt;<br>&lt;script src=\"cdnjs.cloudflare.com/ajax/libs/jasmine/2.4.1/jasmine-html.js\"&gt;&lt;/script&gt;<br>&lt;script src=\"cdnjs.cloudflare.com/ajax/libs/jasmine/2.4.1/boot.js\"&gt;&lt;/script&gt;<br><br>&lt;!-- Angular 2 dependencies --&gt;<br>&lt;script src=\"https://code.angularjs.org/tools/system.js\"&gt;&lt;/script&gt;<br>&lt;script src=\"https://code.angularjs.org/tools/typescript.js\"&gt;&lt;/script&gt;<br>&lt;script src=\"config.js\"&gt;&lt;/script&gt;<br>&lt;script src=\"https://code.angularjs.org/2.0.0-beta.7/angular2-polyfills.min.js\"&gt;&lt;/script&gt;<br>&lt;script src=\"https://code.angularjs.org/2.0.0-beta.7/angular2.js\"&gt;&lt;/script&gt;<br>...<br>&lt;!-- Angular 2 testing dependencies --&gt;<br>&lt;script src=\"https://code.angularjs.org/2.0.0-beta.7/testing.dev.js\"&gt;&lt;/script&gt;<br><br>&lt;script&gt;<br>  //load all dependencies at the same time<br>  Promise.all([<br>    //required to test on browser<br>    System.import('src/setup.spec'), <br>    //specs<br>    System.import('src/customMatcher.spec'),<br>    System.import('src/languagesService.spec'),<br>    ...<br>  ]).then(function(modules) {<br>    //manually trigger Jasmine test-runner<br>    window.onload();<br>  }).catch(console.error.bind(console));<br>&lt;/script&gt;</code></pre><p>We load Jasmine dependencies followed by Angular ones. We are using a&nbsp;<span>System.js</span>&nbsp;and&nbsp;<span>TypeScript</span>&nbsp;setup. We use&nbsp;<em>Promise.all()</em>&nbsp;to load our specs in one go and, once all specs are available, trigger Jasmine test-runner. Don’t forget to include&nbsp;<em>testing.dev.js</em>.</p><blockquote>Check this&nbsp;<a href=\"https://github.com/angular/angular/blob/d116861c8e884d911f15b8caabeefc6f049c775d/modules/angular2/docs/bundles/overview.md#es5-and-ngupgrade-users\" data-href=\"https://github.com/angular/angular/blob/d116861c8e884d911f15b8caabeefc6f049c775d/modules/angular2/docs/bundles/overview.md#es5-and-ngupgrade-users\" rel=\"nofollow noopener\" target=\"_blank\">url</a>&nbsp;to find out which modules, barrels and bundles are required for your setup.</blockquote><h4>Dependency Injection (DI)</h4><p>In order to use Angular components in our tests we need to include our dependencies as we do in our application using bootstrap. This information will then be used by the Dependency Injection engine to resolve all references. In order to do this we are going to use:&nbsp;<a href=\"https://angular.io/docs/ts/latest/api/testing/beforeEachProviders-function.html\" data-href=\"https://angular.io/docs/ts/latest/api/testing/beforeEachProviders-function.html\" rel=\"noopener nofollow\" target=\"_blank\"><em>beforeEachProviders</em></a><em>,&nbsp;</em><a href=\"https://angular.io/docs/ts/latest/api/testing/inject-function.html\" data-href=\"https://angular.io/docs/ts/latest/api/testing/inject-function.html\" rel=\"noopener nofollow\" target=\"_blank\"><em>inject</em></a><em>&nbsp;</em>and<em></em><a href=\"https://angular.io/docs/ts/latest/api/testing/injectAsync-function.html\" data-href=\"https://angular.io/docs/ts/latest/api/testing/injectAsync-function.html\" rel=\"noopener nofollow\" target=\"_blank\"><em>injectAsync</em></a><em>.&nbsp;</em>All imported from<em>&nbsp;‘angular2/testing’.</em></p><p>Let’s see how we would use them with the&nbsp;<em>LanguagesService</em>&nbsp;Component&nbsp;:</p><pre><code>describe('Service: LanguagesService', () =&gt; {<br>  beforeEachProviders(() =&gt; [LanguagesService]);<br>  <br>  it('contains English', inject([LanguagesService], (service) =&gt; { <br>    expect(service.get()).toContain('en');<br>  }));<br>})</code></pre><p>First we load the dependencies required for our tests with&nbsp;<a href=\"https://angular.io/docs/ts/latest/api/testing/beforeEachProviders-function.html\" data-href=\"https://angular.io/docs/ts/latest/api/testing/beforeEachProviders-function.html\" rel=\"nofollow noopener\" target=\"_blank\"><em>beforeEachProviders</em></a>. This will setup a fresh new&nbsp;<a href=\"https://angular.io/docs/ts/latest/api/core/Injector-class.html\" data-href=\"https://angular.io/docs/ts/latest/api/core/Injector-class.html\" rel=\"nofollow noopener\" target=\"_blank\"><em>Injector</em></a>&nbsp;instance before each test using the dependencies required as an Array<em>.&nbsp;</em>Then on our spec we used&nbsp;<a href=\"https://angular.io/docs/ts/latest/api/testing/inject-function.html\" data-href=\"https://angular.io/docs/ts/latest/api/testing/inject-function.html\" rel=\"nofollow noopener\" target=\"_blank\"><em>inject</em></a>&nbsp;to automatically instantiate each dependency. For simple tests we could also use this alternative below but as a general rule use&nbsp;<a href=\"https://angular.io/docs/ts/latest/api/testing/inject-function.html\" data-href=\"https://angular.io/docs/ts/latest/api/testing/inject-function.html\" rel=\"nofollow noopener\" target=\"_blank\"><em>inject</em></a><em>&nbsp;</em>to use the full potential of DI.</p><pre><code>describe('Service: LanguagesService', () =&gt; {<br>  //without using inject<br>  beforeEachProviders(() =&gt; [LanguagesService]);<br>  <br>  it('contains English', () =&gt; { <br>    let service = new LanguageService();<br>    expect(service.get()).toContain('en');<br>  }));<br>})</code></pre><p>Two common usages of&nbsp;<a href=\"https://angular.io/docs/ts/latest/api/testing/inject-function.html\" data-href=\"https://angular.io/docs/ts/latest/api/testing/inject-function.html\" rel=\"nofollow noopener\" target=\"_blank\"><em>inject</em></a>&nbsp;are:</p><pre><code>let counter, greeter;<br><br>//using inject API<br>beforeEach(inject([Counter, Greeter], (c, g) =&gt; {<br>  counter = c;<br>  greeter = g;<br>}))<br><br>//using Injector<br>//accepts any number of dependencies without changing inject signature<br>beforeEach(inject([Injector], injector =&gt; {<br>  counter = injector.get(Counter);<br>  greeter = injector.get(Greeter);<br>  ...<br>})</code></pre><p>Finally we can use&nbsp;<a href=\"https://angular.io/docs/ts/latest/api/testing/async-function.html\" data-href=\"https://angular.io/docs/ts/latest/api/testing/async-function.html\" rel=\"nofollow noopener\" target=\"_blank\"><em>async</em></a><em>&nbsp;</em>when dependencies involve asynchronous handling. This will internally create a zone and deal with any asynchronous processing.</p><p>Let’s see how we can test the different building blocks of our application. We are going to skip all required&nbsp;<span><em>imports</em></span>&nbsp;in this post for brevity. We added notes when necessary. They can be found&nbsp;<a href=\"http://plnkr.co/edit/N3Acjuk7g9sPs35Rchjg?p=preview\" data-href=\"http://plnkr.co/edit/N3Acjuk7g9sPs35Rchjg?p=preview\" rel=\"nofollow noopener\" target=\"_blank\">here</a>.</p><h3>Unit Testing recipes for Angular&nbsp;(v2+)</h3><h4>Testing a Component</h4><p>Let’s take a simple component that renders a&nbsp;<em>greeting&nbsp;</em>message using an&nbsp;<a href=\"https://angular.io/docs/ts/latest/api/core/Input-var.html\" data-href=\"https://angular.io/docs/ts/latest/api/core/Input-var.html\" rel=\"nofollow noopener\" target=\"_blank\">@<em>Input()</em></a>&nbsp;property.</p><pre><code>// Usage:    &lt;greeter name=\"Joe\"&gt;&lt;/greeter&gt; <br>// Renders:  &lt;h1&gt;Hello Joe!&lt;/h1&gt;<br>@Component({<br>  selector: 'greeter',<br>  template: `&lt;h1&gt;Hello {{name}}!&lt;/h1&gt;`<br>})<br>export class Greeter { <br>  @Input() name;<br>}</code></pre><p>To help testing this component we will use a common setup using&nbsp;<em>beforeEachProviders</em>.</p><blockquote>use beforeEachProviders() to load the corresponding dependencies so they are available during your&nbsp;tests</blockquote><p>A common practice is to use&nbsp;<em>beforeEach&nbsp;</em>to refactor our tests. By doing it we avoid having to repeat some code like&nbsp;<em>inject&nbsp;</em>for each test<em>.&nbsp;</em>This will also simplify our specs.</p><pre><code>describe('Greeter: component', () =&gt; {<br>  let tcb;<br>  <br>  //setup<br>  beforeEachProviders(() =&gt; [<br>    TestComponentBuilder,<br>    Greeter<br>  ]);<br>  <br>  beforeEach(inject([TestComponentBuilder], _tcb =&gt; { <br>    tcb = _tcb<br>  }));<br>  <br>  //specs<br>  it('should render `Hello World!`', done =&gt; {<br>    tcb.createAsync(Greeter).then(fixture =&gt; {<br>      let greeter = fixture.componentInstance, <br>        element = fixture.nativeElement;<br>      greeter.name = 'World';<br>      fixture.detectChanges(); //trigger change detection<br>      expect(element.querySelector('h1').innerText).toBe('Hello World!');<br>      done();<br>    })<br>    .catch(e =&gt; done.fail(e));<br>  });<br>}) </code></pre><p>We used&nbsp;<em>createAsync()</em>&nbsp;from&nbsp;<a href=\"https://github.com/angular/angular/blob/a7e9bc97f6a19a2b47b962bd021cb91346a44baa/modules/angular2/src/testing/test_component_builder.ts#L95\" data-href=\"https://github.com/angular/angular/blob/a7e9bc97f6a19a2b47b962bd021cb91346a44baa/modules/angular2/src/testing/test_component_builder.ts#L95\" rel=\"nofollow noopener\" target=\"_blank\"><em>TestComponentBuilder</em></a>&nbsp;to create an instance of our&nbsp;<em>Greeter</em>&nbsp;component returning a&nbsp;<em>Promise</em>. The component will then be created within a test&nbsp;<a href=\"https://github.com/angular/angular/blob/a7e9bc97f6a19a2b47b962bd021cb91346a44baa/modules/angular2/src/testing/test_component_builder.ts#L31\" data-href=\"https://github.com/angular/angular/blob/a7e9bc97f6a19a2b47b962bd021cb91346a44baa/modules/angular2/src/testing/test_component_builder.ts#L31\" rel=\"nofollow noopener\" target=\"_blank\">fixture</a>. This is its main API:</p><pre>abstract class <a href=\"https://github.com/angular/angular/blob/a7e9bc97f6a19a2b47b962bd021cb91346a44baa/modules/angular2/src/testing/test_component_builder.ts#L31\" data-href=\"https://github.com/angular/angular/blob/a7e9bc97f6a19a2b47b962bd021cb91346a44baa/modules/angular2/src/testing/test_component_builder.ts#L31\" rel=\"nofollow noopener\" target=\"_blank\">ComponentFixture</a> {<br>  debugElement;       // test helper <br>  componentInstance;  // access properties and methods<br>  nativeElement;      // access DOM<br>  detectChanges();    // trigger component change detection<br>}</pre><p>We used the&nbsp;<em>name</em>&nbsp;property to set up a value, trigger change detection and check the expected result.</p><blockquote>We used Jasmine’s asynchronous testing support using&nbsp;<span>done</span>&nbsp;introduced in Jasmine 2. If you are not familiar with it read&nbsp;<a href=\"http://jasmine.github.io/2.4/introduction.html#section-Asynchronous_Support\" data-href=\"http://jasmine.github.io/2.4/introduction.html#section-Asynchronous_Support\" rel=\"nofollow noopener\" target=\"_blank\">this</a>. We are going to use it few times.</blockquote><h4>Testing a&nbsp;Service</h4><p><em>LanguagesService,</em>&nbsp;has only one method that returns an array of available languages for the application.</p><pre><code>//a simple service<br>export class LanguagesService {<br>  get() {<br>    return ['en', 'es', 'fr'];<br>  }<br>}</code></pre><p>Similar to our previous example we instantiate the service using&nbsp;<em>beforeEach.&nbsp;</em>As we said, this is<em>&nbsp;</em>a good practice even if we only have one spec. On this occasion we are checking each individual language and the total count.</p><pre><code>describe('Service: LanguagesService', () =&gt; {<br>  let service;<br>  <br>  //setup<br>  beforeEachProviders(() =&gt; [<br>    LanguagesService<br>  ]);<br>  <br>  beforeEach(inject([LanguagesService], s =&gt; {<br>    service = s;<br>  }));<br>  <br>  //specs<br>  it('should return available languages', () =&gt; {<br>    let languages = service.get();<br>    expect(languages).toContain('en');<br>    expect(languages).toContain('es');<br>    expect(languages).toContain('fr');<br>    expect(languages.length).toEqual(3);<br>  });<br>}) </code></pre><h4>Testing using&nbsp;Http</h4><p>We usually don’t want to make http calls during our tests but we are going to show it for reference. We have replaced our initial service,&nbsp;<em>LanguageService&nbsp;</em>for&nbsp;<em>LanguageServiceHttp.</em></p><pre><code>export class LanguagesServiceHttp {<br>  constructor(private http:Http) { }<br>  <br>  get(){<br>    return this.http.get('api/languages.json')<br>      .map(response =&gt; response.json());<br>  }<br>}</code></pre><p>In this case it uses&nbsp;<em>http.get()</em>&nbsp;to read a json file. We then used&nbsp;<a href=\"https://github.com/ReactiveX/RxJS/blob/master/src/operator/map.ts\" data-href=\"https://github.com/ReactiveX/RxJS/blob/master/src/operator/map.ts\" rel=\"nofollow noopener\" target=\"_blank\"><em>Observable.map()</em></a><em>&nbsp;</em>to transform the response into the final result using&nbsp;<em>json().</em></p><p>Our test looks very similar to the previous one. The main difference is the use of an asynchronous test as we did with the component due to the subscribe.</p><pre><code>describe('Service: LanguagesServiceHttp', () =&gt; {<br>  let service;<br>  <br>  //setup<br>  beforeEachProviders(() =&gt; [<br>    HTTP_PROVIDERS, <br>    LanguagesServiceHttp<br>  ]);<br>  <br>  beforeEach(inject([LanguagesServiceHttp], s =&gt; {<br>    service = s;<br>  }));<br>  <br>  //specs<br>  it('should return available languages', done =&gt; {<br>    service.get().subscribe(x =&gt; { <br>      expect(x).toContain('en');<br>      expect(x).toContain('es');<br>      expect(x).toContain('fr');<br>      expect(x.length).toEqual(3);<br>      done();<br>    });<br>  });<br>}) </code></pre><p><em>http.get()</em>&nbsp;returns an Observable that we can subscribe to. We will cover Observables in more detail later on.</p><h4>Testing using MockBackend</h4><p>A more real use case is replacing http calls with a&nbsp;<em>MockBackend</em>. In order to do this we can use&nbsp;<em>provide&nbsp;</em>to create a new instance every time we instantiate&nbsp;<em>Http</em>using&nbsp;<em>useFactory&nbsp;</em>and providing the necessary plumbing (lines 9–11)<em>.&nbsp;</em>This<em>&nbsp;</em>will allow us to mock our responses and avoid hitting the real backend boosting our tests.</p><pre><code>describe('MockBackend: LanguagesServiceHttp', () =&gt; {<br>  let mockbackend, service;<br>  <br>  //setup<br>  beforeEachProviders(() =&gt; [<br>    LanguagesServiceHttp,<br>    MockBackend,<br>    BaseRequestOptions,<br>    provide(Http, {<br>      useFactory: (backend, options) =&gt; new Http(backend, options), <br>      deps: [MockBackend, BaseRequestOptions]})<br>  ]);<br>  <br>  beforeEach(inject([MockBackend, LanguagesServiceHttp], (_mockbackend, _service) =&gt; {<br>    mockbackend = _mockbackend;<br>    service = _service;<br>  }))<br>  <br>  //specs<br>  it('should return mocked response', done =&gt; {<br>    let response = [\"ru\", \"es\"];<br>    mockbackend.connections.subscribe(connection =&gt; {<br>      connection.mockRespond(new Response({body: JSON.stringify(response)}));<br>    });<br>    service.get().subscribe(languages =&gt; {<br>      expect(languages).toContain('ru');<br>      expect(languages).toContain('es');<br>      expect(languages.length).toBe(2);<br>      done();<br>    });<br>  });<br>})</code></pre><p>On our test we build our mocked response (lines 22–24) so when we finally make the call to our service it gets the expected results.</p><h4>Testing a Directive</h4><p>Directives in Angular are a specific type of component with usually no accompanying view. We will use an&nbsp;<a href=\"https://angular.io/docs/ts/latest/guide/attribute-directives.html\" data-href=\"https://angular.io/docs/ts/latest/guide/attribute-directives.html\" rel=\"noopener nofollow\" target=\"_blank\">attribute directive</a>,&nbsp;<em>logClicks,</em>&nbsp;that logs how many clicks we do on the&nbsp;<span><em>host element</em></span>&nbsp;so you can grasp the idea.</p><pre><code>// Example: &lt;div log-clicks&gt;&lt;/div&gt;<br>@Directive({<br>  selector: \"[log-clicks]\"<br>})<br>export class logClicks {<br>  counter = 0;<br>  @Output() changes = new EventEmitter();<br>  <br>  @HostListener('click', ['$event.target'])<br>  clicked(target) { <br>    console.log(`Click on [${target}]: ${++this.counter}`);<br>    //we use emit as next is marked as deprecated<br>    this.changes.emit(this.counter);<br>  }<br>}</code></pre><p>In order to test this directive we decided to create a&nbsp;<em>Container</em>&nbsp;component. We will set it up so it will act as our host reproducing the events emitted by our directive.</p><pre><code>@Component({ <br>  selector: 'container',<br>  template: `&lt;div log-clicks (changes)=\"changed($event)\"&gt;&lt;/div&gt;`,<br>  directives: [logClicks]<br>})<br>export class Container {  <br>  @Output() changes = new EventEmitter();<br>  changed(value){<br>    this.changes.emit(value);<br>  }<br>}<br><br>describe('Directive: logClicks', () =&gt; {<br>  let fixture;<br>  <br>  //setup<br>  beforeEachProviders(() =&gt; [<br>    TestComponentBuilder<br>  ]);<br><br>  beforeEach(injectAsync([TestComponentBuilder], tcb =&gt; {<br>    return tcb<br>      .createAsync(Container)<br>      .then(f =&gt; fixture = f);<br>  }));<br>  <br>  //specs<br>  it('should increment counter', done =&gt; {<br>    let container = fixture.componentInstance,<br>      div = fixture.nativeElement.querySelector('div');<br>    //set up subscriber<br>    container.changes.subscribe(x =&gt; { <br>      expect(x).toBe(1);<br>      done();<br>    });<br>    //trigger click on container<br>    div.click();<br>  }));<br>}) </code></pre><p>We used&nbsp;<em>beforeEach</em>&nbsp;to separate the logic for creating the component from the tests. This part can now be used for all specs.</p><p>We used&nbsp;<span><em>injectAsync</em></span><em>&nbsp;</em>as the fixture is created asynchronously.&nbsp;<em>injectAsync</em>requires that we return a&nbsp;<em>Promise</em>. In this instance we are returning the&nbsp;<em>Promise&nbsp;</em>returned by&nbsp;<em>createAsync</em>. Only after it is resolved it will start running the specs.</p><blockquote>We can also use injectAsync returning a Promise to deal with asynchronous tests</blockquote><h4>Testing a&nbsp;Pipe</h4><p>Pipes are functions that transform input data into a user readable format. We will write a custom capitalise pipe,&nbsp;<em>capitalise,&nbsp;</em>using the standard&nbsp;<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/toUpperCase\" data-href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/toUpperCase\" rel=\"nofollow noopener\" target=\"_blank\"><em>String.toUpperCase</em></a><em>()</em>. This is only for simplicity as angular has its own&nbsp;<a href=\"https://angular.io/docs/ts/latest/api/common/UpperCasePipe-class.html\" data-href=\"https://angular.io/docs/ts/latest/api/common/UpperCasePipe-class.html\" rel=\"nofollow noopener\" target=\"_blank\"><em>UpperCasePipe</em></a><em>&nbsp;</em>implementation.</p><pre><code>@Pipe({<br>  name: 'capitalise'<br>})<br>export class CapitalisePipe implements PipeTransform {<br>  transform(value){ <br>    if (isString(value)) <br>      return value.toUpperCase();<br>    throw new BaseException('Requires a String as input');<br>  }<br>}</code></pre><p>Pipes are just plain classes that can be injected so we can setup our specs very easily using&nbsp;<em>inject</em>.</p><pre><code>describe('Pipe: CapitalisePipe', () =&gt; {<br>  let pipe;<br>  <br>  //setup<br>  beforeEachProviders(() =&gt; [<br>    CapitalisePipe<br>  ]);<br>  <br>  beforeEach(inject([CapitalisePipe], p =&gt; {<br>    pipe = p;<br>  }));<br>  <br>  //specs<br>  it('should throw if not used with a string', () =&gt; {<br>    //must use arrow function for expect to capture exception<br>    expect(()=&gt;pipe.transform(null)).toThrow();<br>    expect(()=&gt;pipe.transform(undefined)).toThrow();<br>    expect(()=&gt;pipe.transform()).toThrow();<br>    expect(()=&gt;pipe.transform()).toThrowError('Requires a String as input');<br>    expect(()=&gt;pipe.transform()).toThrowError(BaseException);<br>    expect(()=&gt;pipe.transform()).toThrowError(BaseException, 'Requires a String as input');<br>  });<br>  <br>  it('should work with empty string', () =&gt; {<br>    expect(pipe.transform('')).toEqual('');<br>  });<br>  <br>  it('should capitalise', () =&gt; {<br>    expect(pipe.transform('wow')).toEqual('WOW');<br>  });<br>}) </code></pre><p>In order to test our pipe we checked the common cases: it throws when not used with a string, it should work with empty string and finally that it should capitalise. Just note that we had to use an arrow function to capture the exception within&nbsp;<em>expect</em>.</p><h4>Testing Routes</h4><p>Routes are sometimes left out but it is usually seen as a good practice for double-entry bookkeeping. In our example, we will use a simple route configuration with only few routes and a default pointing to home.</p><pre><code>@RouteConfig([<br>  { path: '/home', component: Home, name: 'Home' },<br>  { path: '/people', component: People, name: 'People' },<br>  { path: '/about', component: About, name: 'About' },<br>  { path: '/**', redirectTo: ['Home'] }<br>])<br>export class App { }</code></pre><p>Our tests will use these routes above to check our expectations out. Last one captures all remaining routes and redirects them to home.</p><pre><code>describe('Router tests', () =&gt; {<br>  var location, router;<br>  <br>  //setup<br>  beforeEachProviders(() =&gt; [<br>    RouteRegistry,<br>    provide(Location, {useClass: SpyLocation}),<br>    provide(Router, {useClass: RootRouter}),<br>    provide(ROUTER_PRIMARY_COMPONENT, {useValue: App})<br>  ]);<br>  <br>  beforeEach(inject([Router, Location], (r, l) =&gt; {<br>    router = r;<br>    location = l;<br>  }));<br>  <br>  //specs<br>  it('Should be able to navigate to Home', done =&gt; {    <br>    router.navigate(['Home']).then(() =&gt; {<br>      expect(location.path()).toBe('/home');<br>      done();<br>    }).catch(e =&gt; done.fail(e));<br>  });<br><br>  it('should redirect not registered urls to Home', done =&gt; {<br>    router.navigateByUrl('/unknown').then(() =&gt; {<br>      expect(location.path()).toBe('/home');<br>      done();<br>    }).catch(e =&gt; done.fail(e));<br>  });<br>});</code></pre><p>In order to test the routes we need to include few internal dependencies (lines 6–9). Notice how we defined our root component (line 9). These will probably be refactored soon but you can use these for now. We instantiated the&nbsp;<em>Router</em>and&nbsp;<em>Location</em>&nbsp;within&nbsp;<em>beforeEach&nbsp;</em>leaving our tests more readable.</p><p>We are using&nbsp;<span><em>navigate(params)</em></span><em>&nbsp;</em>and<em>&nbsp;</em><span><em>navigateByUrl(url)</em></span><em>&nbsp;</em>both returning a&nbsp;<em>Promise</em>. We check that when we navigate to ‘<em>/home’</em>&nbsp;our location will change accordingly. Finally, we check that any other routes redirect you to home. We used Jasmine’s asynchronous tests as we did before.</p><h4>Testing Observables</h4><p>Observables are used in Angular to handle asynchronous tasks. They can be seen in few places like&nbsp;<em>Http</em>, Form controls, validations or behind&nbsp;<em>EventEmitter</em>. We will use the&nbsp;<em>Observable</em>&nbsp;below to show how we can test their behaviour.</p><pre><code>describe('Observable: basic observable', () =&gt; {<br>  var basic$;<br>  <br>  //setup<br>  beforeEach(() =&gt; {<br>    basic$ = new Observable(observer =&gt; {<br>      //pushing values<br>      observer.next(1);<br>      observer.next(2);<br>      observer.next(3);<br>      //complete stream<br>      observer.complete(); <br>    });<br>  })<br>  <br>  //specs<br>  it('should create the expected sequence', done =&gt; {<br>    let expected = [1,2,3], <br>      index = 0;<br>    basic$<br>      .subscribe(<br>        x =&gt; {                  // next<br>          expect(x).toEqual(expected[index++]);<br>        },   <br>        x =&gt; results.push('#'), // error<br>        x =&gt; done()             // complete<br>    );<br>  })<br>});</code></pre><p>We created an&nbsp;<em>Observable</em>&nbsp;that emits 1, 2, 3 and completes. In order to test it we setup the next, error and complete callbacks on subscribe. As next callback will be called few times we have to set our expectations dynamically. Note how we used Jasmines asynchronous test again with&nbsp;<em>done</em>.</p><h4>Testing EventEmitters</h4><p>EventEmitters are used in Angular to communicate events between Components. We created a counter component,&nbsp;<em>Counter</em>,<em>&nbsp;</em>that allows us to increment or decrement an initial value of zero. Each time that we do that the new value will be pushed using an&nbsp;<em>EventEmitter</em>&nbsp;exposed as&nbsp;<em>changes</em>.</p><pre><code>@Component({<br>  selector: 'counter',<br>  template: `<br>    &lt;div&gt;<br>      &lt;h1&gt;{{counter}}&lt;/h1&gt;<br>      &lt;button (click)=\"change(1)\"&gt;+1&lt;/button&gt;<br>      &lt;button (click)=\"change(-1)\"&gt;-1&lt;/button&gt;<br>    &lt;/div&gt;`<br>})<br>export class Counter {<br>  @Output() changes = new EventEmitter();<br>  <br>  constructor(){<br>    this.counter = 0;<br>  }<br>  <br>  change(increment) {<br>    this.counter += increment;<br>    //we use emit as next is marked as deprecated<br>    this.changes.emit(this.counter);<br>  }<br>}</code></pre><p>The setup will be very similar to Observables.</p><pre><code>describe('EventEmitter: Counter', () =&gt; {<br>  let counter;<br>  <br>  //setup<br>  beforeEachProviders(() =&gt; [<br>    Counter<br>  ]);<br>  <br>  beforeEach(inject([Counter], c =&gt; {<br>    counter = c;<br>  }))<br>  <br>  //specs<br>  it('should increment +1', done =&gt; {<br>    counter.changes.subscribe(x =&gt; { <br>      expect(x).toBe(1);<br>      done();<br>    });<br>    counter.change(1);<br>  });<br><br>  it('should decrement -1', done =&gt; {<br>    counter.changes.subscribe(x =&gt; { <br>      expect(x).toBe(-1);<br>      done();<br>    });<br>    counter.change(-1);<br>  });  <br>}) </code></pre><p>In this case we check that we can increment or decrement using subscribe on the&nbsp;<em>EventEmitter</em>&nbsp;as it exposes an&nbsp;<em>Observable</em>. We trigger the different values by calling the change method and check our expectations within the next callback.</p><p>So that’s all I’ve got for now! Thanks for reading! Have any questions? Ping me at&nbsp;<a href=\"https://twitter.com/intent/user?screen_name=gerardsans\" data-href=\"https://twitter.com/intent/user?screen_name=gerardsans\" rel=\"nofollow noopener\" target=\"_blank\">@gerardsans</a></p><h4>Want more?</h4><p>If you need more examples please feel free to contact me at&nbsp;<em>gerard_dot_sans_at_gmail_dot_com</em>&nbsp;or head to&nbsp;<a href=\"https://github.com/angular/angular/tree/e748adda2e7a1f6e302628d0d76b5c3d1e3fc196/modules/angular2/test\" data-href=\"https://github.com/angular/angular/tree/e748adda2e7a1f6e302628d0d76b5c3d1e3fc196/modules/angular2/test\" rel=\"nofollow noopener\" target=\"_blank\">Angular Unit Tests</a>&nbsp;in GitHub!</p><p><span>Further Reading</span></p><ul><li>Slides:&nbsp;<a href=\"https://docs.google.com/presentation/d/1UkuJgBaOAjDMYiMBLT38LEWMzh6sW_iliTPF1PHnmzY\" data-href=\"https://docs.google.com/presentation/d/1UkuJgBaOAjDMYiMBLT38LEWMzh6sW_iliTPF1PHnmzY\" rel=\"noopener nofollow\" target=\"_blank\">Testing Strategies with Angular</a>&nbsp;or&nbsp;<a href=\"https://www.youtube.com/watch?v=C0F2E-PRm44\" data-href=\"https://www.youtube.com/watch?v=C0F2E-PRm44\" rel=\"noopener nofollow\" target=\"_blank\">video</a>&nbsp;by Julie Ralph,&nbsp;<a href=\"https://twitter.com/SomeJulie\" data-href=\"https://twitter.com/SomeJulie\" rel=\"noopener nofollow\" target=\"_blank\">@SomeJulie</a></li><li><a href=\"http://angularconnect.com/sessions\" data-href=\"http://angularconnect.com/sessions\" rel=\"nofollow noopener\" target=\"_blank\">Angular Connect Media</a>&nbsp;Slides and Videos from all sessions</li></ul></div></div></section>","filePath":"pages/Angular/.md","_id":"kXzkmX3HSIqwcvti"}
{"date":"2018-11-21T15:44:13.578Z","title":"TESTING ANGULAR WITH KARMA 101","sourceUrl":"https://ordina-jworks.github.io/angular/2017/10/04/Testing-angular-with-karma.html","path":"Angular/","category":"Angular","tags":["Angular"," Karma"," Jasmine"," TDD"," Unit testing"],"author":"Martijn Willekens ","excerpt":"Testing your code is as important as writing the code itself. This also counts for frontend applications such as Angular apps. Unit testing is one way to do so. The goal of these kind of tests is to isolate classes and verify the output of its functions to be what you expect when they are called. We also need a tool to run our tests written in TypeScript. Karma is the one we’ll be using to run tests described in this blog. It will open a browser, execute pieces of JavaScript and report the results back to you.","dateCreated":1542814953272,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Angular/'\ndate: 'Wed Nov 21 2018 21:14:13 GMT+0530 (India Standard Time)'\ntitle: 'TESTING ANGULAR WITH KARMA 101'\ntags: ['Angular','Karma','Jasmine','TDD','Unit testing']\ncategory: 'Angular'\ncategoryColor: '#F3C610'\nexcerpt: 'Testing your code is as important as writing the code itself. This also counts for frontend applications such as Angular apps. Unit testing is one way to do so. The goal of these kind of tests is to isolate classes and verify the output of its functions to be what you expect when they are called. We also need a tool to run our tests written in TypeScript. Karma is the one we’ll be using to run tests described in this blog. It will open a browser, execute pieces of JavaScript and report the results back to you.'\ncoverImage: ''\nsourceUrl: 'https://ordina-jworks.github.io/angular/2017/10/04/Testing-angular-with-karma.html'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Testing your code is as important as writing the code itself. This also counts for frontend applications such as Angular apps. Unit testing is one way to do so. The goal of these kind of tests is to isolate classes and verify the output of its functions to be what you expect when they are called. We also need a tool to run our tests written in TypeScript.&nbsp;<a href=\"https://karma-runner.github.io/\" target=\"_blank\">Karma</a>&nbsp;is the one we’ll be using to run tests described in this blog. It will open a browser, execute pieces of JavaScript and report the results back to you.</p><p>Now, I must admit that I’m not too fond of writing tests myself. However, I do strongly believe they help a lot towards improving the quality of the code. Writing unit tests can be quite a hassle, but with an application that is continuously growing and changing, they are an efficient way to prevent bugs getting to production.</p><h1>TABLE OF CONTENTS</h1><ol><li><a href=\"https://ordina-jworks.github.io/angular/2017/10/04/Testing-angular-with-karma.html#setup\">Setup</a></li><li><a href=\"https://ordina-jworks.github.io/angular/2017/10/04/Testing-angular-with-karma.html#writing-tests\">Writing tests</a></li><li><a href=\"https://ordina-jworks.github.io/angular/2017/10/04/Testing-angular-with-karma.html#what-to-test\">What to test</a></li><li><a href=\"https://ordina-jworks.github.io/angular/2017/10/04/Testing-angular-with-karma.html#tips--tricks\">Tips and tricks</a></li><li><a href=\"https://ordina-jworks.github.io/angular/2017/10/04/Testing-angular-with-karma.html#conclusion\">Conclusion</a></li></ol><h1>SETUP</h1><p>Let’s take a look at how it’s done in an Angular app using Karma. If you’re using the Angular CLI, you’re in luck because setting up the unit tests is easy. It’s already done! All you need to do is run&nbsp;<code>ng test</code>&nbsp;(or&nbsp;<code>npm test</code>). It will transpile your tests and run them using Karma. If you’re not using the Angular CLI yet, I recommend creating a new project with the CLI and copying your existing project to it. It will make your life a lot easier.</p><p>Running&nbsp;<code>ng test</code>&nbsp;will run the tests in watch mode, meaning that every time you save a change to a file, it will automatically rerun your tests. Additional flags can be passed like&nbsp;<code>--single-run</code>&nbsp;to make it run only once. When passing the&nbsp;<code>--code-coverage</code>&nbsp;flag, it generates a report in HTML. By default it’s found under&nbsp;<code>coverage/index.html</code>&nbsp;and it indicates which parts of your code were covered by your unit tests.</p><div><img alt=\"Code coverage\" src=\"https://ordina-jworks.github.io/img/2017-10-02-testing-angular-with-karma/code-coverage.png\"></div><h1>WRITING TESTS</h1><h2>STRUCTURE</h2><p>Now that the setup is done, let’s look at how to write the tests themselves. First of all, test files should be named after the&nbsp;<code>.ts</code>&nbsp;file you’re testing, but with&nbsp;<code>.spec</code>&nbsp;added to the file name (e.g. when testing&nbsp;<code>login.component.ts</code>, the test file should be named&nbsp;<code>login.component.spec.ts</code>). It’s best practice to keep the spec file in the same folder as the ts file. So mostly, for a component, you’ll end up with a HTML, scss, spec.ts and ts file in one folder (unless you like to inline your HTML and CSS).</p><p><img alt=\"Folder structure\" src=\"https://ordina-jworks.github.io/img/2017-10-02-testing-angular-with-karma/files.png\"></p><p>Next up, the content of a test file. The Jasmine spec is used to format the tests (<a href=\"https://jasmine.github.io/pages/getting_started.html\" target=\"_blank\">more info</a>). This means that individual tests are grouped together in a&nbsp;<code>describe</code>&nbsp;block. A test itself starts with&nbsp;<code>it</code>. Besides tests, you can also add other blocks to a&nbsp;<code>describe</code>, like&nbsp;<code>beforeEach</code>,&nbsp;<code>beforeAll</code>,&nbsp;<code>afterEach</code>,&nbsp;<code>afterAll</code>… What these blocks do, is quite self-explanatory. Here’s an example how it could be used: when testing a class, you’ll want to create an instance of that class for each test, so instead of writing the same code in each test to create an instance, you could put that code in the&nbsp;<code>beforeEach</code>&nbsp;clause. Simply pass a function (in lambda notation) to&nbsp;<code>beforeEach</code>&nbsp;containing the code you want it to run.</p><p>Within a test itself, the class’ public functions can be called and assertions can be made. Assertions are made using the&nbsp;<code>expect</code>&nbsp;function. You can give it a variable or a call to a function and tell it what you expect the result to be with&nbsp;<code>toBe</code>,&nbsp;<code>toEqual</code>,&nbsp;<code>toBeTruthy</code>,&nbsp;<code>toBeFalsy</code>,&nbsp;<code>toBeNull</code>…</p><p>Here’s an example:</p><figure><pre><code data-lang=\"typescript\"><span>describe</span><span>(</span><span>'NAME_OF_YOUR_CLASS'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>let</span> <span>component</span><span>;</span>\n\n    <span>beforeEach</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n        <span>//initialize</span>\n        <span>component</span> <span>=</span> <span>new</span> <span>AppComponent</span><span>();</span>\n    <span>});</span>\n    \n    <span>//Actual tests</span>\n    <span>it</span><span>(</span><span>'should have a car selected'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n        <span>//assertions</span>\n        <span>expect</span><span>(</span><span>component</span><span>.</span><span>carSelected</span><span>).</span><span>toBeThruthy</span><span>();</span>\n    <span>});</span>\n\n    <span>it</span><span>(</span><span>'should find my favorite car brand'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n        <span>//assertions</span>\n        <span>const</span> <span>carBrand</span> <span>=</span> <span>component</span><span>.</span><span>getFavoriteCarBrand</span><span>();</span>\n        <span>expect</span><span>(</span><span>carBrand</span><span>.</span><span>name</span><span>).</span><span>toEqual</span><span>(</span><span>'Mazda'</span><span>);</span>\n    <span>});</span> \n<span>});</span> </code></pre></figure><p>As you can see, you can pass some text as an argument in the&nbsp;<code>describe</code>&nbsp;call. This is usually the name of the class you’re testing and it’ll be shown when running the tests. For the tests themselves, you can also pass some text which will be shown. These are mainly used for you to be able to identify failing tests. The text should describe what’s being tested, for example “It should get the brand of the car”, could be written as&nbsp;<code>it('should get the brand of the car', () =&gt; ...</code>.</p><h2>WRITING THE ACTUAL TESTS</h2><p>There are multiple ways to write unit tests for an Angular app. Either you use the Angular TestBed, the ReflectiveInjector or you simply call the constructor of the class directly. ReflectiveInjector and TestBed have a similar approach, so I’ll only be discussing TestBed here. It’s something pretty cool Angular came up with in order to test your components. TestBed can create components and injects all its dependencies. The instance of the component that is returned can then be used for testing. Accessing the view is also possible.</p><p>Now, although I said there are multiple ways to unit test an Angular app, there’s actually only one correct way: calling the constructor. Since TestBed loads the view as well as any components, directives… used in the view, you’re actually also testing how the class integrates with them. In other words, you’re entering the domain of integration testing, which is also important, but out of scope for this blog post.</p><p>The unit tests you would write using the constructor approach, could practically look the same when you would use TestBed to instatiate the components. However, there are some problems with using the Angular TestBed for unit tests which I’ll be explaining below.</p><h2>1. TESTBED</h2><p>Setting up the TestBed configuration for a component kind of looks like a module definition. You should list all components, directives and services that are used by the component you’re testing directly or by importing a module that includes them. Calling&nbsp;<code>createComponent</code>&nbsp;will return a ‘fixture’ which can be used to access the view and also get the instance of the class linked to it. With the fixture you can find HTML elements and perform actions on them, verify their content and attributes… The instance of the class can be used to test its public functions (unit test).</p><figure><pre><code data-lang=\"typescript\"><span>describe</span><span>(</span><span>'AppComponent'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>let</span> <span>component</span><span>:</span> <span>AppComponent</span><span>;</span>\n    <span>let</span> <span>fixture</span><span>:</span> <span>ComponentFixture</span><span>&lt;</span><span>AppComponent</span><span>&gt;</span><span>;</span>\n\n    <span>beforeEach</span><span>(</span><span>async</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n        <span>TestBed</span><span>.</span><span>configureTestingModule</span><span>({</span>\n            <span>declarations</span><span>:</span> <span>[</span><span>AppComponent</span><span>],</span>\n            <span>providers</span><span>:</span> <span>[</span><span>CarBrandService</span><span>],</span>\n            <span>imports</span><span>:</span> <span>[</span><span>CommonLogicModule</span><span>]</span>\n        <span>})</span>\n        <span>.</span><span>compileComponents</span><span>();</span>\n    <span>}));</span>\n\n    <span>beforeEach</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n        <span>fixture</span> <span>=</span> <span>TestBed</span><span>.</span><span>createComponent</span><span>(</span><span>AppComponent</span><span>);</span>\n        <span>component</span> <span>=</span> <span>fixture</span><span>.</span><span>componentInstance</span><span>;</span>\n        <span>fixture</span><span>.</span><span>detectChanges</span><span>();</span>\n    <span>});</span>\n\n    <span>it</span><span>(</span><span>'should test the class'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n        <span>//use component to test the class itself</span>\n        <span>const</span> <span>carBrand</span> <span>=</span> <span>component</span><span>.</span><span>getFavoriteCarBrand</span><span>();</span>\n        <span>expect</span><span>(</span><span>carBrand</span><span>.</span><span>name</span><span>).</span><span>toEqual</span><span>(</span><span>'Mazda'</span><span>);</span>\n    <span>});</span>\n\n    <span>it</span><span>(</span><span>'should test the view'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n        <span>//use component to test the class itself</span>\n        <span>const</span> <span>carBrand</span> <span>=</span> <span>component</span><span>.</span><span>getFavoriteCarBrand</span><span>();</span>\n        <span>expect</span><span>(</span><span>carBrand</span><span>.</span><span>name</span><span>).</span><span>toEqual</span><span>(</span><span>'Mazda'</span><span>);</span>\n\n        <span>//use fixture to access the HTML (e.g. get h1 element)</span>\n        <span>const</span> <span>de</span> <span>=</span> <span>fixture</span><span>.</span><span>debugElement</span><span>.</span><span>query</span><span>(</span><span>By</span><span>.</span><span>css</span><span>(</span><span>'h1'</span><span>));</span>\n        <span>const</span> <span>el</span> <span>=</span> <span>de</span><span>.</span><span>nativeElement</span><span>;</span>\n        <span>expect</span><span>(</span><span>el</span><span>.</span><span>textContent</span><span>).</span><span>toContain</span><span>(</span><span>'Mazda'</span><span>);</span>\n    <span>});</span>\n<span>});</span></code></pre></figure><h3>MOCKING</h3><p>In unit testing, we are only interested in testing the class itself and try to isolate it as much as possible. We also want to be able to easily control the output of all dependencies of our class, such as services.</p><h4>SPYON</h4><p>One way to do so is by creating spies for all calls to functions of those dependencies. That’s where the&nbsp;<code>spyOn</code>&nbsp;function comes into play:</p><figure><pre><code data-lang=\"typescript\"><span>describe</span><span>(</span><span>'AppComponent'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>let</span> <span>component</span><span>:</span> <span>RequestPopupContainer</span><span>;</span>\n    <span>let</span> <span>fixture</span><span>:</span> <span>ComponentFixture</span><span>&lt;</span><span>AppComponent</span><span>&gt;</span><span>;</span>        \n\n    <span>beforeEach</span><span>(</span><span>async</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n        <span>TestBed</span><span>.</span><span>configureTestingModule</span><span>({</span>\n            <span>declarations</span><span>:</span> <span>[</span><span>AppComponent</span><span>],</span>\n            <span>providers</span><span>:</span> <span>[</span><span>CarBrandService</span><span>],</span>\n            <span>imports</span><span>:</span> <span>[</span><span>CommonLogicModule</span><span>]</span>\n        <span>})</span>\n        <span>.</span><span>compileComponents</span><span>();</span>\n    <span>}));</span>\n\n    <span>beforeEach</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n        <span>fixture</span> <span>=</span> <span>TestBed</span><span>.</span><span>createComponent</span><span>(</span><span>AppComponent</span><span>);</span>\n        <span>component</span> <span>=</span> <span>fixture</span><span>.</span><span>componentInstance</span><span>;</span>\n\n        <span>const</span> <span>carBrandService</span> <span>=</span> <span>fixture</span><span>.</span><span>debugElement</span><span>.</span><span>injector</span><span>.</span><span>get</span><span>(</span><span>CarBrandService</span><span>);</span>\n        <span>spyOn</span><span>(</span><span>carBrandService</span><span>,</span> <span>'findAll'</span><span>).</span><span>and</span><span>.</span><span>returnValue</span><span>(</span><span>Observable</span><span>.</span><span>of</span><span>([</span>\n            <span>{</span> <span>name</span><span>:</span> <span>'Mazda'</span><span>,</span> <span>country</span><span>:</span> <span>'Japan'</span> <span>},</span>\n            <span>{</span> <span>name</span><span>:</span> <span>'BMW'</span><span>,</span> <span>country</span><span>:</span> <span>'Germany'</span> <span>}</span>\n        <span>]));</span>    \n\n        <span>fixture</span><span>.</span><span>detectChanges</span><span>();</span>\n    <span>});</span>\n    <span>...</span>\n<span>});</span></code></pre></figure><p>In the example above, you can see when the&nbsp;<code>AppComponent</code>&nbsp;would call&nbsp;<code>carBrandService.findAll()</code>, instead of making a HTTP call, an Observable is returned with a list of car brands which is defined in the test itself. This is pretty cool, but also very error prone. If you forget to place a spy on a certain function, it will perform the actual call, possibly a HTTP call. That’s something we do not want at all.</p><h4>MOCK CLASSES</h4><p>To prevent forgetting to spy on a certain function, you could create mock classes and inject them instead of the actual classes:</p><figure><pre><code data-lang=\"typescript\"><span>class</span> <span>MockCarBrandService</span> <span>{</span>\n    <span>findAll</span><span>():</span> <span>Observable</span><span>&lt;</span><span>CarBrand</span><span>[]</span><span>&gt;</span> <span>{</span>\n        <span>return</span> <span>Observable</span><span>.</span><span>of</span><span>([</span>\n            <span>{</span> <span>name</span><span>:</span> <span>'Mazda'</span><span>,</span> <span>country</span><span>:</span> <span>'Japan'</span> <span>},</span>\n            <span>{</span> <span>name</span><span>:</span> <span>'BMW'</span><span>,</span> <span>country</span><span>:</span> <span>'Germany'</span> <span>}</span>\n        <span>]);</span>     \n    <span>}</span>   \n<span>}</span>\n\n<span>describe</span><span>(</span><span>'AppComponent'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>let</span> <span>component</span><span>:</span> <span>AppComponent</span><span>;</span>\n    <span>let</span> <span>fixture</span><span>:</span> <span>ComponentFixture</span><span>&lt;</span><span>AppComponent</span><span>&gt;</span><span>;</span>        \n\n    <span>beforeEach</span><span>(</span><span>async</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n        <span>TestBed</span><span>.</span><span>configureTestingModule</span><span>({</span>\n            <span>declarations</span><span>:</span> <span>[</span><span>AppComponent</span><span>],</span>\n            <span>providers</span><span>:</span> <span>[{</span><span>provide</span><span>:</span> <span>CarBrandService</span><span>,</span> <span>useClass</span><span>:</span> <span>MockCarBrandService</span><span>}],</span>\n            <span>imports</span><span>:</span> <span>[</span><span>CommonLogicModule</span><span>]</span>\n        <span>})</span>\n        <span>.</span><span>compileComponents</span><span>();</span>\n    <span>}));</span>\n\n    <span>...</span>\n<span>});</span></code></pre></figure><p>Again we see that&nbsp;<code>findAll()</code>&nbsp;will return an Observable containing a list. By using this approach, you’ll get an error when you forgot to define a function in the mock class. This may solve our previous problem, but now we have created another one. Karma allows us to assert whether a function was called using&nbsp;<code>toHaveBeenCalled</code>&nbsp;and&nbsp;<code>toHaveBeenCalledWith</code>. The problem here is that we don’t have any spies, so those functions can’t be used. We can again add spies like in the first approach, but you can imagine that this is a lot of work and will get quite messy.</p><h4>JASMINE SPY OBJECTS</h4><p>So, the first two approaches have some issues. Luckily there’s a better way, Jasmine spy objects:</p><figure><pre><code data-lang=\"typescript\"><span>describe</span><span>(</span><span>'AppComponent'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>        \n    <span>let</span> <span>component</span><span>:</span> <span>AppComponent</span><span>;</span>\n    <span>let</span> <span>fixture</span><span>:</span> <span>ComponentFixture</span><span>&lt;</span><span>AppComponent</span><span>&gt;</span><span>;</span> \n\n    <span>const</span> <span>mockCarBrandService</span> <span>=</span> <span>jasmine</span><span>.</span><span>createSpyObj</span><span>(</span><span>'carBrandService'</span><span>,</span> <span>[</span><span>'findAll'</span><span>]);</span>\n    <span>mockCarBrandService</span><span>.</span><span>findAll</span><span>.</span><span>and</span><span>.</span><span>returnValue</span><span>(</span><span>Observable</span><span>.</span><span>of</span><span>([</span>\n        <span>{</span> <span>name</span><span>:</span> <span>'Mazda'</span><span>,</span> <span>country</span><span>:</span> <span>'Japan'</span> <span>},</span>\n        <span>{</span> <span>name</span><span>:</span> <span>'BMW'</span><span>,</span> <span>country</span><span>:</span> <span>'Germany'</span> <span>}</span>\n    <span>]);</span>\n\n    <span>beforeEach</span><span>(</span><span>async</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n        <span>TestBed</span><span>.</span><span>configureTestingModule</span><span>({</span>\n            <span>declarations</span><span>:</span> <span>[</span><span>AppComponent</span><span>],</span>\n            <span>providers</span><span>:</span> <span>[{</span><span>provide</span><span>:</span> <span>CarBrandService</span><span>,</span> <span>useValue</span><span>:</span> <span>mockCarBrandService</span><span>}],</span>\n            <span>imports</span><span>:</span> <span>[</span><span>CommonLogicModule</span><span>]</span>\n        <span>})</span>\n        <span>.</span><span>compileComponents</span><span>();</span>\n    <span>}));</span>\n    <span>...</span>\n<span>});</span></code></pre></figure><p>The first argument of&nbsp;<code>jasmine.createSpyObj</code>&nbsp;is the name for the object and will be used to mention it in the console. This is usually the name you gave the instance of the corresponding class in the constructor. The second argument is an array containing all function names of that corresponding class that are called from the class being tested. In other words, not all functions offered by the class that’s being mocked have be listed, only the ones actually being used.</p><blockquote><p>Also note that in the providers list, we have to use&nbsp;<code>useValue</code>&nbsp;instead of&nbsp;<code>useClass</code>&nbsp;since&nbsp;<code>jasmine.createSpyObj</code>&nbsp;already returns an instance.</p></blockquote><p>Using&nbsp;<code>spyOn</code>&nbsp;isn’t needed, a spy object is already being spied upon (hence the name) and you can call the&nbsp;<code>toHaveBeenCalled</code>&nbsp;and&nbsp;<code>toHaveBeenCalledWith</code>&nbsp;functions on it.</p><figure><pre><code data-lang=\"typescript\"><span>...</span>\n<span>it</span><span>(</span><span>'should call the findAll method'</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>component</span><span>.</span><span>getFavoriteCarBrand</span><span>();</span>\n    <span>expect</span><span>(</span><span>mockCarBrandService</span><span>.</span><span>findAll</span><span>).</span><span>toHaveBeenCalled</span><span>();</span>\n<span>});</span> \n<span>...</span></code></pre></figure><p>I think it’s obvious to say that using Jasmine spy objects is the way to go. If you forget to define a function, you’ll get an error when it’s called. The functions that are defined, are also spied upon. So all the problems with the first and second approach are solved. There’s even another benefit when using spy objects. The implementation (<code>returnValue</code>&nbsp;or&nbsp;<code>callFake</code>) can be changed at any time, even in the middle of a test!</p><h3>ISSUES WITH UNIT TESTING</h3><p>A side effect of using TestBed is that when the component is loaded, the&nbsp;<code>ngOnInit</code>,&nbsp;<code>ngAfterViewInit</code>… lifecycle events are called automatically. This means you have less control over them.</p><p>Getting all the imports, providers and declarations setup can be quite a struggle too. If there’s any subcomponent in the HTML of the component you’re testing, they should either be imported through a module or added in the declarations of the TestBed configuration. If you don’t feel like doing all that, you can also tell Angular to skip elements it doesn’t recognise by adding&nbsp;<code>NO_ERRORS_SCHEMA</code>&nbsp;to the TestBed configuration:</p><figure><pre><code data-lang=\"typescript\"><span>TestBed</span><span>.</span><span>configureTestingModule</span><span>({</span>\n    <span>declarations</span><span>:</span> <span>[</span> <span>AppComponent</span> <span>],</span>\n    <span>schemas</span><span>:</span> <span>[</span> <span>NO_ERRORS_SCHEMA</span> <span>]</span>\n<span>})</span></code></pre></figure><p>It’s very likely that you’ll be using the Angular router in some of your components, so you’ll have to account for that too. You could mock the router dependency using a Jasmine spy object or you can add&nbsp;<code>RouterTestingModule</code>&nbsp;as an import instead of the&nbsp;<code>RouterModule</code>&nbsp;itself. The routes that are relevant can then be defined in the&nbsp;<code>RouterTestingModule</code>:</p><figure><pre><code data-lang=\"typescript\"><span>imports</span><span>:</span> <span>[</span><span>RouterTestingModule</span><span>.</span><span>withRoutes</span><span>([</span><span>/*List mock routes here*/</span><span>])]</span></code></pre></figure><blockquote><p>To learn more about writing tests using Angular TestBed, I recommend reading this guide:&nbsp;<a href=\"https://angular.io/guide/testing\" target=\"_blank\">https://angular.io/guide/testing</a>.</p></blockquote><h2>2. CALLING THE CONSTRUCTOR</h2><p>A much better way to do unit testing is to simply call the constructor of the class you want to test. You should get an instance of each dependency that’s needed in the component’s constructor. Of course we want to mock these classes and as we saw in the Angular TestBed section, the Jasmine spy objects are the way to go.</p><figure><pre><code data-lang=\"typescript\"><span>describe</span><span>(</span><span>'AppComponent'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>        \n    <span>let</span> <span>component</span><span>:</span> <span>AppComponent</span><span>;</span>\n\n    <span>const</span> <span>mockCarBrandService</span> <span>=</span> <span>jasmine</span><span>.</span><span>createSpyObj</span><span>(</span><span>'carBrandService'</span><span>,</span> <span>[</span><span>'findAll'</span><span>]);</span>\n    <span>mockCarBrandService</span><span>.</span><span>findAll</span><span>.</span><span>and</span><span>.</span><span>returnValue</span><span>(</span><span>Observable</span><span>.</span><span>of</span><span>([</span>\n        <span>{</span> <span>name</span><span>:</span> <span>'Mazda'</span><span>,</span> <span>country</span><span>:</span> <span>'Japan'</span> <span>},</span>\n        <span>{</span> <span>name</span><span>:</span> <span>'BMW'</span><span>,</span> <span>country</span><span>:</span> <span>'Germany'</span> <span>}</span>\n    <span>]);</span>\n\n    <span>beforeEach</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n        <span>component</span> <span>=</span> <span>new</span> <span>AppComponent</span><span>(</span><span>mockCarBrandService</span><span>);</span>\n    <span>});</span>\n    <span>...</span>\n<span>});</span></code></pre></figure><p>Without the TestBed, you don’t have access to the view. However, your tests will run much faster as there are less things to load. When using TestBed, you’ll probably be including lots of dependencies just to make it work, giving you less control. This is something you do not want in unit testing as you want to isolate the class as much as possible. Another difference with TestBed is that you have to call the lifecycle events yourself, again giving you more control over the code you’re testing.</p><figure><pre><code data-lang=\"typescript\"><span>it</span><span>(</span><span>'should find the car brand'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>component</span><span>.</span><span>ngOnInit</span><span>();</span>\n    <span>const</span> <span>carBrand</span> <span>=</span> <span>component</span><span>.</span><span>getFavoriteCarBrand</span><span>();</span>\n    <span>expect</span><span>(</span><span>carBrand</span><span>.</span><span>name</span><span>).</span><span>toEqual</span><span>(</span><span>'Mazda'</span><span>);</span>\n<span>});</span> </code></pre></figure><h1>ASYNC, FAKEASYNC, TICK</h1><p>Angular is full of Observables and writing tests for them is a little trickier. You might also be using the&nbsp;<code>setTimeout</code>&nbsp;and&nbsp;<code>setInterval</code>&nbsp;functions. To cope with all that, Angular provides the&nbsp;<code>async</code>&nbsp;and&nbsp;<code>fakeAsync</code>&nbsp;functions. You can simply wrap your test in an&nbsp;<code>async</code>&nbsp;and it should only finish after all async calls are finished. If you want to have more control, you can wrap the test in a&nbsp;<code>fakeAsync</code>&nbsp;instead. Then the&nbsp;<code>tick()</code>&nbsp;function can be called to advance time with one tick. By passing an argument to it, time can be advanced by more ticks at once:&nbsp;<code>tick(500)</code>.</p><p>Suppose we have this class:</p><figure><pre><code data-lang=\"typescript\"><span>export</span> <span>class</span> <span>TimeoutExample</span> <span>{</span>\n    <span>counter</span> <span>=</span> <span>0</span><span>;</span>\n\n    <span>updateCounterWithDelay</span><span>()</span> <span>{</span>\n        <span>setTimeout</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n            <span>this</span><span>.</span><span>counter</span><span>++</span><span>;</span>\n        <span>},</span> <span>100</span><span>);</span>\n    <span>}</span>\n<span>}</span></code></pre></figure><p>And this test:</p><figure><pre><code data-lang=\"typescript\">  \n<span>it</span><span>(</span><span>'should increase the counter with a delay'</span><span>,</span> <span>fakeAsync</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n    <span>const</span> <span>component</span> <span>=</span> <span>new</span> <span>TimeoutExample</span><span>();</span>\n    <span>expect</span><span>(</span><span>component</span><span>.</span><span>counter</span><span>).</span><span>toBe</span><span>(</span><span>0</span><span>);</span>\n    <span>component</span><span>.</span><span>updateCounterWithDelay</span><span>();</span>\n    <span>tick</span><span>();</span>\n    <span>expect</span><span>(</span><span>component</span><span>.</span><span>counter</span><span>).</span><span>toBe</span><span>(</span><span>0</span><span>);</span>\n    <span>tick</span><span>(</span><span>10</span><span>);</span>\n    <span>expect</span><span>(</span><span>component</span><span>.</span><span>counter</span><span>).</span><span>toBe</span><span>(</span><span>0</span><span>);</span>\n    <span>tick</span><span>(</span><span>90</span><span>);</span>\n    <span>expect</span><span>(</span><span>component</span><span>.</span><span>counter</span><span>).</span><span>toBe</span><span>(</span><span>1</span><span>);</span>\n<span>}));</span></code></pre></figure><p>It clearly shows how the&nbsp;<code>tick</code>&nbsp;function manipulates the advancement of time, although it isn’t really a useful test,</p><h3>OBSERVABLES</h3><p>Now, what if you want to test a function that returns an Observable? Well, simply subscribe to it in an async block and check the result!</p><figure><pre><code data-lang=\"typescript\"><span>it</span><span>(</span><span>'should return a list of cars'</span> <span>async</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n    <span>service</span><span>.</span><span>findAll</span><span>().</span><span>take</span><span>(</span><span>1</span><span>).</span><span>subscribe</span><span>(</span>\n        <span>(</span><span>result</span><span>)</span> <span>=&gt;</span> <span>{</span>\n            <span>expect</span><span>(</span><span>result</span><span>.</span><span>length</span><span>).</span><span>toBe</span><span>(</span><span>9</span><span>);</span>\n        <span>},</span>\n        <span>(</span><span>error</span><span>)</span> <span>=&gt;</span> <span>{</span>\n            <span>expect</span><span>(</span><span>true</span><span>).</span><span>toBeFalsy</span><span>();</span>\n        <span>}</span>\n    <span>);</span>\n<span>}));</span></code></pre></figure><p>The error clause may seem strange. However, what if the&nbsp;<code>findAll()</code>&nbsp;call returns an error and you don’t have the error clause in your test? You’ll simply think that your test has passed because it appears green in the console. With code coverage enabled, you may notice that the part of the code you were testing isn’t marked as covered. By adding&nbsp;<code>expect(true).toBeFalsy();</code>&nbsp;to the error clause, your test will fail because it shouldn’t get there!</p><h1>WHAT TO TEST</h1><p>Now that we know a little on how to test, let’s have a look at what to test.</p><p>For starters, you don’t have access to private and protected variables/functions, so all you can do is test the public ones. All variables that are accessed by the view should be public, so those are the ones you can use for your tests. The constructor and all lifecycle events can be called as well as they are public. You should never ever set a variable or function to public in order to test it. If you can’t test it because it’s private, you’re doing something wrong. You should be able to get to it through other functions.</p><p>Generally, you give an input and assert the output, it’s as simple as that. Your different inputs should also make sure that all branches are tested (e.g. an&nbsp;<code>if</code>&nbsp;gives you two branches, one where the&nbsp;<code>if</code>&nbsp;resolves to&nbsp;<code>true</code>&nbsp;and one to&nbsp;<code>false</code>). Unit tests in Karma also allow you to assert whether a function has been called and optionally with which parameters (<code>toHaveBeenCalled</code>&nbsp;and&nbsp;<code>toHaveBeenCalledWith</code>). This can be useful when for example testing a&nbsp;<code>void</code>&nbsp;function that calls a mocked function. That way you can still assert the output. So, think of possible scenarios for the functions to test, provide the input and assert the output using&nbsp;<code>expect</code>. Also try to cover other paths than just the happy paths!</p><p>Testing getters and setters usually isn’t needed, unless they are more complex. In most cases they’re not and it’s quite pointless to call a setter and then assert whether it has been set correclty. Most of the time, these will be called indirectly when testing other functions.</p><p>The code coverage report can help you find functions that aren’t fully tested yet. However, your goal shouldn’t be to get a 100% coverage. Getting a 100% isn’t that hard, simply calling all functions with some different inputs will get you there. It won’t mean that your code is fully tested. To give you an example, suppose you have a function that sorts a list. You write some tests with different inputs so all branches are covered and you get a 100% coverage. The ordering of the list could still be completely wrong and not what you expect, although it’s fully covered. By using&nbsp;<code>expect</code>&nbsp;to verify that the output is correct, you’ll be doing a way better job. Even then there may be scenarios that aren’t tested despite the coverage report stating that part of the code is covered. So try to think of the various possible scenarios (both success and error scenarios) and translate those to tests.</p><h1>TIPS &amp; TRICKS</h1><h2>ONLY RUN CERTAIN TESTS</h2><p>When your test base begins to grow, you don’t always want to wait for all tests to have run when only testing a certain class or function. Therefore, you can choose to only run specific&nbsp;<code>describe</code>&nbsp;blocks or tests (<code>it</code>) by adding an&nbsp;<code>f</code>&nbsp;(which stands for focus) in front of them, such as&nbsp;<code>fdescribe</code>&nbsp;and&nbsp;<code>fit</code>. To exclude certain&nbsp;<code>describe</code>&nbsp;blocks or tests, you can prefix them with an&nbsp;<code>x</code>&nbsp;(exclude), like&nbsp;<code>xdescribe</code>&nbsp;and&nbsp;<code>xit</code>. This will certainly come of use.</p><h2>NESTING DESCRIBE BLOCKS</h2><p>Describe blocks can also be nested. If you want for example different&nbsp;<code>beforeEach</code>&nbsp;blocks for your tests when testing a class, you can create a nested&nbsp;<code>describe</code>&nbsp;block for each case.</p><figure><pre><code data-lang=\"typescript\"><span>describe</span><span>(</span><span>'AppComponent'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n    <span>let</span> <span>mockCarBrandService</span> <span>=</span> <span>jasmine</span><span>.</span><span>createSpyObj</span><span>(</span><span>'carBrandService'</span><span>,</span> <span>[</span><span>'findAll'</span><span>]);</span>\n\n    <span>describe</span><span>(</span><span>'Happy path'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n        <span>beforeEach</span><span>(()</span> <span>=&gt;</span> <span>{</span>\n            <span>mockCarBrandService</span><span>.</span><span>findAll</span><span>.</span><span>and</span><span>.</span><span>returnValue</span><span>(</span><span>Observable</span><span>.</span><span>of</span><span>([</span>\n                <span>{</span> <span>name</span><span>:</span> <span>'Mazda'</span><span>,</span> <span>country</span><span>:</span> <span>'Japan'</span> <span>},</span>\n                <span>{</span> <span>name</span><span>:</span> <span>'BMW'</span><span>,</span> <span>country</span><span>:</span> <span>'Germany'</span> <span>}</span>\n            <span>]));</span>\n        <span>});</span>\n\n        <span>it</span><span>(...);</span>\n        <span>...</span>\n    <span>});</span>\n    \n    <span>describe</span><span>(</span><span>'Error path'</span><span>,</span> <span>()</span> <span>=&gt;</span> <span>{</span>\n        <span>mockCarBrandService</span><span>.</span><span>findAll</span><span>.</span><span>and</span><span>.</span><span>returnValue</span><span>(</span><span>Observable</span><span>.</span><span>throw</span><span>(</span><span>'Error'</span><span>));</span>\n\n        <span>it</span><span>(...);</span>\n        <span>...</span>\n    <span>});</span>\n<span>});</span></code></pre></figure><h2>USING THE INJECTOR</h2><p>Dependency injection is used all over Angular meaning that it isn’t possible to simply call&nbsp;<code>new</code>&nbsp;for certain classes. Normally, you simply put the dependencies in the constructor of your class and Angular takes care of the rest (e.g.&nbsp;<code>constructor(private formBuilder: FormBuilder)</code>). When calling the constructor of a class in a test, you don’t always want to mock those dependencies, so you’ll need to get instances of them somehow. For example when using Angular’s&nbsp;<code>FormBuilder</code>&nbsp;or when you need it to create a&nbsp;<code>FormGroup</code>&nbsp;to use in your test. In that case, you can use Angular’s ReflectiveInjector which takes care of getting an instance for you. Here’s an example how:</p><figure><pre><code data-lang=\"typescript\"><span>const</span> <span>injector</span> <span>=</span> <span>ReflectiveInjector</span><span>.</span><span>resolveAndCreate</span><span>([</span><span>FormBuilder</span><span>]);</span>\n<span>const</span> <span>formBuilder</span> <span>=</span> <span>injector</span><span>.</span><span>get</span><span>(</span><span>FormBuilder</span><span>);</span></code></pre></figure><p>As you can see, you can simply pass the class name and it will return an instance of that class. That instance can then be passed in the constuctor of the class you’re testing.</p><h1>CONCLUSION</h1><p>When writing unit tests, it’s better to call the constructors direcly and not to use Angular TestBed. It will give you more freedom and more control, run the tests much faster and allow you to completely isolate classes. You should also write integration tests and TestBed will serve that purpose very well. To mock classes, Jasmine spy objects are simply the way to go. Changing their implementation or return value is easy and can be done at any time! Code coverage reports can be very useful to find parts of uncovered code. However, getting a high percentage of code coverage shouldn’t be your goal. Write useful tests and also, don’t limit your tests to the happy path!</p>","filePath":"pages/Angular/.md","_id":"l0mQSKnjpuoGPxlE"}
{"date":"2019-03-01T16:04:57.861Z","title":"JS array from an array-like object","sourceUrl":"https://catalin.red/js-array-from-array-like-object/","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"," Array"],"author":"","excerpt":"","dateCreated":1551456218243,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Fri Mar 01 2019 21:34:57 GMT+0530 (India Standard Time)'\ntitle: 'JS array from an array-like object'\ntags: ['JavaScript','Array']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://catalin.red/js-array-from-array-like-object/'\ntype: 'Post'\n---\n    ","htmlCode":"<p>I remember the struggle and the misunderstanding as I was trying to iterate over a <code>NodeList</code> collection with no success. In this article you’ll see how to convert an array-like object like <code>NodeList</code> to a real <code>Array</code> using different methods.</p>\n\n<p><img src=\"https://catalin.red/dist/uploads/2019/01/js-array-from-array-like.png\" alt=\"JavaScript array from array-like object\"></p>\n\n\n\n<h2>Array-like objects</h2>\n\n<blockquote>\n  <p>Some objects in JavaScript look like an array, but they aren’t one.\n That usually means that they have indexed access and a length property,\n but none of the array methods. Examples include the special variable \narguments, DOM node lists, and strings.</p>\n</blockquote>\n\n<p><em>Axel Rauschmayer on <a href=\"http://speakingjs.com/es5/ch18.html#_pitfall_array_like_objects\">array-like objects.</a></em></p>\n\n<p>So why would you want an array from an array-like? To be able to iterate over it of course, oh and <code>map()</code>, <code>filter()</code>, or <code>reduce()</code> too. Also note that the <code>NodeList</code> object is iterable now using <code>forEach()</code>, even though it’s not an <code>Array</code>.</p>\n\n<figure><pre><code data-lang=\"js\">  <span>// NodeList / array-like object</span>\n  <span>let</span> <span>arrLike</span> <span>=</span> <span>document</span><span>.</span><span>querySelectorAll</span><span>(</span><span>\"div\"</span><span>);</span></code></pre></figure>\n\n<h2>The classic <code>Array.prototype.slice.call(arrLike)</code></h2>\n\n<blockquote>\n  <p>slice method can also be called to convert Array-like objects / \ncollections to a new Array. You just bind the method to the object. The \narguments inside a function is an example of an ‘array-like object’.</p>\n</blockquote>\n\n<p><em><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice#Array-like_objects\">Array-like objects</a> on MDN</em></p>\n\n<p><code>Array.prototype.slice</code> is the slice function for arrays, and the <code>call()</code> and <code>apply()</code> methods let you manually set the value of this in the function.</p>\n\n<figure><pre><code data-lang=\"js\">  <span>let</span> <span>arr1</span> <span>=</span> <span>Array</span><span>.</span><span>prototype</span><span>.</span><span>slice</span><span>.</span><span>call</span><span>(</span><span>arrLike</span><span>);</span></code></pre></figure>\n\n<h2>The popular <code>Array.from(arrLike)</code></h2>\n<blockquote>\n  <p>The Array.from() method creates a new, shallow-copied Array instance from an array-like or iterable object.</p>\n</blockquote>\n\n<figure><pre><code data-lang=\"js\">  <span>let</span> <span>arr2</span> <span>=</span> <span>Array</span><span>.</span><span>from</span><span>(</span><span>arrLike</span><span>);</span></code></pre></figure>\n\n<h2>The fancy <code>[...arrLike]</code></h2>\n\n<blockquote>\n  <p>“If it’s on the left-hand side of an equal sign then it’s rest. If not, it’s spread.”</p>\n</blockquote>\n\n<p><em>The best explanation on JavaScript rest/spread syntax difference by <a href=\"https://twitter.com/mathias\">@mathias</a> at <a href=\"https://www.youtube.com/watch?v=mIWCLOftfRw&amp;feature=youtu.be&amp;t=2024\">Google I/O ’18</a>.</em></p>\n\n<figure><pre><code data-lang=\"js\">  <span>let</span> <span>arr3</span> <span>=</span> <span>[...</span><span>arrLike</span><span>];</span></code></pre></figure>\n\n<p>In this case, it’s the <strong>spread</strong> syntax which helps to expand the <code>arrLike</code> object into its elements, thus copying it to <code>arr3</code>.</p>\n\n<h2>Conclusion</h2>\n\n<p>The spread syntax makes converting an array-like to <code>Array</code>\n look easy to follow and it’s also the shortest too if you’re into \noptimizing the number of bytes. This might be the most clean and \nbeautiful option to use but the browser support it’s important when it \ncomes to a decision.</p>\n\n<p>On performance, <a href=\"https://jsperf.com/array-like-to-array-perf\">I made some tests</a> and it looks like <code>Array.prototype.slice.call()</code>\n is the fastest with both alternatives being way slower. So I guess in \nthe end it’s all about the project you’re working on and the browser \nsupport you’re targeting at. Easy. :)</p>\n\n<p><img src=\"https://catalin.red/dist/uploads/2019/01/array-like-test.png\" alt=\"jsPerf test\"></p>","filePath":"pages/JavaScript/.md","_id":"lBU9UHohIttnjeR2"}
{"date":"2019-03-01T15:45:49.528Z","title":"React Error Boundaries","sourceUrl":"https://coursework.vschool.io/react-error-boundaries/","path":"React/","category":"React","tags":["React"],"author":"Nate Jensen","excerpt":"","dateCreated":1551454766516,"coverImage":"","type":"Post","frontmatter":"---\npath: 'React/'\ndate: 'Fri Mar 01 2019 21:15:49 GMT+0530 (India Standard Time)'\ntitle: 'React Error Boundaries'\ntags: ['React']\ncategory: 'React'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://coursework.vschool.io/react-error-boundaries/'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Error Boundaries in React help us face a few error handling issues head on. The first issue it helps us with is&nbsp;<code>throw</code>n errors. If an error is thrown inside of a React app, it is likely that part or all of the App will crash leaving you with nothing but a sad white screen to stare at.</p><p>Secondly, it is best to remove a feature from the UI if it is not functioning properly. Take for example a service like Venmo (mobile money transfer) had a broken input box where you entered the amount. It would be best of that input box didn't show up at all rather than let the user mistakenly send an incorrect amount.</p><blockquote><p>The code for each example is provided in this write-up so you play with this topic with working examples.</p></blockquote><hr><h2>What is an Error Boundary?</h2><p>Error Boundaries are React components that catch Javascript errors anywhere below them in the component tree. If an Error Boundary catches an error, it will first log the error, and then it will display a&nbsp;<em>fallback UI</em>&nbsp;instead of the crashed component tree.</p><h4>What errors and when?</h4><p>Error Boundaries catch most Javascript errors, they are like the javascript&nbsp;<code>catch</code>but for components. Here are the error types they do&nbsp;<em>NOT</em>&nbsp;catch:<br>- Event Handlers<br>- Asynchronous code<br>- Server side rendering<br>- Errors thrown in the Boundary component itself</p><p>Error boundaries catch errors during rendering, in lifecycle methods, and in constructors of the whole tree below them</p><hr><h2>Create a single &lt;ErrorBoundary&gt; component</h2><p>A class component becomes an error Boundary if it defines a new lifecycle method called&nbsp;<code>componentDidCatch(error, info)</code>, or a&nbsp;<code>static</code>&nbsp;method&nbsp;<code>static getDerivedStateFromProps(error)</code>. You really only need to make this once (think HOC), and then you can reuse it wherever you need an error boundary in your app.</p><p>Let's take a look at what a ErrorBoundary component will look like, and then see it used in two different situations:</p><pre><code><span>import</span> React<span>,</span> <span>{</span> Component <span>}</span> <span>from</span> <span>'react'</span>\n\n<span>class</span> <span>ErrorBoundary</span> <span>extends</span> <span>Component</span> <span>{</span>\n    <span>constructor</span><span>(</span>props<span>)</span><span>{</span>\n        <span>super</span><span>(</span>props<span>)</span>\n        <span>this</span><span>.</span>state <span>=</span> <span>{</span> error<span>:</span> <span>null</span><span>,</span> errorInfo<span>:</span> <span>null</span> <span>}</span>\n    <span>}</span>\n    \n    <span spellcheck=\"true\">// For this example we'll just use componentDidCatch, this is only </span>\n    <span spellcheck=\"true\">// here to show you what this method would look like.</span>\n    <span spellcheck=\"true\">// static getDerivedStateFromProps(error){</span>\n        <span spellcheck=\"true\">// return { error: true }</span>\n    <span spellcheck=\"true\">// }</span>\n\n    <span>componentDidCatch</span><span>(</span>error<span>,</span> info<span>)</span><span>{</span>\n        <span>this</span><span>.</span><span>setState</span><span>(</span><span>{</span> error<span>:</span> error<span>,</span> errorInfo<span>:</span> info <span>}</span><span>)</span>\n    <span>}</span>\n\n    <span>render</span><span>(</span><span>)</span> <span>{</span>\n        <span>if</span><span>(</span><span>this</span><span>.</span>state<span>.</span>errorInfo<span>)</span><span>{</span>\n            <span>return</span> <span>(</span>\n                <span>&lt;</span>div className<span>=</span><span>\"error-boundary\"</span><span>&gt;</span>\n                    <span>&lt;</span>summary<span>&gt;</span>Something went wrong<span>&lt;</span><span>/</span>summary<span>&gt;</span>\n                    <span>&lt;</span>details style<span>=</span><span>{</span><span>{</span> whiteSpace<span>:</span> <span>'pre-wrap'</span> <span>}</span><span>}</span><span>&gt;</span>\n                        <span>{</span> <span>this</span><span>.</span>state<span>.</span>error <span>&amp;&amp;</span> <span>this</span><span>.</span>state<span>.</span>error<span>.</span><span>toString</span><span>(</span><span>)</span> <span>}</span>\n                        <span>{</span> <span>this</span><span>.</span>state<span>.</span>errorInfo<span>.</span>componentStack <span>}</span>\n                    <span>&lt;</span><span>/</span>details<span>&gt;</span>\n                <span>&lt;</span><span>/</span>div<span>&gt;</span>\n            <span>)</span>\n        <span>}</span>\n        <span>return</span> <span>this</span><span>.</span>props<span>.</span>children\n    <span>}</span>\n<span>}</span>\n\n<span>export</span> <span>default</span> ErrorBoundary<span>;</span>\n</code></pre><p>Let's break down what is happening here.</p><ul><li>First: We need to create a class component, with constructor, super and state.<ul><li>props is given to constructor and super in case you want to pass props to set this component's initial state.</li></ul></li><li>Second: We envoke the&nbsp;<code>componentDidCatch(error, errorInfo)</code>&nbsp;that expects to receive two parameters,&nbsp;<code>error</code>&nbsp;which is the error, and&nbsp;<code>errorInfo</code>&nbsp;which contains additional error information.<ul><li>If this lifecycle method is triggered, (meaning if there was an error in one of it's child components), state is set to set the error and its info.</li></ul></li><li>Third: We set up a conditional statement to check if&nbsp;<code>errorInfo</code>&nbsp;in the ErrorBoundary's state has error information, and if so we return a div containing the error information.<ul><li>We are using the &lt;summary&gt; and &lt;details&gt; html semantic tags that gives you pre-built toggle functionality for the message the &lt;details&gt; contains. Note, these tags may not work on all browsers.</li><li>The&nbsp;<code>error</code>&nbsp;is converted to a String so we can use it.</li><li>The&nbsp;<code>errorInfo.componentStack</code>&nbsp;allows you to see the failing component stack from the error.</li></ul></li><li>Fourth: If there is no present error in state, we just return&nbsp;<code>this.props.children</code>&nbsp;which refers to whatever component the &lt;ErrorBoundary/&gt; is wrapped around.</li></ul><p>Let's implement this first with a button clicker that adds 1 to a number in state. The &lt;App /&gt; component looks like this:</p><pre><code><span>import</span> React<span>,</span> <span>{</span> Component <span>}</span> <span>from</span> <span>'react'</span>\n<span>import</span> Display <span>from</span> <span>'./Display'</span>\n<span>import</span> Controls <span>from</span> <span>'./Controls'</span>\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n    <span>constructor</span><span>(</span><span>)</span><span>{</span>\n        <span>super</span><span>(</span><span>)</span>\n        <span>this</span><span>.</span>state <span>=</span> <span>{</span>\n            num<span>:</span> <span>0</span><span>,</span>\n        <span>}</span>\n    <span>}</span>\n\n    addOne <span>=</span> <span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>this</span><span>.</span><span>setState</span><span>(</span>prevState <span>=</span><span>&gt;</span> <span>(</span><span>{</span> num<span>:</span> prevState<span>.</span>num <span>+</span> <span>1</span> <span>}</span><span>)</span><span>)</span>\n\n    <span>render</span><span>(</span><span>)</span> <span>{</span>\n        <span>const</span> <span>{</span> addOne <span>}</span> <span>=</span> <span>this</span>\n        <span>const</span> <span>{</span> num <span>}</span> <span>=</span> <span>this</span><span>.</span>state\n        <span>return</span> <span>(</span>\n            <span>&lt;</span>div<span>&gt;</span>\n                <span>&lt;</span>Display num<span>=</span><span>{</span> num <span>}</span><span>/</span><span>&gt;</span>\n                <span>&lt;</span>Controls addOne<span>=</span><span>{</span> addOne <span>}</span><span>/</span><span>&gt;</span>\n            <span>&lt;</span><span>/</span>div<span>&gt;</span>\n        <span>)</span>\n    <span>}</span>\n<span>}</span>\n\n<span>export</span> <span>default</span> App<span>;</span>\n</code></pre><p>The &lt;Display /&gt; component looks like this:</p><pre><code><span>import</span> React <span>from</span> <span>'react'</span><span>;</span>\n\n<span>const</span> Display <span>=</span> props <span>=</span><span>&gt;</span> <span>{</span>\n    <span>const</span> <span>{</span> num <span>}</span> <span>=</span> props\n    <span spellcheck=\"true\">// If the current num is greater than 10, throw an error.</span>\n    <span>if</span><span>(</span>num <span>&gt;</span> <span>10</span><span>)</span><span>{</span>\n        <span>throw</span> <span>new</span> <span>Error</span><span>(</span><span>\"I'm your error! I'm erroring so well!\"</span><span>)</span>\n    <span>}</span>\n    <span>return</span> <span>&lt;</span>h1<span>&gt;</span><span>{</span> num <span>}</span><span>&lt;</span><span>/</span>h1<span>&gt;</span>\n<span>}</span><span>;</span>\n\n<span>export</span> <span>default</span> Display<span>;</span>\n</code></pre><p>The &lt;Controls /&gt; component looks like this:</p><pre><code><span>import</span> React <span>from</span> <span>'react'</span><span>;</span>\n\n<span>const</span> Controls <span>=</span> props <span>=</span><span>&gt;</span> <span>{</span>\n    <span>const</span> <span>{</span> addOne <span>}</span> <span>=</span> props\n    <span>return</span> <span>(</span>\n        <span>&lt;</span>div<span>&gt;</span>\n            <span>&lt;</span>button onClick<span>=</span><span>{</span> addOne <span>}</span><span>&gt;</span> <span>+</span> <span>&lt;</span><span>/</span>button<span>&gt;</span>\n        <span>&lt;</span><span>/</span>div<span>&gt;</span>\n    <span>)</span>\n<span>}</span><span>;</span>\n\n<span>export</span> <span>default</span> Controls<span>;</span>\n</code></pre><p>In the &lt;Display /&gt; component we are simulating an error when the number is greater than 10. If you run the application right now and click the button to be greater than 10, the application crashes presenting you with a lovely white screen. Wouldn't it be great if the&nbsp;<em>crashing</em>&nbsp;could be contained to the component it occurred in to allow for the rest of the application to keep running?</p><p>The answer is yes! This is where ErrorBoundaries perform their magic. In the&nbsp;<code>App.js</code>,&nbsp;<code>import ErrorBoundary from './ErrorBoundary'</code>. Then wrap the &lt;Display/&gt; component in those tags like this:</p><p><img src=\"https://coursework.vschool.io/content/images/2018/10/Screen-Shot-2018-10-24-at-12.19.08-PM.png\" alt=\"Screen-Shot-2018-10-24-at-12.19.08-PM\"></p><p>If you now go test the application, you should see a crash error that looks like this:</p><p><img src=\"https://coursework.vschool.io/content/images/2018/10/Screen-Shot-2018-10-24-at-12.20.17-PM.png\" alt=\"Screen-Shot-2018-10-24-at-12.20.17-PM\"></p><p>But notice the small text at the bottom:</p><p><img src=\"https://coursework.vschool.io/content/images/2018/10/Screen-Shot-2018-10-24-at-12.20.21-PM.png\" alt=\"Screen-Shot-2018-10-24-at-12.20.21-PM\"></p><p>This is purely a message seen in development, so to see what the user would actually see when this error occurred, click the&nbsp;<code>X</code>&nbsp;at the top right.</p><p>Now you should see the magic of using an Error Boundary! The component that threw an error and crashed was the only one affected by that crash. You can still click the button (and even see that React state is still updating in React Dev Tools)</p><hr><h2>Proper Use</h2><p>A question you may have is 'Where do I put ErrorBoundaries', and the answer is around&nbsp;<strong>components themselves</strong>. While you can wrap JSX elements and may still get it to work, that is not the intended use. Error Boundaries are meant to render some default JSX in place of the crashed component to allow the website to keep running. So:</p><p><img src=\"https://coursework.vschool.io/content/images/2018/10/Screen-Shot-2018-10-24-at-12.27.37-PM.png\" alt=\"Screen-Shot-2018-10-24-at-12.27.37-PM\"></p><p>An Error boundary will visually replace the piece of the UI that is wrapped in its open/close tags. This means you can also wrap your top level&nbsp;<code>&lt;App /&gt;</code>component in the&nbsp;<code>index.js</code>&nbsp;in case anything happens in your top level component.</p><hr><h2>Using Error Boundaries with react-router-dom</h2><p>Currently when using&nbsp;<code>react-router-dom</code>, the entire app will crash if the user clicks a link that loads a component with an error. Let's use an &lt;ErrorBoundary /&gt; component to fix this. We will be displaying the error message, but in production you may change your&nbsp;<code>ErrorBoundary</code>&nbsp;div to display something like a \"Oops, something went wrong\" message to the user.</p><p>Here is the index.js and App.js components:</p><pre><code><span>import</span> React <span>from</span> <span>'react'</span>\n<span>import</span> ReactDOM <span>from</span> <span>'react-dom'</span>\n<span>import</span> App <span>from</span> <span>'./App'</span>\n<span>import</span> <span>{</span> BrowserRouter <span>}</span> <span>from</span> <span>'react-router-dom'</span>\n<span>import</span> <span>'./style.css'</span>\n\nReactDOM<span>.</span><span>render</span><span>(</span>\n    <span>&lt;</span>BrowserRouter<span>&gt;</span>\n        <span>&lt;</span>App <span>/</span><span>&gt;</span>\n    <span>&lt;</span><span>/</span>BrowserRouter<span>&gt;</span><span>,</span>\ndocument<span>.</span><span>getElementById</span><span>(</span><span>'root'</span><span>)</span>\n<span>)</span>\n</code></pre><pre><code><span>import</span> React<span>,</span> <span>{</span> Component <span>}</span> <span>from</span> <span>'react'</span>\n<span>import</span> <span>{</span> Switch<span>,</span> Route<span>,</span> Link <span>}</span> <span>from</span> <span>'react-router-dom'</span>\n<span>import</span> Home <span>from</span> <span>'./Home'</span>\n<span>import</span> About <span>from</span> <span>'./About'</span>\n<span>import</span> Broken <span>from</span> <span>'./Broken'</span>\n<span>import</span> Contact <span>from</span> <span>'./Contact'</span>\n\n\n<span>class</span> <span>App</span> <span>extends</span> <span>Component</span> <span>{</span>\n    <span>render</span><span>(</span><span>)</span> <span>{</span>\n        <span>return</span> <span>(</span>\n            <span>&lt;</span>div<span>&gt;</span>\n                <span>&lt;</span>div className<span>=</span><span>\"nav\"</span><span>&gt;</span>\n                    <span>&lt;</span>Link to<span>=</span><span>\"/\"</span><span>&gt;</span>Home<span>&lt;</span><span>/</span>Link<span>&gt;</span>\n                    <span>&lt;</span>Link to<span>=</span><span>\"/about\"</span><span>&gt;</span>About<span>&lt;</span><span>/</span>Link<span>&gt;</span>\n                    <span>&lt;</span>Link to<span>=</span><span>\"/broken\"</span><span>&gt;</span>Broken Route<span>&lt;</span><span>/</span>Link<span>&gt;</span>\n                    <span>&lt;</span>Link to<span>=</span><span>\"/contact\"</span><span>&gt;</span>Contact<span>&lt;</span><span>/</span>Link<span>&gt;</span>\n                <span>&lt;</span><span>/</span>div<span>&gt;</span>\n                <span>&lt;</span>Switch<span>&gt;</span>\n                    <span>&lt;</span>Route exact path<span>=</span><span>\"/\"</span> component<span>=</span><span>{</span>Home<span>}</span> <span>/</span><span>&gt;</span>\n                    <span>&lt;</span>Route path<span>=</span><span>\"/contact\"</span> component<span>=</span><span>{</span>Contact<span>}</span> <span>/</span><span>&gt;</span>\n                    <span>&lt;</span>Route path<span>=</span><span>\"/about\"</span> component<span>=</span><span>{</span>About<span>}</span><span>/</span><span>&gt;</span>\n                    <span>&lt;</span>Route path<span>=</span><span>\"/broken\"</span> component<span>=</span><span>{</span>Broken<span>}</span><span>/</span><span>&gt;</span>\n                <span>&lt;</span><span>/</span>Switch<span>&gt;</span>\n            <span>&lt;</span><span>/</span>div<span>&gt;</span>\n        <span>)</span><span>;</span>\n    <span>}</span>\n<span>}</span>\n\n<span>export</span> <span>default</span> App\n</code></pre><p>The Home, About, and Contact components look like this, just with the component name and the className being different on each one:</p><pre><code><span>import</span> React <span>from</span> <span>'react'</span><span>;</span>\n\n<span>const</span> Home <span>=</span> <span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span>\n    <span>return</span> <span>(</span>\n        <span>&lt;</span>div className<span>=</span><span>\"home\"</span><span>&gt;</span>\n            HOME\n        <span>&lt;</span><span>/</span>div<span>&gt;</span>\n    <span>)</span><span>;</span>\n<span>}</span><span>;</span>\n\n<span>export</span> <span>default</span> Home<span>;</span>\n</code></pre><p>The &lt;Broken /&gt; component looks like this:</p><pre><code><span>const</span> Broken <span>=</span> <span>(</span><span>)</span> <span>=</span><span>&gt;</span> <span>{</span> <span>throw</span> <span>new</span> <span>Error</span><span>(</span><span>\"The Route is Broken\"</span><span>)</span> <span>}</span>\n\n<span>export</span> <span>default</span> Broken<span>;</span>\n</code></pre><p>Lastly, the&nbsp;<code>style.css</code>&nbsp;looks like this:</p><pre><code><span>* </span><span>{</span>\n    <span>margin</span><span>:</span> <span>0</span><span>;</span>\n<span>}</span>\n\n<span>a </span><span>{</span>\n    <span>text-decoration</span><span>:</span> none<span>;</span>\n    <span>padding</span><span>:</span> <span>5</span>px <span>10</span>px<span>;</span>\n<span>}</span>\n\n<span><span>.home</span>,\n<span>.about</span>,\n<span>.contact</span> </span><span>{</span>\n    <span>width</span><span>:</span> <span>100</span>vw<span>;</span>\n    <span>height</span><span>:</span> <span>100</span>vh<span>;</span>\n    <span>display</span><span>:</span> flex<span>;</span>\n    <span>justify-content</span><span>:</span> center<span>;</span>\n    <span>align-items</span><span>:</span> center<span>;</span>\n    <span>font-size</span><span>:</span> <span>40</span>px\n<span>}</span>\n\n<span><span>.home</span> </span><span>{</span>\n    <span>background-color</span><span>:</span> blue\n<span>}</span>\n\n<span><span>.about</span> </span><span>{</span>\n    <span>background-color</span><span>:</span> green\n<span>}</span>\n\n<span><span>.contact</span> </span><span>{</span>\n    <span>background-color</span><span>:</span> purple\n<span>}</span>\n\n<span><span>.error-boundary</span> </span><span>{</span>\n    <span>width</span><span>:</span> <span>100</span>vw<span>;</span>\n    <span>height</span><span>:</span> <span>100</span>vh<span>;</span>\n    <span>font-size</span><span>:</span> <span>16</span>px<span>;</span>\n    <span>font-family</span><span>:</span> sans-serif<span>;</span>\n    <span>background-color</span><span>:</span> firebrick<span>;</span>\n    <span>display</span><span>:</span> flex<span>;</span>\n    <span>justify-content</span><span>:</span> center<span>;</span>\n    <span>align-items</span><span>:</span> center<span>;</span>\n    <span>flex-direction</span><span>:</span> column<span>;</span>\n<span>}</span>\n\n<span><span>.error-boundary</span> summary,\n<span>.error-boundary</span> details </span><span>{</span>\n    <span>width</span><span>:</span> <span>300</span>px<span>;</span>\n    <span>margin</span><span>:</span> <span>5</span>px<span>;</span>\n    <span>border</span><span>:</span> <span>2</span>px solid <span>#222</span><span>;</span>\n    <span>border-radius</span><span>:</span> <span>3</span>px<span>;</span>\n    <span>padding</span><span>:</span> <span>3</span>px<span>;</span>\n<span>}</span>\n\n<span><span>.nav</span> </span><span>{</span>\n    <span>display</span><span>:</span> flex<span>;</span>\n    <span>justify-content</span><span>:</span> space-around\n<span>}</span>\n</code></pre><p>The&nbsp;<code>&lt;Broken/&gt;</code>&nbsp;component is simulating an error that will cause it to crash. If you&nbsp;<code>npm start</code>, you'll be able to navigate around until you click on the&nbsp;<code>Broken Route</code>, wherein which the app will crash, give you the dev error, and then present the blank white screen. Let's use an ErrorBoundary component to fix this issue. Using the same ErrorBoundary component from the first example, import it at the top of your App.js and then change your Broken Route to look like the following using the react-router&nbsp;<code>render</code>&nbsp;method.</p><p><img src=\"https://coursework.vschool.io/content/images/2018/10/Screen-Shot-2018-10-24-at-1.28.01-PM.png\" alt=\"Screen-Shot-2018-10-24-at-1.28.01-PM\"></p><p>Now if you navigate around the app and click on the&nbsp;<code>Broken Route</code>, you will get the standard dev error message, but once you close that you will still be able to navigate around the site!</p><blockquote><p>Note: The&nbsp;<code>render</code>&nbsp;method is required when using ErrorBoundaries in your Routes. Meaning, you would not want to wrap the entire route like this:</p></blockquote><p><img src=\"https://coursework.vschool.io/content/images/2018/10/Screen-Shot-2018-10-24-at-1.33.18-PM.png\" alt=\"Screen-Shot-2018-10-24-at-1.33.18-PM\"></p><p>While you can test this and it appears to work, switch the order of the Route components in the switch so that the Broken Route is not the last, like this:</p><p><img src=\"https://coursework.vschool.io/content/images/2018/10/Screen-Shot-2018-10-24-at-1.41.39-PM.png\" alt=\"Screen-Shot-2018-10-24-at-1.41.39-PM\"></p><p>Now try to navigate to all of the links. Notice that any Routes after the ErrorBoundary do not render. However, if you now switch that Broken route to use the&nbsp;<code>render</code>&nbsp;method, its order in the routes does not matter.</p><p><img src=\"https://coursework.vschool.io/content/images/2018/10/Screen-Shot-2018-10-24-at-2.43.56-PM.png\" alt=\"Screen-Shot-2018-10-24-at-2.43.56-PM\"></p><p>I would highly suggest reading through React DOCs on this subject:<br><a href=\"https://reactjs.org/docs/error-boundaries.html\" target=\"_blank\">Error Boundary in React</a></p>","filePath":"pages/React/.md","_id":"lKynmsDBXTDlGUzR"}
{"date":"2018-11-06T15:00:05.227Z","title":"ServiceWorkers and Offline Browsing","sourceUrl":"https://nystudio107.com/blog/service-workers-and-offline-browsing","path":"JavaScript/","category":"JavaScript","tags":["JavaScript"," ServiceWorkers"," Offline Browsing"],"author":"Andrew Welch","excerpt":"Ser­vice­Work­ers pro­vide a way to pro­vide offline brows­ing and instant load­ing (amongst oth­er things).","dateCreated":1541516314377,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Tue Nov 06 2018 20:30:05 GMT+0530 (India Standard Time)'\ntitle: 'ServiceWorkers and Offline Browsing'\ntags: ['JavaScript','ServiceWorkers','Offline Browsing']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: 'Ser­vice­Work­ers pro­vide a way to pro­vide offline brows­ing and instant load­ing (amongst oth­er things).'\ncoverImage: ''\nsourceUrl: 'https://nystudio107.com/blog/service-workers-and-offline-browsing'\ntype: 'Post'\n---\n    ","htmlCode":"<div><div><p>Once upon a&nbsp;time, there was a&nbsp;thing called the&nbsp;<a href=\"https://www.html5rocks.com/en/tutorials/appcache/beginner/\" target=\"_blank\" rel=\"noreferrer noopener\">Appli­ca­tion­Cache</a>&nbsp;that was sup­posed to allow for offline brows­ing and instant load­ing of resources&nbsp;by man­ag­ing a&nbsp;local cache. It end­ed up being a&nbsp;good idea, but a&nbsp;lack­lus­ter implementation.</p></div></div><div><div><blockquote>The idea is that we should provide some way to let the user browse our site even if they are offline or on a spotty Internet connection, and also to have a way to identify critical resources that should be cached locally for instant loading.</blockquote></div></div><div><div><p>While it may seem some­what fringe in our increas­ing­ly con­nect­ed world to pro­vide for offline brows­ing, the real­i­ty is that&nbsp;mobile devices account for the major­i­ty of&nbsp;traf­fic to many web­sites, a&nbsp;trend that’s only&nbsp;like­ly to&nbsp;grow in the future. A&nbsp;mobile device may even be a&nbsp;person’s&nbsp;<em>only</em>&nbsp;gate­way to the Inter­net, and mobile devices are used in all sorts of less than ide­al sit­u­a­tions&nbsp;<span>&amp;</span>&nbsp;locations.</p><p>And while web browsers will cache pages that you’ve already vis­it­ed — for a&nbsp;lim­it­ed peri­od of time — they don’t cache pages you haven’t vis­it­ed. The user might be using an inter­ac­tive appli­ca­tion, and we real­ly don’t want to inter­rupt that expe­ri­ence with a&nbsp;<kbd>404 error</kbd>&nbsp;just because they ven­tured to an area of spot­ty or no cel­lu­lar coverage.</p></div></div><div><div><blockquote>Imagine someone is using your online store, and they’ve added a bunch of items to their cart, and tries to check out. Do you want to lose that sale just because they have poor reception?</blockquote></div></div><div><div><p>So what we need is a&nbsp;way to cache vis­it­ed pages/​resources, and also pre-cache pages/​resources they haven’t vis­it­ed, but we think they’ll be like­ly to.&nbsp;It’s even pos­si­ble to do fun things like let them fill out a&nbsp;mul­ti-page form offline, and sync that up with our serv­er once they have an Inter­net con­nec­tion&nbsp;again.</p><p><a href=\"https://developers.google.com/web/fundamentals/getting-started/primers/service-workers\" target=\"_blank\" rel=\"noreferrer noopener\">Ser­vice­Work­ers</a>&nbsp;lets us do all of this and more. What’s pre­sent­ed here is just a&nbsp;small sub­set of what you can do with Ser­vice­Work­ers, and is based on the Fil­a­ment Group’s&nbsp;<a href=\"https://www.filamentgroup.com/lab/modernizing-delivery.html\" target=\"_blank\" rel=\"noreferrer noopener\">Mod­ern­iz­ing our Pro­gres­sive Enhance­ment Deliv­ery</a>&nbsp;arti­cle (which in turn is based on sev­er­al oth­er&nbsp;works).</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/service-workers-and-offline-browsing#sent-into-the-coal-mine\"><i></i><span>LINK</span></a></span>SENT INTO THE COAL MINE</h3><p>Patrick Har­ring­ton of&nbsp;<a href=\"https://mildlygeeky.com/\" target=\"_blank\" rel=\"noreferrer noopener\">Mild​lyGeeky​.com</a>&nbsp;is a&nbsp;friend&nbsp;<span>&amp;</span>&nbsp;col­league of mine, but I&nbsp;swear, he treats me like a&nbsp;canary in a&nbsp;coal mine. He point­ed out the Fil­a­ment Group arti­cle to me (which I’d already perused), know­ing full well that by doing so, it’d cause me to&nbsp;<span></span>​<span>“</span>go first” and try to get Ser­vice­Work­ers&nbsp;going.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/canary-coalmine.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/canary-coalmine.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/canary-coalmine.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/canary-coalmine.jpg.webp 368w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/canary-coalmine.jpg.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/canary-coalmine.jpg.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/canary-coalmine.jpg.webp 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/canary-coalmine.jpg.webp 368w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFQABAQAAAAAAAAAAAAAAAAAAAwT%2FxAAeEAACAgICAwAAAAAAAAAAAAABAgADERIEMSEygf%2FEABYBAQEBAAAAAAAAAAAAAAAAAAMCBP%2FEABkRAQEBAQEBAAAAAAAAAAAAAAECABEDEv%2FaAAwDAQACEQMRAD8AJW45dXtyVHYDAS%2FRoo5ogEcHINT0DR12znXHkfYEFT6NL3NXyxwNNf6rNF4Yxp2Ievf%2F2Q%3D%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/canary-coalmine.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/canary-coalmine.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/canary-coalmine.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/canary-coalmine.jpg 368w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQAAAQABAAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAJABADAREAAhEBAxEB%2F8QAFQABAQAAAAAAAAAAAAAAAAAAAwT%2FxAAeEAACAgICAwAAAAAAAAAAAAABAgADERIEMSEygf%2FEABYBAQEBAAAAAAAAAAAAAAAAAAMCBP%2FEABkRAQEBAQEBAAAAAAAAAAAAAAECABEDEv%2FaAAwDAQACEQMRAD8AJW45dXtyVHYDAS%2FRoo5ogEcHINT0DR12znXHkfYEFT6NL3NXyxwNNf6rNF4Yxp2Ievf%2F2Q%3D%3D\" alt=\"Canary Coalmine\" height=\"auto\" width=\"100%\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x558_crop_center-center_82_line/canary-coalmine.jpg 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x576_crop_center-center_82_line/canary-coalmine.jpg 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x432_crop_center-center_82_line/canary-coalmine.jpg 576w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_368x245_crop_center-center_82_line/canary-coalmine.jpg 368w\"></picture></div></div></figure></div></section></div></div><div><div><p>He knows me well enough that he can just drop a&nbsp;hint of some­thing inter­est­ing, caus­ing me to dive in head-first — and if the canary lives, then he’ll ven­ture down,&nbsp;too.</p></div></div><div><div><blockquote>I’m happy to report that the canary lived!</blockquote></div></div><div><div><p>Stand­ing on the shoul­ders of giants (read: using their code), I&nbsp;was able to get Ser­vice­Work­ers up and work­ing pret­ty quick­ly on this very web­site. It’s impor­tant to note that Ser­vice­Work­ers are fair­ly new, and cur­rent­ly are&nbsp;<a href=\"http://caniuse.com/#search=ServiceWorkers\" target=\"_blank\" rel=\"noreferrer noopener\">only sup­port­ed</a>&nbsp;by Chrome, Fire­Fox, Opera, and Android browsers. How­ev­er, Microsoft is&nbsp;<a href=\"https://developer.microsoft.com/en-us/microsoft-edge/platform/status/serviceworker/\" target=\"_blank\" rel=\"noreferrer noopener\">work­ing on sup­port</a>, and even Apple may be get­ting on&nbsp;board.</p><p>The nice thing about Ser­vice­Work­ers is that they degrade grace­ful­ly; if the client web brows­er doesn’t sup­port them, no big­gy. They just don’t reap the ben­e­fits, and your web­site con­tin­ues to work normally.</p><p>The&nbsp;<a href=\"https://chrome.google.com/webstore/detail/lighthouse/blipmdconlkpinefehnmjammfjpmpbjk?hl=en\" target=\"_blank\" rel=\"noreferrer noopener\">Light­house</a>&nbsp;Chrome exten­sion can be used to&nbsp;test your web­site to val­i­date your offline brows­ing imple­men­ta­tion, amongst oth­er things.</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x797_crop_center-center_100_line/lighthouse-report.png.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x659_crop_center-center_100_line/lighthouse-report.png.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x510_crop_center-center_100_line/lighthouse-report.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x383_crop_center-center_100_line/lighthouse-report.png.webp 576w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x797_crop_center-center_100_line/lighthouse-report.png.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x659_crop_center-center_100_line/lighthouse-report.png.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x510_crop_center-center_100_line/lighthouse-report.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x383_crop_center-center_100_line/lighthouse-report.png.webp 576w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQIAOQA5AAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAKABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAwQG%2F8QAIBAAAQMEAgMAAAAAAAAAAAAAAQAEEQIDBTISEyJxkf%2FEABUBAQEAAAAAAAAAAAAAAAAAAAAB%2F8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR%2F9oADAMBAAIRAxEAPwDXtsQzx%2FK42t9dVQg%2BRM%2FVXbJIiQQkr1KJtqfaqq6y%2F9k%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x797_crop_center-center_100_line/lighthouse-report.png 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x659_crop_center-center_100_line/lighthouse-report.png 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x510_crop_center-center_100_line/lighthouse-report.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x383_crop_center-center_100_line/lighthouse-report.png 576w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQIAOQA5AAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAKABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAwQG%2F8QAIBAAAQMEAgMAAAAAAAAAAAAAAQAEEQIDBTISEyJxkf%2FEABUBAQEAAAAAAAAAAAAAAAAAAAAB%2F8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR%2F9oADAMBAAIRAxEAPwDXtsQzx%2FK42t9dVQg%2BRM%2FVXbJIiQQkr1KJtqfaqq6y%2F9k%3D\" alt=\"Lighthouse Report\" height=\"auto\" width=\"1200\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x797_crop_center-center_100_line/lighthouse-report.png 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x659_crop_center-center_100_line/lighthouse-report.png 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x510_crop_center-center_100_line/lighthouse-report.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x383_crop_center-center_100_line/lighthouse-report.png 576w\"></picture></div></div></figure><figcaption><p>Light­house test­ing tool results for nys​tu​dio<span>107</span>​.com</p></figcaption></div></section></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/service-workers-and-offline-browsing#so-exactly-what-is-a-service-worker\"><i></i><span>LINK</span></a></span>SO EXACTLY WHAT IS A SERVICEWORKER?</h3><p>Ser­vice­Work­ers are writ­ten in JavaScript, and you reg­is­ter them with the brows­er when your web­page loads. They don’t run in the con­text of your web­page, but rather they can be thought of as a&nbsp;script that runs in anoth­er (hid­den) brows­er tab, and act as a&nbsp;go-between for your web­page and the Internet.</p><p>This is pret­ty pow­er­ful stuff, as you can inter­cept or mod­i­fy net­work requests, so&nbsp;<kbd>https</kbd>&nbsp;is&nbsp;<em>required</em>&nbsp;to uti­lize them, to mit­i­gate against&nbsp;<span></span>​<span>“</span>man in the mid­dle” attack vec­tors. They can be used for many oth­er things in addi­tion to&nbsp;<a href=\"https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/\" target=\"_blank\" rel=\"noreferrer noopener\">offline brows­ing&nbsp;<span>&amp;</span>&nbsp;instant load­ing</a>, includ­ing&nbsp;<a href=\"https://developers.google.com/web/updates/2015/03/push-notifications-on-the-open-web\" target=\"_blank\" rel=\"noreferrer noopener\">push noti­fi­ca­tions</a>,&nbsp;<a href=\"https://developers.google.com/web/updates/2015/12/background-sync\" target=\"_blank\" rel=\"noreferrer noopener\">back­ground sync</a>, and so&nbsp;on.</p><p>The cool thing about Ser­vice­Work­ers (and what makes them far more flex­i­ble than the now-dep­re­cat­ed Appli­ca­tion­Cache) is that they don’t define a&nbsp;caching sys­tem, they just&nbsp;<em>pro­vide an&nbsp;<span>API</span></em>&nbsp;that can be used to cre­ate one. This makes them incred­i­bly flex­i­ble and powerful.</p><p>When your web­page loads for the first time, all of the resources load nor­mal­ly, and the Ser­vice­Work­er is reg­is­tered as being used for all of the requests that fall under the&nbsp;<em>scope</em>&nbsp;that you spec­i­fy. Here’s what the code looks like to do&nbsp;that:</p></div></div><div><div><section><div><pre><code><span>if</span> <span>(</span><span>'serviceWorker'</span> <span>in</span> navigator<span>)</span> <span>{</span>\n    window<span>.</span><span>addEventListener</span><span>(</span><span>'load'</span><span>,</span> <span>function</span><span>(</span><span>)</span> <span>{</span>\n        navigator<span>.</span>serviceWorker<span>.</span><span>register</span><span>(</span><span>'/sw.js'</span><span>,</span> <span>{</span>\n            scope<span>:</span> <span>\"/\"</span>\n        <span>}</span><span>)</span><span>.</span><span>then</span><span>(</span><span>function</span><span>(</span>registration<span>)</span> <span>{</span>\n            <span>// Registration was successful</span>\n            console<span>.</span><span>log</span><span>(</span><span>'ServiceWorker registration successful with scope: '</span><span>,</span> registration<span>.</span>scope<span>)</span><span>;</span>\n            <span>// Trim the caches on load</span>\n            navigator<span>.</span>serviceWorker<span>.</span>controller <span>&amp;&amp;</span> navigator<span>.</span>serviceWorker<span>.</span>controller<span>.</span><span>postMessage</span><span>(</span><span>{</span>\n                command<span>:</span> <span>\"trimCaches\"</span>\n            <span>}</span><span>)</span><span>;</span>\n       <span>}</span><span>)</span><span>.</span><span>catch</span><span>(</span><span>function</span><span>(</span>err<span>)</span> <span>{</span>\n            <span>// registration failed :(</span>\n            console<span>.</span><span>log</span><span>(</span><span>'ServiceWorker registration failed: '</span><span>,</span> err<span>)</span><span>;</span>\n        <span>}</span><span>)</span><span>;</span>\n    <span>}</span><span>)</span><span>;</span>\n<span>}</span></code></pre><aside><h5><i></i>&nbsp;register-service-worker.js</h5></aside></div></section></div></div><div><div><p>In the exam­ple above,&nbsp;<kbd>sw.js</kbd>&nbsp;is our Ser­vice­Work­er script. If the brows­er sup­ports Ser­vice­Work­ers, after the web­page has loaded, we attempt to reg­is­ter it with the brows­er. If it suc­ceeds we send a&nbsp;mes­sage to the con­sole, and then&nbsp;<em>post</em>&nbsp;a&nbsp;mes­sage to our ser­vice work­er to send it the&nbsp;<kbd>trimCaches</kbd>command.</p><p>In this exam­ple, we don’t&nbsp;<em>need</em>&nbsp;to explic­it­ly declare the scope our ser­vice work­er should han­dle requests from, because by default it uses the same scope as the loca­tion of our script, which is at the serv­er root. This means that it can han­dle&nbsp;<em>all</em>&nbsp;requests from the website.</p><p>How­ev­er if our script was locat­ed in, say,&nbsp;<kbd>/js/sw.js</kbd>&nbsp;that would give it an implic­it scope of&nbsp;<kbd>/js/</kbd>&nbsp;so it would only han­dle requests from the&nbsp;<kbd>/js/</kbd>&nbsp;direc­to­ry (and every­thing below it). So I&nbsp;decid­ed to explic­it­ly declare it, for clarity’s sake.</p><p>Now that the ser­vice work­er has been reg­is­tered, any fur­ther requests to our domain that fall under the&nbsp;<em>scope</em>&nbsp;we spec­i­fied&nbsp;will be han­dled by it. Our web­page asks for, say,&nbsp;<kbd>site.combined.min.css</kbd>&nbsp;via a&nbsp;<kbd>&lt;link&gt;</kbd>&nbsp;tag, and what hap­pens is our Ser­vice­Work­er gets a&nbsp;chance to field the request, and maybe do some­thing dif­fer­ent with&nbsp;it.</p></div></div><div><div><blockquote>In this context, think of a ServiceWorker as traffic cop that sits between your webpage, and the Internet, deciding what comes and goes.</blockquote></div></div><div><div><p>Using the&nbsp;<a href=\"https://www.filamentgroup.com/sw.js\" target=\"_blank\" rel=\"noreferrer noopener\">Fil­a­ment Group code</a>&nbsp;(which is based on&nbsp;<a href=\"https://www.smashingmagazine.com/2016/02/making-a-service-worker/\" target=\"_blank\" rel=\"noreferrer noopener\">Lyza Dan­ger Gard­ner</a>&nbsp;<span>&amp;</span>&nbsp;<a href=\"https://adactio.com/journal/11730\" target=\"_blank\" rel=\"noreferrer noopener\">Jere­my Keith’s</a>&nbsp;code)&nbsp;as a&nbsp;basis, we spec­i­fy the pages we want to be pre-cached:</p></div></div><div><div><section><div><pre><code><span>const</span> offlinePages <span>=</span> <span>[</span>\n  <span>'/blog/index'</span><span>,</span>\n  <span>'/offline'</span><span>,</span>\n  <span>'/'</span>\n<span>]</span><span>;</span></code></pre></div></section></div></div><div><div><p>And we spec­i­fy the sta­t­ic resources we want pre-cached:</p></div></div><div><div><section><div><pre><code><span>const</span> staticAssets <span>=</span> <span>[</span>\n  <span>'{{ baseUrl }}js/lazysizes.min.js'</span><span>,</span>\n  <span>'{{ baseUrl }}js/prism.min.js'</span><span>,</span>\n  <span>'{{ baseUrl }}js/system.min.js'</span><span>,</span>\n  <span>'{{ baseUrl }}js/vue.min.js'</span><span>,</span>\n  <span>'{{ baseUrl }}js/vue-resource.min.js'</span><span>,</span>\n\n  <span>'{{ baseUrl }}css/site.combined.min.css'</span><span>,</span>\n\n  <span>'{{ baseUrl }}fonts/esfera-webfont.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/brandon-regular-webfont.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/brandon-bold-webfont.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/brandon-regular-italic-webfont.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/fontello.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/OperatorMonoSSm-Book.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/OperatorMonoSSm-BookItalic.woff2'</span><span>,</span>\n\n  <span>'/api/blog.json'</span><span>,</span>\n<span>]</span><span>;</span></code></pre></div></section></div></div><div><div><p>Note that the imple­men­ta­tion used here is just one of many pos­si­ble imple­men­ta­tions; your Ser­vice­Work­er lis­tens to events, and can imple­ment a&nbsp;caching sys­tem (or some­thing else, for that mat­ter) how­ev­er it&nbsp;wants.</p><p>The&nbsp;<kbd>offline</kbd>&nbsp;page just spec­i­fies a&nbsp;fall­back page to use if they are offline, but they haven’t vis­it­ed any pages, so noth­ing is in the&nbsp;cache.</p><p>These dec­la­ra­tions cause our Ser­vice­Work­er to request all of the&nbsp;<kbd>offlinePages</kbd>&nbsp;<span>&amp;</span>&nbsp;<kbd>staticAssets</kbd>&nbsp;when our page loads, even if it didn’t request them explic­it­ly. These requests hap­pen asyn­chro­nous­ly, after our page is loaded, so they don’t impact the page&nbsp;load.<br></p><p>This ensures that all of the con­tent we we want avail­able when our site is offline will be cached local­ly. This also ensures that any­thing we think peo­ple will want to load soon will be instant­ly loaded from our cache. Here’s what it looks&nbsp;like:<br></p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x824_crop_center-center_100_line/service-worker-page-waterfall.png.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x681_crop_center-center_100_line/service-worker-page-waterfall.png.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x527_crop_center-center_100_line/service-worker-page-waterfall.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x395_crop_center-center_100_line/service-worker-page-waterfall.png.webp 576w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x824_crop_center-center_100_line/service-worker-page-waterfall.png.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x681_crop_center-center_100_line/service-worker-page-waterfall.png.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x527_crop_center-center_100_line/service-worker-page-waterfall.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x395_crop_center-center_100_line/service-worker-page-waterfall.png.webp 576w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQIAOQA5AAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAKABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAQIG%2F8QAHBABAAMAAgMAAAAAAAAAAAAAAQACEQMhEjFx%2F8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH%2FxAAVEQEBAAAAAAAAAAAAAAAAAAAAAf%2FaAAwDAQACEQMRAD8A2tL35R1iWtx55qfPUUA6MkWNze4WP%2F%2FZ\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x824_crop_center-center_100_line/service-worker-page-waterfall.png 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x681_crop_center-center_100_line/service-worker-page-waterfall.png 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x527_crop_center-center_100_line/service-worker-page-waterfall.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x395_crop_center-center_100_line/service-worker-page-waterfall.png 576w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQIAOQA5AAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAKABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAQIG%2F8QAHBABAAMAAgMAAAAAAAAAAAAAAQACEQMhEjFx%2F8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH%2FxAAVEQEBAAAAAAAAAAAAAAAAAAAAAf%2FaAAwDAQACEQMRAD8A2tL35R1iWtx55qfPUUA6MkWNze4WP%2F%2FZ\" alt=\"Service Worker Page Waterfall\" height=\"auto\" width=\"1200\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x824_crop_center-center_100_line/service-worker-page-waterfall.png 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x681_crop_center-center_100_line/service-worker-page-waterfall.png 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x527_crop_center-center_100_line/service-worker-page-waterfall.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x395_crop_center-center_100_line/service-worker-page-waterfall.png 576w\"></picture></div></div></figure><figcaption><p>Ser­vice­Work­er page load waterfall</p></figcaption></div></section></div></div><div><div><p>Every­thing inside the orange box was loaded by our Ser­vice­Work­er, after our page was ful­ly loaded. Sub­se­quent requests go through the Ser­vice­Work­er, so if the per­son goes offline, all of these pages and resources will be avail­able. And pages we think they are like­ly to vis­it will also be instant­ly loaded from the cache, whether they are online or&nbsp;offline.</p><p>In addi­tion to ensur­ing that the pages&nbsp;<span>&amp;</span>&nbsp;assets we spec­i­fy are cached, our Ser­vice­Work­er also ensures that any pages the user vis­its are cached, too. We can take our site offline with the Chrome devel­op­er tools to sim­u­late what happens:</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x550_crop_center-center_100_line/service-worker-offline.png.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x455_crop_center-center_100_line/service-worker-offline.png.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x352_crop_center-center_100_line/service-worker-offline.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x264_crop_center-center_100_line/service-worker-offline.png.webp 576w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x550_crop_center-center_100_line/service-worker-offline.png.webp 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x455_crop_center-center_100_line/service-worker-offline.png.webp 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x352_crop_center-center_100_line/service-worker-offline.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x264_crop_center-center_100_line/service-worker-offline.png.webp 576w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQIAOQA5AAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAHABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAAIG%2F8QAGhAAAwADAQAAAAAAAAAAAAAAAAECERIhE%2F%2FEABQBAQAAAAAAAAAAAAAAAAAAAAD%2FxAAUEQEAAAAAAAAAAAAAAAAAAAAA%2F9oADAMBAAIRAxEAPwDa%2BkOW9VwvMpKlK6AB%2F9k%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x550_crop_center-center_100_line/service-worker-offline.png 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x455_crop_center-center_100_line/service-worker-offline.png 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x352_crop_center-center_100_line/service-worker-offline.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x264_crop_center-center_100_line/service-worker-offline.png 576w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQIAOQA5AAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAHABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAAIG%2F8QAGhAAAwADAQAAAAAAAAAAAAAAAAECERIhE%2F%2FEABQBAQAAAAAAAAAAAAAAAAAAAAD%2FxAAUEQEAAAAAAAAAAAAAAAAAAAAA%2F9oADAMBAAIRAxEAPwDa%2BkOW9VwvMpKlK6AB%2F9k%3D\" alt=\"Service Worker Offline\" height=\"auto\" width=\"1200\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_1200x550_crop_center-center_100_line/service-worker-offline.png 1200w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_992x455_crop_center-center_100_line/service-worker-offline.png 992w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x352_crop_center-center_100_line/service-worker-offline.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x264_crop_center-center_100_line/service-worker-offline.png 576w\"></picture></div></div></figure></div></section></div></div><div><div><p>Notice that the assets are&nbsp;<em>(from Ser­vice­Work­er)</em>&nbsp;and the&nbsp;<em>Time</em>&nbsp;is very quick. We can now browse any of the pages we’ve already vis­it­ed — or that we explic­it­ly cached — even when offline, rather than get­ting the dread­ed dinosaur:</p></div></div><div><div><section><div><figure><div><div data-expand=\"-1\"><picture><source data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x498_crop_center-center_100_line/no-internet-connection.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x374_crop_center-center_100_line/no-internet-connection.png.webp 576w\" type=\"image/webp\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x498_crop_center-center_100_line/no-internet-connection.png.webp 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x374_crop_center-center_100_line/no-internet-connection.png.webp 576w\"><img src=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQIAOQA5AAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAKABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAgEG%2F8QAGxAAAgIDAQAAAAAAAAAAAAAAAQIAERMhMWH%2FxAAUAQEAAAAAAAAAAAAAAAAAAAAA%2F8QAFBEBAAAAAAAAAAAAAAAAAAAAAP%2FaAAwDAQACEQMRAD8A2pfGzC9k3uzGrMTvnglPYoH%2F2Q%3D%3D\" data-sizes=\"100vw\" data-srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x498_crop_center-center_100_line/no-internet-connection.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x374_crop_center-center_100_line/no-internet-connection.png 576w\" data-lowsrc=\"data:image/jpeg;base64,%2F9j%2F4AAQSkZJRgABAQIAOQA5AAD%2F2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P%2F2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P%2FwAARCAAKABADASIAAhEBAxEB%2F8QAFgABAQEAAAAAAAAAAAAAAAAAAgEG%2F8QAGxAAAgIDAQAAAAAAAAAAAAAAAQIAERMhMWH%2FxAAUAQEAAAAAAAAAAAAAAAAAAAAA%2F8QAFBEBAAAAAAAAAAAAAAAAAAAAAP%2FaAAwDAQACEQMRAD8A2pfGzC9k3uzGrMTvnglPYoH%2F2Q%3D%3D\" alt=\"No Internet Connection\" height=\"auto\" width=\"768\" sizes=\"100vw\" srcset=\"https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_768x498_crop_center-center_100_line/no-internet-connection.png 768w, https://nystudio107-ems2qegf7x6qiqq.netdna-ssl.com/img/blog/_576x374_crop_center-center_100_line/no-internet-connection.png 576w\"></picture></div></div></figure><figcaption><p>Offli­neosaur</p></figcaption></div></section></div></div><div><div><p>We can even spec­i­fy an&nbsp;<span></span>​<span>“</span>offline” image to swap in (instead of an ugly bro­ken image link) for the case where a&nbsp;page is cached, but the image on it is not (per­haps it was&nbsp;<a href=\"https://nystudio107.com/blog/creating-optimized-images-in-craft-cms\">lazi­ly loaded</a>). As web­pages become more and more webapp-ish, it’s nat­ur­al that we’d want to be able to emu­late the offline usabil­i­ty of native apps,&nbsp;too.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/service-workers-and-offline-browsing#route-map-plugin\"><i></i><span>LINK</span></a></span>ROUTE MAP PLUGIN</h3><p>I’ve cre­at­ed a&nbsp;plu­g­in for Craft&nbsp;<span>CMS</span>&nbsp;called&nbsp;<a href=\"https://github.com/nystudio107/routemap\" target=\"_blank\" rel=\"noreferrer noopener\">Route Map</a>&nbsp;that makes work­ing with Ser­vice­Work­ers even easier.</p><p>Let’s say for this web­site we want to pre-cache the lat­est&nbsp;<span>9</span>&nbsp;blog posts, so that if some­one loads any page on the web­site, and then goes offline or los­es their cel­lu­lar con­nec­tion, they can still read our articles.</p><p>Using the Route Map plu­g­in, we can just do&nbsp;this:</p></div></div><div><div><section><div><pre><code><span>{</span><span>%</span> <span>set</span> blogEntries <span>=</span> craft<span>.</span>routeMap<span>.</span><span>getSectionUrls</span><span>(</span><span>'blog'</span><span>,</span> <span>{</span><span>'limit'</span><span>:</span> <span>9</span><span>}</span><span>)</span> <span>%</span><span>}</span>\n\n<span>(</span><span>function</span><span>(</span><span>)</span><span>{</span>\n<span>'use strict'</span><span>;</span>\n\n<span>// Constants for the cache size</span>\n<span>const</span> maxPagesCache <span>=</span> <span>30</span><span>;</span>\n<span>const</span> maxStaticAssetsCache <span>=</span> <span>100</span><span>;</span>\n\n<span>// borrowing heavily from adactio's sw patterns here... Thanks JK!</span>\n\n<span>const</span> version <span>=</span> <span>'nys1.1::'</span><span>;</span>\n<span>const</span> staticCacheName <span>=</span> version <span>+</span> <span>'static'</span><span>;</span>\n<span>const</span> pagesCacheName <span>=</span> version <span>+</span> <span>'pages'</span><span>;</span>\n<span>const</span> imagesCacheName <span>=</span> version <span>+</span> <span>'images'</span><span>;</span>\n<span>const</span> offlinePages <span>=</span> <span>[</span>\n  <span>'/blog/index'</span><span>,</span>\n<span>{</span><span>%</span> <span>for</span> blogEntry <span>in</span> blogEntries <span>%</span><span>}</span>\n    <span>'{{ blogEntry }}'</span><span>,</span>\n<span>{</span><span>%</span> endfor <span>%</span><span>}</span>\n  <span>'/offline'</span><span>,</span>\n  <span>'/'</span>\n<span>]</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;Service Worker partials</h5></aside></div></section></div></div><div><div><p>The&nbsp;<kbd>{% set blogEntries = craft.routeMap.getSectionUrls('blog', {'limit': 9}) %}</kbd>&nbsp;fetch­es the URLs to the last&nbsp;<span>9</span>&nbsp;blog entries in a&nbsp;per­for­mant, cached man­ner, and then we add them to our offline pages&nbsp;via:</p></div></div><div><div><section><div><pre><code><span>{</span><span>%</span> <span>for</span> blogEntry <span>in</span> blogEntries <span>%</span><span>}</span>\n    <span>'{{ blogEntry }}'</span><span>,</span>\n<span>{</span><span>%</span> endfor <span>%</span><span>}</span></code></pre><aside><h5><i></i>&nbsp;Pre-caching Blog Entries</h5></aside></div></section></div></div><div><div><p>Well, so what? You could do that already just using&nbsp;<kbd>craft.entries.section('blog').limit(9)</kbd>&nbsp;right? Well, we can also use Route Map to extract the Assets uses on those pages, whether in Assets fields or embed­ded in Matrix/​Neo blocks.</p><p>That way we could also pre-cache any images need­ed for those pages with&nbsp;<kbd>craft.routeMap.getUrlAssetUrls</kbd>, too:</p></div></div><div><div><section><div><pre><code><span>const</span> staticAssets <span>=</span> <span>[</span>\n<span>{</span><span>%</span> <span>for</span> blogEntry <span>in</span> blogEntries <span>%</span><span>}</span>\n        <span>{</span><span>%</span><span>-</span> <span>set</span> assetUrls <span>=</span> craft<span>.</span>routeMap<span>.</span><span>getUrlAssetUrls</span><span>(</span>blogEntry<span>)</span> <span>-</span><span>%</span><span>}</span>\n        <span>{</span><span>%</span><span>-</span> <span>for</span> assetUrl <span>in</span> assetUrls <span>-</span><span>%</span><span>}</span>\n            <span>'{{ assetUrl }}'</span><span>,</span>\n        <span>{</span><span>%</span> endfor <span>-</span><span>%</span><span>}</span>\n<span>{</span><span>%</span> endfor <span>%</span><span>}</span>\n  <span>'{{ baseUrl }}js/lazysizes.min{{staticAssetsVersion}}.js'</span><span>,</span>\n  <span>'{{ baseUrl }}js/prism.min{{staticAssetsVersion}}.js'</span><span>,</span>\n  <span>'{{ baseUrl }}js/vue.min{{staticAssetsVersion}}.js'</span><span>,</span>\n  <span>'{{ baseUrl }}js/vue-resource.min{{staticAssetsVersion}}.js'</span><span>,</span>\n\n  <span>'{{ baseUrl }}css/site.combined.min{{staticAssetsVersion}}.css'</span><span>,</span>\n\n  <span>'{{ baseUrl }}fonts/esfera-webfont.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/brandon-regular-webfont.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/brandon-bold-webfont.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/brandon-regular-italic-webfont.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/fontello.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/OperatorMonoSSm-Book.woff2'</span><span>,</span>\n  <span>'{{ baseUrl }}fonts/OperatorMonoSSm-BookItalic.woff2'</span><span>,</span>\n\n  <span>'/api/blog.json'</span><span>,</span>\n<span>]</span><span>;</span></code></pre><aside><h5><i></i>&nbsp;Pre-caching Blog Entry Assets (images)</h5></aside></div></section></div></div><div><div><p>This make for some pow­er­ful offline brows­ing capabilities.</p><p>This exam­ple uses Twig to obtain the Entry URLs via the Route Map plu­g­in, but you could just as eas­i­ly&nbsp;<a href=\"https://github.com/nystudio107/routemap#using-route-map-via-xhr\" target=\"_blank\" rel=\"noreferrer noopener\">grab them via&nbsp;<span>XHR</span></a>.</p></div></div><div><div><h3><span><a href=\"https://nystudio107.com/blog/service-workers-and-offline-browsing#wrapping-up\"><i></i><span>LINK</span></a></span>WRAPPING UP</h3><p>This is some seri­ous­ly cool stuff.&nbsp;And it bare­ly scratch­es the sur­face of what Ser­vice­Work­ers can do. I&nbsp;can’t wait to see what you do with&nbsp;them.</p><p>Want to know more about Ser­vice­Work­ers? The&nbsp;<a href=\"https://github.com/w3c/ServiceWorker/blob/master/explainer.md\" target=\"_blank\" rel=\"noreferrer noopener\">Ser­vice work­ers explained</a>&nbsp;and&nbsp;<a href=\"https://blog.dexecure.com/beyond-offline-other-interesting-use-cases-for-service-workers-2/\" target=\"_blank\" rel=\"noreferrer noopener\">Beyond Offline: Oth­er Inter­est­ing Use Cas­es with Ser­vice Work­ers</a>&nbsp;arti­cles&nbsp;are&nbsp;good places to&nbsp;start.</p><p>A real­ly good place to get start­ed with Ser­vice­Work­ers is also&nbsp;<a href=\"https://workboxjs.org/\" target=\"_blank\" rel=\"noreferrer noopener\">Work­box</a>&nbsp;from Google. It’s sort of a&nbsp;Ser­vice­Work­er con­struc­tion set, with cool things like caching, pre-caching, back­ground sync, and offline ana­lyt­ics. Pick the fea­tures you want, build, and&nbsp;go!</p><p><em>Tan­gent:</em>&nbsp;Astute read­ers will notice that we’re using Twig syn­tax in our&nbsp;<kbd>sw.js</kbd>&nbsp;script. I&nbsp;did this because I&nbsp;use a&nbsp;Con­tent Deliv­ery Net­work (<span>CDN</span>) for pro­duc­tion, but not for devel­op­ment, and I&nbsp;want­ed to make the Ser­vice­Work­er work in all envi­ron­ments. So I&nbsp;set up a&nbsp;route in&nbsp;Nginx:</p></div></div><div><div><section><div><pre><code># Pass our ServiceWorker through Craft so it can work as a template\n    location ^~ /sw.js {\n        try_files $uri $uri/ /index.php?$query_string;\n    }</code></pre></div></section></div></div><div><div><p>This caus­es requests for&nbsp;<kbd>/sw.js</kbd>&nbsp;to go through Craft, and placed the&nbsp;<kbd>sw.js</kbd>&nbsp;script in the&nbsp;<kbd>templates</kbd>&nbsp;direc­to­ry, so Craft will parse it as&nbsp;Twig.</p></div></div><aside><div><div><h3>FURTHER READING</h3><ul><li><a href=\"https://nystudio107.com/blog/multi-environment-config-for-craft-cms\">Multi-Environment Config for Craft CMS</a></li><li><a href=\"https://nystudio107.com/blog/tags-gone-wild\">Tags Gone Wild! Managing Tag Managers</a></li><li><a href=\"https://nystudio107.com/blog/local-development-with-vagrant-homestead\">Local Development with Vagrant / Homestead</a></li></ul></div></div></aside>","filePath":"pages/JavaScript/.md","_id":"nmhuUYYbRXYmfkpL"}
{"date":"2018-11-21T16:12:20.018Z","title":"OPTIMISING PERFORMANCE OF YOUR ENTERPRISE ANGULAR APPLICATION","sourceUrl":"https://ordina-jworks.github.io/angular/2017/04/04/optimising-performance-of-your-enterprise-angular-application.html","path":"Angular/","category":"Angular","tags":["Angular"," Performance"],"author":"Jan De Wilde , Frédéric Ghijselinck and Orjan De Smet","excerpt":"","dateCreated":1542816403960,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Angular/'\ndate: 'Wed Nov 21 2018 21:42:20 GMT+0530 (India Standard Time)'\ntitle: 'OPTIMISING PERFORMANCE OF YOUR ENTERPRISE ANGULAR APPLICATION'\ntags: ['Angular','Performance']\ncategory: 'Angular'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://ordina-jworks.github.io/angular/2017/04/04/optimising-performance-of-your-enterprise-angular-application.html'\ntype: 'Post'\n---\n    ","htmlCode":"<p>This blog post contains best practices that helped us optimise performance of our Enterprise Angular (v2+) Application we created for one of our clients. The project has been created in under 6 months with a dedicated team of 7 people of which 4 people are from the JWorks unit (2 front-end, 2 backend) and consists of two Angular Applications that use modules and components from a shared library. The use of Angular Universal does not apply (yet) for this project.</p><h3>TOPICS</h3><ol><li><a href=\"https://ordina-jworks.github.io/angular/2017/04/04/optimising-performance-of-your-enterprise-angular-application.html#1-lazy-loading\">Lazy loading</a></li><li><a href=\"https://ordina-jworks.github.io/angular/2017/04/04/optimising-performance-of-your-enterprise-angular-application.html#2-code-splitting-and-commons-chunk-plugin-webpack\">Code splitting and commons chunk plugin (webpack)</a></li><li><a href=\"https://ordina-jworks.github.io/angular/2017/04/04/optimising-performance-of-your-enterprise-angular-application.html#3-changedetectionstrategy-onpush\">ChangeDetectionStrategy: OnPush</a></li><li><a href=\"https://ordina-jworks.github.io/angular/2017/04/04/optimising-performance-of-your-enterprise-angular-application.html#4-reusable-css-with-bem-and-sass\">Reusable CSS with BEM and Sass</a></li><li><a href=\"https://ordina-jworks.github.io/angular/2017/04/04/optimising-performance-of-your-enterprise-angular-application.html#5-gzip\">GZIP</a></li><li><a href=\"https://ordina-jworks.github.io/angular/2017/04/04/optimising-performance-of-your-enterprise-angular-application.html#6-aot\">AOT</a></li></ol><h1>1. LAZY LOADING</h1><p>Lazy loading your project modules can greatly enhance performance.</p><p>After each successful navigation, the router looks in its configuration for an unloaded module that it can preload. Whether it preloads a module, and which modules it preloads, depends upon the preload strategy. The Router offers two preloading strategies out of the box:</p><ul><li>No preloading at all which is the default. Lazy loaded feature areas are still loaded on demand.</li><li>Preloading of all lazy loaded feature areas.</li></ul><p>We implemented the PreloadAllModules strategy in its default configuration, but know that it is possible to create your own custom preloading strategy.</p><p>To do so, include the preloadingStrategy in your @NgModule like so:</p><figure><pre><code data-lang=\"typescript\"><span>@</span><span>NgModule</span><span>({</span>\n    <span>...</span>\n    <span>imports</span><span>:</span> <span>[</span>\n        <span>RouterModule</span><span>.</span><span>forRoot</span><span>(</span><span>ROUTES</span><span>,</span> <span>{</span> <span>preloadingStrategy</span><span>:</span> <span>PreloadAllModules</span> <span>})</span>\n    <span>]</span>\n<span>});</span></code></pre></figure><p>And define your routes like this:</p><figure><pre><code data-lang=\"typescript\"><span>{</span>\n    <span>path</span><span>:</span> <span>'performance'</span><span>,</span>\n    <span>loadChildren</span><span>:</span> <span>'performance.module#PerformanceModule'</span><span>,</span>\n    <span>canLoad</span><span>:</span> <span>[</span><span>AuthGuard</span><span>]</span> <span>// Optional</span>\n<span>}</span></code></pre></figure><p>Note that when using guards, the CanLoad guard blocks loading of feature module assets until authorised to do so. If you want to both preload a module and guard against unauthorised access,&nbsp;<a href=\"https://angular.io/docs/ts/latest/guide/router.html#!#canload-blocks-preload\">use the CanActivate guard instead</a>.</p><p>Want to get started with lazy loading? Maybe create a custom preloading strategy? Check out the talk&nbsp;<a href=\"https://www.youtube.com/watch?v=i0y5bJx8RFc\">Manfred Steyer gave at NG-BE 2016</a>&nbsp;about improving start-up performance with lazy loading or&nbsp;<a href=\"https://angular.io/docs/ts/latest/guide/router.html#!%23milestone-6-asynchronous-routing\">view the Angular docs</a>.</p><h1>2. CODE SPLITTING AND COMMONS CHUNK PLUGIN (WEBPACK)</h1><p><a href=\"https://webpack.js.org/guides/code-splitting/\">Code splitting</a>&nbsp;is one of the most compelling features of webpack. It allows you to split your code into various bundles which you can then load on demand — like when a user navigates to a matching route, or on an event from the user. This allows for smaller bundles, and allows you to control resource load prioritization, which, if used correctly, can have a major impact on your application load time. There are mainly two kinds of code splitting that can be accomplished with webpack: “Vendor code splitting” and “On demand code-splitting” (used for lazy loading).</p><p>The CommonsChunkPlugin is an opt-in feature that creates a separate file (known as a chunk), consisting of common modules shared between multiple entry points. By separating common modules from bundles, the resulting chunked file can be loaded once initially, and stored in cache for later use. This results in pagespeed optimisations as the browser can quickly serve the shared code from cache, rather than being forced to load a larger bundle whenever a new page is visited.</p><p>Among other optimisations the&nbsp;<a href=\"https://webpack.js.org/plugins/commons-chunk-plugin/#extra-async-commons-chunk\">extra async commons chunk</a>&nbsp;allows us to drastically improve performance by moving common modules out of the parent so that a new async-loaded additional commons chunk is used, which decreases initial load time. This is automatically downloaded in parallel when the additional chunk is downloaded.</p><figure><pre><code data-lang=\"typescript\"><span>new</span> <span>webpack</span><span>.</span><span>optimize</span><span>.</span><span>CommonsChunkPlugin</span><span>({</span>\n  <span>children</span><span>:</span> <span>true</span><span>,</span>\n  <span>// (use all children of the chunk)</span>\n\n  <span>async</span><span>:</span> <span>true</span><span>,</span>\n  <span>// (create an async commons chunk)</span>\n<span>});</span></code></pre></figure><h1>3. CHANGEDETECTIONSTRATEGY: ONPUSH</h1><h2>3.1 THE PROBLEM</h2><p>Unlike using a Virtual DOM, like ReactJS, Angular uses change detection to update the actual DOM presented to the user. Each component in an Angular application has its own change detector and in order to guarantee the latest data is always presented to the user, the default change detection strategy on an Angular component is set to always update. This means that any time JavaScript finishes executing, Angular will check for changes in all components. This usually works fast in small applications.</p><p>However, when a component has a large subset of components (e.g.: a list with several items in which every row is presented by a component), performance may take a hit, even when (almost) nothing changes. The reason is that, due to the default change detection, Angular will also check for updates on a component when a change occurs on its siblings or ancestors or child components, while this is not needed in most cases.</p><h2>3.2 THE SOLUTION</h2><p>Next to trying to have less DOM, the solution is to use the OnPush strategy for change detection. The OnPush strategy will let the change detector run only in the following situations:</p><ul><li>when an event handler is fired in the component</li><li>when one of its input properties changes</li><li>when you manually request the change detector to look for changes (using ChangeDetectorRef’s function markForCheck())</li><li>when a child’s change detector runs</li></ul><h2>3.3 SETTING UP ONPUSH</h2><p>There are two ways to set up the OnPush strategy</p><h3>3.3.1. IMMUTABLE INPUT OBJECTS</h3><p>The simplest way is to use only immutable objects.</p><figure><pre><code data-lang=\"typescript\">   <span>import</span> <span>{</span> <span>Component</span><span>,</span> <span>Input</span><span>,</span> <span>ChangeDetectionStrategy</span> <span>}</span> <span>from</span> <span>'@angular/core'</span><span>;</span>\n\n   <span>@</span><span>Component</span><span>({</span>\n       <span>selector</span><span>:</span> <span>'my-sub-component'</span><span>,</span>\n       <span>template</span><span>:</span> <span>`{{ item.name }}`</span><span>,</span>\n       <span>changeDetection</span><span>:</span> <span>ChangeDetectionStrategy</span><span>.</span><span>OnPush</span>\n   <span>})</span>\n   <span>export</span> <span>class</span> <span>MySubComponent</span> <span>implements</span> <span>OnInit</span> <span>{</span>\n       <span>@</span><span>Input</span><span>()</span> <span>item</span><span>:</span> <span>{</span><span>name</span><span>:</span> <span>string</span><span>};</span>\n\n       <span>constructor</span><span>()</span> <span>{}</span>\n   <span>}</span>\n   </code></pre></figure><p>The change detector will only run when the input property ‘item’ changes. The key here is to update the reference to the object. The change detector won’t run when something inside the object (e.g.: property ‘name’) changes.</p><h3>3.3.2. OBSERVABLE INPUT OBJECTS</h3><p>Another way is to use observables as inputs.</p><figure><pre><code data-lang=\"typescript\">   <span>import</span> <span>{</span> <span>Component</span><span>,</span> <span>Input</span><span>,</span> <span>ChangeDetectionStrategy</span><span>,</span> <span>ChangeDetectorRef</span> <span>}</span> <span>from</span> <span>'@angular/core'</span><span>;</span>\n\n   <span>@</span><span>Component</span><span>({</span>\n       <span>selector</span><span>:</span> <span>'my-sub-component'</span><span>,</span>\n       <span>template</span><span>:</span> <span>`{{ myItemName }}`</span><span>,</span>\n       <span>changeDetection</span><span>:</span> <span>ChangeDetectionStrategy</span><span>.</span><span>OnPush</span>\n   <span>})</span>\n   <span>export</span> <span>class</span> <span>MySubComponent</span> <span>implements</span> <span>OnInit</span> <span>{</span>\n       <span>@</span><span>Input</span><span>()</span> <span>itemStream</span><span>:</span><span>Observable</span><span>&lt;</span><span>any</span><span>&gt;</span><span>;</span>\n       <span>myItemName</span><span>:</span> <span>string</span><span>;</span>\n\n       <span>constructor</span><span>(</span><span>private</span> <span>changeDetectorRef</span><span>:</span> <span>ChangeDetectorRef</span><span>)</span> <span>{}</span>\n\n       <span>ngOnInit</span><span>()</span> <span>{</span>\n           <span>this</span><span>.</span><span>itemStream</span><span>.</span><span>subscribe</span><span>(</span><span>i</span> <span>=&gt;</span> <span>{</span>\n               <span>this</span><span>.</span><span>myItemName</span> <span>=</span> <span>item</span><span>.</span><span>name</span><span>;</span>\n               <span>this</span><span>.</span><span>changeDetectorRef</span><span>.</span><span>markForCheck</span><span>();</span>\n           <span>});</span>\n       <span>}</span>\n   <span>}</span>\n   </code></pre></figure><p>The change detector will run when the itemStream emits a new item.</p><p>As change detection is run from top to bottom components, start by setting OnPush on the leaf components and work your way up. This allows to skip change detection in entire subtrees.</p><h1>4. REUSABLE CSS WITH BEM AND SASS</h1><p>Sass has been an all-time favorite for writing structured and maintainable CSS for large projects. We combined this with the&nbsp;<a href=\"https://en.bem.info/methodology/\">BEM methodology</a>&nbsp;which helps to create extendable and reusable interface components. We used this approach on our project to create a style guide in the shared module that includes all working components used in the application.</p><p>Once most of the components were available we could simply start including them in the modules that needed to be built. This greatly decreased the time needed to build the functional module.</p><p>Things like colors, typography, utilities, etc. are bundled in separate files that can be included where needed. This prevents writing the same CSS over and over again and keeps the code base small(er).</p><h1>5. GZIP</h1><p>Gzip is a file format and also a method of compressing files (making them smaller) for faster network transfers. It allows your web server to provide files with a smaller size that will be loaded faster by your browser. Compression of your files with gzip typically&nbsp;<span>saves around fifty to seventy percent</span>&nbsp;of the file size.</p><p>You can easily enable gzip compression on your server by editing your .htaccess file:</p><figure><pre><code data-lang=\"htaccess\">#Set to gzip all output\nSetOutputFilter DEFLATE\n\n#exclude the following file types\nSetEnvIfNoCase Request_URI \\.(?:exe|t?gz|zip|iso|tar|bz2|sit|rar|png|jpg|gif|jpeg|flv|swf|mp3)$ no-gzip dont-vary\n\n#include the following file types\nAddType x-font/otf .otf\nAddType x-font/ttf .ttf\nAddType x-font/eot .eot\nAddType image/x-icon .ico\nAddType image/png .png\nAddType image/svg+xml .svg\n\nAddOutputFilterByType DEFLATE text/plain\nAddOutputFilterByType DEFLATE text/html\nAddOutputFilterByType DEFLATE text/xml\nAddOutputFilterByType DEFLATE text/css\nAddOutputFilterByType DEFLATE application/xml\nAddOutputFilterByType DEFLATE application/xhtml+xml\nAddOutputFilterByType DEFLATE application/rss+xml\nAddOutputFilterByType DEFLATE application/javascript\nAddOutputFilterByType DEFLATE application/x-javascript\nAddOutputFilterByType DEFLATE image/svg+xml\n\n#set compression level\nDeflateCompressionLevel 9\n\n#Handle browser specific compression requirements\nBrowserMatch ^Mozilla/4 gzip-only-text/html\nBrowserMatch ^Mozilla/4.0[678] no-gzip\nBrowserMatch bMSIE !no-gzip !gzip-only-text/html\n\n# Make sure proxies don't deliver the wrong content\nHeader append Vary User-Agent env=!dont-vary</code></pre></figure><h1>6. AOT</h1><p>At the time of writing, the application still runs using the just-in-time (JIT) compiler. But we are looking into how we can integrate AOT.</p><p>JIT compilation incurs a runtime performance penalty. Views take longer to render because of the in-browser compilation step. The application is bigger because it includes the Angular compiler and a lot of library code that the application won’t actually need. Bigger apps take longer to transmit and are slower to load.</p><p>Compilation can uncover many component-template binding errors. JIT compilation discovers them at runtime, which is late in the process.</p><p>The&nbsp;<a href=\"https://angular.io/docs/ts/latest/cookbook/aot-compiler.html\">ahead-of-time (AOT) compiler</a>&nbsp;can catch template errors early and improve performance by compiling at build time.</p><h3>AOT ENSURES</h3><ul><li>Faster rendering</li><li>Fewer asynchronous requests</li><li>Smaller Angular framework download size</li><li>Earlier detection of template errors</li><li>Better security</li></ul><h1>CONCLUSION</h1><p>While Angular states it’s performance driven out of the box, it is very important to optimise, where possible, especially when building a large Enterprise Angular Application. As you can see it’s not that difficult to integrate, so why wouldn’t you? Every bit of data that doesn’t end up downloading to the device of your users is a bless.</p><p><span>Hat tip:</span>&nbsp;Try to integrate these changes when setting up your project. It would be a shame to end up refactoring your code when halfway into development.</p>","filePath":"pages/Angular/.md","_id":"od6TqNSPq6tIvAC7"}
{"date":{"$$date":1548863751727},"title":"17 Git Tips For Everyday Use","sourceUrl":"https://blog.usejournal.com/git-tips-for-everyday-use-48f10b4d4525","path":"Github/Github/","category":"Github","tags":["Github"," Cheatsheet"],"author":"Davison Pro","excerpt":"","dateCreated":1548863283705,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Github/'\ndate: 'Wed Jan 30 2019 21:24:38 GMT+0530 (India Standard Time)'\ntitle: '17 Git Tips For Everyday Use'\ntags: ['Gihub','Cheatsheet']\ncategory: 'Github'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://blog.usejournal.com/git-tips-for-everyday-use-48f10b4d4525'\ntype: 'Post'\n---\n    ","htmlCode":"<p>I’ve been using git for some few years, and I wanted to share the most practical tips that I’ve learned along the way. Hopefully, it will be useful to somebody out there.</p><p>This article is aimed at somebody who has been using git for three months or more.</p><p><span>Table of Contents:</span></p><ol><li>Parameters for better logging<br><code>git log --oneline --graph</code></li><li>Log actual changes in a file<br><code>git log -p filename</code></li><li>Only Log changes for some specific lines in file<br><code>git log -L 1,1:some-file.txt</code></li><li>Log changes not yet merged to the parent branch<br><code>git log --no-merges master..</code></li><li>Extract a file from another branch<br><code>git show some-branch:some-file.js</code></li><li>Remember the branch structure after a local merge<br><code>git merge --no-ff</code></li><li>Fix your previous commit, instead of making a new commit<br><code>git commit --amend</code></li><li>Three stages in git, and how to move between them<br><code>git reset --hard HEAD</code>&nbsp;and&nbsp;<code>git status -s</code></li><li>Revert a commit, softly<br><code>git revert -n</code></li><li>Ignore the white space<br><code>git diff -w</code></li><li>Only “add” some changes from a file<br><code>git add -p</code></li><li>Discover and zap those old branches<br><code>git branch -a</code></li><li>Stash only some files<br><code>git stash -p</code></li><li>Good commit messages</li><li>Git Auto-completion</li><li>Create aliases for your most frequently used commands</li><li>Quickly find a commit that broke your feature (EXTRA AWESOME)<br><code>git bisect</code></li></ol><h3>1. Parameters for better&nbsp;logging</h3><p><span>Sample Command</span>&nbsp;<code>git log --oneline --graph</code></p><p>Chances are, by now you’ve used git log. It supports a number of command line parameters, which are very powerful, especially when used in combination. Here are the ones that I use the most:</p><ul><li><code>--author=“Davisonpro\"</code>&nbsp;– Only show commits made by a certain author</li><li><code>--name-only</code>&nbsp;– Only show names of files that changed</li><li><code>--oneline</code>&nbsp;– Show commit data compressed to one line</li><li><code>--graph</code>&nbsp;– Show dependency tree for all commits</li><li><code>--reverse</code>&nbsp;– Show commits in reverse order (Oldest commit first)</li><li><code>--after</code>&nbsp;– Show all commits that happened after certain date</li><li><code>--before</code>&nbsp;– Show all commits that happened before certain data</li></ul><p>For example, I once had a manager who required weekly reports submitted each Friday. So every Friday I would just run:&nbsp;<code>git log --author=\"Davisonpro\" --after=\"1 week ago\" --oneline</code>, edit it a little and send it in to the manager for review.</p><p>Git has a lot more command line parameters that are handy. Just run&nbsp;<code>man git-log</code>&nbsp;and see what it can do for you.</p><p>If everything else fails, git has a&nbsp;<code>--pretty</code>&nbsp;parameter that let’s you create a highly customizable output.</p><figure><div><div></div><div data-image-id=\"1*RIzbL84-kMV98HGIzxAGug.png\" data-width=\"890\" data-height=\"556\" data-action=\"zoom\" data-action-value=\"1*RIzbL84-kMV98HGIzxAGug.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"45\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/800/1*RIzbL84-kMV98HGIzxAGug.png\" src=\"https://cdn-images-1.medium.com/max/800/1*RIzbL84-kMV98HGIzxAGug.png\"></div></div></figure><h3>2. Log actual changes in a&nbsp;file</h3><p><span>Sample Command</span>&nbsp;<code>git log -p filename</code></p><p><code>git log -p</code>&nbsp;or&nbsp;<code>git log -p filename</code>&nbsp;lets you view not only the commit message, author, and date, but actual changes that took place in each commit.</p><p>Then you can use the regular&nbsp;<code>less</code>&nbsp;search command of “slash” followed by your search term<code>/{{your-search-here}}</code>&nbsp;to look for changes to a particular keyword over time. (Use lower case n to go to the next result, and upper case N to go to the previous result).</p><figure><div><div></div><div data-image-id=\"1*LjbnYGCOBXBqguTcC30ScA.png\" data-width=\"895\" data-height=\"560\" data-action=\"zoom\" data-action-value=\"1*LjbnYGCOBXBqguTcC30ScA.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"45\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/800/1*LjbnYGCOBXBqguTcC30ScA.png\" src=\"https://cdn-images-1.medium.com/max/800/1*LjbnYGCOBXBqguTcC30ScA.png\"></div></div></figure><h3>3. Only Log changes for some specific lines in a&nbsp;file</h3><p><code>git log -L 1,1:some-file.txt</code></p><p>You can use&nbsp;<code>git blame filename</code>&nbsp;to find the person responsible for every line of the file.</p><figure><div><div></div><div data-image-id=\"1*I5Qo99K01xSeS8uoE4DY9w.png\" data-width=\"893\" data-height=\"553\" data-action=\"zoom\" data-action-value=\"1*I5Qo99K01xSeS8uoE4DY9w.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"45\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/800/1*I5Qo99K01xSeS8uoE4DY9w.png\" src=\"https://cdn-images-1.medium.com/max/800/1*I5Qo99K01xSeS8uoE4DY9w.png\"></div></div></figure><p><code>git blame</code>&nbsp;is a great tool, but sometimes it does not provide enough information.</p><p>An alternative is provided by&nbsp;<code>git log</code>&nbsp;with a&nbsp;<code>-L</code>&nbsp;flag. This flag allows you to specify particular lines in a file that you are interested in. Then Git would only log changes relevant to those lines. It’s kind of like&nbsp;<code>git log -p</code>&nbsp;with focus.</p><p><code>git log -L 1,1:some-file.txt</code></p><figure><div><div></div><div data-image-id=\"1*qs5j6eJ_BVFdNVp0Q060hg.png\" data-width=\"891\" data-height=\"555\" data-action=\"zoom\" data-action-value=\"1*qs5j6eJ_BVFdNVp0Q060hg.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"45\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/800/1*qs5j6eJ_BVFdNVp0Q060hg.png\" src=\"https://cdn-images-1.medium.com/max/800/1*qs5j6eJ_BVFdNVp0Q060hg.png\"></div></div></figure><h3>4. Log changes not yet merged to the parent&nbsp;branch</h3><p><span>Sample:</span>&nbsp;<code>git log --no-merges master..</code></p><p>If you ever worked on a long-lived branches, with multiple people working on it, chances are you’ve experienced numerous merges of the parent branch(i.e. master) into your feature branch. This makes it hard to see the changes that took place on the master branch vs. the changes that have been committed on the feature branch and which have yet to be merged.</p><p><code>git log --no-merges master..</code>&nbsp;will solve the issue. Note the&nbsp;<code>--no-merges</code>&nbsp;flag indicate to only show changes that have not been merged yet to ANY branch, and the&nbsp;<span>master..</span>&nbsp;option, indicates to only show changes that have not been merged to master branch. (You must include the&nbsp;<span>..</span>&nbsp;after master).</p><p>You can also do&nbsp;<code>git show --no-merges master..</code>&nbsp;or&nbsp;<code>git log -p --no-merges master..</code>&nbsp;(output is identical) to see actual file changes that are have yet to be merged.</p><h3>5. Extract a file from another&nbsp;branch</h3><p><span>Sample:</span>&nbsp;<code>git show some-branch:some-file.js</code></p><p>Sometimes it is nice to take a pick at an entire file on a different branch, without switching to this branch.</p><p>You can do so via&nbsp;<code>git show some-branch-name:some-file-name.js</code>, which would show the file in your terminal.</p><p>You can also redirect the output to a temporary file, so you can perhaps open it up in a side by side view in your editor of choice.</p><p><code>git show some-branch-name:some-file-name.js &gt; deleteme.js</code></p><p>Note: If all you want to see is a diff between two files, you can simple run:<br><code>git diff some-branch some-filename.js</code></p><h3>6. Remember the branch structure after a local&nbsp;merge</h3><p><span>Sample:</span>&nbsp;<code>git merge --no-ff</code></p><p>I like to create a new branch for every new bug or feature. Among other benefits, it helps me to get a great clarity on how a series of commits may relate to a particular task. If you ever merged a pull request on github or a similar tool, you will in fact be able to nicely see the merged branch history in&nbsp;<code>git log --oneline --graph</code>&nbsp;view.</p><p>If you ever try to merge a local branch, into another local branch, you may notice git has flatten out the branch, making it show up as a straight line in git history.</p><p>If you want to force git to keep branches history, similarly to what you would see during a pull request, you can add a&nbsp;<code>--no-ff</code>&nbsp;flag, resulting in a nice commit history tree.</p><p><code>git merge --no-ff some-branch-name</code></p><h3>7. Fix your previous commit, instead of making a new&nbsp;commit</h3><p><span>Sample</span>&nbsp;<code>git commit --amend</code></p><p>This one is pretty straightforward.</p><p>Let say you made a commit and then realized you made a typo. You could make a new commit with a “descriptive” message&nbsp;<span>typo</span>. But there is a better way.</p><p><span>If you haven’t pushed to the remote branch yet</span>, you can simply do the following:</p><ol><li>Fix your typo</li><li>Stage the newly fixed file via&nbsp;<code>git add some-fixed-file.js</code></li><li>Run&nbsp;<code>git commit --amend</code>&nbsp;which would add the most recent changes to your latest commit. It will also give you a chance to edit the commit message.</li><li>Push the clean branch to remote, when ready</li></ol><p>If you are working on your own branch, you can fix commits even after you have pushed, you would just have to do a&nbsp;<code>git push -f</code>&nbsp;(-f stands for force), which would over-ride the history. But you&nbsp;<span>WOULD NOT want to do this</span>&nbsp;on a branch that is&nbsp;<span>being used by other people</span>&nbsp;(as discussed in rebase section above). At that point, a “typo” commit, might be your best bet.</p><h3>8. Three stages in git, and how to move between&nbsp;them</h3><p><span>Sample</span>&nbsp;<code>git reset --hard HEAD</code>&nbsp;and&nbsp;<code>git status -s</code></p><p>As you may already know by now, a file in git can be in 3 stages:<br>1. Not staged for commit<br>2. Staged for commit<br>3. Committed</p><p>You can see a long description of the files and state they are in by running&nbsp;<code>git status</code>. You move a file from&nbsp;<em>“not staged for commit”</em>&nbsp;stage to&nbsp;<em>“staged for commit”</em>&nbsp;stage, by running&nbsp;<code>git add filename.js</code>&nbsp;or&nbsp;<code>git add&nbsp;.</code>&nbsp;to add all files at once.</p><p>Another view that makes it much easier to visualize the stages is invoked via&nbsp;<code>git status -s</code>where&nbsp;<code>-s</code>&nbsp;stand for short (I think). For more visit this link&nbsp;<a href=\"http://archaeogeek.github.io/foss4gukdontbeafraid/git/stages.html\" data-href=\"http://archaeogeek.github.io/foss4gukdontbeafraid/git/stages.html\" rel=\"nofollow noopener noopener noopener\" target=\"_blank\">http://archaeogeek.github.io/foss4gukdontbeafraid/git/stages.html</a></p><p>Obviously,&nbsp;<code>git status</code>&nbsp;will not show files that have already been committed, you can use&nbsp;<code>git log</code>&nbsp;to see those instead</p><p>There are a couple of options available to you to move the files to a different stage.</p><h3>Resetting the&nbsp;files</h3><p>There are 3 types of reset available in git. A reset allows you to return to a particular version in git history.</p><ol><li><code>git reset --hard {{some-commit-hash}}</code>&nbsp;– Return to a particular point in history.&nbsp;<span>All changes made after this commit are discarded</span>.</li><li><code>git reset {{some-commit-hash}}</code>&nbsp;– Return to a particular point in history.&nbsp;<span>All changes made after this commit are moved “not yet staged for commit” stage</span>. Meaning you would have to run&nbsp;<code>git add&nbsp;.</code>&nbsp;and&nbsp;<code>git commit</code>&nbsp;to add them back in.</li><li><code>git reset --soft {{some-commit-hash}}</code>&nbsp;– Return to a particular point in history.&nbsp;<span>All changes made after this commit are moved to “staged for commit” stage</span>. Meaning you only need to run&nbsp;<code>git commit</code>&nbsp;to add them back in.</li></ol><p>This may appear as useless information at first, but it is actually very handy when you are trying to move through different version of the file.</p><p>Common use cases that I find myself using the reset are bellow:</p><ol><li>I want to forget all the changes I’ve made, clean start — <code>git reset --hard HEAD</code>&nbsp;(Most common)</li><li>I want to edit, re-stage and re-commit files in some different order — <code>git reset {{some-start-point-hash}}</code></li><li>I just want to re commit past 3 commits, as one big commit — <code>git reset --soft {{some-start-point-hash}}</code></li></ol><h3>Check out some&nbsp;files</h3><p>If you simply want to forget some local changes for some files, but at the same time want to keep changes made in other files, it is much easier to check out committed versions of the files that you want to forget, via:<br><code>git checkout forget-my-changes.js</code></p><p>It’s like running&nbsp;<code>git reset --hard</code>&nbsp;but only on some of the files.</p><p>As mentioned before you can also check out a different version of a file from another branch or commit.</p><p><code>git checkout some-branch-name file-name.js</code>&nbsp;and<br><code>git checkout {{some-commit-hash}} file-name.js</code></p><p>You’ll notice that the checked out files will be in a “staged for commit” stage. To move them back to “un-staged for commit” stage, you would have to do a&nbsp;<code>git reset HEAD file-name.js</code>. You can run&nbsp;<code>git checkout file-name.js</code>again, to return the file to it’s original state.</p><p>Note, that running&nbsp;<code>git reset --hard HEAD file-name.js</code>&nbsp;does not work. In general, moving through various stages in git is a bit confusing and the pattern is not always clear, which I hoped is to remedied a bit with this section.</p><h3>9. Revert a commit,&nbsp;softly</h3><p><span>Sample</span>&nbsp;<code>git revert -n</code></p><p>This one is handy if you want to undo a previous commit or two, look at the changes, and see which ones might have caused a problem.</p><p>Regular&nbsp;<code>git revert</code>&nbsp;will automatically re-commit reverted files, prompting you to write a new commit message. The&nbsp;<code>-n</code>&nbsp;flag tells git to take it easy on committing for now, since all we want to do is look.</p><h3>10. Ignore the white&nbsp;space</h3><p><span>Sample</span>&nbsp;<code>git diff -w</code>&nbsp;or&nbsp;<code>git blame -w</code></p><p>Have you ever re-indented or re-formatted a file, only to realize that now&nbsp;<code>git blame</code>&nbsp;shows that you are responsible for everything in that file?</p><p>Turns out, git is smart enough to know the difference. You can invoke a lot of the commands (i.e.&nbsp;<code>git diff</code>,&nbsp;<code>git blame</code>) with a&nbsp;<code>-w</code>&nbsp;flag, and git will ignore the white space changes.</p><h3>11. Only “add” some changes from a&nbsp;file</h3><p><span>Sample</span>&nbsp;<code>git add -p</code></p><p>Somebody at git must really like the&nbsp;<code>-p</code>&nbsp;flag, because it always comes with some handy functionality.</p><p>In case of&nbsp;<code>git add</code>, it allows you to interactive select exactly what you want to be committed. That way you can logically organize your commits in an easy to read manner.</p><figure><div><div></div><div data-image-id=\"1*1FeKLG6N6DdI1eG5Ay0kmg.png\" data-width=\"893\" data-height=\"552\" data-action=\"zoom\" data-action-value=\"1*1FeKLG6N6DdI1eG5Ay0kmg.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"45\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/800/1*1FeKLG6N6DdI1eG5Ay0kmg.png\" src=\"https://cdn-images-1.medium.com/max/800/1*1FeKLG6N6DdI1eG5Ay0kmg.png\"></div></div></figure><h3>12. Discover and zap those old&nbsp;branches</h3><p><span>Sample</span>&nbsp;<code>git branch -a</code></p><p>It is common for a large number of remote branches to just hang around, some even after they have been merged into the master branch. If you are a neat freak (at least when it comes to code) like me, chances are they will irritate you a little.</p><p>You can see all of the remote branches by running git branch with the&nbsp;<code>-a</code>&nbsp;flag (show all branches) and the&nbsp;<code>--merged</code>&nbsp;flag would only show branches that are fully merged into the master branch.</p><p>You might want to run&nbsp;<code>git fetch -p</code>&nbsp;(fetch and purge old data) first, to make sure your data is up to date.</p><p>If you want to get really fancy, you can get a list of all the remote branches, and the list of last commits made on those branches by running:<br><code>git for-each-ref --sort=committerdate --format='%(refname:short) * %(authorname) * %(committerdate:relative)' refs/remotes/ | column -t -s '*'</code>.</p><figure><div><div></div><div data-image-id=\"1*4Lz6tDCco_VurnUXM0_1-g.png\" data-width=\"895\" data-height=\"553\" data-action=\"zoom\" data-action-value=\"1*4Lz6tDCco_VurnUXM0_1-g.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"45\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/800/1*4Lz6tDCco_VurnUXM0_1-g.png\" src=\"https://cdn-images-1.medium.com/max/800/1*4Lz6tDCco_VurnUXM0_1-g.png\"></div></div></figure><p>Unfortunately, there is no easy way (that I know of) to only show merged branches. So you might have to just compare the two outputs or write a script to do it for you.</p><h3>13. Stash only some&nbsp;files</h3><p><span>Sample</span>&nbsp;<code>git stash —keep-index</code>&nbsp;or&nbsp;<code>git stash -p</code></p><p>If you don’t yet know what&nbsp;<code>git stash</code>&nbsp;does, it simply puts all your unsaved changes on a “git stack” of sorts. Then at a later time you can do&nbsp;<code>git stash pop</code>&nbsp;and your changes will be re-applied. You can also do&nbsp;<code>git stash list</code>&nbsp;to see all your stashed changes. Take a look at&nbsp;<code>man git-stash</code>&nbsp;for more options.</p><p>One limitation of regular&nbsp;<code>git stash</code>&nbsp;is that it will stash all of the files at once. And sometimes it is handy to only stash some of the file, and keep the rest in your working tree.</p><p>Remember the magic&nbsp;<code>-p&nbsp;</code>command? Well it’s really handy with&nbsp;<code>git stash</code>&nbsp;as well. As you may have probably guessed by now, it will ask you to see which chunks of changes you want to be stashed.</p><p>Make sure to hit&nbsp;<code>?</code>&nbsp;while you at it to see all available options.</p><figure><div><div></div><div data-image-id=\"1*VUKNgL5jQTo_H-ovjXtddw.png\" data-width=\"897\" data-height=\"552\" data-action=\"zoom\" data-action-value=\"1*VUKNgL5jQTo_H-ovjXtddw.png\" data-scroll=\"native\"><canvas width=\"75\" height=\"45\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/800/1*VUKNgL5jQTo_H-ovjXtddw.png\" src=\"https://cdn-images-1.medium.com/max/800/1*VUKNgL5jQTo_H-ovjXtddw.png\"></div></div></figure><p>Another handy trick, for stashing only some of the files, is to:</p><ol><li><code>add</code>&nbsp;the files that you DO NOT want to get stashed (i.e.&nbsp;<code>git add file1.js, file2.js</code>)</li><li>Call&nbsp;<code>git stash --keep-index</code>. It will only stash files that have not been added.</li><li>Call&nbsp;<code>git reset</code>&nbsp;to un-stage the added files and continue your work.</li></ol><h3>14. Good commit&nbsp;messages</h3><p>A little while ago I came across a great article on how to write a good commit message. Check it out here:&nbsp;<a href=\"http://chris.beams.io/posts/git-commit/\" data-href=\"http://chris.beams.io/posts/git-commit/\" rel=\"noopener\" target=\"_blank\">How to Write a Git Commit Message</a></p><p>One rule that really stood out for me is,&nbsp;<span>“every good commit should be able to complete the following sentence”</span></p><p><span>When applied, this commit will:</span>&nbsp;{{ YOUR COMMIT MESSAGE}}</p><p>For example:<br>–&nbsp;<em>When applied this commit will</em>&nbsp;<span>Update README file</span><br>–&nbsp;<em>When applied this commit will</em>&nbsp;<span>Add validation for GET /user/:id API call</span><br>–&nbsp;<em>When applied this commit will</em>&nbsp;<span>Revert commit 12345</span></p><h3>15. Git Auto-completion</h3><p>Git packages for some operating systems (i.e. Ubuntu) come with git auto completion enabled by default. If your operating system did not come with one(Mac doesn’t), you can easily enable it by following these guidelines:</p><p><a href=\"https://git-scm.com/book/en/v1/Git-Basics-Tips-and-Tricks#Auto-Completion\" data-href=\"https://git-scm.com/book/en/v1/Git-Basics-Tips-and-Tricks#Auto-Completion\" rel=\"noopener\" target=\"_blank\">https://git-scm.com/book/en/v1/Git-Basics-Tips-and-Tricks#Auto-Completion</a></p><h3>16. Create aliases for your most frequently used&nbsp;commands</h3><p><span>TLDR; Use git or bash aliases for most commonly used long git commands</span></p><p>Best way to use Git is via command line, and the best way to learn the command line is by doing everything the hard way first (typing everything out).</p><p>After a while, however, it might be a good idea to track down your most used commands, and create an easier aliases for them.</p><p>Git comes with built in aliases, for example you can run the following command once:</p><p><code>git config --global alias.l \"log --oneline --graph\"</code></p><p>Which would create a new git alias named&nbsp;<code>l</code>, that would allow you to run:<br><code>git l</code>&nbsp;instead of&nbsp;<code>git log --oneline --graph</code>.</p><p><em>Note that you can also append other parameters after the alias (i.e.&nbsp;</em><code><em>git l --author=\"Davison\"</em></code><em>).</em></p><p>Another alternative, is good old Bash alias.</p><p>For example, I have the following entry in my&nbsp;.bashrc file.</p><p><code>alias gil=”git log --oneline --graph”</code>, allowing me to use&nbsp;<code>gil</code>&nbsp;instead of the long command,which is even 2 character shorter than having to type&nbsp;<code>git l</code>&nbsp;:).</p><h3>17. Quickly find a commit that broke your feature (EXTRA&nbsp;AWESOME)</h3><p><span>Sample:</span>&nbsp;<code>git bisect</code></p><p><code>git bisect</code>&nbsp;uses divide and conquer algorithm to find a broken commit among a large number of commits.</p><p>Imagine yourself coming back to work after a week long vacation. You pull the latest version of the project only to find out that a feature that you worked on right before you left is now broken.</p><p>You check the last commit that you’ve made before you left, and the feature appear to work there. However, there has been over a hundred of other commits made after you left for your trip, and you have no idea which of those commits broke your feature.</p><figure><div><div></div><div data-image-id=\"0*NuOzKwCHQ5Ur1Umc\" data-width=\"323\" data-height=\"301\" data-scroll=\"native\"><canvas width=\"75\" height=\"67\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/800/0*NuOzKwCHQ5Ur1Umc\" src=\"https://cdn-images-1.medium.com/max/800/0*NuOzKwCHQ5Ur1Umc\"></div></div></figure><p>At this point you would probably try to find the bug that broke your feature and use&nbsp;<code>git blame</code>&nbsp;on the breaking change to find the person to go yell at.</p><p><span>If the bug is hard to find</span>, however, you could try to navigate your way through the commit history, in attempt to pin point where the things went bad.</p><p>The second approach is exactly where&nbsp;<code>git bisect</code>&nbsp;is so handy. It will allow you to find the breaking change in the fastest time possible.</p><h3>So what does&nbsp;<code>git bisect</code>&nbsp;do?</h3><p>After you specify any known bad commit and any known good commit,&nbsp;<code>git bisect</code>&nbsp;will split the in-between commits in half, and checkout a new (nameless) branch in the middle commit to let you check if your future is broken at that point in time.</p><p>Let say the middle commit still works. You would then let git know that via&nbsp;<code>git bisect good</code>&nbsp;command. Then you only have half of the commits left to test.</p><p>Git would then split the remaining commits in half and into a new branch(again), letting you to test the feature again.</p><p><code>git bisect</code>&nbsp;will continue to narrow down your commits in a similar manner, until the first bad commit is found.</p><p>Since you divide the number of commits by half on every iteration, you are able to find your bad commits in log(n) time (which is simply a&nbsp;<a href=\"https://en.wikipedia.org/wiki/Big_O_notation\" data-href=\"https://en.wikipedia.org/wiki/Big_O_notation\" rel=\"noopener\" target=\"_blank\">“big O”</a>&nbsp;speak for very fast).</p><h3>The actual commands you need to run to execute the full&nbsp;<code>git bisect</code>&nbsp;flow&nbsp;are:</h3><ol><li><code>git bisect start</code>&nbsp;– let git know to start bisecting.</li><li><code>git bisect good {{some-commit-hash}}</code>&nbsp;– let git know about a known good commit (i.e. last commit that you made before the vacation).</li><li><code>git bisect bad {{some-commit-hash}}</code>&nbsp;– let git know about a known bad commit (i.e. the HEAD of the master branch).&nbsp;<code>git bisect bad HEAD</code>(HEAD just means the last commit).</li><li>At this point git would check out a middle commit, and let you know to run your tests.</li><li><code>git bisect bad</code>&nbsp;– let git know that the feature does not work in currently checked out commit.</li><li><code>git bisect good</code>&nbsp;– let git know that the feature does work in currently checked out commit.</li><li>When the first bad commit is found, git would let you know. At this point&nbsp;<code>git bisect</code>&nbsp;is done.</li><li><code>git bisect reset</code>&nbsp;– returns you to the initial starting point of&nbsp;<code>git bisect</code>process, (i.e. the HEAD of the master branch).</li><li><code>git bisect log</code>&nbsp;– log the last&nbsp;<code>git bisect</code>&nbsp;that completed successfully.</li></ol><p>You can also automate the process by providing&nbsp;<code>git bisect</code>&nbsp;with a script. You can read more here:&nbsp;<a href=\"http://git-scm.com/docs/git-bisect#_bisect_run\" data-href=\"http://git-scm.com/docs/git-bisect#_bisect_run\" rel=\"noopener\" target=\"_blank\">http://git-scm.com/docs/git-bisect#_bisect_run</a></p><h3>Final Note</h3><p>Git is very complicated, as you can’t learn all its concepts by just using it. Try these basic Git commands for yourself and you’ll see that the devil isn’t as black as he’s painted.</p><p><span>If you liked this article, make sure to give me some 👏 below and follow me for more articles.</span></p>","filePath":"pages/Github/.md","_id":"rHqNtX5S8adTgLP4","dateUpdated":1548863751727}
{"date":"2018-12-26T15:43:25.913Z","title":"Everything you need to know about React Hooks","sourceUrl":"https://medium.com/@vcarl/everything-you-need-to-know-about-react-hooks-8f680dfd4349","path":"React/","category":"React","tags":["React"," React Hooks"],"author":"Carl Vitullo","excerpt":"","dateCreated":1545838862930,"coverImage":"","type":"Post","frontmatter":"---\npath: 'React/'\ndate: 'Wed Dec 26 2018 21:13:25 GMT+0530 (India Standard Time)'\ntitle: 'Everything you need to know about React Hooks'\ntags: ['React','React Hooks']\ncategory: 'React'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://medium.com/@vcarl/everything-you-need-to-know-about-react-hooks-8f680dfd4349'\ntype: 'Post'\n---\n    ","htmlCode":"<section><div><div><p>React just announced a new feature:&nbsp;<a href=\"https://reactjs.org/docs/hooks-overview.html\" data-href=\"https://reactjs.org/docs/hooks-overview.html\" rel=\"noopener nofollow\" target=\"_blank\">Hooks</a>. It’s a brand new set of APIs that enables powerful new ways to share stateful logic between components, optimize performance without significant rewrites, get some of the benefits of Redux-style separation of concerns, and more. They also deliver on a promise that the React team made years ago — stateful function components. Using state from function components came up as a possibility in&nbsp;<a href=\"https://www.reactiflux.com/transcripts/dan-abramov/\" data-href=\"https://www.reactiflux.com/transcripts/dan-abramov/\" rel=\"noopener nofollow\" target=\"_blank\">Dan Abramov’s Q&amp;A on Reactiflux</a>&nbsp;all the way back in April 2016.</p><figure><div><div></div><div data-image-id=\"0*QneZSCdR-445aVBM.png\" data-width=\"592\" data-height=\"479\" data-is-featured=\"true\" data-scroll=\"native\"><canvas width=\"75\" height=\"60\"></canvas><img data-src=\"https://cdn-images-1.medium.com/max/800/0*QneZSCdR-445aVBM.png\" src=\"https://cdn-images-1.medium.com/max/800/0*QneZSCdR-445aVBM.png\"></div></div></figure><p>It’s been a long time coming, but they’re here! More than just state, though, there are 11 new functions in all that should enable the full range of functionality that we use classes and the lifecycle for today.</p><ul><li><code>useState</code></li><li><code>useEffect</code></li><li><code>useContext</code></li><li><code>useCallback</code></li><li><code>useMemo</code></li><li><code>React.memo</code>&nbsp;(Not a hook, but new)</li><li><code>useReducer</code></li><li><code>useRef</code></li><li><code>useLayoutEffect</code></li><li><code>useImperativeMethods</code></li><li><code>useMutationEffect</code></li></ul><p>Let’s take a look at what each of them is for.</p><h3><code>useState</code></h3><p>Stateful function components are enabled with the new function&nbsp;<code>useState</code>.</p><pre>import { useState } from \"react\";</pre><pre>const SomeComponent = props =&gt; {<br>  const [state, setState] = useState(initialState);</pre><pre>  return (<br>    &lt;div&gt;<br>      {state} &lt;input onChange={e =&gt; setState(e.target.value)} /&gt;<br>    &lt;/div&gt;<br>  );<br>};</pre><p>If you ever used the library&nbsp;<code>recompose</code>, this API may look familiar.&nbsp;<code>useState</code>takes an initial state as an argument, and returns the current state and an updater function. The&nbsp;<code>setState</code>&nbsp;it returns is&nbsp;<em>almost</em>&nbsp;the same used by class components—it can accept a callback that gets the current state as an argument, but it doesn't automatically merge top-level object keys.</p><p>Each call to&nbsp;<code>useState</code>&nbsp;is paired with a component, with its state persisting across renders. This means that you can call&nbsp;<code>useState</code>&nbsp;multiple times within a single function component to get multiple independent state values. Because the&nbsp;<code>setState</code>&nbsp;returned isn't scoped to a single component, we can define stateful behaviors independent of the component. This enables powerful new ways to abstract stateful logic.</p><p>Let’s look at an example that I’ve run into on several projects: managing sort state in several components. I find the APIs that table components expose to be inflexible, so I tend to write tables of data as one-offs. My current project has some code for managing what key to sort against, and in which direction, copy-pasted into several different components. With&nbsp;<code>useState</code>, we gain the ability to define it as a separate module.</p><pre>const useSort = (someArray, initialSortKey) =&gt; {<br>  const [state, setState] = useState({<br>    isAscending: false,<br>    sortKey: initialSortKey<br>  });<br><br>  // Let's pretend `makeSortComparator` exists for simplicity<br>  const comparator = makeSortComparator(state);<br>  const sortedData = someArray.slice().sort(comparator);</pre><pre>  return {<br>    ...state,<br>    sortedData,<br>    toggleAscending: () =&gt;<br>      setState(state =&gt; ({<br>        ...state,<br>        isAscending: !state.isAscending<br>      })),<br>    setSortKey: sortKey =&gt;<br>      setState(state =&gt; ({ ...state, sortKey }))<br>  };<br>};</pre><p>Now we have a reusable method to use in our data table components. We have a simple API we can use across our many different tables, with each component working off its own separate state.</p><pre>const SomeTable = ({ data }) =&gt; {<br>  const { sortedData, ...sortControls } = useSort(<br>    data,<br>    \"id\"<br>  );</pre><pre>  return (<br>    &lt;table&gt;<br>      &lt;TableHeading {...sortControls} /&gt;<br>      &lt;tbody&gt;<br>        {sortedData.map(datum =&gt; (<br>          &lt;TableRow {...datum} /&gt;<br>        ))}<br>      &lt;/tbody&gt;<br>    &lt;/table&gt;<br>  );<br>};</pre><p>Please note: the React team strongly recommends prefixing the names of these types of modules with&nbsp;<code>use</code>&nbsp;so there's a strong signal of what kind of behavior it provides. See&nbsp;<a href=\"https://reactjs.org/docs/hooks-custom.html\" data-href=\"https://reactjs.org/docs/hooks-custom.html\" rel=\"noopener nofollow\" target=\"_blank\">the full docs</a>&nbsp;for more about writing your own hooks.</p><p>I am super excited about this new way to share functionality. It’s much more lightweight than a HOC in all ways; less code to write, fewer components to mount, and fewer caveats. Check out the&nbsp;<a href=\"https://reactjs.org/docs/hooks-reference.html#usestate\" data-href=\"https://reactjs.org/docs/hooks-reference.html#usestate\" rel=\"noopener nofollow\" target=\"_blank\">API documentation</a>&nbsp;for all the details.</p><h3><code>useEffect</code></h3><p>A lot of components have to kick off different types of effects as part of mounting or re-rendering. Fetching data, subscribing to events, and imperatively interacting with another part of the page are all common examples of this. But the code for handling these types of effects ended up scattered across&nbsp;<code>componentDidMount</code>,&nbsp;<code>componentDidUpdate</code>, and&nbsp;<code>componentWillUnmount</code>.</p><p>If you wanted to run the same effect when a prop changed, you either had to add a mess of comparisons in&nbsp;<code>componentDidUpdate</code>&nbsp;or set a&nbsp;<code>key</code>&nbsp;on the component. Using a&nbsp;<code>key</code>&nbsp;simplifies your code, but it scatters control of effects into another file—completely outside the component's control!</p><p><code>useEffect</code>&nbsp;simplifies all these cases. Imperative interactions are simple functions run after each render.</p><pre>const PageTemplate = ({ title, children }) =&gt; {<br>  useEffect(() =&gt; {<br>    document.title = title;<br>  });</pre><pre>  return (<br>    &lt;div&gt;<br>      &lt;h1&gt;{title}&lt;/h1&gt; {children}<br>    &lt;/div&gt;<br>  );<br>};</pre><p>For data fetching and other interactions you don’t want to happen unnecessarily, you can pass an array of values. The effect is only run when one of these changes.</p><pre>const ThingWithExternalData = ({ id, sort }) =&gt; {<br>  const [state, setState] = useState({});<br>  useEffect(<br>    () =&gt; {<br>      axios<br>        .get(`/our/api/${id}?sortBy=${sort}`)<br>        .then(({ data }) =&gt; setState(data));<br>    },<br>    [id, sort]<br>  );</pre><pre>  return &lt;pre&gt;{JSON.stringify(state, null, 2)}&lt;/pre&gt;;<br>};</pre><p>Subscriptions and other effects that require some kind of cleanup when the components unmount can return a function to run.</p><pre>const ThingWithASubscription = () =&gt; {<br>  const [state, setState] = useState({});<br>  useEffect(() =&gt; {<br>    someEventSource.subscribe(data =&gt; setState(data));<br>    return () =&gt; {<br>      someEventSource.unsubscribe();<br>    };<br>  });<br>  return &lt;pre&gt;{JSON.stringify(state, null, 2)}&lt;/pre&gt;;<br>};</pre><p>This is so powerful. Just like with&nbsp;<code>useState</code>, they can be defined as separate modules—not only does this put all the code required for these complex effects in a single location,&nbsp;<em>they can be shared across multiple components</em>. Combined with&nbsp;<code>useState</code>, this is an elegant way to generalize logic like loading states or subscriptions across components.</p><h3><code>useContext</code></h3><p>The context API is great and was a significant improvement in usability compared to what existed before. It advanced context from a “you probably shouldn’t use this” warning in the docs to an accepted part of the API. However, context can be cumbersome to use. It has to be used as a render prop, which is a pattern that doesn’t compose gracefully. If you need values out of multiple different render props, you quickly end up indented to the extreme.</p><p><code>useContext</code>&nbsp;is a substantial step forward. It accepts the value created by the existing&nbsp;<code>React.createContext</code>&nbsp;function (the same one you would pull&nbsp;<code>.Consumer</code>&nbsp;off to use as a render prop) and returns the current value from that context provider. The component will rerender whenever the context value change, just like it would for state or props.</p><pre>// An exported instance of `React.createContext()`<br>import SomeContext from \"./SomeContext\";</pre><pre>const ThingWithContext = () =&gt; {<br>  const ourData = useContext(SomeContext);<br>  return &lt;pre&gt;{JSON.stringify(ourData, null, 2)}&lt;/pre&gt;;<br>};</pre><p>This gets rid of my final complaint with context. This API is simple and intuitive to the extreme and will be a powerful way to pipe state around an application.</p><h3>More advanced&nbsp;hooks</h3><p>The 3 hooks mentioned above are considered to be the basic hooks. It’s possible to write entire applications using only&nbsp;<code>useState</code>,&nbsp;<code>useEffect</code>, and&nbsp;<code>useContext</code>--really, you could get away with just the first two. The hooks that follow offer optimizations and increasingly niche utility that you may never encounter in your applications.</p><h3><code>useCallback</code></h3><p>React has a number of optimizations that rely on props remaining the same across renders. One of the simplest ways to break this is by defining callback functions inline. That’s not to say that defining functions inline will cause performance problems — in many cases, it has no impact. However, as you begin to optimize and identify what’s causing frequent re-renders, you may find inline function definitions to be the cause of many of your unnecessary prop change.</p><p>In the current API, changing an inline function to something that won’t change across renders can be a significant change. For function components, it means rewriting to a class (with all the changes that entails) and defining the function as a class method.&nbsp;<code>useCallback</code>&nbsp;provides a simple way to optimize these functions with minimal impact on your code by memoizing a function provided to it. Just like&nbsp;<code>useEffect</code>, we can tell it what values it depends on so that it doesn't change unnecessarily.</p><pre>import doSomething from \"./doSomething\";</pre><pre>const FrequentlyRerenders = ({ id }) =&gt; {<br>  return (<br>    &lt;ExpensiveComponent<br>      onEvent={useCallback(() =&gt; doSomething(id), [id])}<br>    /&gt;<br>  );<br>};</pre><p>This is another exciting improvement in usability. What used to mean a significant rewrite of a component can now be accomplished in-place with a function directly from React.</p><h3><code>useMemo</code></h3><p>On the subject of optimizations, there’s another hook that has me excited. Many times, I need to calculate derived data from the props I provide a component. It may be mapping an array of objects to a slightly different form, combining an array of data to a single value, or sorting or filtering. Often&nbsp;<code>render</code>&nbsp;is the logical place for this processing to happen, but then it will be run unnecessarily whenever other props or state change.</p><p>Enter&nbsp;<code>useMemo</code>. It's closely related to&nbsp;<code>useCallback</code>, but for optimizing data processing. It has the same API for defining what values it depends on as&nbsp;<code>useEffect</code>&nbsp;and&nbsp;<code>useCallback</code>.</p><pre>const ExpensiveComputation = ({<br>  data,<br>  sortComparator,<br>  filterPredicate<br>}) =&gt; {<br>  const transformedData = useMemo(<br>    () =&gt; {<br>      return data<br>        .filter(filterPredicate)<br>        .sort(sortComparator);<br>    },<br>    [data, sortComparator, filterPredicate]<br>  );<br>  return &lt;Table data={transformedData} /&gt;;<br>};</pre><p>I’m excited about this for many of the same reasons as&nbsp;<code>useCallback</code>. Previously, optimizing this type of processing typically meant extracting the logic to a separate function and memoizing that. Because it's common practices for memoization tools to rely on a functions&nbsp;<em>arguments</em>&nbsp;for invalidating memoization, that meant creating a pure function. This refactoring can end up being too substantial, so only the most extreme performance problems end up being addressed. This hook should help avoid the \"death by a thousand cuts\" type of performance problems.</p><h3><code>React.memo</code></h3><p>This isn’t a hook, but it’s a new API and an important optimization. Memoizing calculations and ensuring props don’t change unnecessarily are good for performance, but both are more effective when combined with the&nbsp;<code>shouldComponentUpdate</code>&nbsp;or&nbsp;<code>PureComponent</code>&nbsp;features—neither of which is available for function components.</p><p><code>React.memo</code>&nbsp;is a new function that enables behavior similar to&nbsp;<code>PureComponent</code>for functions. It compares prop values and only re-renders when they change. It doesn't compare state or context, just like PureComponent. It can accept a second argument so you can do custom comparisons against props, but there's an important difference from&nbsp;<code>shouldComponentUpdate</code>: it only receives props. Because&nbsp;<code>useState</code>&nbsp;doesn't provide a single state object, it can't be made available for this comparison.</p><h3><code>useReducer</code></h3><p>This hook has interesting implications for the ecosystem. The reducer/action pattern is one of the most powerful benefits of Redux. It encourages modeling UI as a state machine, with clearly defined states and transitions. One of the challenges to using Redux, however, is gluing it all together. Action creators, which components to&nbsp;<code>connect()</code>,&nbsp;<code>mapStateToProps</code>, using selectors, coordinating asynchronous behavior... There's a whole menagerie of associated code and libraries on top of Redux that can overwhelm.</p><p><code>useReducer</code>, combined with the usability improvements to context, new techniques for memoizing calculations, and the hooks for running effects, allow for many of the same benefits as Redux with less conceptual overhead. I personally have never been bothered by the supposed boilerplate problem that Redux has, but considering how these hooks will combine has me excited for how features could be defined and scoped within an application.</p><h3><code>useRef</code></h3><p>Sometimes when writing components, we end up with information that we need to keep track of but don’t want to re-render when it changes. The most common example of this is references to the DOM nodes we’ve created, for instance, an&nbsp;<code>input</code>&nbsp;node that we need to track the cursor position for or imperatively focus. With class components we would track assign them directly to properties on&nbsp;<code>this</code>, but function components don't have a context we can reference that way.</p><p><code>useRef</code>&nbsp;provides a mechanism for these cases. It creates an object that exists for as long as the component is mounted, exposing the value assigned as a&nbsp;<code>.current</code>&nbsp;property.</p><p>Directly from&nbsp;<a href=\"https://reactjs.org/docs/hooks-reference.html#useref\" data-href=\"https://reactjs.org/docs/hooks-reference.html#useref\" rel=\"noopener nofollow\" target=\"_blank\">the docs</a>&nbsp;(and&nbsp;<a href=\"https://reactjs.org/docs/hooks-faq.html#is-there-something-like-instance-variables\" data-href=\"https://reactjs.org/docs/hooks-faq.html#is-there-something-like-instance-variables\" rel=\"noopener nofollow\" target=\"_blank\">the FAQ</a>:</p><pre>// DOM node ref example<br>function TextInputWithFocusButton() {<br>  const inputEl = useRef(null);<br>  const onButtonClick = () =&gt; {<br>    // `current` points to the mounted text input element<br>    inputEl.current.focus();<br>  };<br>  return (<br>    &lt;&gt;<br>      &lt;input ref={inputEl} type=\"text\" /&gt;<br>      &lt;button onClick={onButtonClick}&gt;<br>        Focus the input<br>      &lt;/button&gt;<br>    &lt;/&gt;<br>  );<br>}</pre><pre>// An arbitrary instance property<br>function Timer() {<br>  const intervalRef = useRef();<br>  useEffect(() =&gt; {<br>    const id = setInterval(() =&gt; {<br>      // ...<br>    });<br>    intervalRef.current = id;<br>    return () =&gt; {<br>      clearInterval(intervalRef.current);<br>    };<br>  });<br>}</pre><p>This code is more verbose than using instance properties is in class components, but it should be relatively infrequent that you need to store values in this way.</p><h3>Rarely used&nbsp;hooks</h3><p>The hooks mentioned above have covered all the use cases that I’ve encountered when writing applications. Reading through the docs of the remaining hooks, I understand why they exist and I’m sure that I’m using libraries that will implement them, but I don’t anticipate using them myself in application code.</p><h3><code>useLayoutEffect</code></h3><p>If I use any of these 3, I anticipate it will be&nbsp;<code>useLayoutEffect</code>. This is the hook recommended when you need to read computed styles after the DOM has been mutated, but before the browser has painted the new layout.</p><p>Crucially, this gives you an opportunity to apply animations with the least chance of visual artifacts or browser rendering performance problems. This is the method currently used by&nbsp;<a href=\"https://github.com/joshwcomeau/react-flip-move\" data-href=\"https://github.com/joshwcomeau/react-flip-move\" rel=\"noopener nofollow\" target=\"_blank\">react-flip-move</a>, an amazing transition library when items change position, but there might be situations where I need to use this myself.</p><h3>useImperativeMethods</h3><p>To the best of my knowledge, this hook is a counterpart to&nbsp;<code>forwardRef</code>, a mechanism for libraries to pass through the&nbsp;<code>ref</code>&nbsp;property that would otherwise be swallowed. This is a problem for component libraries like Material UI, React Bootstrap, or CSS-in-JS tools like styled-components, but I haven't run into a case where I needed to solve this problem myself.</p><h3><code>useMutationEffect</code></h3><p>This is the hook I’m having the hardest time wrapping my head around. It’s run immediately before React mutates the DOM with the results from&nbsp;<code>render</code>, but&nbsp;<code>useLayoutEffect</code>&nbsp;is the better choice when you have to read computed styles. The docs specify that it runs before sibling components are updated and that it should be used to perform custom DOM mutations. This is the only hook that I can't picture a use case for, but it might be useful for cases like when you want a different tool (like D3, or perhaps a canvas or WebGL renderer) to take over the actual rendering of output. Don't hold me to that though.</p><h3>In conclusion</h3><p>Hooks have me excited about the future of React all over again. I’ve been using this tool since 2014, and it has continually introduced new changes that convince me that it’s the future of web development. These hooks are no different, and yet again substantially raise the bar for developer experience, enabling me to write durable code, and improve my productivity by extracting reused functionality.</p><p>I thought Suspense was the only upcoming feature that I’d be excited for in 2018, but I’m happy to be proven wrong! Combined, I expect that React applications will set a new bar for end-user experience and code stability.</p></div></div></section><section><div><hr></div><div><div><p>Thanks for reading! I’m on Twitter as&nbsp;<a href=\"https://twitter.com/cvitullo\" data-href=\"https://twitter.com/cvitullo\" rel=\"noopener nofollow\" target=\"_blank\">@cvitullo</a>&nbsp;(but most other places I’m vcarl). I moderate&nbsp;<a href=\"http://join.reactiflux.com/\" data-href=\"http://join.reactiflux.com/\" rel=\"noopener nofollow\" target=\"_blank\">Reactiflux</a>, a chatroom for React developers and&nbsp;<a href=\"https://discordapp.com/invite/vUsrbjd\" data-href=\"https://discordapp.com/invite/vUsrbjd\" rel=\"noopener nofollow\" target=\"_blank\">Nodeiflux</a>, a chatroom for Node.JS developers. If you have any questions or suggestions, reach out!</p></div></div></section>","filePath":"pages/React/.md","_id":"rKiXllh0Jk2eRiks"}
{"title":"12 Good JavaScript Shorthand Techniques","sourceUrl":"https://hackernoon.com/12-amazing-javascript-shorthand-techniques-fef16cdbc7fe","path":"JavaScript/JavaScript/","category":"JavaScript","tags":["JavaScript"," Shorthand Techniques"," Tips & Tricks"],"author":"Yuri Ramos","excerpt":"","dateCreated":1540823861825,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'undefined'\ntitle: '12 Good JavaScript Shorthand Techniques'\ntags: ['JavaScript','Shorthand Techniques','Tips and Tricks']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://hackernoon.com/12-amazing-javascript-shorthand-techniques-fef16cdbc7fe'\ntype: 'Post'\n---\n    ","htmlCode":"<div>\n    <div>\n        <div>\n            <p><span>Update 1: Due to a lot of polarizing comments (like loved or hated the article) I just\n                    want to be clear that shorthand are useful sometimes and sometimes not</span><span data-creator-ids=\"bf3027a42741\"><span>,</span></span><span>&nbsp;depends on which context, don’t\n                    take shorthand code as the best of any situation!</span></p>\n            <p>I’ve made this post as a vital source of reference for learning shorthand JavaScript coding\n                techniques that I have picked up over the years. To help you understand what it going on I have\n                included the longhand versions to give some coding perspective on the shorts.</p>\n            <h3>1. Null, Undefined, Empty Checks Shorthand</h3>\n            <p>When creating new variables sometimes you want to check if the variable you’re referencing\n                for it’s value isn’t null or undefined. I would say this is a very common check for JavaScript coders.</p>\n            <p><em>Longhand</em></p>\n            <p><code>if (variable1&nbsp;!== null || variable1&nbsp;!== undefined || variable1&nbsp;!== '') { let variable2 = variable1; }</code></p>\n            <p><em>Shorthand</em></p>\n            <pre><code><span>let</span> variable2 = variable1  || <span>''</span>;</code></pre>\n            <p>Don’t believe me? Test it yourself (paste into Chrome Dev Tools and click run):</p>\n            <pre><code>//null value example<br>let variable1 = null;<br><span>let</span> variable2 = variable1  || <span>''</span>;<br>console.log(variable2);<br>//output: <span>''</span> (an empty string)<br><br>//undefined value example<br>let variable1 = undefined;<br><span>let</span> variable2 = variable1  || <span>''</span>;<br>console.log(variable2);<br>//output: <span>''</span> (an empty string)<br><br>//normal value example<br>let variable1 = <span>'hi there'</span>;<br><span>let</span> variable2 = variable1  || <span>''</span>;<br>console.log(variable2);<br>//output: <span>'hi there'</span></code></pre>\n            <h3>2. Object Array Notation Shorthand</h3>\n            <p><em>Longhand</em></p>\n            <p><code>let a = new Array(); a[0] = \"myString1\"; a[1] = \"myString2\"; a[2] = \"myString3\";</code></p>\n            <p><em>Shorthand</em></p>\n            <p><code>let a = [\"myString1\", \"myString2\", \"myString3\"];</code></p>\n            <h3>3. If true&nbsp;… else Shorthand</h3>\n            <p>This is a great code saver for when you want to do something if the test is true, else do\n                something else by using the ternary operator.</p>\n            <p><em>Longhand:</em></p>\n            <pre><code><span>let</span> big;<br><span>if</span> (x &gt; <span>10</span>) {<br>    <span>big</span> = <span>true</span>;<br>}<br><span>else</span> {<br>    <span>big</span> = <span>false</span>;<br>}</code></pre>\n            <p><em>Shorthand:</em></p>\n            <pre><code><span>let</span> big = x &gt; <span>10</span> ? <span>true</span> : <span>false</span>;</code></pre>\n            <p>If you rely on some of the weak typing characteristics of JavaScript, this can also achieve\n                more concise code. For example, you could reduce the preceding code fragment to this:</p>\n            <pre><code><span>let</span> big = (x &gt; <span>10</span>);</code></pre>\n            <pre><code>//further nested examples<br>let x = 3,<br>big = (x &gt; 10) ? <span>\"greater 10\"</span> : (x &lt; 5) ? <span>\"less 5\"</span> : <span>\"between 5 and 10\"</span>;<br>console.log(big); //<span>\"less 5\"</span></code></pre>\n            <pre><code><span>let</span> x = 20,<br>big = {<span>true</span>: x&gt;10, <span>false</span> : x&lt; =10};<br>console.log(big); //<span>\"Object {true=true, false=false}\"</span></code></pre>\n            <h3>4. Declaring variables Shorthand</h3>\n            <p>I think this one is the most used abroad the community, even though we know that javascript\n                uses<a href=\"https://www.w3schools.com/js/js_hoisting.asp\" data-href=\"https://www.w3schools.com/js/js_hoisting.asp\" rel=\"noopener\" target=\"_blank\">&nbsp;hoist</a>&nbsp;to your variable declaration. It’s a nice\n                pattern declare all the variables at the top and inline.</p>\n            <p><em>Longhand:</em></p>\n            <pre><code><span>let</span> x;<br><span>let</span> y;<br><span>let</span> z = <span>3</span>;</code></pre>\n            <p><em>Shorthand:</em></p>\n            <pre><code><span>let</span> x, y, z=<span>3</span>;</code></pre>\n            <h3>5. Assignment Operators Shorthand</h3>\n            <p>Assignment operators are used to assign values to JavaScript variables and no doubt you use\n                arithmetic everyday without thinking (no matter what programming language you use Java, PHP, C++ it’s\n                essentially the same principle).</p>\n            <p><em>Longhand:</em></p>\n            <pre><code><span>x</span>=x+<span>1</span>;<br>minusCount = minusCount - <span>1</span>;<br>y=y*<span>10</span>;</code></pre>\n            <p><em>Shorthand:</em></p>\n            <pre><code>x++;<br>minusCount <span>--;</span><br><span>y*=10;</span></code></pre>\n            <p>Other shorthand operators, given that x=10 and y=5, the table below explains the assignment\n                operators:</p>\n            <pre><code>x += y /<span>/result x=15</span><br><span>x -= y /</span><span>/result x=5</span><br><span>x *= y /</span><span>/result x=50</span><br><span>x /</span>= y /<span>/result x=2</span><br><span>x %= y /</span><span>/result x=0</span></code></pre>\n            <h3>6. RegExp Object Shorthand</h3>\n            <p>Example to avoid using the RegExp object.</p>\n            <p><em>Longhand:</em></p>\n            <pre><code><span>var</span> re = <span>new</span> <span>RegExp</span>(<span>\"\\d+(.)+\\d+\"</span>,<span>\"igm\"</span>),<br>result = re.exec(<span>\"padding 01234 text text 56789 padding\"</span>);<br><span>console</span>.log(result); <span>//\"01234 text text 56789\"</span></code></pre>\n            <p><em>Shorthand:</em></p>\n            <pre><code><span>var</span> result = <span>/d+(.)+d+/igm</span>.exec(<span>\"padding 01234 text text 56789 padding\"</span>);<br><span>console</span>.log(result); <span>//\"01234 text text 56789\"</span></code></pre>\n            <h3>8. If Presence Shorthand</h3>\n            <p>This might be trivial, but worth a mention. When doing “if checks” assignment operators can\n                sometimes be ommited.</p>\n            <p>Longhand:</p>\n            <pre><code><span>if</span> (likeJavaScript === <span>true</span>)</code></pre>\n            <p>Shorthand:</p>\n            <pre><code><span>if</span> (likeJavaScript)</code></pre>\n            <p>Here is another example. If “c” is NOT equal to true, then do something.</p>\n            <p>Longhand:</p>\n            <pre><code><span>let</span> c;<br><span>if</span> ( c!= <span>true</span> ) {<br><span>// do something...</span><br><span>}</span></code></pre>\n            <p>Shorthand:</p>\n            <pre><code><span>let</span> c;<br><span>if</span> ( !c ) {<br><span>// do something...</span><br><span>}</span></code></pre>\n            <h3>9. Function Variable Arguments Shorthand</h3>\n            <p>Object literal shorthand can take a little getting used to, but seasoned developers usually\n                prefer it over a series of nested functions and variables. You can argue which technique is shorter,\n                but I enjoy using object literal notation as a clean substitute to functions as constructors.</p>\n            <p><em>Longhand:</em></p>\n            <pre><code><span><span>function</span> <span>myFunction</span>(<span> myString, myNumber, myObject, myArray, myBoolean </span>) </span>{<br>    <span>// do something...</span><br><span>}</span><br><span>myFunction( \"String\", 1, [], {}, true );</span></code></pre>\n            <p><em>Shorthand (looks long but only because I have console.log’s in there!):</em></p>\n            <pre><code><span><span>function</span> <span>myFunction</span>(<span></span>) </span>{<br>    <span>console</span>.log( <span>arguments</span>.length ); <span>// Returns 5</span><br><span>    for ( i = 0; i &lt; arguments.length; i++ ) {</span><br><span>        console.log( typeof arguments[i] ); // Returns string, number, object, object, boolean</span><br><span>    }</span><br><span>}</span><br><span>myFunction( \"String\", 1, [], {}, true );</span></code></pre>\n            <h3>10. charAt() Shorthand</h3>\n            <p>You can use the eval() function to do this but this bracket notation shorthand technique is\n                much cleaner than an evaluation, and you will win the praise of colleagues who once scoffed at your\n                amateur coding abilities!</p>\n            <p><em>Longhand:</em></p>\n            <pre><code><span>\"myString\"</span>.charAt(<span>0</span>);</code></pre>\n            <p><em>Shorthand:</em></p>\n            <pre><code><span>\"myString\"</span>[<span>0</span>]; <span>//</span> Returns <span>'m'</span></code></pre>\n            <h3>11. Short function&nbsp;calling</h3>\n            <p>Just like #1 you can use ternary operators to make function calling shorthand based on a\n                conditional.</p>\n            <p><em>Longhand:</em></p>\n            <pre><code><span><span>function</span> <span>x</span>(<span></span>) </span>{<span>console</span>.log(<span>'x'</span>)};<span><span>function</span> <span>y</span>(<span></span>) </span>{<span>console</span>.log(<span>'y'</span>)};<br><span>let</span> z = <span>3</span>;<br><span>if</span> (z == <span>3</span>) <br>{<br>    x();<br>} <span>else</span> <br>{<br>    y();<br>}</code></pre>\n            <p><em>Shorthand:</em></p>\n            <pre><span data-creator-ids=\"anon\"><code><span><span>function</span> <span>x</span>(<span></span>) </span>{<span>console</span>.log(<span>'x'</span>)};<span><span>function</span> <span>y</span>(<span></span>) </span>{<span>console</span>.log(<span>'y'</span>)};<span>let</span> z = <span>3</span>;<br>(z==<span>3</span>?x:y)(); <span>// Short version!</span></code></span></pre>\n            <h3>12. Decimal base exponents</h3>\n            <p>You may have seen this one around it’s essentially a fancy way to write without the zeros.\n                1e7 essentially means 1 followed by 7 zeros — it represents a decimal base (JS interprets as a float\n                type) equal to 10,000,000.</p>\n            <p><em>Longhand:</em></p>\n            <pre><code><span>for</span> (<span>let</span> i = <span>0</span>; i &lt; <span>10000</span>; i++) {</code></pre>\n            <p><em>Shorthand:</em></p>\n            <pre><code><span>for</span> (<span>let</span> i = <span>0</span>; i &lt; <span>1e4</span>; i++) {</code></pre>\n        </div>\n        <div data-paragraph-count=\"3\">\n            <figure data-scroll=\"native\">\n                <div></div>\n            </figure>\n        </div>\n    </div>\n</div>","filePath":"pages/JavaScript/.md","_id":"sbK2FgN5Uo8OOn4G","date":{"$$date":1542040871238},"dateUpdated":1542040871238}
{"date":{"$$date":1542212485654},"title":"How To Use the Switch Statement in JavaScript","sourceUrl":"https://www.digitalocean.com/community/tutorials/how-to-use-the-switch-statement-in-javascript","path":"JavaScript/JavaScript/JavaScript/","category":"JavaScript","tags":["JavaScript"," Switch"],"author":"Tania Rascia","excerpt":"","dateCreated":1542210289131,"coverImage":"","type":"Post","frontmatter":"---\npath: 'JavaScript/'\ndate: 'Wed Nov 14 2018 21:48:34 GMT+0530 (India Standard Time)'\ntitle: 'How To Use the Switch Statement in JavaScript'\ntags: ['JavaScript','Switch']\ncategory: 'JavaScript'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://www.digitalocean.com/community/tutorials/how-to-use-the-switch-statement-in-javascript'\ntype: 'Post'\n---\n    ","htmlCode":"<h3>Introduction</h3><p>Conditional statements are among the most useful and common features of all programming languages. \"<a href=\"https://www.digitalocean.com/community/tutorials/how-to-write-conditional-statements-in-javascript\">How To Write Conditional Statements in JavaScript</a>\" describes how to use the&nbsp;<code>if</code>,&nbsp;<code>else</code>, and&nbsp;<code>else if</code>keywords to control the flow of a program based on different conditions, which in JavaScript are often the result of user input.</p><p>In addition to&nbsp;<code>if...else</code>, JavaScript has a feature known as a&nbsp;<code>switch</code>&nbsp;statement.&nbsp;<code>switch</code>&nbsp;is a type of conditional statement that will evaluate an expression against multiple possible cases and execute one or more blocks of code based on matching cases. The&nbsp;<code>switch</code>&nbsp;statement is closely related to a conditional statement containing many&nbsp;<code>else if</code>&nbsp;blocks, and they can often be used interchangeably.</p><p>In this tutorial, we will learn how to use the&nbsp;<code>switch</code>&nbsp;statement, as well as how to use the related keywords&nbsp;<code>case</code>,&nbsp;<code>break</code>, and&nbsp;<code>default</code>. Finally, we'll go through how to use multiple cases in a&nbsp;<code>switch</code>&nbsp;statement.</p><div data-unique=\"switch\"></div><h2>Switch</h2><p>The&nbsp;<code>switch</code>&nbsp;statement evaluates an expression and executes code as a result of a matching case. At first it can look a bit intimidating, but the basic syntax is similar to that of an&nbsp;<code>if</code>&nbsp;statement. It will always be written with&nbsp;<code>switch () {}</code>, with parentheses containing the expression to test, and curly brackets containing the potential code to execute.</p><p>Below is an example of a&nbsp;<code>switch</code>&nbsp;statement with two&nbsp;<code>case</code>&nbsp;statements, and a fallback known as&nbsp;<code>default</code>.</p><pre><code><span>switch</span> (expression) {\n    <span>case</span> x:\n        <span>// execute case x code block</span>\n        <span>break</span>;\n    <span>case</span> y:\n        <span>// execute case y code block</span>\n        <span>break</span>;\n    <span>default</span>:\n        <span>// execute default code block</span>\n}\n</code></pre><p>Following the logic of the code block above, this is the sequence of events that will take place.</p><ul><li>The expression is evaluated</li><li>The first&nbsp;<code>case</code>,&nbsp;<code>x</code>, will be tested against the expression. If it matches, the code will execute, and the&nbsp;<code>break</code>&nbsp;keyword will end the&nbsp;<code>switch</code>&nbsp;block.</li><li>If it does not match,&nbsp;<code>x</code>&nbsp;will be skipped and the&nbsp;<code>y</code>&nbsp;case will be tested against the expression. If&nbsp;<code>y</code>matches the expression, the code will execute and exit out of the&nbsp;<code>switch</code>&nbsp;block.</li><li>If none of the cases match, the&nbsp;<code>default</code>&nbsp;code block will run.</li></ul><p>Let's make a working example of a&nbsp;<code>switch</code>&nbsp;statement following the syntax above. In this code block, we will find the current day of the week with the&nbsp;<code>new Date()</code>&nbsp;method, and&nbsp;<code>getDay()</code>&nbsp;to print a number corresponding to the current day.&nbsp;<code>1</code>&nbsp;stands for Monday, all the way through&nbsp;<code>7</code>&nbsp;which stands for Sunday. We'll start by setting up our variable.</p><pre><code><span>const</span> day = <span>new</span> <span>Date</span>().getDay();\n</code></pre><p>Using&nbsp;<code>switch</code>, we will send a message to the console each day of the week. The program will run in order from top to bottom looking for a match, and once one is found, the&nbsp;<code>break</code>&nbsp;command will halt the&nbsp;<code>switch</code>block from continuing to evaluate statements.</p><div title=\"week.js\">week.js</div><pre><code><span>// Set the current day of the week to a variable, with 1 being Monday and 7 being Sunday</span>\n<span>const</span> day = <span>new</span> <span>Date</span>().getDay();\n\n<span>switch</span> (day) {\n    <span>case</span> <span>1</span>:\n        console.log(<span>\"Happy Monday!\"</span>);\n        <span>break</span>;\n    <span>case</span> <span>2</span>:\n        console.log(<span>\"It's Tuesday. You got this!\"</span>);\n        <span>break</span>;\n    <span>case</span> <span>3</span>:\n        console.log(<span>\"Hump day already!\"</span>);\n        <span>break</span>;\n    <span>case</span> <span>4</span>:\n        console.log(<span>\"Just one more day 'til the weekend!\"</span>);\n        <span>break</span>;\n    <span>case</span> <span>5</span>:\n        console.log(<span>\"Happy Friday!\"</span>);\n        <span>break</span>;\n    <span>case</span> <span>6</span>:\n        console.log(<span>\"Have a wonderful Saturday!\"</span>);\n        <span>break</span>;\n    <span>case</span> <span>7</span>:\n        console.log(<span>\"It's Sunday, time to relax!\"</span>);\n        <span>break</span>;\n    <span>default</span>:\n        console.log(<span>\"Something went horribly wrong...\"</span>);\n}\n</code></pre><pre><code langs=\"\"><div title=\"Output\">Output</div>'Just one more day 'til the weekend!'\n</code></pre><p>This code was tested on a Thursday, which corresponds to&nbsp;<code>4</code>, therefore the console output was&nbsp;<code>Just one more day 'til the weekend!</code>. Depending on what day of the week you are testing the code, your output will be different. We have included a&nbsp;<code>default</code>&nbsp;block at the end to run in case of an error, which in this case should not happen as there are only 7 days of the week. We also could have, for example, only printed results for Monday to Friday, and the&nbsp;<code>default</code>&nbsp;block could have had the same message for the weekend.</p><p>If we had omitted the&nbsp;<code>break</code>&nbsp;keyword in each statement, none of the other&nbsp;<code>case</code>&nbsp;statements would have evaluated to true, but the program would have continued to check until it reached the end. In order to make our programs faster and more efficient, we include the&nbsp;<code>break</code>.</p><div data-unique=\"switch-ranges\"></div><h2>Switch Ranges</h2><p>There might be an occasion in which you will need to evaluate a range of values in a&nbsp;<code>switch</code>&nbsp;block, as opposed to a single value as in our example above. We can do this by setting our expression to&nbsp;<code>true</code>&nbsp;and doing an operation within each&nbsp;<code>case</code>&nbsp;statement.</p><p>To make this easier to understand, we will use a familiar example. In the&nbsp;<a href=\"https://www.digitalocean.com/community/tutorials/how-to-write-conditional-statements-in-javascript\">conditional statements</a>&nbsp;tutorial, we made a simple grading app which would take a number score and convert it to a letter grade, with the following requirements.</p><ul><li>Grade of 90 and above is an&nbsp;<span>A</span></li><li>Grade of 80 to 89 is a&nbsp;<span>B</span></li><li>Grade of 70 to 79 is a&nbsp;<span>C</span></li><li>Grade of 60 to 69 is a&nbsp;<span>D</span></li><li>Grade of 59 or below is an&nbsp;<span>F</span></li></ul><p>Now we can write that as a&nbsp;<code>switch</code>&nbsp;statement. Since we're checking a range, we will perform the operation in each&nbsp;<code>case</code>&nbsp;to check if each expression is evaluating to&nbsp;<code>true</code>&nbsp;then break out of the statement once the requirements for&nbsp;<code>true</code>&nbsp;have been satisfied.</p><div title=\"grades.js\">grades.js</div><pre><code><span>// Set the student's grade</span>\n<span>const</span> grade = <span>87</span>;\n\n<span>switch</span> (<span>true</span>) {\n    <span>// If score is 90 or greater</span>\n    <span>case</span> grade &gt;= <span>90</span>:\n        console.log(<span>\"A\"</span>);\n        <span>break</span>;\n    <span>// If score is 80 or greater</span>\n    <span>case</span> grade &gt;= <span>80</span>:\n        console.log(<span>\"B\"</span>);\n        <span>break</span>;\n    <span>// If score is 70 or greater</span>\n    <span>case</span> grade &gt;= <span>70</span>:\n        console.log(<span>\"C\"</span>);\n        <span>break</span>;\n    <span>// If score is 60 or greater</span>\n    <span>case</span> grade &gt;= <span>60</span>:\n        console.log(<span>\"D\"</span>);\n        <span>break</span>;\n    <span>// Anything 59 or below is failing</span>\n    <span>default</span>:\n        console.log(<span>\"F\"</span>);\n}\n</code></pre><pre><code langs=\"\"><div title=\"Output\">Output</div>'B'\n</code></pre><p>The expression in parentheses to be evaluated is&nbsp;<code>true</code>&nbsp;in this example. This means that any&nbsp;<code>case</code>&nbsp;that evaluates to&nbsp;<code>true</code>&nbsp;will be a match.</p><p>Just like with&nbsp;<code>else if</code>,&nbsp;<code>switch</code>&nbsp;is evaluated from top to bottom, and the first true match will be accepted. Therefore, even though our&nbsp;<code>grade</code>&nbsp;variable is&nbsp;<code>87</code>&nbsp;and therefore evaluates to&nbsp;<code>true</code>&nbsp;for C and D as well, the first match is B, which will be the output.</p><div data-unique=\"multiple-cases\"></div><h2>Multiple Cases</h2><p>You may encounter code in which multiple&nbsp;<code>case</code>s should have the same output. In order to accomplish this, you can use more than one&nbsp;<code>case</code>&nbsp;for each block of code.</p><p>In order to test this, we are going to make a small application matching the current month to the appropriate season. First, we will use the&nbsp;<code>new Date()</code>&nbsp;method to find a number corresponding to the current month, and apply that to the&nbsp;<code>month</code>&nbsp;variable.</p><pre><code><span>const</span> month = <span>new</span> <span>Date</span>().getMonth();\n</code></pre><p>The&nbsp;<code>new Date().getMonth()</code>&nbsp;method will output a number from&nbsp;<code>0</code>&nbsp;to&nbsp;<code>11</code>, with&nbsp;<code>0</code>&nbsp;being January and&nbsp;<code>11</code>being December. At the time of this publication, the month is September, which will correspond to&nbsp;<code>8</code>.</p><p>Our application will output the four seasons with the following specifications for simplicity:</p><ul><li><span>Winter</span>: January, February, and March</li><li><span>Spring</span>: April, May, and June</li><li><span>Summer</span>: July, August, and September</li><li><span>Autumn</span>: October, November, and December</li></ul><p>Below is our code.</p><div title=\"seasons.js\">seasons.js</div><pre><code>\n<span>// Get number corresponding to the current month, with 0 being January and 11 being December</span>\n<span>const</span> month = <span>new</span> <span>Date</span>().getMonth();\n\n<span>switch</span> (month) {\n    <span>// January, February, March</span>\n    <span>case</span> <span>0</span>:\n    <span>case</span> <span>1</span>:\n    <span>case</span> <span>2</span>:\n        console.log(<span>\"Winter\"</span>);\n        <span>break</span>;\n    <span>// April, May, June</span>\n    <span>case</span> <span>3</span>:\n    <span>case</span> <span>4</span>:\n    <span>case</span> <span>5</span>:\n        console.log(<span>\"Spring\"</span>);\n        <span>break</span>;\n    <span>// July, August, September</span>\n    <span>case</span> <span>6</span>:\n    <span>case</span> <span>7</span>:\n    <span>case</span> <span>8</span>:\n        console.log(<span>\"Summer\"</span>);\n        <span>break</span>;\n    <span>// October, November, December</span>\n    <span>case</span> <span>9</span>:\n    <span>case</span> <span>10</span>:\n    <span>case</span> <span>11</span>:\n        console.log(<span>\"Autumn\"</span>);\n        <span>break</span>;\n    <span>default</span>:\n        console.log(<span>\"Something went wrong.\"</span>);\n}\n</code></pre><p>When we run the code, we'll receive output identifying the current season based on the specifications above.</p><pre><code langs=\"\"><div title=\"Output\">Output</div>Summer\n</code></pre><p>The current month at the time of publication was&nbsp;<code>8</code>, which corresponded to one of the&nbsp;<code>case</code>&nbsp;statements with the&nbsp;<code>\"Summer\"</code>&nbsp;season output.</p><div data-unique=\"conclusion\"></div><h2>Conclusion</h2><p>In this article, we reviewed the&nbsp;<code>switch</code>&nbsp;statement, a type of&nbsp;<a href=\"https://www.digitalocean.com/community/tutorials/how-to-write-conditional-statements-in-javascript\">conditonal statement</a>&nbsp;which evaluates an expression and outputs different values based on matching results. We reviewed&nbsp;<code>switch</code>&nbsp;statements using a range and multiple&nbsp;<code>case</code>&nbsp;statements.</p><p>To learn more about&nbsp;<code>switch</code>, you can review it on the&nbsp;<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch\">Mozilla Developer Network</a>.</p>","filePath":"pages/JavaScript/.md","_id":"wRI5zxoVwCxguoeM","dateUpdated":1542212485654}
{"date":{"$$date":1542889555568},"title":"Using pure Sass functions to make reusable logic more useful","sourceUrl":"http://thesassway.com/advanced/pure-sass-functions","path":"SCSS/SCSS/","category":"SCSS","tags":["SCSS"],"author":"Mason Wendell","excerpt":"","dateCreated":1542816920575,"coverImage":"","type":"Post","frontmatter":"---\npath: 'SCSS/'\ndate: 'Wed Nov 21 2018 21:48:07 GMT+0530 (India Standard Time)'\ntitle: 'Using pure Sass functions to make reusable logic more useful'\ntags: ['SCSS']\ncategory: 'SCSS'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'http://thesassway.com/advanced/pure-sass-functions'\ntype: 'Post'\n---\n    ","htmlCode":"<p>Sass gladly lets you add calculations and logic in a way that CSS would never abide. But does that mean you should\n    go around adding and dividing just anywhere? Find out how you can use pure Sass functions to make reusable logic\n    more useful and your working Sass file more readable.</p>\n<h2>Sass adds Functions</h2>\n<p>Sass has&nbsp;<a href=\"http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#mixins\">mixins</a>, we all know that.\n    And because they accept arguments I always thought of them as Sass's version of functions. Pretty sweet. But when&nbsp;<a href=\"http://sass-lang.com/docs/yardoc/file.SASS_CHANGELOG.html#310\">Sass 3.1.0</a>&nbsp;came out it added a feature\n    that blew that notion apart. Yeah, you guessed it … actual&nbsp;<a href=\"http://sass-lang.com/docs/yardoc/file.SASS_CHANGELOG.html#sassbased_functions\">functions</a>.\n    Instead of outputting lines of Sass the way mixins do, functions return a value. This makes them a super powerful\n    behind-the-scenes player in a lot of my favorite Sass recipes.</p>\n<h2>Mixins and Functions: Kissing Cousins</h2>\n<p>Functions and mixins are very similar in nature. Because they can both accept variables, you might end up creating a\n    mixin when what you really need is a function. In the following examples, we review the creation, usage and output\n    of both a mixin and a function.</p>\n<h3>Exhibit A: Mixin</h3>\n<p>The following mixin can accept arguments and do calculations. The output of this mixin (in this case) is a CSS rule\n    and will be unfurled where ever you&nbsp;<code>@include</code>&nbsp;it.</p>\n<pre><code>@mixin my-padding-mixin($some-number) {\n    padding: $some-number;\n}\n</code></pre>\n<p>Now we use the&nbsp;<code>@include</code>&nbsp;directive to insert our mixin's code.</p>\n<pre><code>.my-module {\n    @include my-padding-mixin(10px);\n  }\n</code></pre>\n<p>And here is the output CSS code.</p>\n<pre><code>.my-module {\n    padding: 10px;\n  }\n</code></pre>\n<h3>Exhibit B: Function</h3>\n<p>A function is very similar to a mixin, however the output from a function is a single value. This can be any Sass&nbsp;<a href=\"http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#data_types\">data type</a>, including: numbers,\n    strings, colors, booleans, or lists.</p>\n<p>The following function can accept 2 arguements,&nbsp;<code>$some-number</code>&nbsp;and&nbsp;<code>$another-number</code>. The\n    value returned are those two variables added together.</p>\n<pre><code>@function my-calculation-function($some-number, $another-number){\n    @return $some-number + $another-number\n}\n</code></pre>\n<p>This time around we replace the common value of the&nbsp;<code>padding</code>&nbsp;property with what a snippet of&nbsp;<a href=\"http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#sassscript\">SassScript</a>&nbsp;to\n    call our function, pass it the arguments and include in our output CSS code.</p>\n<pre><code>.my-module {\n    padding: my-calculation-function(10px, 5px);\n  }\n</code></pre>\n<p>And here is the output CSS code.</p>\n<pre><code>.my-module {\n    padding: 15px;\n  }\n</code></pre>\n<h3>Readable, DRY Sass</h3>\n<p>As you can see, functions help you write more readable and DRY Sass by letting you move your reusable logic out of\n    specific declarations and even out of your mixins. This can make all the difference in the world when you're\n    working on something that's even a little bit complex.</p>\n<h2>Using Functions</h2>\n<p>I love how writing Sass lets me think like a programmer when I'm writing CSS. It's very satisfying to refactor and\n    abstract the methods behind successful techniques to make them reusable and portable for the next project.</p>\n<p>Pro tip: Use functions when you need to calculate a value that may be reused somewhere else.</p>\n<p>In Ethan Marcotte's lovely new book&nbsp;<a href=\"http://www.abookapart.com/products/responsive-web-design\"><em>Responsive\n            Web Design</em></a>, he stresses the formula for calculating the percent value for a width so you can\n    achieve a fluid layout based on a reference design made using pixels.</p>\n<pre><code>target / context = result\n</code></pre>\n<p>So if you have a container that's 1000px wide, and a module that's designed to be 650px wide, that calculation\n    becomes:</p>\n<pre><code>650px / 1000px = 65% \n</code></pre>\n<p>That's as clear a case for a function as I can imagine. It would be overkill to work that logic into each mixin for\n    a site, and even worse to do those calculations in line. So in a recent project I just created a little function,\n    like so:</p>\n<pre><code>@function calc-percent($target, $container) {\n    @return ($target / $container) \\* 100%;\n  }\n</code></pre>\n<p>Pro tip: Create short-names for functions and mixins that you will be using often.</p>\n<p>For example, for the above function, I created the short-name below. It simply collects the needed arguments, and\n    passes it along to its sister with the longer name, and then returns the value.</p>\n<p>@function cp($target, $container) {\n    @return calc-percent($target, $container);\n    }</p>\n<p>With that in place, I can easily remove the mechanics of that process out of my view, and focus on writing my Sass\n    using the values I already know.</p>\n<pre><code>.my-module {\n    width: calc-percent(650px, 1000px);\n  }\n</code></pre>\n<p>or</p>\n<pre><code>.my-module {\n    width: cp(650px, 1000px);\n  }\n</code></pre>\n<p>Either of which simply output this CSS.</p>\n<pre><code>.my-module {\n    width: 65%;\n  }\n</code></pre>\n<p>This is a simple example, but I think it's a pretty useful one, especially if you'd rather have Sass do the math for\n    you. Once you start pulling a few calculations into Sass functions, you'll start to see how they open up new ways\n    to write lighter, cleaner Sass that's more readable.</p>\n<h2>Homework: Dig Deeper by reading the source code</h2>\n<p>Sass functions have become an indispensable tool for me in all my latest projects. I've heard from many others that\n    is the case for them as well. If you dig into&nbsp;<a href=\"http://compass-style.org/reference/blueprint/grid/\">the</a>&nbsp;<a href=\"http://compass-style.org/reference/compass/layout/grid_background/\">source</a>&nbsp;<a href=\"http://compass-style.org/reference/compass/typography/vertical_rhythm/\">code</a>&nbsp;of&nbsp;<a href=\"http://www.abookapart.com/products/responsive-web-design\">Compass</a>&nbsp;you will see that a lot of real\n    heavy lifting is done by some well-placed functions.</p>","filePath":"pages/SCSS/.md","_id":"wdcK2Y2S3OwM7RQA","dateUpdated":1542889555568}
{"date":{"$$date":1542889295068},"title":"An Introduction to Git Merge and Git Rebase: What They Do and When to Use Them","sourceUrl":"https://medium.freecodecamp.org/an-introduction-to-git-merge-and-rebase-what-they-are-and-how-to-use-them-131b863785f","path":"Github/Github/","category":"Github","tags":["Github"],"author":"Vali Shah","excerpt":"","dateCreated":1542886892908,"coverImage":"","type":"Post","frontmatter":"---\npath: 'Github/'\ndate: 'Thu Nov 22 2018 17:49:36 GMT+0530 (India Standard Time)'\ntitle: 'An Introduction to Git Merge and Git Rebase: What They Do and When to Use Them'\ntags: ['Github']\ncategory: 'Github'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://medium.freecodecamp.org/an-introduction-to-git-merge-and-rebase-what-they-are-and-how-to-use-them-131b863785f'\ntype: 'Post'\n---\n    ","htmlCode":"<p>As a\n    Developer, many of us have to choose between Merge and Rebase. With all\n    the references we get from the internet, everyone believes “Don’t use\n    Rebase, it could cause serious problems.” Here I will explain what merge\n    and rebase are, why you should (and shouldn’t) use them, and how to do\n    so.</p>\n<p>Git\n    Merge and Git Rebase serve the same purpose. They are designed to\n    integrate changes from multiple branches into one. Although the final\n    goal is the same, those two methods achieve it in different ways.</p>\n<p>This\n    question has split the Git community. Some believe you should always\n    rebase and others that you should always merge. Each side has some\n    convincing benefits.</p>\n<h3>Git Merge</h3>\n<p>Merging\n    is a common practice for developers using version control systems.\n    Whether branches are created for testing, bug fixes, or other reasons,\n    merging commits changes to another location. To be more specific,\n    merging takes the contents of a source branch and integrates them with a\n    target branch. In this process, only the target branch is changed. The\n    source branch history remains the same.</p>\n<figure>\n    <div>\n        <div></div>\n        <div data-image-id=\"1*QBAAHdhuKdCchw4fl-b82w.png\" data-width=\"784\" data-height=\"428\" data-action=\"zoom\" data-action-value=\"1*QBAAHdhuKdCchw4fl-b82w.png\" data-scroll=\"native\"></div>\n    </div>\n</figure>\n<figure>\n    <div>\n        <div data-image-id=\"1*QBAAHdhuKdCchw4fl-b82w.png\" data-width=\"784\" data-height=\"428\" data-action=\"zoom\" data-action-value=\"1*QBAAHdhuKdCchw4fl-b82w.png\" data-scroll=\"native\"><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*QBAAHdhuKdCchw4fl-b82w.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*QBAAHdhuKdCchw4fl-b82w.png\"></div>\n    </div>\n    <figcaption>Merge Master -&gt; Feature&nbsp;branch</figcaption>\n</figure>\n<h4><strong>Pros</strong></h4>\n<ul>\n    <li>Simple and familiar</li>\n    <li>Preserves complete history and chronological order</li>\n    <li>Maintains the context of the branch</li>\n</ul>\n<h4><strong>Cons</strong></h4>\n<ul>\n    <li>Commit history can become polluted by lots of merge commits</li>\n    <li>Debugging using <code>git bisect</code> can become harder</li>\n</ul>\n<h4><strong>How to do&nbsp;it</strong></h4>\n<p>Merge the master branch into the feature branch using the <code>checkout</code> and <code>merge</code> commands.</p>\n<pre><code>$ git checkout feature<br>$ git merge master</code></pre>\n<pre><code>(or)</code></pre>\n<pre><code>$ git merge master feature</code></pre>\n<p>This will create a new “<strong>Merge commit</strong>” in the feature branch that holds the history of both\n    branches.</p>\n<h3>Git Rebase</h3>\n<p>Rebase\n    is another way to integrate changes from one branch to another. Rebase\n    compresses all the changes into a single “patch.” Then it integrates the\n    patch onto the target branch.</p>\n<p>Unlike\n    merging, rebasing flattens the history because it transfers the\n    completed work from one branch to another. In the process, unwanted\n    history is eliminated.</p>\n<blockquote><em>Rebases are how changes should pass from the top of the hierarchy downwards, and merges are how they\n        flow back upwards</em></blockquote>\n<figure>\n    <div>\n        <div></div>\n        <div data-image-id=\"1*PfX5s_N-jeQhSgpurc3Gjg.png\" data-width=\"774\" data-height=\"456\" data-action=\"zoom\" data-action-value=\"1*PfX5s_N-jeQhSgpurc3Gjg.png\" data-scroll=\"native\"></div>\n    </div>\n</figure>\n<figure>\n    <div>\n        <div data-image-id=\"1*PfX5s_N-jeQhSgpurc3Gjg.png\" data-width=\"774\" data-height=\"456\" data-action=\"zoom\" data-action-value=\"1*PfX5s_N-jeQhSgpurc3Gjg.png\" data-scroll=\"native\"><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*PfX5s_N-jeQhSgpurc3Gjg.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*PfX5s_N-jeQhSgpurc3Gjg.png\"></div>\n    </div>\n    <figcaption>Rebase feature branch into&nbsp;master</figcaption>\n</figure>\n<h4><strong>Pros</strong></h4>\n<ul>\n    <li>Streamlines a potentially complex history</li>\n    <li>Manipulating a single commit is easy (e.g. reverting them)</li>\n    <li>Avoids merge commit “noise” in busy repos with busy branches</li>\n    <li>Cleans intermediate commits by making them a single commit, which can be helpful for DevOps teams</li>\n</ul>\n<h4><strong>Cons</strong></h4>\n<ul>\n    <li>Squashing the feature down to a handful of commits can hide the context</li>\n    <li>Rebasing public repositories can be dangerous when working as a team</li>\n    <li>It’s more work: Using rebase to keep your feature branch updated always</li>\n    <li>Rebasing with remote branches requires you to <em>force push. </em>The\n        biggest problem people face is they force push but haven’t set git push\n        default. This results in updates to all branches having the same name,\n        both locally and remotely, and that is <strong>dreadful </strong>to deal with.</li>\n</ul>\n<blockquote><em>If\n        you rebase incorrectly and unintentionally rewrite the history, it can\n        lead to serious issues, so make sure you know what you are doing!</em></blockquote>\n<h4><strong>How to do&nbsp;it</strong></h4>\n<p>Rebase the feature branch onto the master branch using the following commands.</p>\n<pre><code>$ git checkout feature<br>$ git rebase master</code></pre>\n<p>This\n    moves the entire feature branch on top of the master branch. It does\n    this by re-writing the project history by creating brand new commits for\n    each commit in the original (feature) branch.</p>\n<h4><strong>Interactive Rebasing</strong></h4>\n<p>This\n    allows altering the commits as they are moved to the new branch. This\n    is more powerful than automated rebase, as it offers complete control\n    over the branch’s commit history. Typically this is used to clean up a\n    messy history before merging a feature branch into master.</p>\n<pre><code>$ git checkout feature<br>$ git rebase -i master</code></pre>\n<p>This will open the editor by listing all the commits that are about to be moved.</p>\n<pre><code>pick 22d6d7c Commit message#1<br>pick 44e8a9b Commit message#2<br>pick 79f1d2h Commit message#3</code></pre>\n<p>This\n    defines exactly what the branch will look like after the rebase is\n    performed. By re-ordering the entities, you can make the history look\n    like whatever you want. For example, you can use commands like <code>fixup</code>, <code>squash</code>, <code>edit</code>\n    etc, in place of <code>pick</code>.</p>\n<figure>\n    <div>\n        <div></div>\n        <div data-image-id=\"1*oDwCK3Lc6M55s-1lVZnb7g.png\" data-width=\"1724\" data-height=\"1004\" data-action=\"zoom\" data-action-value=\"1*oDwCK3Lc6M55s-1lVZnb7g.png\" data-scroll=\"native\"></div>\n    </div>\n</figure>\n<figure>\n    <div>\n        <div data-image-id=\"1*oDwCK3Lc6M55s-1lVZnb7g.png\" data-width=\"1724\" data-height=\"1004\" data-action=\"zoom\" data-action-value=\"1*oDwCK3Lc6M55s-1lVZnb7g.png\" data-scroll=\"native\"><img data-src=\"https://cdn-images-1.medium.com/max/1600/1*oDwCK3Lc6M55s-1lVZnb7g.png\" src=\"https://cdn-images-1.medium.com/max/1600/1*oDwCK3Lc6M55s-1lVZnb7g.png\"></div>\n    </div>\n</figure>\n<h3>Which one to&nbsp;use</h3>\n<p>So what’s best? What do the experts recommend?</p>\n<p>It’s hard to generalize and decide on one or the other, since every team is different. But we have to start\n    somewhere.</p>\n<p>Teams\n    need to consider several questions when setting their Git rebase vs.\n    merge policies. Because as it turns out, one workflow strategy is not\n    better than the other. It is dependent on your team.</p>\n<p>Consider\n    the level of rebasing and Git competence across your organization.\n    Determine the degree to which you value the simplicity of rebasing as\n    compared to the traceability and history of merging.</p>\n<p>Finally, decisions on merging and rebasing should be considered in the context of a clear branching strategy (<strong>Refer</strong>\n    <a href=\"https://medium.freecodecamp.org/adopt-a-git-branching-strategy-ac729ff4f838\" data-href=\"https://medium.freecodecamp.org/adopt-a-git-branching-strategy-ac729ff4f838\" rel=\"noopener\" target=\"_blank\"><strong>this article</strong></a>\n    to understand more about branching strategy). A successful branching\n    strategy is designed around the organization of your teams.</p>\n<h3>What do I recommend?</h3>\n<p><span data-creator-ids=\"anon\">As the team grows, it will become hard to manage or trace development changes with an\n        <strong>always merge policy. </strong>To have a clean and understandable commit history, using <strong>Rebase\n        </strong>is reasonable and effective.</span></p>\n<p>By considering the following circumstances and guidelines, you can get best out of <strong>Rebase:</strong></p>\n<ul>\n    <li><strong>You’re developing locally: </strong>If\n        you have not shared your work with anyone else. At this point, you\n        should prefer rebasing over merging to keep your history tidy. If you’ve\n        got your personal fork of the repository and that is not shared with\n        other developers, you’re safe to rebase even after you’ve pushed to your\n        branch.</li>\n    <li><strong>Your code is ready for review:</strong>\n        You created a pull request. Others are reviewing your work and are\n        potentially fetching it into their fork for local review. At this point,\n        you should not rebase your work. You should create ‘rework’ commits and\n        update your feature branch. This helps with traceability in the pull\n        request and prevents the accidental history breakage.</li>\n    <li><strong>The review is done and ready to be integrated into the target branch.</strong>\n        Congratulations! You’re about to delete your feature branch. Given that\n        other developers won’t be fetch-merging in these changes from this\n        point on, this is your chance to sanitize your history. At this point,\n        you can rewrite history and fold the original commits and those pesky\n        ‘pr rework’ and ‘merge’ commits into a small set of focused commits.\n        Creating an explicit merge for these commits is optional, but has value.\n        It records when the feature graduated to master.</li>\n</ul>\n<h3>Conclusion</h3>\n<p>I hope this explanation has given some insights on <strong>Git merge </strong>and <strong>Git rebase. </strong>Merge\n    vs rebase strategy is always debatable. But perhaps this article will\n    help dispel your doubts and allow you to adopt an approach that works\n    for your team.</p>\n<p>I’m looking forward to writing on <strong>Git workflows</strong> and concepts of <strong>Git</strong>. Do comment on\n    the topics that you want me to write about next. Cheers!</p>\n<p><code><strong>code</strong> = <strong>co</strong>ffee + <strong>de</strong>veloper</code></p>\n<p>Here is another useful reference</p>\n<ul>\n    <li><a href=\"https://medium.freecodecamp.org/adopt-a-git-branching-strategy-ac729ff4f838\" data-href=\"https://medium.freecodecamp.org/adopt-a-git-branching-strategy-ac729ff4f838\" rel=\"noopener\" target=\"_blank\"><strong>How to adopt a Git branching strategy</strong></a></li>\n</ul>","filePath":"pages/Github/.md","_id":"xoL4g7n72d8rePwM","dateUpdated":1542889295069}
{"date":{"$$date":1542041456114},"title":"Creating Flexible Layouts with Flexbox","sourceUrl":"https://www.sitepoint.com/creating-flexible-layouts-with-flexbox/","path":"CSS/CSS/","category":"CSS","tags":["Flexbox"],"author":"Tiffany Brown","excerpt":"","dateCreated":1542041208942,"coverImage":"","type":"Post","frontmatter":"---\npath: 'CSS/'\ndate: 'Mon Nov 12 2018 22:19:24 GMT+0530 (India Standard Time)'\ntitle: 'Creating Flexible Layouts with Flexbox'\ntags: ['Flexbox']\ncategory: 'CSS'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://www.sitepoint.com/creating-flexible-layouts-with-flexbox/'\ntype: 'Post'\n---\n    ","htmlCode":"<p><em>The following introduction to Flexbox is an extract from Tiffany’s new book, <a href=\"https://www.sitepoint.com/premium/l/css-master2\">CSS Master, 2nd Edition</a>.</em></p>\n<p><strong>Before <a href=\"https://www.sitepoint.com/creating-css-grid-layouts/\">CSS Grid</a> came along, there was Flexbox (which is officially known as the <a href=\"https://www.w3.org/TR/css-flexbox-1/\">CSS Flexible Box Layout Module</a>). Flexbox was designed to manage layout in one direction—a row (<code>flex-direction: row</code> or <code>row-reverse</code>) <em>or</em> a column (<code>flex-direction: column</code> or <code>column-reverse</code>). That’s in contrast to Grid, which accounts for rows <em>and</em> columns.</strong></p>\n<p>A basic flexible box layout is simple to create: add <code>display: flex</code> or <code>display: inline-flex</code> to the containing element. These values for <code>display</code> will trigger a <em>flex formatting context</em> for that containing element’s children. As with Grid, both <code>flex</code> and <code>inline-flex</code> are inside display modes. We set these values on the container, which behaves like a block-level or inline-level box, respectively. The children of that container are then arranged according to the rules of flex layout.</p>\n<div><div><em>Note: Older versions of Blink-based browsers such as Chrome (≤ 28), and WebKit-based browsers like Safari (≤ 8), require a vendor prefix. If your project still supports those browsers, you’ll need to use <code>display: -webkit-flex</code> or <code>display: -webkit-inline-flex</code>. Older versions of Firefox (≤ 21) also require a prefix. Use <code>-moz-flex</code> and <code>-moz-inline-flex</code> to support those browsers.</em><br></div></div>\n<p>By adding <code>display: flex</code> or <code>display: inline-flex</code> to a containing element, its immediate children become flex items, as shown in the image below. Flex items may be element children or non-empty text nodes. For instance, the markup below generates three flex item boxes that each behave according to the rules of flex layout:</p>\n<pre><code><span>&lt;<span>div</span> <span>style</span>=<span>\"display: flex\"</span>&gt;</span>\n    <span>&lt;<span>span</span>&gt;</span>This text is contained by a SPAN element.<span>&lt;/<span>span</span>&gt;</span>\n    <span>&lt;<span>b</span>&gt;</span>This text is contained by a B element.<span>&lt;/<span>b</span>&gt;</span>\n    This text node is still a flex item.\n<span>&lt;/<span>div</span>&gt;</span>\n</code></pre>\n<p>If no other properties are set, each flex item will have the same height as its tallest element (as determined by content). It will also stack horizontally (or vertically when the document has a vertical writing mode) without wrapping, and with no space between the edges of each box. Flex items may overflow the container.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538106102LayoutFlexStack-1024x605.png\" alt=\"A list with display: flex applied to the ul containing element\" width=\"1024\" height=\"605\"><span>A list with <code>display: flex</code> applied to the <code>ul</code> containing element</span>\n</div>\n<p>This may not seem like such a big deal, but it simplifies the code necessary for a range of user interface patterns. Let’s look at a couple of examples.</p>\n<h2>A New Media Object Component</h2>\n<p>Take the following media object code:</p>\n<pre><code>&lt;div <span><span>class</span></span>=<span>\"media__object\"</span>&gt;\n    <span><span>&lt;<span>img</span> <span>src</span>=<span>\"video-thumb1.jpg\"</span>&gt;</span>\n    <span>&lt;<span>div</span> <span>class</span>=<span>\"media__object__text\"</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.<span>&lt;/<span>div</span>&gt;</span>\n<span>&lt;/<span>div</span>&gt;</span></span>\n</code></pre>\n<p>Before Flexbox, we might have paired the preceding markup with the following CSS:</p>\n<pre><code><span>.media__object</span> <span>img</span> {\n    <span>float</span>: left;\n    <span>height</span>: auto;\n    <span>width</span>: <span>150px</span>;\n}\n<span>.media__object__text</span> {\n    <span>padding-left</span>: <span>170px</span>;\n}\n<span>/* Let's use the clearfix hack! */</span>\n<span>.media__object</span><span>::after</span>{\n    <span>content</span>: <span>' '</span>;\n    <span>display</span>: block;\n    <span>clear</span>: both;\n}\n</code></pre>\n<p>This layout works, but it has one major drawback: it requires us to constrain the width of our images so that we know how much padding to use. That limits our ability to use this same component in multiple contexts. You may want an image 150px wide when this component is used for a “Related Stories” widget, and one that’s only 75px wide for comments.</p>\n<p>Let’s try this using Flexbox. Here’s our updated CSS:</p>\n<pre><code><span>.media__object</span> {\n    <span>display</span>: flex;\n}\n<span>.media_object</span> <span>img</span> {\n    <span>margin-right</span>: <span>20px</span>;\n}\n</code></pre>\n<p>That’s a lot less CSS. An added bonus is that we don’t have to worry about how wide or tall our image is. Nor do we have to concern ourselves with clearing floats. Whether the image is 200px wide or 20px wide, <code>.media__object__text</code> will abut the margin box of our <code>img</code> element.</p>\n<h2>Creating Flexible Form Components with <code>flex</code></h2>\n<p>Another use case for Flexbox is creating flexible, vertically aligned form components. Consider the interface pattern shown in the image below.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538106494FieldAndButton-1024x398.png\" alt=\"A form field with an adjacent button\" width=\"1024\" height=\"398\"><span>A form field with an adjacent button</span>\n</div>\n<p>Here, we have a form input control and an adjacent button. Both are vertically aligned, and our button is 150px wide.</p>\n<p>What if we want our <code>input</code> element to expand to fill the available space in its container? Without Flexbox, we’d need some JavaScript and hand-waving to update the width of <code>input</code> in response to changes in the width of its parent. With Flexbox, however, we can just use <code>flex</code>.</p>\n<p>The <code>flex</code> property is actually shorthand for three other properties.</p>\n<ul><li><code>flex-grow</code> indicates that an element should grow if necessary and must be a positive integer. Its initial value is <code>0</code>.</li>\n<li><code>flex-shrink</code> indicates that an element should shrink if necessary and must be a positive integer. Its initial value is <code>1</code>.</li>\n<li><code>flex-basis:</code> indicates the initial or minimum width (when the flex axis is horizontal) or the height of an element (when it’s vertical). It may be a length or percentage, or <code>auto</code>, and its initial value is <code>auto</code>.</li>\n</ul><p>Though it’s possible to set each of these individually, the specification strongly recommends using the <code>flex</code> shorthand. Here’s an example:</p>\n<pre><code><span>div</span> {\n    <span>display</span>: flex;\n}\n<span>input</span><span>[type=\"text\"]</span>, <span>button</span> {\n    <span>border</span>: <span>0</span>;\n    <span>font</span>: inherit;\n}\n<span>input</span><span>[type=\"text\"]</span> {\n    <span>flex</span>: <span>1</span> <span>0</span> auto;   \n}\n<span>button</span> {\n    <span>background</span>: <span>#003</span>;\n    <span>color</span>: whitesmoke;\n    <span>display</span>: block;\n    <span>text-align</span>: center;\n    <span>flex</span>: <span>0</span> <span>0</span> <span>150px</span>;\n}\n</code></pre>\n<p>Here, we’ve used <code>flex: 1 0 auto</code> for our <code>input</code> element. Since its <code>flex-grow</code> value is <code>1</code>, it will grow to fill the available space of its parent. For the <code>button</code> element, however, we’ve used <code>flex: 0 0 150px</code>. The <code>0</code> values for <code>flex-grow</code> and <code>flex-shrink</code> prevent the width of the button from increasing or decreasing, while the <code>flex-basis</code> value of <code>150px</code> sets its width.</p>\n<p>As you can see in the image below, our button remains the same size, but the width of <code>input</code> expands to fill the remaining space.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538106585FieldAndButton2-1024x398.png\" alt=\"The effect of flex: 0 0 150px\" width=\"1024\" height=\"398\"><span>The effect of <code>flex: 0 0 150px</code></span>\n</div>\n<p>The tricky bit about <code>flex-grow</code> and <code>flex-shrink</code> values is that they’re proportional. Yes, <code>flex: 1 0 auto</code> means our <code>input</code> element will be wider than our button. But changing the value of our button’s <code>flex</code> property to <code>flex: 1 0 auto</code> doesn’t necessarily mean that both elements will have the same size, as shown in the following image.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538106670FlexNoEqual-1024x398.png\" alt=\"Both items have the same flex value but are still different sizes\" width=\"1024\" height=\"398\"><span>Both items have the same flex value but are still different sizes</span>\n</div>\n<p>Instead, flex items will be resized to fill the container, taking their used <code>min-width</code> and <code>max-width</code> values into account (which may be their initial values).</p>\n<p>Unfortunately, we can’t use <code>fr</code> units with the <code>flex</code> or <code>flex-basis</code> properties. Use length or percentage values instead.</p>\n<h2>Vertical Centering with Flexbox</h2>\n<p>Finally, let’s take a look at how to vertically center content with Flexbox. Vertically centering elements is one of the more difficult tasks to achieve with CSS, particularly if the height of your content is unknown. But with Flexbox, we require just one additional line of CSS—<code>align-items: center</code>:</p>\n<pre><code><span>.flex-container</span> {\n    <span>display</span>: flex;\n    <span>align-items</span>: center;\n}\n</code></pre>\n<p>Now our flex items and their contents are vertically centered within the flex container, as shown in the image below.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538106745LayoutFlexVerticalCentering-1024x605.png\" alt=\"Distributing flex items with align-items: center\" width=\"1024\" height=\"605\"><span>Distributing flex items with <code>align-items: center</code></span>\n</div>\n<h2>Creating Grid-like Layouts with Flexbox</h2>\n<p>In most cases, you’ll want to use Grid to create grid-like layouts. However, you may find yourself wanting boxes that align when there’s an even number of items, but expand to fill the available space when there’s an odd number.</p>\n<div>\n<img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2018/09/1538106815LayoutFlexBoxGrid-1024x674.png\" alt=\"A grid-like layout with expanding cells\" width=\"1024\" height=\"674\"><span>A grid-like layout with expanding cells</span>\n</div>\n<p>Here’s the markup we’ll use:</p>\n<pre><code><span>&lt;<span>ul</span> <span>class</span>=<span>\"flex-aligned\"</span>&gt;</span>\n    <span>&lt;<span>li</span>&gt;</span>A<span>&lt;/<span>li</span>&gt;</span>\n    <span>&lt;<span>li</span>&gt;</span>B<span>&lt;/<span>li</span>&gt;</span>\n    <span>&lt;<span>li</span>&gt;</span>C<span>&lt;/<span>li</span>&gt;</span>\n    <span>&lt;<span>li</span>&gt;</span>D<span>&lt;/<span>li</span>&gt;</span>\n    <span>&lt;<span>li</span>&gt;</span>E<span>&lt;/<span>li</span>&gt;</span>\n    <span>&lt;<span>li</span>&gt;</span>F<span>&lt;/<span>li</span>&gt;</span>\n    <span>&lt;<span>li</span>&gt;</span>G<span>&lt;/<span>li</span>&gt;</span>\n<span>&lt;/<span>li</span>&gt;</span>\n</code></pre>\n<p>By default, flex items don’t wrap. To achieve the layout above, we’ll need to make them wrap using the <code>flex-wrap</code> property. It accepts three values: <code>nowrap</code> (the inital value), <code>wrap</code>, and <code>wrap-reverse</code>. We’ll use <code>wrap</code> here:</p>\n<pre><code><span>.flex-aligned</span> {\n    <span>display</span>: flex;\n    <span>flex-wrap</span>: wrap;\n}\n</code></pre>\n<p>Now we just need to indicate how our flex items should behave, and what their maximum width should be. Since we want a maximum of four columns, we’ll set our <code>flex-basis</code> value to <code>25%</code>. And since we want our flex items to expand to fill the available space, we’ll set <code>flex-grow</code> to 1. We’ll keep <code>flex-shrink</code> at 0 so that our boxes never occupy less than 25% of their container:</p>\n<pre><code><span>.flex-aligned</span> <span>li</span> {\n    <span>flex</span>: <span>1</span> <span>0</span> <span>25%</span>;\n}\n</code></pre>\n<h2>Learning More about Flexbox</h2>\n<p>There’s a lot more to Flexbox than what we’ve covered here. CSS-Tricks’ “<a href=\"https://css-tricks.com/snippets/css/a-guide-to-flexbox/\">A Complete Guide to Flexbox</a>” digs into all the properties and values. You can also check out Philip Walton’s “<a href=\"http://philipwalton.github.io/solved-by-flexbox/\">Solved by Flexbox</a>”, which showcases UI patterns that are made easier with Flexbox.</p>\n<h2>Choosing <code>flex</code> or <code>grid</code></h2>\n<p>As you develop page or component layouts, you may find yourself wondering when it’s better to use Flexbox and when to use Grid.</p>\n<ul><li>Use Grid when you want to arrange elements into rows <em>and</em> columns that align both horizontally and vertically.</li>\n<li>Use Flexbox when you want to arrange items in a row <em>or</em> a column, when you wish to align items vertically or horizontally, but not both.</li>\n</ul><p>Jen Simmons’ video “<a href=\"https://www.youtube.com/watch?v=hs3piaN4b5I\">Flexbox vs. CSS Grid — Which is Better?</a>” walks you through some things to consider when choosing between Grid and Flexbox. Rachel Andrew’s “<a href=\"https://www.rachelandrew.co.uk/archives/2016/03/30/should-i-use-grid-or-flexbox/\">Should I use Grid or Flexbox?</a>” is another great resource for understanding both.</p>\n<p>In practice, your projects will probably mix both of these techniques, as well as floats. For instance, you may use Grid to define the overall page layout, while using Flexbox for your navigation menu or search box, and floats to place tables or images.</p>","filePath":"pages/CSS/.md","_id":"y0HOK6TwyZIPO7Nz","dateUpdated":1542041456114}
{"date":"2019-04-03T15:03:03.742Z","title":"ES6, ES7, ES8 & Writing Modern JavaScript Pt1 – Scope, let, const, var","sourceUrl":"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt1/","path":"ES6/","category":"ES6","tags":["JavaScript"," ES6"],"author":"","excerpt":"","dateCreated":1554303647394,"coverImage":"","type":"Post","frontmatter":"---\npath: 'ES6/'\ndate: 'Wed Apr 03 2019 20:33:03 GMT+0530 (India Standard Time)'\ntitle: 'ES6, ES7, ES8 & Writing Modern JavaScript Pt1 – Scope, let, const, var'\ntags: ['JavaScript','ES6']\ncategory: 'ES6'\ncategoryColor: '#F3C610'\nexcerpt: ''\ncoverImage: ''\nsourceUrl: 'https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt1/'\ntype: 'Post'\n---\n    ","htmlCode":"<div><p>Table of Contents <span>[<a href=\"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt1/#\">hide</a>]</span></p><ul><li><a href=\"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt1/#let-const\">Let &amp; const</a><ul><li><a href=\"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt1/#the-problem-with-var-no1-scope\">The problem with var no.1: Scope</a></li><li><a href=\"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt1/#the-problem-with-var-no2-hoisting\">The problem with var no.2: Hoisting</a></li><li><a href=\"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt1/#let-and-const-come-to-rescue\">Let and const come to rescue</a></li><li><a href=\"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt1/#let-const-and-the-difference-between-them\">Let, const and the difference between them</a></li><li><a href=\"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt1/#when-to-use-what\">When to use what</a></li></ul></li><li><a href=\"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt1/#epilogue-es6-es7-es8-and-beyond-8211-writing-modern-javascript-pt1\">Epilogue: ES6, ES7, ES8 and Beyond – Writing Modern JavaScript Pt1</a></li></ul></div>\n<p>Have you ever wondered what is the difference between <code>var</code>, <code>let</code> and <code>const</code>? Do you know when to use them? And what about scope and hoisting, and why so many JavaScript developers hate <code>var</code>?\n Learn about all these topics in this article. Master the nuts and bolts\n of ES6, ES7, ES8. Learn how to write modern JavaScript!<span></span><br>\n</p>\n<p>ES6, ES7, ES8 &amp; Writing Modern JavaScript <a href=\"https://blog.alexdevero.com/es6-es7-es8-modern-javascript-pt2/\">Part 2</a> (Template literals, destructuring &amp; defaults).</p>\n<p></p>\n           \n            \n         \n\n        \n<h2><span>Let &amp; const</span></h2>\n<p>Until the introduction of ES6 you could define variables only with <code>var</code> keyword. ES6 introduced two new ways to declare variables, or two new keywords. These keywords are <code>let</code> and <code>const</code>. But first, what’s wrong with <code>var</code>. Two things. The first one is scope. When you declare new variable with <code>var</code> it is declared in its execution scope.</p>\n<p>In JavaScript, before ES6, there were two types of scope, global and \nlocal. Global variables are accessible everywhere. You can access them, \nand change their value, from any part of your code. Local variables are \naccessible only the scope they are declared in. This also means that you\n can access them, and change their value, only inside that scope.</p>\n<p>The scope changes with the most immediately enclosing function. If \nyou declare variable outside any function, is accessible globally. If \nyou declare it inside a function, it is accessible only in that \nfunction. This is the local scope. The problem is that this rule applies\n only to functions. It doesn’t apply to loops or statements.</p>\n<h3><span>The problem with var no.1: Scope</span></h3>\n<p>Let’s say you have a function with a loop or statement. Inside this loop or statement is a variable declared with <code>var</code> keyword. Due to how <code>var</code>\n works, this variable is accessible also in the enclosing function, not \njust in that loop or statement. In other words, the local scope is the \nfunction, not the loop or statement. Let’s take a look at few examples.</p>\n<pre><code>///\n// Example no.1: function with if statement and local variable\nfunction testOne() {\n  if (true) {\n    // Local variable declared inside the statement\n    // but accessible in the scope of \"test\" function.\n    var z = 19\n  }\n\n  // Print the value of variable 'z'\n  console.log(z)\n}\n\ntestOne()\n// Prints: '19'\n\n///\n// Example no.2: global variable and function with if statement with local variable\n// Variable declared in global scope\nvar z = 'Superman'\n\nfunction testTwo() {\n  if (true) {\n    // Variable declared inside the statement, in the local scope\n    // but accessible in the scope of \"test\" function.\n    var z = 'Batman'\n  }\n\n  // Print the value of variable 'z'\n  console.log(z)\n}\n\ntestTwo()\n// Prints: 'Batman'\n//value of local variable \"z\" declared inside the if statement, not the value of global variable \"z\"\n\n///\n// Example no.3: global variable and function with local variable and if statement with another local variable\n// Variable declared in global scope\nvar z = 'Superman'\n\nfunction testThree() {\n  // First local variable\n  // What you want to print\n  var z = 'Iron man'\n\n  if (true) {\n    // Second local variable\n    // Collides with 'Iron Man' variable 'z' declared in the same scope\n    var z = 'Batman'\n  }\n\n  // Print the value of variable 'z'\n  console.log(z)\n}\n\ntestThree()\n// Still prints: 'Batman'\n\n///\n// Example no.4: function with for loop and local variable\nfunction testFour() {\n  for (var i = 0; i &lt; 3; i++) {\n    console.log('Looped!')\n  }\n\n  // Try to print the value of variable \"i\" (hint: it will work).\n  // Notice that there is no explicitly declared local or global\n  // variable \"i\",other than the one in the for loop\n  console.log(i)\n}\n\ntestFour()\n// Prints:\n// 'Looped!'\n// 'Looped!'\n// 'Looped!'\n// 3 (WTF??)\n</code></pre>\n<p>As you can see on the example above, the function prints ‘Batman’, \nthe value of the local variable “z” declared inside the inner <code>if</code> statement. It doesn’t matter that the <code>console.log</code> is declared outside the <code>if</code> statement. The same is true about the second example as well. Here, <code>console.log</code> again prints the value of the local variable “z” declared inside the <code>if</code> statement.</p>\n<p>The third example is the best demonstration of the problem with <code>var</code> and scope. Here, <code>console.log</code>\n again prints ‘Batman’, value of local variable “z” even though there is\n another local variable declared right inside the function. As you can \nsee it doesn’t matter. The local variable “z” with value “Iron man” is \nignored and Batman wins again.</p>\n<p>The most interesting is the fourth example. Here, you can print the \nvalue of variable “i” even though you never explicitly declared it \ninside the function, or outside. That doesn’t matter. Since <code>var</code> is bound to the most immediately enclosing function, the variable “i” “escapes” from the <code>for</code> loop and becomes accessible in the scope of the “testFour” function.</p>\n<h3><span>The problem with var no.2: Hoisting</span></h3>\n<p>The second problem with <code>var</code> is hoisting. Hoisting is a \nmechanism built in JavaScript that automatically moves variables and \nfunction declarations to the top of their scope. This happens right \nbefore the code is executed. What this means is that you can reference a\n variable before you actually declare it.</p>\n<p>Even though this variable doesn’t exist, your code will work. Meaning, JavaScript will return <code>undefined</code>.\n This is not what should happen. What should happen is that you should \nget a reference error saying that the variable you are referencing is \nnot defined.</p>\n<pre><code>///\n// Example no.1: Hoisting in global scope\n// Print the value of variable x\nconsole.log(x) // Prints: undefined (??)\n\n// Create variable 'x'\nvar x = 'The variable has been hoisted.'\n\n///\n// Example no.2: Hoisting and function\nfunction testOne() {\n  // Create variable 'a'\n  var a = 'Hello'\n\n  // Print the value of variable 'a' and 'b'\n  console.log(a + ' ' + b)\n\n  // Create variable 'b'\n  var b = 'World'\n}\n\ntestOne()\n// Prints: 'Hello undefined'\n</code></pre>\n<h3><span>Let and const come to rescue</span></h3>\n<p>Now, let’s talk about ES6. With the introduction of ES6, there are \nnow two other ways, or keywords, JavaScript developers can use to \ndeclare variables. These are <code>let</code> and <code>const</code>. What’s more, these two new types of variables also solve those two major issues with <code>var</code>, the issue with scope as well as the issue with hoisting.</p>\n<p>Let’s talk about the scope first. When you use declare variables with <code>let</code> or <code>const</code> these variables re accessible only in that scope. This still sounds like <code>var</code>, right? Well, not exactly. There is one difference. Both <code>let</code> and <code>const</code> are block scope local variables. This is another thing ES6 introduced. What is a block-scoped variable?</p>\n<p>A block-scoped variable is a variable that is accessible only in the \nblock, statement, or function expression in which you declared it. In \nother words, when you declare a block-scoped variable, using <code>let</code> or <code>const</code>, inside a loop or a statement it is not accessible outside it, as the <code>var</code> variable would.</p>\n<p>Let’s get back to the previous examples. But now, let’s declare all variables using <code>let</code> instead of <code>var</code> so you can see the difference.</p>\n<pre><code>///\n// Example no.1: local variable inside an if statement\nfunction testOne() {\n  if (true) {\n    // Variable declared inside the statement\n    // but accessible in the scope of \"test\" function.\n    let x = 19\n  }\n\n  // Try to print the value of variable 'x'\n  console.log(x)\n}\n\ntestOne()\n// Correctly prints: ReferenceError: x is not defined\n\n///\n// Example no.2: global variable and function with an if statement with local variable\n// Variable declared in global scope\nlet z = 'Superman'\n\nfunction testTwo() {\n  if (true) {\n    // Variable declared inside the statement\n    // but accessible in the scope of \"test\" function.\n    let z = 'Batman'\n  }\n\n  // Print the value of variable 'z'\n  console.log(z)\n}\n\ntestTwo()\n// Correctly prints: 'Superman'\n// Value of global variable \"z\", not the local \"z\" inside the if statement.\n\n///\n// Example no.3: global variable and function with local variable and if statement with another local variable\n// Variable declared in global scope\nlet z = 'Superman'\n\nfunction testThree() {\n  // What you want to print\n  let z = 'Iron man'\n\n  if (true) {\n    // Collides with 'Iron Man' variable 'z' declared in the same scope\n    let z = 'Batman'\n  }\n\n  // Print the value of variable 'z'\n  console.log(z)\n}\n\ntestThree()\n// Correctly prints: 'Iron man'\n\n///\n// Example no.4: function with for loop and local variable\nfunction testFour() {\n  for (let i = 0; i &lt; 3; i++) {\n    console.log('Looped!')\n  }\n\n  // Try to print the value of \"i\" (hint: it will work)\n  // Notice that there is no explicitly declared \"i\"\n  // other than the one in the for loop\n  console.log(i)\n}\n\ntestFour()\n// Correctly prints:\n// 'Looped!'\n// 'Looped!'\n// 'Looped!'\n// 'error'\n// 'ReferenceError: i is not defined'\n</code></pre>\n<p>Let’s do one more quick test so you can see how <code>let</code> variables handle hoisting.</p>\n<pre><code>///\n// Example no.1: Hoisting in global scope\n// Print the value of variable x\nconsole.log(x) // Correctly prints: ReferenceError: x is not defined\n\n// Create variable 'x'\nlet x = 'The variable has NOT been hoisted!'\n\n///\n// Example no.2: Hoisting and function\nfunction testOne() {\n  // Create variable 'a'\n  let a = 'Hello'\n\n  // Print the value of variable 'a' and 'b'\n  console.log(a + ' ' + b)\n\n  // Create variable 'b'\n  let b = 'World'\n}\n\ntestOne()\n// Correctly prints:\n// 'error'\n// 'ReferenceError: b is not defined'\n</code></pre>\n<p>As you can see, the difference between <code>var</code> and <code>let</code>\n is significant. All variables are now accessible only in the scopes \nthey are declared in, including loops and statements. There is also no \nlonger any problem with hoisting. When you try to reference any variable\n before you declare it you will get a reference error, not <code>undefined</code>.</p>\n<p>This is exactly what we want. Anything to say? Thank you ES6. That was <code>let</code>, but what about <code>const</code>. Since <code>const</code> is block-scoped just as <code>let</code>, you will get the same result if your replace <code>let</code> with <code>const</code>. Well, almost. There is one exception.</p>\n<h3><span>Let, const and the difference between them</span></h3>\n<p>The <code>let</code> and <code>const</code> are similar in how they work. Yet, there are two important differences. First, <code>const</code> is read-only, <code>let</code> is not. When you declare a variable using <code>const</code>, you can’t change its value. If you try it, you will get a type error: <code>Assignment to constant variable.</code>. With <code>let</code>, you can change the value any time and as many times as you want.</p>\n<p>Second, when you use <code>const</code> you have to declare the variable with value. With <code>let</code>, you can declare variable without a value, or as undefined. And assign a value to it later. If you try to declare <code>const</code> without a value you will get a syntax error: <code>Missing initializer in const declaration</code>.</p>\n<p>This makes sense because, as you’ve just learned, <code>const</code> are read-only. You can’t change their value after you declare them. Think about it. If you can’t change the value of <code>const</code>, you can’t declare <code>const</code>\n without a value and assign it value later. That would basically mean \nchanging the original, although undefined, value. For this reason, \nJavaScript does not allow to declare <code>const</code> without a value.</p>\n<p>What about the one exception I mentioned above? The exception is the example number four with <code>for</code> loop. Here, you have to use <code>let</code> for the <code>initialization</code> variable, or the “i” variable. Again, this makes sense. The <code>for</code> loop updates the value of <code>initialization</code> variable with every iteration, either decreases or increases it developing on the final expression.</p>\n<p>Since <code>const</code> is read-only <code>for</code> loop can’t update it. What if you try to use <code>const</code> to declare the <code>initialization</code> variable? The loop will go only through the first iteration because JavaScript allows to assign a value to <code>const</code> only once. Then, you will get a type error: <code>Assignment to constant variable</code>. So, no <code>const</code> here, only <code>let</code>.</p>\n<pre><code>///\n// Example: for loop and using const to declare initialization variable\n// Syntax of for loop: for (initialization; condition; final-expression)\nfor (const i = 0; i &lt; 10; i++) {\n  console.log('Looping!')\n}\n\n// Correctly prints:\n// \"Looping!\"\n// \"error\"\n// \"TypeError: Assignment to constant variable.\n</code></pre>\n<p>Well, the read-only thing is not exactly true. Read-only is not the \nsame as immutable. In other words, there is a way to change the value of\n a variable you declared using <code>const</code>. You can change the \nvalue if it is an array or object, or something similar. Meaning, you \ncan change the values inside the array or the properties of the object, \neven add new.</p>\n<pre><code>///\n// Example no.1: const, array and changing values of array items\n// Declare new variable x using const\nconst x = [1, 2, 3]\n\n// Print the value of x\nconsole.log(x)\n// Prints: [1, 2, 3]\n\n// Change the items of array stored inside x\nx[0] = 'Dog'\nx[1] = 'Cat'\nx[2] = 'Armadillo'\n\n// Add new items to the array stored inside x\nx[3] = 'Snake'\nx[4] = 'Harry Potter'\n\n// Print the value of x\nconsole.log(x)\n// Prints: [\"Dog\", \"Cat\", \"Armadillo\", \"Snake\", \"Harry Potter\"]\n\n///\n// Example no.2: const, object and changing values\nconst y = {\n  name: 'Joe Doe',\n  age: 33,\n  living: true\n}\n\nconsole.log(x)\n// Prints:\n// [object Object] {\n//   age: 33,\n//   living: true,\n//   name: \"Joe Doe\"\n// }\n\n// Change values\ny.name = 'Scarlett Seer'\ny.age = 21\n\n// Add new keys to the object stored inside y\ny.height = 1.72\ny.weight = 63\n\nconsole.log(x)\n// Prints:\n// [object Object] {\n//   age: 21,\n//   height: 1.72,\n//   living: true,\n//   name: \"Scarlett Seer\"\n// }\n</code></pre>\n<h3><span>When to use what</span></h3>\n<p>One way that will help you decide when to use <code>let</code> or <code>const</code> is to think about how they work. Both <code>let</code> and <code>const</code> are block-scoped variables. The <code>let</code> allows you to declare variable as undefined, without a value. The <code>let</code> allows you to change the value any time you want. The <code>let</code> works like <code>var</code>, except the scope … And hoisting.</p>\n<p>The <code>const</code> doesn’t allow any of this. When you use <code>const</code>\n you have to declare it with a value. This value can’t be changed later,\n unless it is an array or object, or something similar. Then, you can \nchange the content of the array or object as you want. Conclusion?</p>\n<p>Use <code>let</code> every time when you know, or think, you will \nneed to reassign the variable, or change its value, some times later in \nthe future. Also, use <code>let</code> when you want to declare the <code>initialization</code> variable when you work with loops. For anything else, just stick with <code>const</code>. In other words, make <code>const</code> your default choice.</p>\n<p>Making <code>const</code> your default choice will help you make your JavaScript code cleaner. The <code>const</code> is a clear signal that the variable is not going to be reassigned in the future. What about <code>var</code>?\n You don’t need it anymore with the introduction of ES6. You can cover \nthe majority of possible scenarios, if not all of them, with <code>let</code> and <code>const</code>.</p>\n<h2><span>Epilogue: ES6, ES7, ES8 and Beyond – Writing Modern JavaScript Pt1</span></h2>\n<p>Congratulations! You’ve just finished the first part of ES6, ES7, ES8\n and Beyond series! By now, you know what the difference between <code>var</code>, <code>let</code> and <code>const</code>\n is and when to use them. You also know what scope and hoisting is about\n and why it created so much hate among many JavaScript developers in \nrelation to <code>var</code>. What’s coming next?</p>\n<p>In the next part you will learn about topics such as template and \nobject literals, destructuring, spread and rest operator, new loops and \nmuch much more! Until then, practice what you’ve learned today so you \ncan truly master those topics. Remember, the best way to master \nJavaScript is by writing JavaScript. So, go and write some code!</p>\n<p>Do you have any questions, recommendations, thoughts, advice or tip \nyou would like to share with other readers of this blog, and me? Please \nshare it in a comment. You can also send me a <a href=\"https://alexdevero.com/contact.html\" rel=\"noopener\">mail</a>. I would love to hear from you.</p>","filePath":"pages/ES6/.md","_id":"yzvfhbyBgZG9MhhG"}
{"$$indexCreated":{"fieldName":"name","unique":false,"sparse":false}}
